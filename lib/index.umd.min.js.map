{"version":3,"sources":["webpack://index/webpack/universalModuleDefinition","webpack://index/webpack/bootstrap","webpack://index/./node_modules/core-js/internals/to-string-tag-support.js","webpack://index/./node_modules/core-js/internals/function-bind-context.js","webpack://index/./node_modules/core-js/modules/es.array.flat.js","webpack://index/./node_modules/core-js/internals/object-get-own-property-names-external.js","webpack://index/./node_modules/core-js/internals/object-get-own-property-descriptor.js","webpack://index/./node_modules/core-js/internals/ie8-dom-define.js","webpack://index/./node_modules/core-js/modules/es.date.to-string.js","webpack://index/./node_modules/core-js/modules/es.string.split.js","webpack://index/./node_modules/core-js/internals/regexp-exec-abstract.js","webpack://index/./node_modules/core-js/modules/web.dom-collections.for-each.js","webpack://index/./node_modules/core-js/internals/array-for-each.js","webpack://index/./node_modules/core-js/internals/an-instance.js","webpack://index/./node_modules/core-js/internals/html.js","webpack://index/./node_modules/core-js/internals/a-function.js","webpack://index/./node_modules/core-js/internals/check-correctness-of-iteration.js","webpack://index/./node_modules/core-js/internals/engine-is-ios.js","webpack://index/./node_modules/core-js/modules/es.object.define-properties.js","webpack://index/./node_modules/core-js/internals/require-object-coercible.js","webpack://index/./node_modules/core-js/internals/array-method-has-species-support.js","webpack://index/./node_modules/core-js/internals/iterate.js","webpack://index/./node_modules/core-js/internals/to-absolute-index.js","webpack://index/./node_modules/core-js/internals/export.js","webpack://index/./node_modules/core-js/internals/object-get-own-property-names.js","webpack://index/./node_modules/core-js/modules/es.string.includes.js","webpack://index/./node_modules/core-js/modules/es.regexp.to-string.js","webpack://index/./node_modules/core-js/internals/set-species.js","webpack://index/./node_modules/core-js/modules/es.array.reverse.js","webpack://index/./node_modules/core-js/modules/es.array.is-array.js","webpack://index/./node_modules/core-js/internals/iterator-close.js","webpack://index/./node_modules/core-js/internals/task.js","webpack://index/./node_modules/core-js/internals/engine-v8-version.js","webpack://index/./node_modules/core-js/internals/engine-user-agent.js","webpack://index/./node_modules/core-js/internals/get-iterator-method.js","webpack://index/./node_modules/core-js/internals/object-define-properties.js","webpack://index/./node_modules/core-js/internals/a-possible-prototype.js","webpack://index/./node_modules/core-js/modules/es.string.iterator.js","webpack://index/./node_modules/core-js/internals/iterators.js","webpack://index/./node_modules/core-js/modules/es.array.for-each.js","webpack://index/./node_modules/core-js/internals/path.js","webpack://index/./node_modules/core-js/internals/indexed-object.js","webpack://index/./node_modules/core-js/internals/add-to-unscopables.js","webpack://index/./node_modules/core-js/internals/host-report-errors.js","webpack://index/./node_modules/core-js/internals/is-regexp.js","webpack://index/./node_modules/core-js/internals/species-constructor.js","webpack://index/./node_modules/core-js/internals/native-symbol.js","webpack://index/./node_modules/core-js/internals/array-includes.js","webpack://index/./node_modules/core-js/modules/es.array.filter.js","webpack://index/./node_modules/core-js/internals/array-from.js","webpack://index/./node_modules/core-js/modules/es.map.js","webpack://index/./node_modules/core-js/internals/to-length.js","webpack://index/./node_modules/core-js/internals/has.js","webpack://index/./node_modules/core-js/internals/shared.js","webpack://index/./node_modules/core-js/internals/own-keys.js","webpack://index/./node_modules/core-js/internals/whitespaces.js","webpack://index/./node_modules/core-js/internals/string-trim.js","webpack://index/./node_modules/core-js/internals/not-a-regexp.js","webpack://index/./node_modules/core-js/internals/create-property-descriptor.js","webpack://index/./node_modules/core-js/internals/engine-is-node.js","webpack://index/./node_modules/core-js/modules/es.set.js","webpack://index/./node_modules/core-js/internals/object-assign.js","webpack://index/./node_modules/core-js/internals/string-multibyte.js","webpack://index/./node_modules/core-js/internals/collection-strong.js","webpack://index/./node_modules/core-js/internals/array-species-create.js","webpack://index/./node_modules/core-js/internals/internal-state.js","webpack://index/./node_modules/core-js/internals/collection.js","webpack://index/./node_modules/core-js/internals/redefine.js","webpack://index/./node_modules/core-js/internals/inherit-if-required.js","webpack://index/./node_modules/core-js/internals/object-get-own-property-symbols.js","webpack://index/./node_modules/core-js/internals/define-well-known-symbol.js","webpack://index/./node_modules/core-js/internals/enum-bug-keys.js","webpack://index/./node_modules/core-js/modules/es.object.define-property.js","webpack://index/./node_modules/core-js/internals/to-object.js","webpack://index/./node_modules/core-js/internals/object-create.js","webpack://index/./node_modules/core-js/internals/define-iterator.js","webpack://index/./node_modules/core-js/internals/native-weak-map.js","webpack://index/./node_modules/core-js/internals/an-object.js","webpack://index/./node_modules/core-js/internals/descriptors.js","webpack://index/./node_modules/core-js/internals/create-property.js","webpack://index/./node_modules/core-js/internals/is-object.js","webpack://index/./node_modules/@soda/get-current-script/index.js","webpack://index/./node_modules/core-js/internals/inspect-source.js","webpack://index/./node_modules/core-js/internals/advance-string-index.js","webpack://index/external {\"commonjs\":\"vue\",\"commonjs2\":\"vue\",\"root\":\"Vue\"}","webpack://index/./node_modules/core-js/internals/uid.js","webpack://index/./node_modules/core-js/internals/create-non-enumerable-property.js","webpack://index/./node_modules/core-js/internals/regexp-exec.js","webpack://index/./node_modules/core-js/internals/is-forced.js","webpack://index/./node_modules/core-js/modules/es.array.concat.js","webpack://index/./node_modules/core-js/internals/call-with-safe-iteration-closing.js","webpack://index/./node_modules/core-js/internals/object-define-property.js","webpack://index/./node_modules/core-js/internals/create-iterator-constructor.js","webpack://index/./node_modules/core-js/internals/regexp-sticky-helpers.js","webpack://index/./node_modules/core-js/internals/flatten-into-array.js","webpack://index/./node_modules/core-js/internals/engine-is-webos-webkit.js","webpack://index/./node_modules/core-js/modules/es.symbol.js","webpack://index/./node_modules/core-js/modules/es.array.from.js","webpack://index/./node_modules/core-js/internals/array-method-is-strict.js","webpack://index/./node_modules/core-js/internals/to-integer.js","webpack://index/./node_modules/core-js/modules/es.number.constructor.js","webpack://index/./node_modules/core-js/internals/correct-is-regexp-logic.js","webpack://index/./node_modules/core-js/modules/es.regexp.exec.js","webpack://index/./node_modules/core-js/internals/regexp-flags.js","webpack://index/./node_modules/core-js/internals/iterators-core.js","webpack://index/./node_modules/core-js/internals/object-to-string.js","webpack://index/./node_modules/core-js/modules/es.function.name.js","webpack://index/./node_modules/core-js/internals/microtask.js","webpack://index/./node_modules/core-js/internals/well-known-symbol.js","webpack://index/./node_modules/core-js/modules/es.object.keys.js","webpack://index/./node_modules/core-js/internals/array-iteration.js","webpack://index/./node_modules/core-js/internals/freezing.js","webpack://index/./node_modules/core-js/internals/to-primitive.js","webpack://index/./packages/interModel/src/interModel.vue?2158","webpack://index/./node_modules/core-js/internals/is-pure.js","webpack://index/./node_modules/core-js/internals/classof-raw.js","webpack://index/./node_modules/core-js/internals/shared-store.js","webpack://index/./node_modules/core-js/modules/es.array.find-index.js","webpack://index/(webpack)/buildin/global.js","webpack://index/./node_modules/core-js/internals/object-keys-internal.js","webpack://index/./node_modules/core-js/modules/es.array.includes.js","webpack://index/./node_modules/core-js/internals/document-create-element.js","webpack://index/./node_modules/core-js/modules/es.object.assign.js","webpack://index/./node_modules/core-js/internals/promise-resolve.js","webpack://index/./node_modules/core-js/internals/set-global.js","webpack://index/./node_modules/core-js/internals/hidden-keys.js","webpack://index/./node_modules/core-js/internals/fails.js","webpack://index/./node_modules/core-js/internals/get-built-in.js","webpack://index/./node_modules/core-js/internals/object-property-is-enumerable.js","webpack://index/./node_modules/core-js/modules/es.symbol.iterator.js","webpack://index/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://index/./node_modules/core-js/modules/es.object.to-string.js","webpack://index/./node_modules/core-js/internals/set-to-string-tag.js","webpack://index/./node_modules/konva/lib/Global.js","webpack://index/./node_modules/core-js/internals/fix-regexp-well-known-symbol-logic.js","webpack://index/./node_modules/core-js/modules/es.array.map.js","webpack://index/./node_modules/core-js/internals/global.js","webpack://index/./node_modules/core-js/modules/es.object.get-own-property-descriptors.js","webpack://index/./node_modules/core-js/modules/web.dom-collections.iterator.js","webpack://index/./node_modules/core-js/internals/object-keys.js","webpack://index/./node_modules/core-js/modules/es.symbol.description.js","webpack://index/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://index/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://index/./node_modules/core-js/modules/es.array.iterator.js","webpack://index/./node_modules/core-js/internals/redefine-all.js","webpack://index/./node_modules/core-js/modules/es.object.get-own-property-descriptor.js","webpack://index/./node_modules/core-js/internals/well-known-symbol-wrapped.js","webpack://index/./node_modules/core-js/internals/perform.js","webpack://index/./node_modules/core-js/modules/es.promise.js","webpack://index/./node_modules/core-js/internals/copy-constructor-properties.js","webpack://index/./node_modules/core-js/internals/is-array.js","webpack://index/./node_modules/core-js/internals/is-array-iterator-method.js","webpack://index/./node_modules/core-js/internals/new-promise-capability.js","webpack://index/./node_modules/core-js/internals/internal-metadata.js","webpack://index/./node_modules/core-js/internals/classof.js","webpack://index/./node_modules/core-js/internals/shared-key.js","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://index/./packages/interModel/src/interModel.vue","webpack://index/./node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/slicedToArray.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/defineProperty.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/objectSpread2.js","webpack://index/./node_modules/konva/lib/Util.js","webpack://index/./node_modules/konva/lib/Validators.js","webpack://index/./node_modules/konva/lib/Factory.js","webpack://index/./node_modules/konva/lib/Context.js","webpack://index/./node_modules/konva/lib/Canvas.js","webpack://index/./node_modules/konva/lib/DragAndDrop.js","webpack://index/./node_modules/konva/lib/Node.js","webpack://index/./node_modules/konva/lib/Container.js","webpack://index/./node_modules/konva/lib/PointerEvents.js","webpack://index/./node_modules/konva/lib/Stage.js","webpack://index/./node_modules/konva/lib/Shape.js","webpack://index/./node_modules/konva/lib/Layer.js","webpack://index/./node_modules/konva/lib/FastLayer.js","webpack://index/./node_modules/konva/lib/Group.js","webpack://index/./node_modules/konva/lib/Animation.js","webpack://index/./node_modules/konva/lib/Tween.js","webpack://index/./node_modules/konva/lib/_CoreInternals.js","webpack://index/./node_modules/konva/lib/shapes/Arc.js","webpack://index/./node_modules/konva/lib/shapes/Line.js","webpack://index/./node_modules/konva/lib/shapes/Path.js","webpack://index/./node_modules/konva/lib/shapes/Arrow.js","webpack://index/./node_modules/konva/lib/shapes/Circle.js","webpack://index/./node_modules/konva/lib/shapes/Ellipse.js","webpack://index/./node_modules/konva/lib/shapes/Image.js","webpack://index/./node_modules/konva/lib/shapes/Label.js","webpack://index/./node_modules/konva/lib/shapes/Rect.js","webpack://index/./node_modules/konva/lib/shapes/RegularPolygon.js","webpack://index/./node_modules/konva/lib/shapes/Ring.js","webpack://index/./node_modules/konva/lib/shapes/Sprite.js","webpack://index/./node_modules/konva/lib/shapes/Star.js","webpack://index/./node_modules/konva/lib/shapes/Text.js","webpack://index/./node_modules/konva/lib/shapes/TextPath.js","webpack://index/./node_modules/konva/lib/shapes/Transformer.js","webpack://index/./node_modules/konva/lib/shapes/Wedge.js","webpack://index/./node_modules/konva/lib/filters/Blur.js","webpack://index/./node_modules/konva/lib/filters/Brighten.js","webpack://index/./node_modules/konva/lib/filters/Contrast.js","webpack://index/./node_modules/konva/lib/filters/Emboss.js","webpack://index/./node_modules/konva/lib/filters/Enhance.js","webpack://index/./node_modules/konva/lib/filters/Grayscale.js","webpack://index/./node_modules/konva/lib/filters/HSL.js","webpack://index/./node_modules/konva/lib/filters/HSV.js","webpack://index/./node_modules/konva/lib/filters/Invert.js","webpack://index/./node_modules/konva/lib/filters/Kaleidoscope.js","webpack://index/./node_modules/konva/lib/filters/Mask.js","webpack://index/./node_modules/konva/lib/filters/Noise.js","webpack://index/./node_modules/konva/lib/filters/Pixelate.js","webpack://index/./node_modules/konva/lib/filters/Posterize.js","webpack://index/./node_modules/konva/lib/filters/RGB.js","webpack://index/./node_modules/konva/lib/filters/RGBA.js","webpack://index/./node_modules/konva/lib/filters/Sepia.js","webpack://index/./node_modules/konva/lib/filters/Solarize.js","webpack://index/./node_modules/konva/lib/filters/Threshold.js","webpack://index/./node_modules/konva/lib/_FullInternals.js","webpack://index/./node_modules/konva/lib/index.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack://index/./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack://index/./packages/interModel/src/js/interModel.ts","webpack://index/./packages/interModel/src/js/flowPoint.ts","webpack://index/./packages/interModel/src/js/common.ts","webpack://index/./packages/interModel/src/assets/iconBase64.ts","webpack://index/./packages/interModel/src/interModel.vue?705e","webpack://index/./packages/interModel/src/interModel.vue?c04f","webpack://index/./packages/interModel/index.ts","webpack://index/./packages/index.ts","webpack://index/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js","webpack://index/./node_modules/core-js/modules/es.array.slice.js","webpack://index/./node_modules/core-js/internals/to-indexed-object.js","webpack://index/./node_modules/core-js/internals/dom-iterables.js","webpack://index/./node_modules/core-js/internals/use-symbol-as-uid.js","webpack://index/./node_modules/core-js/internals/native-promise-constructor.js"],"names":["root","factory","exports","module","require","define","amd","self","this","__WEBPACK_EXTERNAL_MODULE__8bbf__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","wellKnownSymbol","TO_STRING_TAG","test","String","aFunction","fn","that","length","undefined","a","b","apply","arguments","$","flattenIntoArray","toObject","toLength","toInteger","arraySpeciesCreate","target","proto","flat","depthArg","O","sourceLen","A","toIndexedObject","nativeGetOwnPropertyNames","f","toString","windowNames","window","getOwnPropertyNames","getWindowNames","it","error","slice","DESCRIPTORS","propertyIsEnumerableModule","createPropertyDescriptor","toPrimitive","has","IE8_DOM_DEFINE","nativeGetOwnPropertyDescriptor","getOwnPropertyDescriptor","P","fails","createElement","redefine","DatePrototype","Date","INVALID_DATE","TO_STRING","nativeDateToString","getTime","NaN","fixRegExpWellKnownSymbolLogic","isRegExp","anObject","requireObjectCoercible","speciesConstructor","advanceStringIndex","callRegExpExec","regexpExec","arrayPush","push","min","Math","MAX_UINT32","SUPPORTS_Y","RegExp","SPLIT","nativeSplit","maybeCallNative","internalSplit","split","separator","limit","string","lim","match","lastIndex","lastLength","output","flags","ignoreCase","multiline","unicode","sticky","lastLastIndex","separatorCopy","source","index","splitter","regexp","res","done","rx","S","C","unicodeMatching","q","e","z","classof","R","exec","result","TypeError","global","DOMIterables","forEach","createNonEnumerableProperty","COLLECTION_NAME","Collection","CollectionPrototype","$forEach","arrayMethodIsStrict","STRICT_METHOD","callbackfn","Constructor","getBuiltIn","ITERATOR","SAFE_CLOSING","called","iteratorWithReturn","next","Array","from","SKIP_CLOSING","ITERATION_SUPPORT","userAgent","defineProperties","stat","forced","sham","V8_VERSION","SPECIES","METHOD_NAME","array","constructor","foo","Boolean","isArrayIteratorMethod","getIteratorMethod","iteratorClose","Result","stopped","iterable","unboundFunction","options","iterator","iterFn","step","AS_ENTRIES","IS_ITERATOR","INTERRUPTED","stop","condition","callFn","max","integer","setGlobal","copyConstructorProperties","isForced","FORCED","targetProperty","sourceProperty","descriptor","TARGET","GLOBAL","STATIC","noTargetGet","internalObjectKeys","enumBugKeys","hiddenKeys","concat","notARegExp","correctIsRegExpLogic","includes","searchString","indexOf","RegExpPrototype","nativeToString","NOT_GENERIC","INCORRECT_NAME","rf","unsafe","definePropertyModule","CONSTRUCTOR_NAME","configurable","isArray","nativeReverse","reverse","returnMethod","defer","channel","port","html","IS_IOS","IS_NODE","location","set","setImmediate","clear","clearImmediate","process","MessageChannel","Dispatch","counter","queue","ONREADYSTATECHANGE","run","id","runner","listener","event","data","post","postMessage","protocol","host","args","Function","nextTick","now","port2","port1","onmessage","addEventListener","importScripts","appendChild","removeChild","setTimeout","version","versions","v8","Iterators","objectKeys","Properties","keys","isObject","charAt","InternalStateModule","defineIterator","STRING_ITERATOR","setInternalState","getInternalState","getterFor","iterated","type","point","state","propertyIsEnumerable","UNSCOPABLES","ArrayPrototype","console","MATCH","defaultConstructor","getOwnPropertySymbols","toAbsoluteIndex","createMethod","IS_INCLUDES","$this","el","fromIndex","$filter","filter","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callWithSafeIterationClosing","createProperty","arrayLike","argumentsLength","mapfn","mapping","iteratorMethod","collection","collectionStrong","init","argument","IS_PURE","store","copyright","getOwnPropertyNamesModule","getOwnPropertySymbolsModule","whitespaces","whitespace","ltrim","rtrim","TYPE","replace","start","end","trim","bitmap","writable","IndexedObject","nativeAssign","assign","B","symbol","alphabet","chr","join","T","j","CONVERT_TO_STRING","pos","first","second","position","size","charCodeAt","codeAt","redefineAll","anInstance","iterate","setSpecies","fastKey","internalStateGetterFor","getConstructor","wrapper","IS_MAP","ADDER","last","previous","entry","getEntry","removed","prev","boundFunction","add","setStrong","ITERATOR_NAME","getInternalCollectionState","getInternalIteratorState","kind","originalArray","NATIVE_WEAK_MAP","objectHas","shared","sharedKey","WeakMap","enforce","wmget","wmhas","wmset","metadata","facade","STATE","InternalMetadataModule","checkCorrectnessOfIteration","setToStringTag","inheritIfRequired","common","IS_WEAK","NativeConstructor","NativePrototype","exported","fixMethod","KEY","nativeMethod","REPLACE","entries","REQUIRED","instance","HASNT_CHAINING","THROWS_ON_PRIMITIVES","ACCEPT_ITERABLES","BUGGY_ZERO","$instance","dummy","inspectSource","enforceInternalState","TEMPLATE","simple","setPrototypeOf","Wrapper","NewTarget","NewTargetPrototype","path","wrappedWellKnownSymbolModule","NAME","objectDefinePropertyModile","activeXDocument","documentCreateElement","GT","LT","PROTOTYPE","SCRIPT","IE_PROTO","EmptyConstructor","scriptTag","content","NullProtoObjectViaActiveX","write","close","temp","parentWindow","NullProtoObjectViaIFrame","iframeDocument","iframe","JS","style","display","src","contentWindow","document","open","F","NullProtoObject","domain","ActiveXObject","createIteratorConstructor","getPrototypeOf","IteratorsCore","IteratorPrototype","BUGGY_SAFARI_ITERATORS","KEYS","VALUES","ENTRIES","returnThis","Iterable","IteratorConstructor","DEFAULT","IS_SET","CurrentIteratorPrototype","methods","getIterationMethod","KIND","defaultIterator","IterablePrototype","INCORRECT_VALUES_NAME","nativeIterator","anyNativeIterator","values","propertyKey","getCurrentScript","currentScript","Error","err","pageSource","inlineScriptSourceRegExp","inlineScriptSource","ieStackRegExp","ffStackRegExp","stackDetails","stack","scriptLocation","line","currentLocation","href","hash","scripts","getElementsByTagName","documentElement","outerHTML","readyState","innerHTML","functionToString","postfix","random","regexpFlags","stickyHelpers","nativeExec","nativeReplace","patchedExec","UPDATES_LAST_INDEX_WRONG","re1","re2","UNSUPPORTED_Y","BROKEN_CARET","NPCG_INCLUDED","PATCH","str","reCopy","re","charsAdded","strCopy","input","replacement","feature","detection","normalize","POLYFILL","NATIVE","toLowerCase","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","SPECIES_SUPPORT","isConcatSpreadable","spreadable","arg","k","len","E","nativeDefineProperty","Attributes","RE","original","depth","mapper","thisArg","element","targetIndex","sourceIndex","mapFn","NATIVE_SYMBOL","USE_SYMBOL_AS_UID","nativeObjectCreate","getOwnPropertyNamesExternal","getOwnPropertyDescriptorModule","uid","defineWellKnownSymbol","HIDDEN","SYMBOL","TO_PRIMITIVE","ObjectPrototype","$Symbol","$stringify","nativePropertyIsEnumerable","AllSymbols","ObjectPrototypeSymbols","StringToSymbolRegistry","SymbolToStringRegistry","WellKnownSymbolsStore","QObject","USE_SETTER","findChild","setSymbolDescriptor","ObjectPrototypeDescriptor","wrap","tag","description","isSymbol","$defineProperty","$defineProperties","properties","$getOwnPropertySymbols","$propertyIsEnumerable","$create","V","$getOwnPropertyDescriptor","$getOwnPropertyNames","names","IS_OBJECT_PROTOTYPE","setter","keyFor","sym","useSetter","useSimple","FORCED_JSON_STRINGIFY","stringify","replacer","space","$replacer","valueOf","INCORRECT_ITERATION","method","ceil","floor","isNaN","NUMBER","NativeNumber","NumberPrototype","BROKEN_CLASSOF","toNumber","third","radix","maxCode","digits","code","parseInt","NumberWrapper","error1","error2","dotAll","PrototypeOfArrayIteratorPrototype","arrayIterator","NEW_ITERATOR_PROTOTYPE","TO_STRING_TAG_SUPPORT","FunctionPrototype","FunctionPrototypeToString","nameRE","flush","head","notify","toggle","node","promise","then","macrotask","IS_WEBOS_WEBKIT","MutationObserver","WebKitMutationObserver","Promise","queueMicrotaskDescriptor","queueMicrotask","parent","exit","enter","resolve","createTextNode","observe","characterData","task","createWellKnownSymbol","withoutSetter","nativeKeys","FAILS_ON_PRIMITIVES","IS_FILTER","IS_SOME","IS_EVERY","IS_FIND_INDEX","IS_FILTER_OUT","NO_HOLES","specificCreate","map","some","every","find","findIndex","filterOut","isExtensible","preventExtensions","PREFERRED_STRING","val","SHARED","$findIndex","addToUnscopables","FIND_INDEX","SKIPS_HOLES","g","$includes","EXISTS","newPromiseCapability","x","promiseCapability","variable","namespace","NASHORN_BUG","1","aPossiblePrototype","CORRECT_SETTER","__proto__","TAG","PI_OVER_180","PI","detectBrowser","glob","WorkerGlobalScope","Konva","_global","isBrowser","isUnminified","param","dblClickWindow","angle","angleDeg","enableTrace","pointerEventsEnabled","autoDrawEnabled","hitOnDragEnabled","capturePointerEventsEnabled","_mouseListenClick","_touchListenClick","_pointerListenClick","_mouseInDblClickWindow","_touchInDblClickWindow","_pointerInDblClickWindow","_mouseDblClickPointerId","_touchDblClickPointerId","_pointerDblClickPointerId","pixelRatio","devicePixelRatio","dragDistance","showWarnings","dragButtons","isDragging","_registerNode","NodeClass","getClassName","_injectGlobal","REPLACE_SUPPORTS_NAMED_GROUPS","groups","REPLACE_KEEPS_$0","REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE","SPLIT_WORKS_WITH_OVERWRITTEN_EXEC","originalExec","DELEGATES_TO_SYMBOL","DELEGATES_TO_EXEC","execCalled","nativeRegExpMethod","arg2","forceStringMethod","stringMethod","regexMethod","$map","check","globalThis","ownKeys","getOwnPropertyDescriptors","ArrayIteratorMethods","ArrayValues","NativeSymbol","EmptyStringDescriptionStore","SymbolWrapper","symbolPrototype","symbolToString","native","desc","CORRECT_PROTOTYPE_GETTER","ARRAY_ITERATOR","Arguments","Internal","OwnPromiseCapability","PromiseWrapper","nativeThen","NativePromise","microtask","promiseResolve","hostReportErrors","newPromiseCapabilityModule","perform","PROMISE","getInternalPromiseState","PromiseConstructor","$fetch","newGenericPromiseCapability","DISPATCH_EVENT","createEvent","dispatchEvent","NATIVE_REJECTION_EVENT","PromiseRejectionEvent","UNHANDLED_REJECTION","REJECTION_HANDLED","PENDING","FULFILLED","REJECTED","HANDLED","UNHANDLED","GLOBAL_CORE_JS_PROMISE","FakePromise","all","isThenable","isReject","notified","chain","reactions","ok","exited","reaction","handler","fail","reject","rejection","onHandleUnhandled","onUnhandled","reason","initEvent","IS_UNHANDLED","isUnhandled","emit","unwrap","internalReject","internalResolve","executor","onFulfilled","onRejected","fetch","capability","$promiseResolve","remaining","alreadyCalled","race","PromiseCapability","$$resolve","$$reject","FREEZING","METADATA","setMetadata","objectID","weakData","getWeakData","onFreeze","meta","classofRaw","CORRECT_ARGUMENTS","tryGet","callee","class","ref","phaseWidth","drawOption","drawPhase","_arrayWithHoles","arr","_iterableToArrayLimit","_arr","_n","_d","_e","_s","_i","_arrayLikeToArray","arr2","_unsupportedIterableToArray","minLen","arrayLikeToArray","_nonIterableRest","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_arrayWithoutHoles","_iterableToArray","iter","_nonIterableSpread","_toConsumableArray","arrayWithoutHoles","iterableToArray","nonIterableSpread","_defineProperty","obj","enumerableOnly","symbols","_objectSpread2","Transform","dirty","tr","y","sx","sy","rad","cos","sin","m11","m12","m21","m22","matrix","dx","dy","m0","m1","m2","m3","m4","m5","delta","rotation","scaleX","scaleY","skewX","skewY","sqrt","acos","Util","_getRotation","OBJECT_ARRAY","OBJECT_NUMBER","OBJECT_STRING","OBJECT_BOOLEAN","PI_OVER_DEG180","DEG180_OVER_PI","HASH","EMPTY_STRING","ZERO","KONVA_WARNING","KONVA_ERROR","RGB_PAREN","COLORS","aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","green","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","teal","thistle","transparent","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen","RGB_REGEX","animQueue","req","requestAnimationFrame","nodeType","isFinite","selector","firstChar","toUpperCase","number","callback","cb","canvas","parentNode","url","imageObj","createImageElement","onload","hex","bigint","randColor","color","rgb","_hexToRgb","substring","substr","_namedColorToRBA","_hex3ColorToRGBA","_hex6ColorToRGBA","_rgbColorToRGBA","_rgbaColorToRGBA","_hslColorToRGBA","parts","Number","_","hsl","h","t2","t3","round","t1","r1","r2","width","height","retObj","_isPlainObject","cloneObject","_isArray","cloneArray","deg","warn","degToRad","radToDeg","radians","func","left","right","x1","y1","x2","y2","x3","y3","dist","pd2","u","pt","isClosed","pc","MAX_VALUE","p1","p2","proj","_getProjectionToSegment","px","py","pdist","startArray","endArray","newStart","pr","_getProjectionToLine","visitedByCircularReferenceRemoval","_isElement","_prepareToStringify","evt","touches","changedTouches","identifier","pointerId","_formatValue","_isString","_isBoolean","RGBComponent","getNumberValidator","attr","_isNumber","getNumberOrArrayOfNumbersValidator","noOfElements","isNumber","isValidArray","getNumberOrAutoValidator","isAuto","getStringValidator","getStringOrGradientValidator","isString","isGradient","addColorStop","getNumberArrayValidator","item","getBooleanValidator","isBool","getComponentValidator","components","GET","SET","Factory","def","validator","after","addGetter","addSetter","addOverloadedGetterSetter","_capitalize","attrs","overWriteSetter","_setAttr","component","capitalize","ret","getAttr","basicValidator","oldVal","_fireChangeEvent","capitalizedAttr","message","each","oldMethodName","newMethodName","oldGetter","oldSetter","deprecated","_filterUpToDate","simplifyArray","retArr","util","COMMA","OPEN_PAREN","CLOSE_PAREN","OPEN_PAREN_BRACKET","CLOSE_BRACKET_PAREN","SEMICOLON","DOUBLE_PAREN","EQUALS","CONTEXT_METHODS","CONTEXT_PROPERTIES","traceArrMax","_context","_canvas","getContext","traceArr","_enableTrace","shape","fillEnabled","_fill","hasStroke","_stroke","fillAfterStrokeEnabled","strokeShape","fillShape","relaxed","rounded","trace","shift","getCanvas","getPixelRatio","setTransform","bounds","clearRect","getWidth","getHeight","lineCap","getLineCap","setAttr","absOpacity","getAbsoluteOpacity","lineJoin","a0","a1","a2","a3","a4","a5","arc","arcTo","beginPath","bezierCurveTo","clip","closePath","createImageData","createLinearGradient","createPattern","createRadialGradient","a6","a7","a8","drawImage","ellipse","isPointInPath","path2d","fill","fillRect","strokeRect","text","maxWidth","fillText","measureText","getImageData","lineTo","moveTo","rect","putImageData","quadraticCurveTo","restore","rotate","save","scale","setLineDash","getLineDash","stroke","strokeText","transform","translate","origSetter","methodName","origMethod","_trace","prop","op","globalCompositeOperation","SceneContext","_fillFunc","_getFillPattern","grd","_getLinearGradient","_getRadialGradient","hasColor","fillPriority","getFillPriority","_fillColor","hasPattern","getFillPatternImage","_fillPattern","hasLinearGradient","getFillLinearGradientColorStops","_fillLinearGradient","hasRadialGradient","getFillRadialGradientColorStops","_fillRadialGradient","getStrokeLinearGradientStartPoint","getStrokeLinearGradientEndPoint","colorStops","getStrokeLinearGradientColorStops","dash","strokeScaleEnabled","getStrokeScaleEnabled","_applyLineCap","dashEnabled","dashOffset","strokeWidth","getShadowForStrokeEnabled","_strokeLinearGradient","_strokeFunc","_a","_b","_c","getShadowRGBA","blur","getShadowBlur","offset","getShadowOffset","getAbsoluteScale","ratio","abs","HitContext","colorKey","_fillFuncHit","hasHitStroke","hitStrokeWidth","_strokeFuncHit","_pixelRatio","getDevicePixelRatio","createCanvasElement","context","backingStoreRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","backingStorePixelRatio","config","isCache","conf","padding","margin","border","background","top","previousRatio","setSize","setWidth","setHeight","mimeType","quality","toDataURL","addGetterSetter","super","hitCanvas","DD","flag","_dragElements","elem","dragStatus","justDragged","Map","nodesToFireEvents","stage","getStage","setPointersPositions","_getFirstPointerId","_changedPointerPositions","distance","startPointerPos","startDrag","_setDragPosition","fire","drawNode","getLayer","batchDraw","delete","_endDragBefore","_drag","_endDragAfter","ABSOLUTE_OPACITY","ALL_LISTENERS","ABSOLUTE_TRANSFORM","ABSOLUTE_SCALE","CANVAS","CHANGE","CHILDREN","KONVA","LISTENING","MOUSEENTER","MOUSELEAVE","SHAPE","SPACE","STAGE","TRANSFORM","UPPER_STAGE","VISIBLE","TRANSFORM_CHANGE_STR","idCounter","_id","eventListeners","_allEventListeners","_cache","_attachedDepsListeners","_lastPos","_batchingTransformChange","_needClearTransformCache","_isUnderCache","_dragEventId","_shouldFireChangeEvents","setAttrs","privateGetter","cache","isTransform","invalid","deps","depsString","dep","on","_clearCache","_getCache","_clearSelfAndDescendantCache","_requestDraw","getClientRect","skipTransform","relativeTo","getParent","drawBorder","hitCanvasPixelRatio","cachedSceneCanvas","cachedFilterCanvas","cachedHitCanvas","sceneContext","hitContext","imageSmoothingEnabled","drawScene","drawHit","scene","hit","minX","minY","maxX","maxY","points","trans","getAbsoluteTransform","transformed","_applyOpacity","_applyGlobalCompositeOperation","canvasCache","_getCanvasCache","cacheCanvas","_getCachedSceneCanvas","imageData","filters","cachedCanvas","sceneCanvas","filterCanvas","filterContext","evtStr","_delegate","baseEvent","events","_off","off","stopNode","targets","findAncestors","currentTarget","stopDrag","_remove","_clearCaches","children","splice","_setChildrenIndices","remove","_isFunction","ancestors","_batchTransformChanges","_isListening","listening","_isVisible","visible","skipDragCheck","layer","layerUnderDrag","dragSkip","isListening","isVisible","nodes","child","getDepth","addChildren","getChildren","getPointerPosition","copy","invert","haveCachedParent","isCached","absoluteMatrix","getMatrix","absoluteTransform","getTranslation","origTrans","_clearTransform","_getAbsoluteTransform","_setTransform","setPosition","offsetX","offsetY","change","changeX","changeY","family","unshift","theta","zIndex","_getAbsoluteOpacity","opacity","newContainer","defaultValue","nonPlainObject","getAttrs","className","JSON","includeSelf","_isMatch","ancestor","sel","selectorArr","isValidSelector","hasName","_getStage","eventType","bubble","_fireAndBubble","_fire","at","_eachAncestorReverse","transformsEnabled","multiply","getTransform","copyInto","reset","decompose","_getTransform","getAngle","skew","allListeners","box","_toKonvaCanvas","_urlToImage","img","getDragDistance","evtName","evtListeners","newVal","oldName","newName","fullName","compareShape","shouldStop","isAncestorOf","stopBubble","cancelBubble","listeners","newEvents","oldEvents","topListeners","_getProtoListeners","selfListeners","ap","getAbsolutePosition","_getPointerById","bubbleEvent","_createDragElement","newNodePos","dbf","dragBoundFunc","bounded","setAbsolutePosition","draggable","_dragChange","_dragCleanup","shouldCheckButton","canDrag","hasDraggingChild","_listenDrag","dragElement","isReady","screenRect","haveIntersection","container","parse","_createNode","no","Class","_attrsAffectingSize","addComponentsGetterSetter","backCompat","rotateDeg","setRotationDeg","getRotationDeg","filterFunc","results","destroy","_validateAdd","hasChildren","destroyChildren","_generalFind","findOne","_descendants","valid","clone","intersects","can","caching","_drawCachedSceneCanvas","_drawChildren","shouldDrawHit","_drawCachedHitCanvas","drawMethod","clipWidth","clipHeight","clipFunc","hasClip","selfCache","clipX","clipY","hasComposition","selfRect","Infinity","skipShadow","skipStroke","shapes","hasVisible","_transformedRect","Captures","SUPPORT_POINTER_EVENTS","getCapturedShape","hasPointerCapture","setPointerCapture","releaseCapture","PointerEvent","STRING","PX","MOUSEOUT","MOUSEOVER","MOUSEMOVE","MOUSEDOWN","MOUSEUP","POINTERMOVE","POINTERDOWN","POINTERUP","POINTERCANCEL","LOSTPOINTERCAPTURE","POINTEROUT","POINTERLEAVE","POINTEROVER","POINTERENTER","CONTEXTMENU","TOUCHSTART","TOUCHEND","TOUCHMOVE","TOUCHCANCEL","WHEEL","MAX_LAYERS_NUMBER","EVENTS","EVENTS_MAP","mouse","pointerclick","pointerdblclick","touch","pointer","getEventType","getEventsMap","checkNoClip","NO_POINTERS_MESSAGE","stages","_pointerPositions","_buildDOM","_bindContentEvents","_resizeDOM","_checkVisibility","isLayer","getType","isFastLayer","throw","getElementsByClassName","getElementById","parentElement","layers","_isInDocument","layerCanvas","getIntersection","bufferCanvas","bufferHitCanvas","draw","rest","pointerenter","pointerover","evenType","targetShape","_getTargetShape","eventsEnabled","pointerout","pointerleave","pointerPos","triggeredOnShape","hasShape","pointerdown","isTouch","preventDefault","cancelable","processedShapesIds","differentTarget","pointermove","clickStartShape","clickEndShape","fireDblClick","clearTimeout","pointerup","contentPosition","_getContentPosition","clientX","clientY","getBoundingClientRect","clientWidth","clientHeight","userSelect","setAttribute","HAS_SHADOW","SHADOW_RGBA","patternImage","linearGradient","radialGradient","dummyContext","getDummyContext","_clearHasShadowCache","_clearGetShadowRGBACache","_clearFillPatternCache","_clearLinearGradientCache","_clearRadialGradientCache","getRandomColor","sceneFunc","hitFunc","_hasShadow","shadowEnabled","shadowOpacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","__getFillPattern","fillPatternImage","ctx","pattern","fillPatternRepeat","fillPatternX","fillPatternY","fillPatternRotation","fillPatternScaleX","fillPatternScaleY","fillPatternOffsetX","fillPatternOffsetY","DOMMatrix","__getLinearGradient","fillLinearGradientColorStops","fillLinearGradientStartPoint","fillLinearGradientEndPoint","__getRadialGradient","fillRadialGradientColorStops","fillRadialGradientStartPoint","fillRadialGradientEndPoint","fillRadialGradientStartRadius","fillRadialGradientEndRadius","_getShadowRGBA","hasShadow","rgba","colorToRGBA","_calculate","strokeEnabled","strokeLinearGradientColorStops","forceFill","perfectDrawEnabled","hasFill","isTransparent","strokeForShadow","shadowForStrokeEnabled","_centroid","getSelfRect","applyStroke","fillAndStrokeWidth","fillAndStrokeHeight","applyShadow","preWidth","preHeight","blurRadius","bufferContext","drawFunc","getSceneFunc","skipBuffer","cachingSelf","_useBufferCanvas","_applyLineJoin","_applyShadow","alphaThreshold","hitImageData","hitData","rgbColorKey","alpha","hitWidth","hitHeight","dashArray","getDashArray","setDashArray","getDrawFunc","setDrawFunc","drawHitFunc","getDrawHitFunc","setDrawHitFunc","BEFORE_DRAW","DRAW","INTERSECTION_OFFSETS","INTERSECTION_OFFSETS_LEN","_waitingForDraw","_setSmoothEnabled","createPNGStream","getHitCanvas","setZIndex","getNativeCanvasElement","insertBefore","moveToTop","moved","moveUp","moveDown","moveToBottom","requestAnimFrame","spiralSearchDistance","continueSearch","intersectionOffset","_getIntersection","antialiased","p3","_rgbToHex","clearBeforeDraw","hitGraphEnabled","added","performance","animIdCounter","frame","time","timeDiff","lastTime","frameRate","setLayers","lays","animations","_addAnimation","_removeAnimation","anim","_handleAnimation","layersLen","needRedraw","layerHash","_updateFrameObject","Anim","_runFrames","_animationLoop","animRunning","blacklist","duration","easing","onFinish","yoyo","PAUSED","PLAYING","REVERSING","colorAttrs","TweenEngine","propFunc","begin","finish","_pos","_change","prevPos","_time","_position","_startTime","_finish","pause","play","update","getTimer","onEnterFrame","getPosition","setTime","nodeId","Easings","Linear","getLayers","tween","_tweenFunc","_addListeners","tweens","_addAttr","onReset","onUpdate","diff","tweenId","trueEnd","trueStart","endRGBA","_prepareArrayForTween","closed","startRGBA","onPlay","onReverse","onPause","seek","thisId","to","params","asin","pow","BounceEaseOut","BounceEaseIn","_assign","Global","Node","Container","Stage","Layer","FastLayer","Group","Shape","Animation","Tween","Context","Canvas","clockwise","outerRadius","innerRadius","fillStrokeShape","boundLeftRatio","boundRightRatio","boundTopRatio","boundBottomRatio","boundLeft","boundRight","boundTop","boundBottom","getControlPoints","x0","y0","d01","d12","fa","fb","p1x","p1y","p2x","p2y","expandPoints","tension","cp","allPoints","tp","bezier","getTensionPoints","_getTensionPoints","_getTensionPointsClosed","firstControlPoints","lastControlPoints","middle","dataArray","pathLength","parsePathData","ca","command","cx","cy","ry","dTheta","psi","fs","inc","getPointOnEllipticalArc","getPointOnCubicBezier","ii","getPointOnLine","getPointOnQuadraticBezier","P1x","P1y","P2x","P2y","fromX","fromY","rise","ix","iy","getLineLength","pRise","pRun","pct","P3x","P3y","P4x","P4y","CB1","CB2","CB3","CB4","QB1","QB2","QB3","cosPsi","sinPsi","cs","cc","coords","cpx","cpy","jlen","parsed","parseFloat","prevCmd","ctlPtx","ctlPty","cmd","startX","startY","idx","convertEndpointToCenterParameterization","calcLength","psiDeg","xp","yp","lambda","cxp","cyp","vMag","v","vRatio","vAngle","_sceneFunc","PI2","fromTension","pointerLength","lp","atan2","pointerWidth","pointerAtEnding","__fillStroke","pointerAtBeginning","isDashEnabled","lineRect","radius","radiusX","radiusY","_setImageLoad","image","complete","cropWidth","cropHeight","cropX","cropY","onError","onerror","crossOrigin","ATTR_CHANGE_LIST","CHANGE_KONVA","NONE","UP","RIGHT","DOWN","LEFT","attrChangeListLen","_sync","getText","pointerDirection","pointerHeight","getTag","cornerRadius","topLeft","topRight","bottomLeft","bottomRight","direction","_getPoints","sides","PIx2","_updated","updated","frameIndex","isRunning","clearInterval","interval","_setInterval","animation","ix4","offsets","frameOffsets","ix2","setInterval","_updateIndex","getIndex","setIndex","numPoints","stringToArray","AUTO","CENTER","JUSTIFY","CONTEXT_2D","DASH","TEXT","TEXT_UPPER","TOP","BOTTOM","MIDDLE","NORMAL","PX_SPACE","WORD","CHAR","ELLIPSIS","normalizeFontFamily","fontFamily","hasSpace","hasQuotes","_partialText","_partialTextX","_partialTextY","checkDefaultFill","_setTextData","textArr","textArrLen","fontSize","lineHeightPx","lineHeight","verticalAlign","alignY","align","totalWidth","letterSpacing","textDecoration","shouldUnderline","shouldLineThrough","translateY","lineTranslateX","lineTranslateY","_getContextFont","spacesNumber","oneWord","lineWidth","lastLine","lastInParagraph","strokeStyle","li","letter","measureSize","getTextWidth","textWidth","textHeight","metrics","font","fontStyle","fontVariant","_getTextWidth","lines","fixedWidth","fixedHeight","maxHeightPx","currentHeightPx","shouldWrap","wrapAtWord","shouldAddEllipsis","ellipsis","additionalWidth","low","high","matchWidth","mid","substrWidth","wrapIndex","nextChar","nextIsSpaceOrDash","lastIndexOf","trimRight","_addTextLine","haveSpace","trimLeft","partialText","dummyCanvas","textBaseline","glyphInfo","p0","setText","_getTextSize","kerningFunc","textFullWidth","fullPathWidth","pathCmd","charArr","pIndex","currentT","getNextPathSegment","pathData","findSegmentToFitCharacter","glyphWidth","currLen","attempts","cumulativePathLength","needNewSegment","testChar","lettersInOffset","kern","midpoint","transposeX","transposeY","info","EVENTS_NAME","NODES_RECT","ANGLES","TOUCH_DEVICE","getCursor","anchorName","_inRange","ANCHORS_NAMES","getCenter","rotateAroundPoint","angleRad","rotateAroundCenter","deltaRad","center","getSnap","snaps","newRotationRad","tol","snapped","absDiff","dif","_transforming","_createElements","_handleMouseMove","_handleMouseUp","getNode","setNode","setNodes","_nodes","detach","useSingleNodeRotation","getAbsoluteRotation","onChange","_resetTransformCache","additionalEvents","_getEventNamespace","_proxyDrag","elementsCreated","lastPos","otherNode","otherAbs","_movingAnchorName","__getNodeRect","rot","relative","ignoreStroke","absScale","absPos","totalPoints","_getNodeRect","_createBack","_createAnchor","anchor","_handleMouseDown","cursor","_cursorChange","back","rotateEnabled","rotateAnchorOffset","_sign","shouldOverdrawWholeArea","hypotenuse","_anchorDragOffset","newHypotenuse","anchorNode","pp","oldAbs","anchorDragBoundFunc","newAbs","keepProportion","keepRatio","shiftKey","centeredScaling","altKey","comparePoint","reverseX","reverseY","topOffsetX","topOffsetY","bottomOffsetX","bottomOffsetY","move","_fitNodesInto","oldRotation","newRotation","rotationSnapTolerance","snappedRot","rotationSnaps","_removeEvents","removeEventListener","newAttrs","oldAttrs","minSize","allowNegativeScale","flipEnabled","boundBoxFunc","baseSize","oldTr","newTr","parentTransform","localTransform","newLocalTransform","enabledAnchors","resizeEnabled","anchorSize","anchorStroke","anchorStrokeWidth","anchorFill","anchorCornerRadius","_batchChangeChild","borderEnabled","borderStroke","borderStrokeWidth","borderDash","validateAnchors","lineEnabled","rotateHandlerOffset","enabledHandlers","BlurStack","getAngleDeg","setAngleDeg","mul_table","shg_table","filterGaussBlurRGBA","yi","yw","r_sum","g_sum","b_sum","a_sum","r_out_sum","g_out_sum","b_out_sum","a_out_sum","r_in_sum","g_in_sum","b_in_sum","a_in_sum","pg","pb","pa","rbs","pixels","div","widthMinus1","heightMinus1","radiusPlus1","sumFactor","stackStart","stackEnd","stackIn","stackOut","mul_sum","shg_sum","Blur","afterSetFilter","Brighten","brightness","Contrast","adjust","contrast","nPixels","Emboss","strength","embossStrength","greyLevel","embossWhiteLevel","embossDirection","blend","embossBlend","dirY","dirX","w","w4","otherY","offsetYOther","otherX","offsetOther","dR","dG","dB","absDif","absG","absB","remap","fromValue","fromMin","fromMax","toMin","toMax","toValue","fromRange","toRange","Enhance","nSubPixels","rMin","rMax","gMin","gMax","bMin","bMax","enhanceAmount","enhance","rMid","rGoalMax","rGoalMin","gMid","gGoalMax","gGoalMin","bMid","bGoalMax","bGoalMin","Grayscale","HSL","saturation","hue","luminance","vsu","vsw","rr","rg","rb","gr","gg","gb","br","bg","bb","HSV","Invert","ToPolar","dst","opt","srcPixels","dstPixels","xSize","ySize","xMid","polarCenterX","yMid","polarCenterY","rSize","tSize","conversion","FromPolar","phaseShift","polarRotation","Kaleidoscope","xoff","srcPos","dstPos","power","kaleidoscopePower","kaleidoscopeAngle","tempCanvas","scratchData","minSectionSize","sectionSize","xStart","xEnd","xDelta","pixelAt","idata","rgbDistance","rgbMean","pTab","backgroundMask","threshold","rgbv_no","rgbv_ne","rgbv_so","rgbv_se","thres","mean","mask","applyMask","erodeMask","sw","sh","weights","side","halfSide","maskResult","so","scy","scx","srcOff","wt","dilateMask","smoothEdgeMask","Mask","Noise","amount","noise","half","Pixelate","xBinStart","xBinEnd","yBinStart","yBinEnd","xBin","yBin","pixelsInBin","pixelSize","nBinsX","nBinsY","Posterize","levels","RGB","RGBA","ia","Sepia","Solarize","Threshold","level","Arc","Arrow","Circle","Ellipse","Image","Label","Tag","Line","Path","Rect","RegularPolygon","Ring","Sprite","Star","Text","TextPath","Transformer","Wedge","Filters","_classCallCheck","_defineProperties","props","_createClass","protoProps","staticProps","CrossConstBase","roadWidth","bicycleLaneWidth","greenWidth","doubleYellowLineInterval","defaultSolidRoadLength","defaultRoadLength","defaultRoadNumber","manRadianLength","manRoadLength","manRoadInterval","manRoadLineWidth","manCarInterval","walkwayWidth","dashLength","busDashLength","tidalDashLength","roadPole","CrossConst","CrossAngle","radian","RoadCenterMode","doubleYellowLine","greenArea","singleYellowLine","toAngle","toRadian","pointRotateByPoint","rotateCenter","angleXY","atan","L","pointRotateAngel","getDistance","twoBezier","getArcPoint","pointA","pointB","angelA","pointList","erPoint","calculateAngle","leftDegree","rightDegree","degree","degreeToAngle","agree","calculateLeftRightRadian","degreeRadia","getSplitPoint","point1","point2","spliceLength","spliteArr","option","entrances","origin","centerLineMode","is_have_son","baseWidth","expandManRadian","roadNumber","entranceArray","entranceNum","secondIn","motor_lanes","degreeLeft","degreeRight","widthLeft","rightWidth","widthRight","leftWidth","setLeftAndRight","en_id","in","inBicycleLane","out","outBicycleLane","road_center_mode","canalization","roadLength","centerToManRoadDistance","exit_lanes","calculation","correctPoint","pointData","lineData","polygonData","angleLeft","angleRight","angleLeft2","angleRight2","toLeftAngle","toRightAngle","dw","AL","AR","CL","CR","BLO","BRO","BL","BR","roadPoleL","B1L","B1R","C1L","C1R","roadName","E1","F1","FToE","angleIndex","createDRToBR","rightPoint","BToDR","B1ToD1R","OOO","ALToAR","BLToBR","H0","H1","H2","dInterval","dGreeny","pointLaneFlow","laneFlowPoints","getLaneFlowPoint","lane_flow","has_waiting_area","waitAreaFlowPoints","waitAreaPoints","pointRoadFlow","pointRoadFlowText","getRoadFlowPoint","roadFlowPoints","flowTextPoint","pointWaitArea","getWaitAreaPoint","right_lane_type","lane_type","left_lane_type","lineDate","leftIndex","rightIndex","leftH0","leftH2","rightH0","rightH2","lineDate1","lineDate2","lineDate3","lineDate4","fdLaneNum","itt","getDegreeByEnId","degreeMap","2","3","walkwayPolygonL","walkwayPolygonR","manRoadLine","greenPolygon","laneNumber","laneFlow","laneFlowOffetStopLine","cenY","leftY","rightY","flowType","manOffsetY","manOffsetX","leftX","getRealPhasePoint","phaseNum","baseLayerWidth","fd_flow","getInterPhaseflowData","entrance","laneOffset","nonWidth","getDrawFlowData","originPoint","oriBaseWidth","getFootLightData","getDirectionLightData","phaseMap","enterFlowMap","enterDirectionMap","adjacentIcon","bikeIcon","default","setup","modelStage","baseLayer","realLayer","phaseStage","phaseLayer","cross","hoverBack","hoverText","nearImg","bikeImg","tfInterModel","scTfInterBox","scTfPhaseBox","showRoadAsideLine","showLaneDashedLine","showManRoadLine","showStopLine","showManRoad","showLaneFlow","showRoadName","routeNameColor","defaultFlowColor","HighLightFlowColor","saturationFlowColor","phaseBackColor","laneBackColor","phaseNumColor","redColor","greenColor","yellowColor","greyColor","interType","getDrawOption","clearHandler","interData","log","drawInter","drawInterData","resetInterData","roadPolygonShape","roadPolygon","RoadPolygon","drawMethods","drawRoundabout","whitePolygonShape","carRoadLine0","carRoadLine1","carRoadLine2","yellowPolygonShape","carRoadLine4","drawLine","fdsplitLine","greenLine","manRoadPolygonShape","drawPolygon","carRoadLine3","roadText","getTextRotationByDegree","offsetText","laneFlowPolygonShape","laneFlowPolygon","drawCanalization","drawBikeLogo","newData","initLayer","drawRoadFlow","movements","sortMovement","getSortMovement","flowList","if_control","startPoint","getStartPoint","movements_type","flowData","rotateFlowData","getRotateData","drawRoadFlowWithData","fdflowList","roadFlowPolygonShape","if_release","rotatePoins","getEntranceLaneNum","enterInfo","mainIn","fdIn","movementsType","laneFlowTotal","fdlaneFlowTotal","enterMove","enter_port_direction","leftArray","leftFdArray","centerArray","centerFdArray","rightArray","rightFdArray","manArray","nonArray","drawFlowSaturation","flowSaturation","roadFlowPolygon","saturationText","fillEntranceOrLaneBack","fillData","inNum","outNum","index1","index2","fillType","fillDirection","getOutLineOffset","point3","point4","roadCenterMode","drawEntranceHighLight","lightData","lineDatas","drawAdjacentInfo","adjacentList","me","adjacentMap","entrance_id","adjacentInfo","getNearPoint","getImgRotationByDegree","offsetImg","drawHoverText","curEntrance","calDegree","imageList","drawLaneImg","laneImgs","loadImg","getStopLinePointByLaneNum","rotateType","loadImgs","imgload","imgUrl","laneDirection","orgPoint","offetStopLine","armPoint","drawVariableLane","variableLaneData","click","lane_id","status","drawVariableFlow","clickPoint","drawVariableClickPoint","rightEntrance","topPoint","bottomPoint","canalizationPoints","circlePoint","quhuaArea","lineNum","stepX3","stepY3","stepX1","stepY1","rowLine","offsetDistanceY","offsetDistanceX","colPoints","itX","rowPoints","getGtdPolygonData","getGtdLineData","rangeArea","circlePoint0","circlePoint1","circlePoint2","circlePoint3","gtdGreenPolygon","gtdRoadPolygon","gtdNonMotorPolygon","polygonShape","circlrRadia","circle","dashCircle","drawRealMethods","drawRealInfo","realInfo","setRealBaseInfo","drawPhases","drawPhaseRemainTime","current_phase_remaining_time","drawWalkMan","drawInterPhase","drawGreenRedLight","ctrl_way","phase_num","phaseBack","phase_movements_info","phaseList","getEntrancePhaseList","fdPhaseList","darwPhaseWithPhaseList","slideToCurPhase","current_phase_num","road_type","phasePolygonShap","enterFlowPoint","phasePoints","rotatePoints","rotatePoint","drawPhaseBox","currentPhaseNum","scrollTop","realPhasePolygonShap","currentPhase","phase","phaseCode","phaseFlowPolygonShape","ittt","DecMovements","movementParas","moveList","movenents","getPhaseListWithBin","movementMap","num_movements","list","flow","bool","phaseMovemenes","getPhaseMovementType","getTypePhaseListWithBin","fdFlow","movemenes","baseFlowType","Set","phaseCenterPoint","movements_state","drawInterPhaseWithPhaseList","getInterPhaseFlowColor","drawInterPhaseFlow","greenFlowList","greenPhaseMovemenes","interPhaseFlowPolygonShape","remainTime","greyPhaseList","redPhaseList","yellowPhaseList","greenPhaseList","greyPhases","redPhases","yellowPhases","greenPhases","runColor","getRuncolor","run1Color","run2Color","manPoint","getEntranceManPoint","drawFootLight","laneOffsetHeight","outOfsset","pointIndex","centerPoint","manData","drawGreenRedLightWithType","getEntranceLightPoint","xAngle","getxAngle","drawLightHandler","leftColor","getLightcolor","centerColor","rightColor","enNum","drawEntrance","pointInfo","calculateEntranceLightPoint","prevEntrance","nextEntrance","calculateEntranceFaceLightPoint","calculateCircleLightPoint","fdOffset","offsetHeight","leftPoint","drawType","lightBack","centerCircle","rotateLightData","lightPolygonShape","P1","P2","getRotateLightData2","rotateLightData2","imageLoadMethods","initImg","render","__scopeId","interModel","install","app","nativeSlice","fin","CSSRuleList","CSSStyleDeclaration","CSSValueList","ClientRectList","DOMRectList","DOMStringList","DOMTokenList","DataTransferItemList","FileList","HTMLAllCollection","HTMLCollection","HTMLFormElement","HTMLSelectElement","MediaList","MimeTypeArray","NamedNodeMap","NodeList","PaintRequestList","Plugin","PluginArray","SVGLengthList","SVGNumberList","SVGPathSegList","SVGPointList","SVGStringList","SVGTransformList","SourceBufferList","StyleSheetList","TextTrackCueList","TextTrackList","TouchList"],"mappings":"CAAA,SAA2CA,EAAMC,GAC1B,kBAAZC,SAA0C,kBAAXC,OACxCA,OAAOD,QAAUD,EAAQG,QAAQ,QACR,oBAAXC,QAAyBA,OAAOC,IAC9CD,OAAO,GAAIJ,GACe,kBAAZC,QACdA,QAAQ,SAAWD,EAAQG,QAAQ,QAEnCJ,EAAK,SAAWC,EAAQD,EAAK,SAR/B,CASoB,qBAATO,KAAuBA,KAAOC,MAAO,SAASC,GACzD,O,YCTE,IAAIC,EAAmB,GAGvB,SAASC,EAAoBC,GAG5B,GAAGF,EAAiBE,GACnB,OAAOF,EAAiBE,GAAUV,QAGnC,IAAIC,EAASO,EAAiBE,GAAY,CACzCC,EAAGD,EACHE,GAAG,EACHZ,QAAS,IAUV,OANAa,EAAQH,GAAUI,KAAKb,EAAOD,QAASC,EAAQA,EAAOD,QAASS,GAG/DR,EAAOW,GAAI,EAGJX,EAAOD,QA0Df,OArDAS,EAAoBM,EAAIF,EAGxBJ,EAAoBO,EAAIR,EAGxBC,EAAoBQ,EAAI,SAASjB,EAASkB,EAAMC,GAC3CV,EAAoBW,EAAEpB,EAASkB,IAClCG,OAAOC,eAAetB,EAASkB,EAAM,CAAEK,YAAY,EAAMC,IAAKL,KAKhEV,EAAoBgB,EAAI,SAASzB,GACX,qBAAX0B,QAA0BA,OAAOC,aAC1CN,OAAOC,eAAetB,EAAS0B,OAAOC,YAAa,CAAEC,MAAO,WAE7DP,OAAOC,eAAetB,EAAS,aAAc,CAAE4B,OAAO,KAQvDnB,EAAoBoB,EAAI,SAASD,EAAOE,GAEvC,GADU,EAAPA,IAAUF,EAAQnB,EAAoBmB,IAC/B,EAAPE,EAAU,OAAOF,EACpB,GAAW,EAAPE,GAA8B,kBAAVF,GAAsBA,GAASA,EAAMG,WAAY,OAAOH,EAChF,IAAII,EAAKX,OAAOY,OAAO,MAGvB,GAFAxB,EAAoBgB,EAAEO,GACtBX,OAAOC,eAAeU,EAAI,UAAW,CAAET,YAAY,EAAMK,MAAOA,IACtD,EAAPE,GAA4B,iBAATF,EAAmB,IAAI,IAAIM,KAAON,EAAOnB,EAAoBQ,EAAEe,EAAIE,EAAK,SAASA,GAAO,OAAON,EAAMM,IAAQC,KAAK,KAAMD,IAC9I,OAAOF,GAIRvB,EAAoB2B,EAAI,SAASnC,GAChC,IAAIkB,EAASlB,GAAUA,EAAO8B,WAC7B,WAAwB,OAAO9B,EAAO,YACtC,WAA8B,OAAOA,GAEtC,OADAQ,EAAoBQ,EAAEE,EAAQ,IAAKA,GAC5BA,GAIRV,EAAoBW,EAAI,SAASiB,EAAQC,GAAY,OAAOjB,OAAOkB,UAAUC,eAAe1B,KAAKuB,EAAQC,IAGzG7B,EAAoBgC,EAAI,GAIjBhC,EAAoBA,EAAoBiC,EAAI,Q,yBClFrD,IAAIC,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAChCE,EAAO,GAEXA,EAAKD,GAAiB,IAEtB3C,EAAOD,QAA2B,eAAjB8C,OAAOD,I,uBCPxB,IAAIE,EAAY,EAAQ,QAGxB9C,EAAOD,QAAU,SAAUgD,EAAIC,EAAMC,GAEnC,GADAH,EAAUC,QACGG,IAATF,EAAoB,OAAOD,EAC/B,OAAQE,GACN,KAAK,EAAG,OAAO,WACb,OAAOF,EAAGlC,KAAKmC,IAEjB,KAAK,EAAG,OAAO,SAAUG,GACvB,OAAOJ,EAAGlC,KAAKmC,EAAMG,IAEvB,KAAK,EAAG,OAAO,SAAUA,EAAGC,GAC1B,OAAOL,EAAGlC,KAAKmC,EAAMG,EAAGC,IAE1B,KAAK,EAAG,OAAO,SAAUD,EAAGC,EAAGrC,GAC7B,OAAOgC,EAAGlC,KAAKmC,EAAMG,EAAGC,EAAGrC,IAG/B,OAAO,WACL,OAAOgC,EAAGM,MAAML,EAAMM,c,oCCpB1B,IAAIC,EAAI,EAAQ,QACZC,EAAmB,EAAQ,QAC3BC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAY,EAAQ,QACpBC,EAAqB,EAAQ,QAIjCL,EAAE,CAAEM,OAAQ,QAASC,OAAO,GAAQ,CAClCC,KAAM,WACJ,IAAIC,EAAWV,UAAUL,OAASK,UAAU,QAAKJ,EAC7Ce,EAAIR,EAASpD,MACb6D,EAAYR,EAASO,EAAEhB,QACvBkB,EAAIP,EAAmBK,EAAG,GAE9B,OADAE,EAAElB,OAASO,EAAiBW,EAAGF,EAAGA,EAAGC,EAAW,OAAgBhB,IAAbc,EAAyB,EAAIL,EAAUK,IACnFG,M,uBCjBX,IAAIC,EAAkB,EAAQ,QAC1BC,EAA4B,EAAQ,QAA8CC,EAElFC,EAAW,GAAGA,SAEdC,EAA+B,iBAAVC,QAAsBA,QAAUrD,OAAOsD,oBAC5DtD,OAAOsD,oBAAoBD,QAAU,GAErCE,EAAiB,SAAUC,GAC7B,IACE,OAAOP,EAA0BO,GACjC,MAAOC,GACP,OAAOL,EAAYM,UAKvB9E,EAAOD,QAAQuE,EAAI,SAA6BM,GAC9C,OAAOJ,GAAoC,mBAArBD,EAAS1D,KAAK+D,GAChCD,EAAeC,GACfP,EAA0BD,EAAgBQ,M,uBCpBhD,IAAIG,EAAc,EAAQ,QACtBC,EAA6B,EAAQ,QACrCC,EAA2B,EAAQ,QACnCb,EAAkB,EAAQ,QAC1Bc,EAAc,EAAQ,QACtBC,EAAM,EAAQ,QACdC,EAAiB,EAAQ,QAEzBC,EAAiCjE,OAAOkE,yBAI5CvF,EAAQuE,EAAIS,EAAcM,EAAiC,SAAkCpB,EAAGsB,GAG9F,GAFAtB,EAAIG,EAAgBH,GACpBsB,EAAIL,EAAYK,GAAG,GACfH,EAAgB,IAClB,OAAOC,EAA+BpB,EAAGsB,GACzC,MAAOV,IACT,GAAIM,EAAIlB,EAAGsB,GAAI,OAAON,GAA0BD,EAA2BV,EAAEzD,KAAKoD,EAAGsB,GAAItB,EAAEsB,M,uBClB7F,IAAIR,EAAc,EAAQ,QACtBS,EAAQ,EAAQ,QAChBC,EAAgB,EAAQ,QAG5BzF,EAAOD,SAAWgF,IAAgBS,GAAM,WACtC,OAEQ,GAFDpE,OAAOC,eAAeoE,EAAc,OAAQ,IAAK,CACtDlE,IAAK,WAAc,OAAO,KACzB4B,M,uBCRL,IAAIuC,EAAW,EAAQ,QAEnBC,EAAgBC,KAAKtD,UACrBuD,EAAe,eACfC,EAAY,WACZC,EAAqBJ,EAAcG,GACnCE,EAAUL,EAAcK,QAIxB,IAAIJ,KAAKK,KAAO,IAAMJ,GACxBH,EAASC,EAAeG,GAAW,WACjC,IAAInE,EAAQqE,EAAQnF,KAAKR,MAEzB,OAAOsB,IAAUA,EAAQoE,EAAmBlF,KAAKR,MAAQwF,M,kCCb7D,IAAIK,EAAgC,EAAQ,QACxCC,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBC,EAAyB,EAAQ,QACjCC,EAAqB,EAAQ,QAC7BC,EAAqB,EAAQ,QAC7B7C,EAAW,EAAQ,QACnB8C,EAAiB,EAAQ,QACzBC,EAAa,EAAQ,QACrBjB,EAAQ,EAAQ,QAEhBkB,EAAY,GAAGC,KACfC,EAAMC,KAAKD,IACXE,EAAa,WAGbC,GAAcvB,GAAM,WAAc,OAAQwB,OAAOF,EAAY,QAGjEZ,EAA8B,QAAS,GAAG,SAAUe,EAAOC,EAAaC,GACtE,IAAIC,EAqDJ,OAzCEA,EAV2B,KAA3B,OAAOC,MAAM,QAAQ,IAEc,GAAnC,OAAOA,MAAM,QAAS,GAAGpE,QACO,GAAhC,KAAKoE,MAAM,WAAWpE,QACU,GAAhC,IAAIoE,MAAM,YAAYpE,QAEtB,IAAIoE,MAAM,QAAQpE,OAAS,GAC3B,GAAGoE,MAAM,MAAMpE,OAGC,SAAUqE,EAAWC,GACnC,IAAIC,EAAS3E,OAAOwD,EAAuBhG,OACvCoH,OAAgBvE,IAAVqE,EAAsBT,EAAaS,IAAU,EACvD,GAAY,IAARE,EAAW,MAAO,GACtB,QAAkBvE,IAAdoE,EAAyB,MAAO,CAACE,GAErC,IAAKrB,EAASmB,GACZ,OAAOJ,EAAYrG,KAAK2G,EAAQF,EAAWG,GAE7C,IAQIC,EAAOC,EAAWC,EARlBC,EAAS,GACTC,GAASR,EAAUS,WAAa,IAAM,KAC7BT,EAAUU,UAAY,IAAM,KAC5BV,EAAUW,QAAU,IAAM,KAC1BX,EAAUY,OAAS,IAAM,IAClCC,EAAgB,EAEhBC,EAAgB,IAAIpB,OAAOM,EAAUe,OAAQP,EAAQ,KAEzD,MAAOJ,EAAQjB,EAAW5F,KAAKuH,EAAeZ,GAAS,CAErD,GADAG,EAAYS,EAAcT,UACtBA,EAAYQ,IACdN,EAAOlB,KAAKa,EAAO1C,MAAMqD,EAAeT,EAAMY,QAC1CZ,EAAMzE,OAAS,GAAKyE,EAAMY,MAAQd,EAAOvE,QAAQyD,EAAUrD,MAAMwE,EAAQH,EAAM5C,MAAM,IACzF8C,EAAaF,EAAM,GAAGzE,OACtBkF,EAAgBR,EACZE,EAAO5E,QAAUwE,GAAK,MAExBW,EAAcT,YAAcD,EAAMY,OAAOF,EAAcT,YAK7D,OAHIQ,IAAkBX,EAAOvE,QACvB2E,GAAeQ,EAAcxF,KAAK,KAAKiF,EAAOlB,KAAK,IAClDkB,EAAOlB,KAAKa,EAAO1C,MAAMqD,IACzBN,EAAO5E,OAASwE,EAAMI,EAAO/C,MAAM,EAAG2C,GAAOI,GAG7C,IAAIR,WAAMnE,EAAW,GAAGD,OACjB,SAAUqE,EAAWC,GACnC,YAAqBrE,IAAdoE,GAAqC,IAAVC,EAAc,GAAKL,EAAYrG,KAAKR,KAAMiH,EAAWC,IAEpEL,EAEhB,CAGL,SAAeI,EAAWC,GACxB,IAAItD,EAAIoC,EAAuBhG,MAC3BkI,OAAwBrF,GAAboE,OAAyBpE,EAAYoE,EAAUL,GAC9D,YAAoB/D,IAAbqF,EACHA,EAAS1H,KAAKyG,EAAWrD,EAAGsD,GAC5BH,EAAcvG,KAAKgC,OAAOoB,GAAIqD,EAAWC,IAO/C,SAAUiB,EAAQjB,GAChB,IAAIkB,EAAMtB,EAAgBC,EAAeoB,EAAQnI,KAAMkH,EAAOH,IAAkBF,GAChF,GAAIuB,EAAIC,KAAM,OAAOD,EAAI9G,MAEzB,IAAIgH,EAAKvC,EAASoC,GACdI,EAAI/F,OAAOxC,MACXwI,EAAIvC,EAAmBqC,EAAI3B,QAE3B8B,EAAkBH,EAAGV,QACrBH,GAASa,EAAGZ,WAAa,IAAM,KACtBY,EAAGX,UAAY,IAAM,KACrBW,EAAGV,QAAU,IAAM,KACnBlB,EAAa,IAAM,KAI5BwB,EAAW,IAAIM,EAAE9B,EAAa4B,EAAK,OAASA,EAAGN,OAAS,IAAKP,GAC7DL,OAAgBvE,IAAVqE,EAAsBT,EAAaS,IAAU,EACvD,GAAY,IAARE,EAAW,MAAO,GACtB,GAAiB,IAAbmB,EAAE3F,OAAc,OAAuC,OAAhCuD,EAAe+B,EAAUK,GAAc,CAACA,GAAK,GACxE,IAAIpG,EAAI,EACJuG,EAAI,EACJ5E,EAAI,GACR,MAAO4E,EAAIH,EAAE3F,OAAQ,CACnBsF,EAASZ,UAAYZ,EAAagC,EAAI,EACtC,IACIC,EADAC,EAAIzC,EAAe+B,EAAUxB,EAAa6B,EAAIA,EAAE9D,MAAMiE,IAE1D,GACQ,OAANE,IACCD,EAAIpC,EAAIlD,EAAS6E,EAASZ,WAAaZ,EAAa,EAAIgC,IAAKH,EAAE3F,WAAaT,EAE7EuG,EAAIxC,EAAmBqC,EAAGG,EAAGD,OACxB,CAEL,GADA3E,EAAEwC,KAAKiC,EAAE9D,MAAMtC,EAAGuG,IACd5E,EAAElB,SAAWwE,EAAK,OAAOtD,EAC7B,IAAK,IAAIzD,EAAI,EAAGA,GAAKuI,EAAEhG,OAAS,EAAGvC,IAEjC,GADAyD,EAAEwC,KAAKsC,EAAEvI,IACLyD,EAAElB,SAAWwE,EAAK,OAAOtD,EAE/B4E,EAAIvG,EAAIwG,GAIZ,OADA7E,EAAEwC,KAAKiC,EAAE9D,MAAMtC,IACR2B,OAGT4C,I,uBCvIJ,IAAImC,EAAU,EAAQ,QAClBzC,EAAa,EAAQ,QAIzBzG,EAAOD,QAAU,SAAUoJ,EAAGP,GAC5B,IAAIQ,EAAOD,EAAEC,KACb,GAAoB,oBAATA,EAAqB,CAC9B,IAAIC,EAASD,EAAKvI,KAAKsI,EAAGP,GAC1B,GAAsB,kBAAXS,EACT,MAAMC,UAAU,sEAElB,OAAOD,EAGT,GAAmB,WAAfH,EAAQC,GACV,MAAMG,UAAU,+CAGlB,OAAO7C,EAAW5F,KAAKsI,EAAGP,K,uBCnB5B,IAAIW,EAAS,EAAQ,QACjBC,EAAe,EAAQ,QACvBC,EAAU,EAAQ,QAClBC,EAA8B,EAAQ,QAE1C,IAAK,IAAIC,KAAmBH,EAAc,CACxC,IAAII,EAAaL,EAAOI,GACpBE,EAAsBD,GAAcA,EAAWtH,UAEnD,GAAIuH,GAAuBA,EAAoBJ,UAAYA,EAAS,IAClEC,EAA4BG,EAAqB,UAAWJ,GAC5D,MAAO5E,GACPgF,EAAoBJ,QAAUA,K,oCCXlC,IAAIK,EAAW,EAAQ,QAAgCL,QACnDM,EAAsB,EAAQ,QAE9BC,EAAgBD,EAAoB,WAIxC/J,EAAOD,QAAWiK,EAEd,GAAGP,QAF2B,SAAiBQ,GACjD,OAAOH,EAASzJ,KAAM4J,EAAY3G,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,K,qBCT1ElD,EAAOD,QAAU,SAAU6E,EAAIsF,EAAajJ,GAC1C,KAAM2D,aAAcsF,GAClB,MAAMZ,UAAU,cAAgBrI,EAAOA,EAAO,IAAM,IAAM,cAC1D,OAAO2D,I,uBCHX,IAAIuF,EAAa,EAAQ,QAEzBnK,EAAOD,QAAUoK,EAAW,WAAY,oB,qBCFxCnK,EAAOD,QAAU,SAAU6E,GACzB,GAAiB,mBAANA,EACT,MAAM0E,UAAUzG,OAAO+B,GAAM,sBAC7B,OAAOA,I,uBCHX,IAAIlC,EAAkB,EAAQ,QAE1B0H,EAAW1H,EAAgB,YAC3B2H,GAAe,EAEnB,IACE,IAAIC,EAAS,EACTC,EAAqB,CACvBC,KAAM,WACJ,MAAO,CAAE9B,OAAQ4B,MAEnB,OAAU,WACRD,GAAe,IAGnBE,EAAmBH,GAAY,WAC7B,OAAO/J,MAGToK,MAAMC,KAAKH,GAAoB,WAAc,MAAM,KACnD,MAAO1F,IAET7E,EAAOD,QAAU,SAAUqJ,EAAMuB,GAC/B,IAAKA,IAAiBN,EAAc,OAAO,EAC3C,IAAIO,GAAoB,EACxB,IACE,IAAIxI,EAAS,GACbA,EAAOgI,GAAY,WACjB,MAAO,CACLI,KAAM,WACJ,MAAO,CAAE9B,KAAMkC,GAAoB,MAIzCxB,EAAKhH,GACL,MAAOyC,IACT,OAAO+F,I,uBCpCT,IAAIC,EAAY,EAAQ,QAExB7K,EAAOD,QAAU,mCAAmC6C,KAAKiI,I,uBCFzD,IAAItH,EAAI,EAAQ,QACZwB,EAAc,EAAQ,QACtB+F,EAAmB,EAAQ,QAI/BvH,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,QAASjG,EAAakG,MAAOlG,GAAe,CAC5E+F,iBAAkBA,K,qBCLpB9K,EAAOD,QAAU,SAAU6E,GACzB,QAAU1B,GAAN0B,EAAiB,MAAM0E,UAAU,wBAA0B1E,GAC/D,OAAOA,I,uBCJT,IAAIY,EAAQ,EAAQ,QAChB9C,EAAkB,EAAQ,QAC1BwI,EAAa,EAAQ,QAErBC,EAAUzI,EAAgB,WAE9B1C,EAAOD,QAAU,SAAUqL,GAIzB,OAAOF,GAAc,KAAO1F,GAAM,WAChC,IAAI6F,EAAQ,GACRC,EAAcD,EAAMC,YAAc,GAItC,OAHAA,EAAYH,GAAW,WACrB,MAAO,CAAEI,IAAK,IAE2B,IAApCF,EAAMD,GAAaI,SAASD,S,qBChBvC,IAAInF,EAAW,EAAQ,QACnBqF,EAAwB,EAAQ,QAChC/H,EAAW,EAAQ,QACnBxB,EAAO,EAAQ,QACfwJ,EAAoB,EAAQ,QAC5BC,EAAgB,EAAQ,QAExBC,EAAS,SAAUC,EAASxC,GAC9BhJ,KAAKwL,QAAUA,EACfxL,KAAKgJ,OAASA,GAGhBrJ,EAAOD,QAAU,SAAU+L,EAAUC,EAAiBC,GACpD,IAKIC,EAAUC,EAAQ5D,EAAOrF,EAAQoG,EAAQmB,EAAM2B,EAL/CnJ,EAAOgJ,GAAWA,EAAQhJ,KAC1BoJ,KAAgBJ,IAAWA,EAAQI,YACnCC,KAAiBL,IAAWA,EAAQK,aACpCC,KAAiBN,IAAWA,EAAQM,aACpCvJ,EAAKb,EAAK6J,EAAiB/I,EAAM,EAAIoJ,EAAaE,GAGlDC,EAAO,SAAUC,GAEnB,OADIP,GAAUN,EAAcM,GACrB,IAAIL,GAAO,EAAMY,IAGtBC,EAAS,SAAU9K,GACrB,OAAIyK,GACFhG,EAASzE,GACF2K,EAAcvJ,EAAGpB,EAAM,GAAIA,EAAM,GAAI4K,GAAQxJ,EAAGpB,EAAM,GAAIA,EAAM,KAChE2K,EAAcvJ,EAAGpB,EAAO4K,GAAQxJ,EAAGpB,IAG9C,GAAI0K,EACFJ,EAAWH,MACN,CAEL,GADAI,EAASR,EAAkBI,GACN,mBAAVI,EAAsB,MAAM5C,UAAU,0BAEjD,GAAImC,EAAsBS,GAAS,CACjC,IAAK5D,EAAQ,EAAGrF,EAASS,EAASoI,EAAS7I,QAASA,EAASqF,EAAOA,IAElE,GADAe,EAASoD,EAAOX,EAASxD,IACrBe,GAAUA,aAAkBuC,EAAQ,OAAOvC,EAC/C,OAAO,IAAIuC,GAAO,GAEtBK,EAAWC,EAAOrL,KAAKiL,GAGzBtB,EAAOyB,EAASzB,KAChB,QAAS2B,EAAO3B,EAAK3J,KAAKoL,IAAWvD,KAAM,CACzC,IACEW,EAASoD,EAAON,EAAKxK,OACrB,MAAOkD,GAEP,MADA8G,EAAcM,GACRpH,EAER,GAAqB,iBAAVwE,GAAsBA,GAAUA,aAAkBuC,EAAQ,OAAOvC,EAC5E,OAAO,IAAIuC,GAAO,K,uBCxDtB,IAAIjI,EAAY,EAAQ,QAEpB+I,EAAM7F,KAAK6F,IACX9F,EAAMC,KAAKD,IAKf5G,EAAOD,QAAU,SAAUuI,EAAOrF,GAChC,IAAI0J,EAAUhJ,EAAU2E,GACxB,OAAOqE,EAAU,EAAID,EAAIC,EAAU1J,EAAQ,GAAK2D,EAAI+F,EAAS1J,K,uBCV/D,IAAIsG,EAAS,EAAQ,QACjBjE,EAA2B,EAAQ,QAAmDhB,EACtFoF,EAA8B,EAAQ,QACtChE,EAAW,EAAQ,QACnBkH,EAAY,EAAQ,QACpBC,EAA4B,EAAQ,QACpCC,EAAW,EAAQ,QAgBvB9M,EAAOD,QAAU,SAAUiM,EAAS3D,GAClC,IAGI0E,EAAQlJ,EAAQ5B,EAAK+K,EAAgBC,EAAgBC,EAHrDC,EAASnB,EAAQnI,OACjBuJ,EAASpB,EAAQzC,OACjB8D,EAASrB,EAAQjB,KASrB,GANElH,EADEuJ,EACO7D,EACA8D,EACA9D,EAAO4D,IAAWP,EAAUO,EAAQ,KAEnC5D,EAAO4D,IAAW,IAAI7K,UAE9BuB,EAAQ,IAAK5B,KAAOoG,EAAQ,CAQ9B,GAPA4E,EAAiB5E,EAAOpG,GACpB+J,EAAQsB,aACVJ,EAAa5H,EAAyBzB,EAAQ5B,GAC9C+K,EAAiBE,GAAcA,EAAWvL,OACrCqL,EAAiBnJ,EAAO5B,GAC/B8K,EAASD,EAASM,EAASnL,EAAMkL,GAAUE,EAAS,IAAM,KAAOpL,EAAK+J,EAAQhB,SAEzE+B,QAA6B7J,IAAnB8J,EAA8B,CAC3C,UAAWC,WAA0BD,EAAgB,SACrDH,EAA0BI,EAAgBD,IAGxChB,EAAQf,MAAS+B,GAAkBA,EAAe/B,OACpDvB,EAA4BuD,EAAgB,QAAQ,GAGtDvH,EAAS7B,EAAQ5B,EAAKgL,EAAgBjB,M,uBCnD1C,IAAIuB,EAAqB,EAAQ,QAC7BC,EAAc,EAAQ,QAEtBC,EAAaD,EAAYE,OAAO,SAAU,aAI9C3N,EAAQuE,EAAIlD,OAAOsD,qBAAuB,SAA6BT,GACrE,OAAOsJ,EAAmBtJ,EAAGwJ,K,kCCP/B,IAAIlK,EAAI,EAAQ,QACZoK,EAAa,EAAQ,QACrBtH,EAAyB,EAAQ,QACjCuH,EAAuB,EAAQ,QAInCrK,EAAE,CAAEM,OAAQ,SAAUC,OAAO,EAAMkH,QAAS4C,EAAqB,aAAe,CAC9EC,SAAU,SAAkBC,GAC1B,SAAUjL,OAAOwD,EAAuBhG,OACrC0N,QAAQJ,EAAWG,GAAexK,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,O,oCCV/E,IAAIwC,EAAW,EAAQ,QACnBU,EAAW,EAAQ,QACnBZ,EAAQ,EAAQ,QAChBsC,EAAQ,EAAQ,QAEhBhC,EAAY,WACZkI,EAAkBhH,OAAO1E,UACzB2L,EAAiBD,EAAgBlI,GAEjCoI,EAAc1I,GAAM,WAAc,MAA2D,QAApDyI,EAAepN,KAAK,CAAEwH,OAAQ,IAAKP,MAAO,SAEnFqG,EAAiBF,EAAehN,MAAQ6E,GAIxCoI,GAAeC,IACjBzI,EAASsB,OAAO1E,UAAWwD,GAAW,WACpC,IAAIqD,EAAI/C,EAAS/F,MACbmC,EAAIK,OAAOsG,EAAEd,QACb+F,EAAKjF,EAAErB,MACPxD,EAAIzB,YAAcK,IAAPkL,GAAoBjF,aAAanC,UAAY,UAAWgH,GAAmBlG,EAAMjH,KAAKsI,GAAKiF,GAC1G,MAAO,IAAM5L,EAAI,IAAM8B,IACtB,CAAE+J,QAAQ,K,kCCtBf,IAAIlE,EAAa,EAAQ,QACrBmE,EAAuB,EAAQ,QAC/B5L,EAAkB,EAAQ,QAC1BqC,EAAc,EAAQ,QAEtBoG,EAAUzI,EAAgB,WAE9B1C,EAAOD,QAAU,SAAUwO,GACzB,IAAIrE,EAAcC,EAAWoE,GACzBlN,EAAiBiN,EAAqBhK,EAEtCS,GAAemF,IAAgBA,EAAYiB,IAC7C9J,EAAe6I,EAAaiB,EAAS,CACnCqD,cAAc,EACdjN,IAAK,WAAc,OAAOlB,U,oCCdhC,IAAIkD,EAAI,EAAQ,QACZkL,EAAU,EAAQ,QAElBC,EAAgB,GAAGC,QACnB/L,EAAO,CAAC,EAAG,GAMfW,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,OAAQnI,OAAOD,KAAUC,OAAOD,EAAK+L,YAAc,CACnFA,QAAS,WAGP,OADIF,EAAQpO,QAAOA,KAAK4C,OAAS5C,KAAK4C,QAC/ByL,EAAc7N,KAAKR,U,uBCf9B,IAAIkD,EAAI,EAAQ,QACZkL,EAAU,EAAQ,QAItBlL,EAAE,CAAEM,OAAQ,QAASkH,MAAM,GAAQ,CACjC0D,QAASA,K,uBCNX,IAAIrI,EAAW,EAAQ,QAEvBpG,EAAOD,QAAU,SAAUkM,GACzB,IAAI2C,EAAe3C,EAAS,UAC5B,QAAqB/I,IAAjB0L,EACF,OAAOxI,EAASwI,EAAa/N,KAAKoL,IAAWtK,Q,uBCLjD,IAiBIkN,EAAOC,EAASC,EAjBhBxF,EAAS,EAAQ,QACjB/D,EAAQ,EAAQ,QAChBtD,EAAO,EAAQ,QACf8M,EAAO,EAAQ,QACfvJ,EAAgB,EAAQ,QACxBwJ,EAAS,EAAQ,QACjBC,EAAU,EAAQ,QAElBC,EAAW5F,EAAO4F,SAClBC,EAAM7F,EAAO8F,aACbC,EAAQ/F,EAAOgG,eACfC,EAAUjG,EAAOiG,QACjBC,EAAiBlG,EAAOkG,eACxBC,EAAWnG,EAAOmG,SAClBC,EAAU,EACVC,EAAQ,GACRC,EAAqB,qBAGrBC,EAAM,SAAUC,GAElB,GAAIH,EAAMrN,eAAewN,GAAK,CAC5B,IAAIhN,EAAK6M,EAAMG,UACRH,EAAMG,GACbhN,MAIAiN,EAAS,SAAUD,GACrB,OAAO,WACLD,EAAIC,KAIJE,EAAW,SAAUC,GACvBJ,EAAII,EAAMC,OAGRC,EAAO,SAAUL,GAEnBxG,EAAO8G,YAAYN,EAAK,GAAIZ,EAASmB,SAAW,KAAOnB,EAASoB,OAI7DnB,GAAQE,IACXF,EAAM,SAAsBrM,GAC1B,IAAIyN,EAAO,GACP9P,EAAI,EACR,MAAO4C,UAAUL,OAASvC,EAAG8P,EAAK7J,KAAKrD,UAAU5C,MAMjD,OALAkP,IAAQD,GAAW,YAEH,mBAAN5M,EAAmBA,EAAK0N,SAAS1N,IAAKM,WAAMH,EAAWsN,IAEjE3B,EAAMc,GACCA,GAETL,EAAQ,SAAwBS,UACvBH,EAAMG,IAGXb,EACFL,EAAQ,SAAUkB,GAChBP,EAAQkB,SAASV,EAAOD,KAGjBL,GAAYA,EAASiB,IAC9B9B,EAAQ,SAAUkB,GAChBL,EAASiB,IAAIX,EAAOD,KAIbN,IAAmBR,GAC5BH,EAAU,IAAIW,EACdV,EAAOD,EAAQ8B,MACf9B,EAAQ+B,MAAMC,UAAYb,EAC1BpB,EAAQ3M,EAAK6M,EAAKsB,YAAatB,EAAM,IAIrCxF,EAAOwH,kBACe,mBAAfV,cACN9G,EAAOyH,eACR7B,GAAkC,UAAtBA,EAASmB,WACpB9K,EAAM4K,IAEPvB,EAAQuB,EACR7G,EAAOwH,iBAAiB,UAAWd,GAAU,IAG7CpB,EADSgB,KAAsBpK,EAAc,UACrC,SAAUsK,GAChBf,EAAKiC,YAAYxL,EAAc,WAAWoK,GAAsB,WAC9Db,EAAKkC,YAAY7Q,MACjByP,EAAIC,KAKA,SAAUA,GAChBoB,WAAWnB,EAAOD,GAAK,KAK7B/P,EAAOD,QAAU,CACfqP,IAAKA,EACLE,MAAOA,I,uBCzGT,IAMI5H,EAAO0J,EANP7H,EAAS,EAAQ,QACjBsB,EAAY,EAAQ,QAEpB2E,EAAUjG,EAAOiG,QACjB6B,EAAW7B,GAAWA,EAAQ6B,SAC9BC,EAAKD,GAAYA,EAASC,GAG1BA,GACF5J,EAAQ4J,EAAGjK,MAAM,KACjB+J,EAAU1J,EAAM,GAAKA,EAAM,IAClBmD,IACTnD,EAAQmD,EAAUnD,MAAM,iBACnBA,GAASA,EAAM,IAAM,MACxBA,EAAQmD,EAAUnD,MAAM,iBACpBA,IAAO0J,EAAU1J,EAAM,MAI/B1H,EAAOD,QAAUqR,IAAYA,G,uBCnB7B,IAAIjH,EAAa,EAAQ,QAEzBnK,EAAOD,QAAUoK,EAAW,YAAa,cAAgB,I,uBCFzD,IAAIjB,EAAU,EAAQ,QAClBqI,EAAY,EAAQ,QACpB7O,EAAkB,EAAQ,QAE1B0H,EAAW1H,EAAgB,YAE/B1C,EAAOD,QAAU,SAAU6E,GACzB,QAAU1B,GAAN0B,EAAiB,OAAOA,EAAGwF,IAC1BxF,EAAG,eACH2M,EAAUrI,EAAQtE,M,uBCTzB,IAAIG,EAAc,EAAQ,QACtBuJ,EAAuB,EAAQ,QAC/BlI,EAAW,EAAQ,QACnBoL,EAAa,EAAQ,QAIzBxR,EAAOD,QAAUgF,EAAc3D,OAAO0J,iBAAmB,SAA0B7G,EAAGwN,GACpFrL,EAASnC,GACT,IAGIhC,EAHAyP,EAAOF,EAAWC,GAClBxO,EAASyO,EAAKzO,OACdqF,EAAQ,EAEZ,MAAOrF,EAASqF,EAAOgG,EAAqBhK,EAAEL,EAAGhC,EAAMyP,EAAKpJ,KAAUmJ,EAAWxP,IACjF,OAAOgC,I,uBCdT,IAAI0N,EAAW,EAAQ,QAEvB3R,EAAOD,QAAU,SAAU6E,GACzB,IAAK+M,EAAS/M,IAAc,OAAPA,EACnB,MAAM0E,UAAU,aAAezG,OAAO+B,GAAM,mBAC5C,OAAOA,I,oCCJX,IAAIgN,EAAS,EAAQ,QAAiCA,OAClDC,EAAsB,EAAQ,QAC9BC,EAAiB,EAAQ,QAEzBC,EAAkB,kBAClBC,EAAmBH,EAAoBzC,IACvC6C,EAAmBJ,EAAoBK,UAAUH,GAIrDD,EAAejP,OAAQ,UAAU,SAAUsP,GACzCH,EAAiB3R,KAAM,CACrB+R,KAAML,EACNvK,OAAQ3E,OAAOsP,GACf7J,MAAO,OAIR,WACD,IAGI+J,EAHAC,EAAQL,EAAiB5R,MACzBmH,EAAS8K,EAAM9K,OACfc,EAAQgK,EAAMhK,MAElB,OAAIA,GAASd,EAAOvE,OAAe,CAAEtB,WAAOuB,EAAWwF,MAAM,IAC7D2J,EAAQT,EAAOpK,EAAQc,GACvBgK,EAAMhK,OAAS+J,EAAMpP,OACd,CAAEtB,MAAO0Q,EAAO3J,MAAM,Q,qBC3B/B1I,EAAOD,QAAU,I,kCCCjB,IAAIwD,EAAI,EAAQ,QACZkG,EAAU,EAAQ,QAItBlG,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,OAAQ,GAAGvB,SAAWA,GAAW,CACjEA,QAASA,K,uBCPX,IAAIF,EAAS,EAAQ,QAErBvJ,EAAOD,QAAUwJ,G,uBCFjB,IAAI/D,EAAQ,EAAQ,QAChB0D,EAAU,EAAQ,QAElB7B,EAAQ,GAAGA,MAGfrH,EAAOD,QAAUyF,GAAM,WAGrB,OAAQpE,OAAO,KAAKmR,qBAAqB,MACtC,SAAU3N,GACb,MAAsB,UAAfsE,EAAQtE,GAAkByC,EAAMxG,KAAK+D,EAAI,IAAMxD,OAAOwD,IAC3DxD,Q,uBCZJ,IAAIsB,EAAkB,EAAQ,QAC1BV,EAAS,EAAQ,QACjBsM,EAAuB,EAAQ,QAE/BkE,EAAc9P,EAAgB,eAC9B+P,EAAiBhI,MAAMnI,eAIQY,GAA/BuP,EAAeD,IACjBlE,EAAqBhK,EAAEmO,EAAgBD,EAAa,CAClDhE,cAAc,EACd7M,MAAOK,EAAO,QAKlBhC,EAAOD,QAAU,SAAUkC,GACzBwQ,EAAeD,GAAavQ,IAAO,I,uBClBrC,IAAIsH,EAAS,EAAQ,QAErBvJ,EAAOD,QAAU,SAAUoD,EAAGC,GAC5B,IAAIsP,EAAUnJ,EAAOmJ,QACjBA,GAAWA,EAAQ7N,QACA,IAArBvB,UAAUL,OAAeyP,EAAQ7N,MAAM1B,GAAKuP,EAAQ7N,MAAM1B,EAAGC,M,uBCLjE,IAAIuO,EAAW,EAAQ,QACnBzI,EAAU,EAAQ,QAClBxG,EAAkB,EAAQ,QAE1BiQ,EAAQjQ,EAAgB,SAI5B1C,EAAOD,QAAU,SAAU6E,GACzB,IAAIuB,EACJ,OAAOwL,EAAS/M,UAAmC1B,KAA1BiD,EAAWvB,EAAG+N,MAA0BxM,EAA0B,UAAf+C,EAAQtE,M,qBCVtF,IAAIwB,EAAW,EAAQ,QACnBtD,EAAY,EAAQ,QACpBJ,EAAkB,EAAQ,QAE1ByI,EAAUzI,EAAgB,WAI9B1C,EAAOD,QAAU,SAAUkE,EAAG2O,GAC5B,IACIhK,EADAC,EAAIzC,EAASnC,GAAGqH,YAEpB,YAAapI,IAAN2F,QAAiD3F,IAA7B0F,EAAIxC,EAASyC,GAAGsC,IAAyByH,EAAqB9P,EAAU8F,K,qBCXrG,IAAIsG,EAAU,EAAQ,QAClBhE,EAAa,EAAQ,QACrB1F,EAAQ,EAAQ,QAEpBxF,EAAOD,UAAYqB,OAAOyR,wBAA0BrN,GAAM,WAExD,OAAQ/D,OAAOwJ,OAGZiE,EAAyB,KAAfhE,EAAoBA,EAAa,IAAMA,EAAa,Q,uBCTnE,IAAI9G,EAAkB,EAAQ,QAC1BV,EAAW,EAAQ,QACnBoP,EAAkB,EAAQ,QAG1BC,EAAe,SAAUC,GAC3B,OAAO,SAAUC,EAAOC,EAAIC,GAC1B,IAGIxR,EAHAsC,EAAIG,EAAgB6O,GACpBhQ,EAASS,EAASO,EAAEhB,QACpBqF,EAAQwK,EAAgBK,EAAWlQ,GAIvC,GAAI+P,GAAeE,GAAMA,GAAI,MAAOjQ,EAASqF,EAG3C,GAFA3G,EAAQsC,EAAEqE,KAEN3G,GAASA,EAAO,OAAO,OAEtB,KAAMsB,EAASqF,EAAOA,IAC3B,IAAK0K,GAAe1K,KAASrE,IAAMA,EAAEqE,KAAW4K,EAAI,OAAOF,GAAe1K,GAAS,EACnF,OAAQ0K,IAAgB,IAI9BhT,EAAOD,QAAU,CAGf8N,SAAUkF,GAAa,GAGvBhF,QAASgF,GAAa,K,oCC7BxB,IAAIxP,EAAI,EAAQ,QACZ6P,EAAU,EAAQ,QAAgCC,OAClDC,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,UAKvD/P,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,QAASuI,GAAuB,CAChEF,OAAQ,SAAgBpJ,GACtB,OAAOmJ,EAAQ/S,KAAM4J,EAAY3G,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,O,oCCX3E,IAAIhB,EAAO,EAAQ,QACfuB,EAAW,EAAQ,QACnB+P,EAA+B,EAAQ,QACvC/H,EAAwB,EAAQ,QAChC/H,EAAW,EAAQ,QACnB+P,EAAiB,EAAQ,QACzB/H,EAAoB,EAAQ,QAIhC1L,EAAOD,QAAU,SAAc2T,GAC7B,IAOIzQ,EAAQoG,EAAQ8C,EAAMF,EAAUzB,EAAM7I,EAPtCsC,EAAIR,EAASiQ,GACb7K,EAAmB,mBAARxI,KAAqBA,KAAOoK,MACvCkJ,EAAkBrQ,UAAUL,OAC5B2Q,EAAQD,EAAkB,EAAIrQ,UAAU,QAAKJ,EAC7C2Q,OAAoB3Q,IAAV0Q,EACVE,EAAiBpI,EAAkBzH,GACnCqE,EAAQ,EAIZ,GAFIuL,IAASD,EAAQ1R,EAAK0R,EAAOD,EAAkB,EAAIrQ,UAAU,QAAKJ,EAAW,SAE3DA,GAAlB4Q,GAAiCjL,GAAK4B,OAASgB,EAAsBqI,GAWvE,IAFA7Q,EAASS,EAASO,EAAEhB,QACpBoG,EAAS,IAAIR,EAAE5F,GACTA,EAASqF,EAAOA,IACpB3G,EAAQkS,EAAUD,EAAM3P,EAAEqE,GAAQA,GAASrE,EAAEqE,GAC7CmL,EAAepK,EAAQf,EAAO3G,QAThC,IAHAsK,EAAW6H,EAAejT,KAAKoD,GAC/BuG,EAAOyB,EAASzB,KAChBnB,EAAS,IAAIR,IACLsD,EAAO3B,EAAK3J,KAAKoL,IAAWvD,KAAMJ,IACxC3G,EAAQkS,EAAUL,EAA6BvH,EAAU2H,EAAO,CAACzH,EAAKxK,MAAO2G,IAAQ,GAAQ6D,EAAKxK,MAClG8R,EAAepK,EAAQf,EAAO3G,GAWlC,OADA0H,EAAOpG,OAASqF,EACTe,I,oCCtCT,IAAI0K,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BhU,EAAOD,QAAUgU,EAAW,OAAO,SAAUE,GAC3C,OAAO,WAAiB,OAAOA,EAAK5T,KAAMiD,UAAUL,OAASK,UAAU,QAAKJ,MAC3E8Q,I,uBCRH,IAAIrQ,EAAY,EAAQ,QAEpBiD,EAAMC,KAAKD,IAIf5G,EAAOD,QAAU,SAAUmU,GACzB,OAAOA,EAAW,EAAItN,EAAIjD,EAAUuQ,GAAW,kBAAoB,I,mBCPrE,IAAI3R,EAAiB,GAAGA,eAExBvC,EAAOD,QAAU,SAAU6E,EAAI3C,GAC7B,OAAOM,EAAe1B,KAAK+D,EAAI3C,K,qBCHjC,IAAIkS,EAAU,EAAQ,QAClBC,EAAQ,EAAQ,SAEnBpU,EAAOD,QAAU,SAAUkC,EAAKN,GAC/B,OAAOyS,EAAMnS,KAASmS,EAAMnS,QAAiBiB,IAAVvB,EAAsBA,EAAQ,MAChE,WAAY,IAAIgF,KAAK,CACtByK,QAAS,QACTvP,KAAMsS,EAAU,OAAS,SACzBE,UAAW,0C,uBCRb,IAAIlK,EAAa,EAAQ,QACrBmK,EAA4B,EAAQ,QACpCC,EAA8B,EAAQ,QACtCnO,EAAW,EAAQ,QAGvBpG,EAAOD,QAAUoK,EAAW,UAAW,YAAc,SAAiBvF,GACpE,IAAI8M,EAAO4C,EAA0BhQ,EAAE8B,EAASxB,IAC5CiO,EAAwB0B,EAA4BjQ,EACxD,OAAOuO,EAAwBnB,EAAKhE,OAAOmF,EAAsBjO,IAAO8M,I,mBCR1E1R,EAAOD,QAAU,iD,uBCDjB,IAAIsG,EAAyB,EAAQ,QACjCmO,EAAc,EAAQ,QAEtBC,EAAa,IAAMD,EAAc,IACjCE,EAAQ1N,OAAO,IAAMyN,EAAaA,EAAa,KAC/CE,EAAQ3N,OAAOyN,EAAaA,EAAa,MAGzC1B,EAAe,SAAU6B,GAC3B,OAAO,SAAU3B,GACf,IAAIzL,EAAS3E,OAAOwD,EAAuB4M,IAG3C,OAFW,EAAP2B,IAAUpN,EAASA,EAAOqN,QAAQH,EAAO,KAClC,EAAPE,IAAUpN,EAASA,EAAOqN,QAAQF,EAAO,KACtCnN,IAIXxH,EAAOD,QAAU,CAGf+U,MAAO/B,EAAa,GAGpBgC,IAAKhC,EAAa,GAGlBiC,KAAMjC,EAAa,K,uBC1BrB,IAAI5M,EAAW,EAAQ,QAEvBnG,EAAOD,QAAU,SAAU6E,GACzB,GAAIuB,EAASvB,GACX,MAAM0E,UAAU,iDAChB,OAAO1E,I,qBCLX5E,EAAOD,QAAU,SAAUkV,EAAQtT,GACjC,MAAO,CACLL,aAAuB,EAAT2T,GACdzG,eAAyB,EAATyG,GAChBC,WAAqB,EAATD,GACZtT,MAAOA,K,uBCLX,IAAIuH,EAAU,EAAQ,QAClBK,EAAS,EAAQ,QAErBvJ,EAAOD,QAAqC,WAA3BmJ,EAAQK,EAAOiG,U,kCCFhC,IAAIuE,EAAa,EAAQ,QACrBC,EAAmB,EAAQ,QAI/BhU,EAAOD,QAAUgU,EAAW,OAAO,SAAUE,GAC3C,OAAO,WAAiB,OAAOA,EAAK5T,KAAMiD,UAAUL,OAASK,UAAU,QAAKJ,MAC3E8Q,I,oCCPH,IAAIjP,EAAc,EAAQ,QACtBS,EAAQ,EAAQ,QAChBgM,EAAa,EAAQ,QACrB+C,EAA8B,EAAQ,QACtCvP,EAA6B,EAAQ,QACrCvB,EAAW,EAAQ,QACnB0R,EAAgB,EAAQ,QAExBC,EAAehU,OAAOiU,OACtBhU,EAAiBD,OAAOC,eAI5BrB,EAAOD,SAAWqV,GAAgB5P,GAAM,WAEtC,GAAIT,GAQiB,IARFqQ,EAAa,CAAEhS,EAAG,GAAKgS,EAAa/T,EAAe,GAAI,IAAK,CAC7EC,YAAY,EACZC,IAAK,WACHF,EAAehB,KAAM,IAAK,CACxBsB,MAAO,EACPL,YAAY,OAGd,CAAE8B,EAAG,KAAMA,EAAS,OAAO,EAE/B,IAAIe,EAAI,GACJmR,EAAI,GAEJC,EAAS9T,SACT+T,EAAW,uBAGf,OAFArR,EAAEoR,GAAU,EACZC,EAASnO,MAAM,IAAIoC,SAAQ,SAAUgM,GAAOH,EAAEG,GAAOA,KACf,GAA/BL,EAAa,GAAIjR,GAAGoR,IAAgB/D,EAAW4D,EAAa,GAAIE,IAAII,KAAK,KAAOF,KACpF,SAAgB3R,EAAQwE,GAC3B,IAAIsN,EAAIlS,EAASI,GACb8P,EAAkBrQ,UAAUL,OAC5BqF,EAAQ,EACRuK,EAAwB0B,EAA4BjQ,EACpDiO,EAAuBvN,EAA2BV,EACtD,MAAOqP,EAAkBrL,EAAO,CAC9B,IAIIrG,EAJA2G,EAAIuM,EAAc7R,UAAUgF,MAC5BoJ,EAAOmB,EAAwBrB,EAAW5I,GAAG8E,OAAOmF,EAAsBjK,IAAM4I,EAAW5I,GAC3F3F,EAASyO,EAAKzO,OACd2S,EAAI,EAER,MAAO3S,EAAS2S,EACd3T,EAAMyP,EAAKkE,KACN7Q,IAAewN,EAAqB1R,KAAK+H,EAAG3G,KAAM0T,EAAE1T,GAAO2G,EAAE3G,IAEpE,OAAO0T,GACPP,G,qBCnDJ,IAAIzR,EAAY,EAAQ,QACpB0C,EAAyB,EAAQ,QAGjC0M,EAAe,SAAU8C,GAC3B,OAAO,SAAU5C,EAAO6C,GACtB,IAGIC,EAAOC,EAHPpN,EAAI/F,OAAOwD,EAAuB4M,IAClCgD,EAAWtS,EAAUmS,GACrBI,EAAOtN,EAAE3F,OAEb,OAAIgT,EAAW,GAAKA,GAAYC,EAAaL,EAAoB,QAAK3S,GACtE6S,EAAQnN,EAAEuN,WAAWF,GACdF,EAAQ,OAAUA,EAAQ,OAAUE,EAAW,IAAMC,IACtDF,EAASpN,EAAEuN,WAAWF,EAAW,IAAM,OAAUD,EAAS,MAC1DH,EAAoBjN,EAAEgJ,OAAOqE,GAAYF,EACzCF,EAAoBjN,EAAE9D,MAAMmR,EAAUA,EAAW,GAA+BD,EAAS,OAAlCD,EAAQ,OAAU,IAA0B,SAI7G/V,EAAOD,QAAU,CAGfqW,OAAQrD,GAAa,GAGrBnB,OAAQmB,GAAa,K,kCCxBvB,IAAI1R,EAAiB,EAAQ,QAAuCiD,EAChEtC,EAAS,EAAQ,QACjBqU,EAAc,EAAQ,QACtBnU,EAAO,EAAQ,QACfoU,EAAa,EAAQ,QACrBC,EAAU,EAAQ,QAClBzE,EAAiB,EAAQ,QACzB0E,EAAa,EAAQ,QACrBzR,EAAc,EAAQ,QACtB0R,EAAU,EAAQ,QAAkCA,QACpD5E,EAAsB,EAAQ,QAE9BG,EAAmBH,EAAoBzC,IACvCsH,EAAyB7E,EAAoBK,UAEjDlS,EAAOD,QAAU,CACf4W,eAAgB,SAAUC,EAASrI,EAAkBsI,EAAQC,GAC3D,IAAIjO,EAAI+N,GAAQ,SAAU5T,EAAM8I,GAC9BwK,EAAWtT,EAAM6F,EAAG0F,GACpByD,EAAiBhP,EAAM,CACrBoP,KAAM7D,EACNjG,MAAOtG,EAAO,MACd+T,WAAO7S,EACP6T,UAAM7T,EACNgT,KAAM,IAEHnR,IAAa/B,EAAKkT,KAAO,QACdhT,GAAZ4I,GAAuByK,EAAQzK,EAAU9I,EAAK8T,GAAQ,CAAE9T,KAAMA,EAAMoJ,WAAYyK,OAGlF5E,EAAmByE,EAAuBnI,GAE1CrO,EAAS,SAAU8C,EAAMf,EAAKN,GAChC,IAEIqV,EAAU1O,EAFVgK,EAAQL,EAAiBjP,GACzBiU,EAAQC,EAASlU,EAAMf,GAqBzB,OAlBEgV,EACFA,EAAMtV,MAAQA,GAGd2Q,EAAMyE,KAAOE,EAAQ,CACnB3O,MAAOA,EAAQmO,EAAQxU,GAAK,GAC5BA,IAAKA,EACLN,MAAOA,EACPqV,SAAUA,EAAW1E,EAAMyE,KAC3BvM,UAAMtH,EACNiU,SAAS,GAEN7E,EAAMyD,QAAOzD,EAAMyD,MAAQkB,GAC5BD,IAAUA,EAASxM,KAAOyM,GAC1BlS,EAAauN,EAAM4D,OAClBlT,EAAKkT,OAEI,MAAV5N,IAAegK,EAAMhK,MAAMA,GAAS2O,IACjCjU,GAGPkU,EAAW,SAAUlU,EAAMf,GAC7B,IAGIgV,EAHA3E,EAAQL,EAAiBjP,GAEzBsF,EAAQmO,EAAQxU,GAEpB,GAAc,MAAVqG,EAAe,OAAOgK,EAAMhK,MAAMA,GAEtC,IAAK2O,EAAQ3E,EAAMyD,MAAOkB,EAAOA,EAAQA,EAAMzM,KAC7C,GAAIyM,EAAMhV,KAAOA,EAAK,OAAOgV,GAiFjC,OA7EAZ,EAAYxN,EAAEvG,UAAW,CAGvBgN,MAAO,WACL,IAAItM,EAAO3C,KACPiS,EAAQL,EAAiBjP,GACzBmN,EAAOmC,EAAMhK,MACb2O,EAAQ3E,EAAMyD,MAClB,MAAOkB,EACLA,EAAME,SAAU,EACZF,EAAMD,WAAUC,EAAMD,SAAWC,EAAMD,SAASxM,UAAOtH,UACpDiN,EAAK8G,EAAM3O,OAClB2O,EAAQA,EAAMzM,KAEhB8H,EAAMyD,MAAQzD,EAAMyE,UAAO7T,EACvB6B,EAAauN,EAAM4D,KAAO,EACzBlT,EAAKkT,KAAO,GAInB,OAAU,SAAUjU,GAClB,IAAIe,EAAO3C,KACPiS,EAAQL,EAAiBjP,GACzBiU,EAAQC,EAASlU,EAAMf,GAC3B,GAAIgV,EAAO,CACT,IAAIzM,EAAOyM,EAAMzM,KACb4M,EAAOH,EAAMD,gBACV1E,EAAMhK,MAAM2O,EAAM3O,OACzB2O,EAAME,SAAU,EACZC,IAAMA,EAAK5M,KAAOA,GAClBA,IAAMA,EAAKwM,SAAWI,GACtB9E,EAAMyD,OAASkB,IAAO3E,EAAMyD,MAAQvL,GACpC8H,EAAMyE,MAAQE,IAAO3E,EAAMyE,KAAOK,GAClCrS,EAAauN,EAAM4D,OAClBlT,EAAKkT,OACV,QAASe,GAIbxN,QAAS,SAAiBQ,GACxB,IAEIgN,EAFA3E,EAAQL,EAAiB5R,MACzBgX,EAAgBnV,EAAK+H,EAAY3G,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,EAAW,GAEtF,MAAO+T,EAAQA,EAAQA,EAAMzM,KAAO8H,EAAMyD,MAAO,CAC/CsB,EAAcJ,EAAMtV,MAAOsV,EAAMhV,IAAK5B,MAEtC,MAAO4W,GAASA,EAAME,QAASF,EAAQA,EAAMD,WAKjD7R,IAAK,SAAalD,GAChB,QAASiV,EAAS7W,KAAM4B,MAI5BoU,EAAYxN,EAAEvG,UAAWuU,EAAS,CAEhCtV,IAAK,SAAaU,GAChB,IAAIgV,EAAQC,EAAS7W,KAAM4B,GAC3B,OAAOgV,GAASA,EAAMtV,OAGxByN,IAAK,SAAanN,EAAKN,GACrB,OAAOzB,EAAOG,KAAc,IAAR4B,EAAY,EAAIA,EAAKN,KAEzC,CAEF2V,IAAK,SAAa3V,GAChB,OAAOzB,EAAOG,KAAMsB,EAAkB,IAAVA,EAAc,EAAIA,EAAOA,MAGrDoD,GAAa1D,EAAewH,EAAEvG,UAAW,OAAQ,CACnDf,IAAK,WACH,OAAO0Q,EAAiB5R,MAAM6V,QAG3BrN,GAET0O,UAAW,SAAU1O,EAAG0F,EAAkBsI,GACxC,IAAIW,EAAgBjJ,EAAmB,YACnCkJ,EAA6Bf,EAAuBnI,GACpDmJ,EAA2BhB,EAAuBc,GAGtD1F,EAAejJ,EAAG0F,GAAkB,SAAU4D,EAAUwF,GACtD3F,EAAiB3R,KAAM,CACrB+R,KAAMoF,EACN3T,OAAQsO,EACRG,MAAOmF,EAA2BtF,GAClCwF,KAAMA,EACNZ,UAAM7T,OAEP,WACD,IAAIoP,EAAQoF,EAAyBrX,MACjCsX,EAAOrF,EAAMqF,KACbV,EAAQ3E,EAAMyE,KAElB,MAAOE,GAASA,EAAME,QAASF,EAAQA,EAAMD,SAE7C,OAAK1E,EAAMzO,SAAYyO,EAAMyE,KAAOE,EAAQA,EAAQA,EAAMzM,KAAO8H,EAAMA,MAAMyD,OAMjE,QAAR4B,EAAuB,CAAEhW,MAAOsV,EAAMhV,IAAKyG,MAAM,GACzC,UAARiP,EAAyB,CAAEhW,MAAOsV,EAAMtV,MAAO+G,MAAM,GAClD,CAAE/G,MAAO,CAACsV,EAAMhV,IAAKgV,EAAMtV,OAAQ+G,MAAM,IAN9C4J,EAAMzO,YAASX,EACR,CAAEvB,WAAOuB,EAAWwF,MAAM,MAMlCmO,EAAS,UAAY,UAAWA,GAAQ,GAG3CL,EAAWjI,M,uBCvLf,IAAIoD,EAAW,EAAQ,QACnBlD,EAAU,EAAQ,QAClB/L,EAAkB,EAAQ,QAE1ByI,EAAUzI,EAAgB,WAI9B1C,EAAOD,QAAU,SAAU6X,EAAe3U,GACxC,IAAI4F,EASF,OARE4F,EAAQmJ,KACV/O,EAAI+O,EAActM,YAEF,mBAALzC,GAAoBA,IAAM4B,QAASgE,EAAQ5F,EAAEvG,WAC/CqP,EAAS9I,KAChBA,EAAIA,EAAEsC,GACI,OAANtC,IAAYA,OAAI3F,IAH+C2F,OAAI3F,GAKlE,SAAWA,IAAN2F,EAAkB4B,MAAQ5B,GAAc,IAAX5F,EAAe,EAAIA,K,uBClBhE,IAUImM,EAAK7N,EAAK4D,EAVV0S,EAAkB,EAAQ,QAC1BtO,EAAS,EAAQ,QACjBoI,EAAW,EAAQ,QACnBjI,EAA8B,EAAQ,QACtCoO,EAAY,EAAQ,QACpBC,EAAS,EAAQ,QACjBC,EAAY,EAAQ,QACpBvK,EAAa,EAAQ,QAErBwK,EAAU1O,EAAO0O,QAGjBC,EAAU,SAAUtT,GACtB,OAAOO,EAAIP,GAAMrD,EAAIqD,GAAMwK,EAAIxK,EAAI,KAGjCsN,EAAY,SAAU0C,GACxB,OAAO,SAAUhQ,GACf,IAAI0N,EACJ,IAAKX,EAAS/M,KAAQ0N,EAAQ/Q,EAAIqD,IAAKwN,OAASwC,EAC9C,MAAMtL,UAAU,0BAA4BsL,EAAO,aACnD,OAAOtC,IAIb,GAAIuF,EAAiB,CACnB,IAAIzD,EAAQ2D,EAAOzF,QAAUyF,EAAOzF,MAAQ,IAAI2F,GAC5CE,EAAQ/D,EAAM7S,IACd6W,EAAQhE,EAAMjP,IACdkT,EAAQjE,EAAMhF,IAClBA,EAAM,SAAUxK,EAAI0T,GAGlB,OAFAA,EAASC,OAAS3T,EAClByT,EAAMxX,KAAKuT,EAAOxP,EAAI0T,GACfA,GAET/W,EAAM,SAAUqD,GACd,OAAOuT,EAAMtX,KAAKuT,EAAOxP,IAAO,IAElCO,EAAM,SAAUP,GACd,OAAOwT,EAAMvX,KAAKuT,EAAOxP,QAEtB,CACL,IAAI4T,EAAQR,EAAU,SACtBvK,EAAW+K,IAAS,EACpBpJ,EAAM,SAAUxK,EAAI0T,GAGlB,OAFAA,EAASC,OAAS3T,EAClB8E,EAA4B9E,EAAI4T,EAAOF,GAChCA,GAET/W,EAAM,SAAUqD,GACd,OAAOkT,EAAUlT,EAAI4T,GAAS5T,EAAG4T,GAAS,IAE5CrT,EAAM,SAAUP,GACd,OAAOkT,EAAUlT,EAAI4T,IAIzBxY,EAAOD,QAAU,CACfqP,IAAKA,EACL7N,IAAKA,EACL4D,IAAKA,EACL+S,QAASA,EACThG,UAAWA,I,oCC7Db,IAAI3O,EAAI,EAAQ,QACZgG,EAAS,EAAQ,QACjBuD,EAAW,EAAQ,QACnBpH,EAAW,EAAQ,QACnB+S,EAAyB,EAAQ,QACjClC,EAAU,EAAQ,QAClBD,EAAa,EAAQ,QACrB3E,EAAW,EAAQ,QACnBnM,EAAQ,EAAQ,QAChBkT,EAA8B,EAAQ,QACtCC,EAAiB,EAAQ,QACzBC,EAAoB,EAAQ,QAEhC5Y,EAAOD,QAAU,SAAUwO,EAAkBqI,EAASiC,GACpD,IAAIhC,GAA8C,IAArCtI,EAAiBR,QAAQ,OAClC+K,GAAgD,IAAtCvK,EAAiBR,QAAQ,QACnC+I,EAAQD,EAAS,MAAQ,MACzBkC,EAAoBxP,EAAOgF,GAC3ByK,EAAkBD,GAAqBA,EAAkBzW,UACzD4H,EAAc6O,EACdE,EAAW,GAEXC,EAAY,SAAUC,GACxB,IAAIC,EAAeJ,EAAgBG,GACnCzT,EAASsT,EAAiBG,EACjB,OAAPA,EAAe,SAAaxX,GAE1B,OADAyX,EAAavY,KAAKR,KAAgB,IAAVsB,EAAc,EAAIA,GACnCtB,MACE,UAAP8Y,EAAkB,SAAUlX,GAC9B,QAAO6W,IAAYnH,EAAS1P,KAAemX,EAAavY,KAAKR,KAAc,IAAR4B,EAAY,EAAIA,IAC1E,OAAPkX,EAAe,SAAalX,GAC9B,OAAO6W,IAAYnH,EAAS1P,QAAOiB,EAAYkW,EAAavY,KAAKR,KAAc,IAAR4B,EAAY,EAAIA,IAC9E,OAAPkX,EAAe,SAAalX,GAC9B,QAAO6W,IAAYnH,EAAS1P,KAAemX,EAAavY,KAAKR,KAAc,IAAR4B,EAAY,EAAIA,IACjF,SAAaA,EAAKN,GAEpB,OADAyX,EAAavY,KAAKR,KAAc,IAAR4B,EAAY,EAAIA,EAAKN,GACtCtB,QAKTgZ,EAAUvM,EACZyB,EAC4B,mBAArBwK,KAAqCD,GAAWE,EAAgBvP,UAAYjE,GAAM,YACvF,IAAIuT,GAAoBO,UAAU9O,YAItC,GAAI6O,EAEFnP,EAAc2O,EAAOlC,eAAeC,EAASrI,EAAkBsI,EAAQC,GACvE2B,EAAuBc,UAAW,OAC7B,GAAIzM,EAASyB,GAAkB,GAAO,CAC3C,IAAIiL,EAAW,IAAItP,EAEfuP,EAAiBD,EAAS1C,GAAOgC,EAAU,IAAM,EAAG,IAAMU,EAE1DE,EAAuBlU,GAAM,WAAcgU,EAASrU,IAAI,MAGxDwU,EAAmBjB,GAA4B,SAAU5M,GAAY,IAAIiN,EAAkBjN,MAE3F8N,GAAcd,GAAWtT,GAAM,WAEjC,IAAIqU,EAAY,IAAId,EAChBzQ,EAAQ,EACZ,MAAOA,IAASuR,EAAU/C,GAAOxO,EAAOA,GACxC,OAAQuR,EAAU1U,KAAK,MAGpBwU,IACHzP,EAAc0M,GAAQ,SAAUkD,EAAOhO,GACrCwK,EAAWwD,EAAO5P,EAAaqE,GAC/B,IAAIvL,EAAO4V,EAAkB,IAAIG,EAAqBe,EAAO5P,GAE7D,YADgBhH,GAAZ4I,GAAuByK,EAAQzK,EAAU9I,EAAK8T,GAAQ,CAAE9T,KAAMA,EAAMoJ,WAAYyK,IAC7E7T,KAETkH,EAAY5H,UAAY0W,EACxBA,EAAgB1N,YAAcpB,IAG5BwP,GAAwBE,KAC1BV,EAAU,UACVA,EAAU,OACVrC,GAAUqC,EAAU,SAGlBU,GAAcH,IAAgBP,EAAUpC,GAGxCgC,GAAWE,EAAgB1J,cAAc0J,EAAgB1J,MAU/D,OAPA2J,EAAS1K,GAAoBrE,EAC7B3G,EAAE,CAAEgG,QAAQ,EAAMyB,OAAQd,GAAe6O,GAAqBE,GAE9DN,EAAezO,EAAaqE,GAEvBuK,GAASD,EAAOtB,UAAUrN,EAAaqE,EAAkBsI,GAEvD3M,I,uBCrGT,IAAIX,EAAS,EAAQ,QACjBG,EAA8B,EAAQ,QACtCvE,EAAM,EAAQ,QACdyH,EAAY,EAAQ,QACpBmN,EAAgB,EAAQ,QACxBlI,EAAsB,EAAQ,QAE9BI,EAAmBJ,EAAoBtQ,IACvCyY,EAAuBnI,EAAoBqG,QAC3C+B,EAAWpX,OAAOA,QAAQwE,MAAM,WAEnCrH,EAAOD,QAAU,SAAUkE,EAAGhC,EAAKN,EAAOqK,GACzC,IAGIsG,EAHAjE,IAASrC,KAAYA,EAAQqC,OAC7B6L,IAASlO,KAAYA,EAAQ1K,WAC7BgM,IAActB,KAAYA,EAAQsB,YAElB,mBAAT3L,IACS,iBAAPM,GAAoBkD,EAAIxD,EAAO,SACxC+H,EAA4B/H,EAAO,OAAQM,GAE7CqQ,EAAQ0H,EAAqBrY,GACxB2Q,EAAMjK,SACTiK,EAAMjK,OAAS4R,EAASvE,KAAmB,iBAAPzT,EAAkBA,EAAM,MAG5DgC,IAAMsF,GAIE8E,GAEAf,GAAerJ,EAAEhC,KAC3BiY,GAAS,UAFFjW,EAAEhC,GAIPiY,EAAQjW,EAAEhC,GAAON,EAChB+H,EAA4BzF,EAAGhC,EAAKN,IATnCuY,EAAQjW,EAAEhC,GAAON,EAChBiL,EAAU3K,EAAKN,KAUrB8O,SAASnO,UAAW,YAAY,WACjC,MAAsB,mBAARjC,MAAsB4R,EAAiB5R,MAAMgI,QAAU0R,EAAc1Z,U,qBCtCrF,IAAIsR,EAAW,EAAQ,QACnBwI,EAAiB,EAAQ,QAG7Bna,EAAOD,QAAU,SAAUkT,EAAO6G,EAAOM,GACvC,IAAIC,EAAWC,EAUf,OAPEH,GAE0C,mBAAlCE,EAAYP,EAAMxO,cAC1B+O,IAAcD,GACdzI,EAAS2I,EAAqBD,EAAU/X,YACxCgY,IAAuBF,EAAQ9X,WAC/B6X,EAAelH,EAAOqH,GACjBrH,I,mBCfTlT,EAAQuE,EAAIlD,OAAOyR,uB,uBCAnB,IAAI0H,EAAO,EAAQ,QACfpV,EAAM,EAAQ,QACdqV,EAA+B,EAAQ,QACvCnZ,EAAiB,EAAQ,QAAuCiD,EAEpEtE,EAAOD,QAAU,SAAU0a,GACzB,IAAIhZ,EAAS8Y,EAAK9Y,SAAW8Y,EAAK9Y,OAAS,IACtC0D,EAAI1D,EAAQgZ,IAAOpZ,EAAeI,EAAQgZ,EAAM,CACnD9Y,MAAO6Y,EAA6BlW,EAAEmW,O,mBCP1Cza,EAAOD,QAAU,CACf,cACA,iBACA,gBACA,uBACA,iBACA,WACA,Y,uBCRF,IAAIwD,EAAI,EAAQ,QACZwB,EAAc,EAAQ,QACtB2V,EAA6B,EAAQ,QAIzCnX,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,QAASjG,EAAakG,MAAOlG,GAAe,CAC5E1D,eAAgBqZ,EAA2BpW,K,uBCP7C,IAAI+B,EAAyB,EAAQ,QAIrCrG,EAAOD,QAAU,SAAUmU,GACzB,OAAO9S,OAAOiF,EAAuB6N,M,uBCLvC,IAmDIyG,EAnDAvU,EAAW,EAAQ,QACnB0E,EAAmB,EAAQ,QAC3B0C,EAAc,EAAQ,QACtBC,EAAa,EAAQ,QACrBuB,EAAO,EAAQ,QACf4L,EAAwB,EAAQ,QAChC5C,EAAY,EAAQ,QAEpB6C,EAAK,IACLC,EAAK,IACLC,EAAY,YACZC,EAAS,SACTC,EAAWjD,EAAU,YAErBkD,EAAmB,aAEnBC,EAAY,SAAUC,GACxB,OAAON,EAAKE,EAASH,EAAKO,EAAUN,EAAK,IAAME,EAASH,GAItDQ,EAA4B,SAAUV,GACxCA,EAAgBW,MAAMH,EAAU,KAChCR,EAAgBY,QAChB,IAAIC,EAAOb,EAAgBc,aAAara,OAExC,OADAuZ,EAAkB,KACXa,GAILE,EAA2B,WAE7B,IAEIC,EAFAC,EAAShB,EAAsB,UAC/BiB,EAAK,OAASb,EAAS,IAU3B,OARAY,EAAOE,MAAMC,QAAU,OACvB/M,EAAKiC,YAAY2K,GAEjBA,EAAOI,IAAMnZ,OAAOgZ,GACpBF,EAAiBC,EAAOK,cAAcC,SACtCP,EAAeQ,OACfR,EAAeL,MAAMH,EAAU,sBAC/BQ,EAAeJ,QACRI,EAAeS,GASpBC,EAAkB,WACpB,IAEE1B,EAAkBuB,SAASI,QAAU,IAAIC,cAAc,YACvD,MAAO1X,IACTwX,EAAkB1B,EAAkBU,EAA0BV,GAAmBe,IACjF,IAAIzY,EAASuK,EAAYvK,OACzB,MAAOA,WAAiBoZ,EAAgBtB,GAAWvN,EAAYvK,IAC/D,OAAOoZ,KAGT5O,EAAWwN,IAAY,EAIvBjb,EAAOD,QAAUqB,OAAOY,QAAU,SAAgBiC,EAAGwN,GACnD,IAAIpI,EAQJ,OAPU,OAANpF,GACFiX,EAAiBH,GAAa3U,EAASnC,GACvCoF,EAAS,IAAI6R,EACbA,EAAiBH,GAAa,KAE9B1R,EAAO4R,GAAYhX,GACdoF,EAASgT,SACMnZ,IAAfuO,EAA2BpI,EAASyB,EAAiBzB,EAAQoI,K,oCC3EtE,IAAIlO,EAAI,EAAQ,QACZiZ,EAA4B,EAAQ,QACpCC,EAAiB,EAAQ,QACzBtC,EAAiB,EAAQ,QACzBxB,EAAiB,EAAQ,QACzBjP,EAA8B,EAAQ,QACtChE,EAAW,EAAQ,QACnBhD,EAAkB,EAAQ,QAC1ByR,EAAU,EAAQ,QAClB5C,EAAY,EAAQ,QACpBmL,EAAgB,EAAQ,QAExBC,EAAoBD,EAAcC,kBAClCC,EAAyBF,EAAcE,uBACvCxS,EAAW1H,EAAgB,YAC3Bma,EAAO,OACPC,EAAS,SACTC,EAAU,UAEVC,EAAa,WAAc,OAAO3c,MAEtCL,EAAOD,QAAU,SAAUkd,EAAUxC,EAAMyC,EAAqB1S,EAAM2S,EAASC,EAAQrQ,GACrFyP,EAA0BU,EAAqBzC,EAAMjQ,GAErD,IAkBI6S,EAA0BC,EAASnE,EAlBnCoE,EAAqB,SAAUC,GACjC,GAAIA,IAASL,GAAWM,EAAiB,OAAOA,EAChD,IAAKb,GAA0BY,KAAQE,EAAmB,OAAOA,EAAkBF,GACnF,OAAQA,GACN,KAAKX,EAAM,OAAO,WAAkB,OAAO,IAAIK,EAAoB7c,KAAMmd,IACzE,KAAKV,EAAQ,OAAO,WAAoB,OAAO,IAAII,EAAoB7c,KAAMmd,IAC7E,KAAKT,EAAS,OAAO,WAAqB,OAAO,IAAIG,EAAoB7c,KAAMmd,IAC/E,OAAO,WAAc,OAAO,IAAIN,EAAoB7c,QAGpDsC,EAAgB8X,EAAO,YACvBkD,GAAwB,EACxBD,EAAoBT,EAAS3a,UAC7Bsb,EAAiBF,EAAkBtT,IAClCsT,EAAkB,eAClBP,GAAWO,EAAkBP,GAC9BM,GAAmBb,GAA0BgB,GAAkBL,EAAmBJ,GAClFU,EAA4B,SAARpD,GAAkBiD,EAAkBpE,SAA4BsE,EAiCxF,GA7BIC,IACFR,EAA2BZ,EAAeoB,EAAkBhd,KAAK,IAAIoc,IACjEN,IAAsBvb,OAAOkB,WAAa+a,EAAyB7S,OAChE2J,GAAWsI,EAAeY,KAA8BV,IACvDxC,EACFA,EAAekD,EAA0BV,GACa,mBAAtCU,EAAyBjT,IACzCV,EAA4B2T,EAA0BjT,EAAU4S,IAIpErE,EAAe0E,EAA0B1a,GAAe,GAAM,GAC1DwR,IAAS5C,EAAU5O,GAAiBqa,KAKxCG,GAAWL,GAAUc,GAAkBA,EAAe3c,OAAS6b,IACjEa,GAAwB,EACxBF,EAAkB,WAAoB,OAAOG,EAAe/c,KAAKR,QAI7D8T,IAAWpH,GAAW2Q,EAAkBtT,KAAcqT,GAC1D/T,EAA4BgU,EAAmBtT,EAAUqT,GAE3DlM,EAAUkJ,GAAQgD,EAGdN,EAMF,GALAG,EAAU,CACRQ,OAAQP,EAAmBT,GAC3BpL,KAAM0L,EAASK,EAAkBF,EAAmBV,GACpDvD,QAASiE,EAAmBR,IAE1BhQ,EAAQ,IAAKoM,KAAOmE,GAClBV,GAA0Be,KAA2BxE,KAAOuE,KAC9DhY,EAASgY,EAAmBvE,EAAKmE,EAAQnE,SAEtC5V,EAAE,CAAEM,OAAQ4W,EAAM3W,OAAO,EAAMkH,OAAQ4R,GAA0Be,GAAyBL,GAGnG,OAAOA,I,uBCxFT,IAAI/T,EAAS,EAAQ,QACjBwQ,EAAgB,EAAQ,QAExB9B,EAAU1O,EAAO0O,QAErBjY,EAAOD,QAA6B,oBAAZkY,GAA0B,cAAcrV,KAAKmX,EAAc9B,K,uBCLnF,IAAItG,EAAW,EAAQ,QAEvB3R,EAAOD,QAAU,SAAU6E,GACzB,IAAK+M,EAAS/M,GACZ,MAAM0E,UAAUzG,OAAO+B,GAAM,qBAC7B,OAAOA,I,uBCLX,IAAIY,EAAQ,EAAQ,QAGpBxF,EAAOD,SAAWyF,GAAM,WACtB,OAA8E,GAAvEpE,OAAOC,eAAe,GAAI,EAAG,CAAEE,IAAK,WAAc,OAAO,KAAQ,O,kCCH1E,IAAI2D,EAAc,EAAQ,QACtBoJ,EAAuB,EAAQ,QAC/BrJ,EAA2B,EAAQ,QAEvCjF,EAAOD,QAAU,SAAUqC,EAAQH,EAAKN,GACtC,IAAIoc,EAAc7Y,EAAYjD,GAC1B8b,KAAe3b,EAAQkM,EAAqBhK,EAAElC,EAAQ2b,EAAa9Y,EAAyB,EAAGtD,IAC9FS,EAAO2b,GAAepc,I,qBCR7B3B,EAAOD,QAAU,SAAU6E,GACzB,MAAqB,kBAAPA,EAAyB,OAAPA,EAA4B,oBAAPA,I,qBCDvD,WAMC,SAAU/E,EAAMC,GAEb,EAAO,GAAI,EAAF,EAAS,kEAFtB,CAQkB,qBAATM,MAAuBA,MAAa,WAC3C,SAAS4d,IACP,IAAI9Q,EAAa9L,OAAOkE,yBAAyB4W,SAAU,iBAE3D,IAAKhP,GAAc,kBAAmBgP,UAAYA,SAAS+B,cACzD,OAAO/B,SAAS+B,cAIlB,GAAI/Q,GAAcA,EAAW3L,MAAQyc,GAAoB9B,SAAS+B,cAChE,OAAO/B,SAAS+B,cAKlB,IACE,MAAM,IAAIC,MAEZ,MAAOC,GAEL,IAMEC,EACAC,EACAC,EAREC,EAAgB,kCAClBC,EAAgB,6BAChBC,EAAeF,EAAcnV,KAAK+U,EAAIO,QAAUF,EAAcpV,KAAK+U,EAAIO,OACvEC,EAAkBF,GAAgBA,EAAa,KAAO,EACtDG,EAAQH,GAAgBA,EAAa,KAAO,EAC5CI,EAAkB3C,SAAS/M,SAAS2P,KAAKjK,QAAQqH,SAAS/M,SAAS4P,KAAM,IAIzEC,EAAU9C,SAAS+C,qBAAqB,UAEtCN,IAAmBE,IACrBT,EAAalC,SAASgD,gBAAgBC,UACtCd,EAA2B,IAAIrX,OAAO,sBAAwB4X,EAAO,GAAK,iDAAkD,KAC5HN,EAAqBF,EAAWvJ,QAAQwJ,EAA0B,MAAMrJ,QAG1E,IAAK,IAAItU,EAAI,EAAGA,EAAIse,EAAQ/b,OAAQvC,IAAK,CAEvC,GAA8B,gBAA1Bse,EAAQte,GAAG0e,WACb,OAAOJ,EAAQte,GAIjB,GAAIse,EAAQte,GAAGsb,MAAQ2C,EACrB,OAAOK,EAAQte,GAIjB,GACEie,IAAmBE,GACnBG,EAAQte,GAAG2e,WACXL,EAAQte,GAAG2e,UAAUrK,SAAWsJ,EAEhC,OAAOU,EAAQte,GAKnB,OAAO,MAIX,OAAOsd,M,qBC7ET,IAAI5J,EAAQ,EAAQ,QAEhBkL,EAAmB7O,SAASlM,SAGE,mBAAvB6P,EAAM2F,gBACf3F,EAAM2F,cAAgB,SAAUnV,GAC9B,OAAO0a,EAAiBze,KAAK+D,KAIjC5E,EAAOD,QAAUqU,EAAM2F,e,oCCVvB,IAAInI,EAAS,EAAQ,QAAiCA,OAItD5R,EAAOD,QAAU,SAAU6I,EAAGN,EAAOL,GACnC,OAAOK,GAASL,EAAU2J,EAAOhJ,EAAGN,GAAOrF,OAAS,K,qBCNtDjD,EAAOD,QAAUO,G,qBCAjB,IAAIyP,EAAK,EACLwP,EAAU1Y,KAAK2Y,SAEnBxf,EAAOD,QAAU,SAAUkC,GACzB,MAAO,UAAYY,YAAeK,IAARjB,EAAoB,GAAKA,GAAO,QAAU8N,EAAKwP,GAAShb,SAAS,M,qBCJ7F,IAAIQ,EAAc,EAAQ,QACtBuJ,EAAuB,EAAQ,QAC/BrJ,EAA2B,EAAQ,QAEvCjF,EAAOD,QAAUgF,EAAc,SAAU3C,EAAQH,EAAKN,GACpD,OAAO2M,EAAqBhK,EAAElC,EAAQH,EAAKgD,EAAyB,EAAGtD,KACrE,SAAUS,EAAQH,EAAKN,GAEzB,OADAS,EAAOH,GAAON,EACPS,I,kCCPT,IAAIqd,EAAc,EAAQ,QACtBC,EAAgB,EAAQ,QAExBC,EAAa3Y,OAAO1E,UAAU8G,KAI9BwW,EAAgB/c,OAAOP,UAAUuS,QAEjCgL,EAAcF,EAEdG,EAA2B,WAC7B,IAAIC,EAAM,IACNC,EAAM,MAGV,OAFAL,EAAW9e,KAAKkf,EAAK,KACrBJ,EAAW9e,KAAKmf,EAAK,KACI,IAAlBD,EAAIpY,WAAqC,IAAlBqY,EAAIrY,UALL,GAQ3BsY,EAAgBP,EAAcO,eAAiBP,EAAcQ,aAI7DC,OAAuCjd,IAAvB,OAAOkG,KAAK,IAAI,GAEhCgX,EAAQN,GAA4BK,GAAiBF,EAErDG,IACFP,EAAc,SAAcQ,GAC1B,IACI1Y,EAAW2Y,EAAQ5Y,EAAOhH,EAD1B6f,EAAKlgB,KAEL6H,EAAS+X,GAAiBM,EAAGrY,OAC7BJ,EAAQ2X,EAAY5e,KAAK0f,GACzBlY,EAASkY,EAAGlY,OACZmY,EAAa,EACbC,EAAUJ,EA+Cd,OA7CInY,IACFJ,EAAQA,EAAM+M,QAAQ,IAAK,KACC,IAAxB/M,EAAMiG,QAAQ,OAChBjG,GAAS,KAGX2Y,EAAU5d,OAAOwd,GAAKvb,MAAMyb,EAAG5Y,WAE3B4Y,EAAG5Y,UAAY,KAAO4Y,EAAGvY,WAAauY,EAAGvY,WAAuC,OAA1BqY,EAAIE,EAAG5Y,UAAY,MAC3EU,EAAS,OAASA,EAAS,IAC3BoY,EAAU,IAAMA,EAChBD,KAIFF,EAAS,IAAItZ,OAAO,OAASqB,EAAS,IAAKP,IAGzCqY,IACFG,EAAS,IAAItZ,OAAO,IAAMqB,EAAS,WAAYP,IAE7CgY,IAA0BnY,EAAY4Y,EAAG5Y,WAE7CD,EAAQiY,EAAW9e,KAAKqH,EAASoY,EAASC,EAAIE,GAE1CvY,EACER,GACFA,EAAMgZ,MAAQhZ,EAAMgZ,MAAM5b,MAAM0b,GAChC9Y,EAAM,GAAKA,EAAM,GAAG5C,MAAM0b,GAC1B9Y,EAAMY,MAAQiY,EAAG5Y,UACjB4Y,EAAG5Y,WAAaD,EAAM,GAAGzE,QACpBsd,EAAG5Y,UAAY,EACbmY,GAA4BpY,IACrC6Y,EAAG5Y,UAAY4Y,EAAGhX,OAAS7B,EAAMY,MAAQZ,EAAM,GAAGzE,OAAS0E,GAEzDwY,GAAiBzY,GAASA,EAAMzE,OAAS,GAG3C2c,EAAc/e,KAAK6G,EAAM,GAAI4Y,GAAQ,WACnC,IAAK5f,EAAI,EAAGA,EAAI4C,UAAUL,OAAS,EAAGvC,SACfwC,IAAjBI,UAAU5C,KAAkBgH,EAAMhH,QAAKwC,MAK1CwE,IAIX1H,EAAOD,QAAU8f,G,uBCvFjB,IAAIra,EAAQ,EAAQ,QAEhBmb,EAAc,kBAEd7T,EAAW,SAAU8T,EAASC,GAChC,IAAIlf,EAAQwO,EAAK2Q,EAAUF,IAC3B,OAAOjf,GAASof,GACZpf,GAASqf,IACW,mBAAbH,EAA0Brb,EAAMqb,KACrCA,IAGJC,EAAYhU,EAASgU,UAAY,SAAUtZ,GAC7C,OAAO3E,OAAO2E,GAAQqN,QAAQ8L,EAAa,KAAKM,eAG9C9Q,EAAOrD,EAASqD,KAAO,GACvB6Q,EAASlU,EAASkU,OAAS,IAC3BD,EAAWjU,EAASiU,SAAW,IAEnC/gB,EAAOD,QAAU+M,G,oCCnBjB,IAAIvJ,EAAI,EAAQ,QACZiC,EAAQ,EAAQ,QAChBiJ,EAAU,EAAQ,QAClBkD,EAAW,EAAQ,QACnBlO,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnB+P,EAAiB,EAAQ,QACzB7P,EAAqB,EAAQ,QAC7B0P,EAA+B,EAAQ,QACvC5Q,EAAkB,EAAQ,QAC1BwI,EAAa,EAAQ,QAErBgW,EAAuBxe,EAAgB,sBACvCye,EAAmB,iBACnBC,EAAiC,iCAKjCC,EAA+BnW,GAAc,KAAO1F,GAAM,WAC5D,IAAI6F,EAAQ,GAEZ,OADAA,EAAM6V,IAAwB,EACvB7V,EAAMqC,SAAS,KAAOrC,KAG3BiW,EAAkBhO,EAA6B,UAE/CiO,EAAqB,SAAUtd,GACjC,IAAK0N,EAAS1N,GAAI,OAAO,EACzB,IAAIud,EAAavd,EAAEid,GACnB,YAAsBhe,IAAfse,IAA6BA,EAAa/S,EAAQxK,IAGvD8I,GAAUsU,IAAiCC,EAK/C/d,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,OAAQ+B,GAAU,CAElDW,OAAQ,SAAgB+T,GACtB,IAGI/gB,EAAGghB,EAAGze,EAAQ0e,EAAKC,EAHnB3d,EAAIR,EAASpD,MACb8D,EAAIP,EAAmBK,EAAG,GAC1B9B,EAAI,EAER,IAAKzB,GAAK,EAAGuC,EAASK,UAAUL,OAAQvC,EAAIuC,EAAQvC,IAElD,GADAkhB,GAAW,IAAPlhB,EAAWuD,EAAIX,UAAU5C,GACzB6gB,EAAmBK,GAAI,CAEzB,GADAD,EAAMje,EAASke,EAAE3e,QACbd,EAAIwf,EAAMR,EAAkB,MAAM7X,UAAU8X,GAChD,IAAKM,EAAI,EAAGA,EAAIC,EAAKD,IAAKvf,IAASuf,KAAKE,GAAGnO,EAAetP,EAAGhC,EAAGyf,EAAEF,QAC7D,CACL,GAAIvf,GAAKgf,EAAkB,MAAM7X,UAAU8X,GAC3C3N,EAAetP,EAAGhC,IAAKyf,GAI3B,OADAzd,EAAElB,OAASd,EACJgC,M,uBC1DX,IAAIiC,EAAW,EAAQ,QACnBuF,EAAgB,EAAQ,QAG5B3L,EAAOD,QAAU,SAAUkM,EAAUlJ,EAAIpB,EAAOob,GAC9C,IACE,OAAOA,EAAUha,EAAGqD,EAASzE,GAAO,GAAIA,EAAM,IAAMoB,EAAGpB,GAEvD,MAAOkD,GAEP,MADA8G,EAAcM,GACRpH,K,uBCVV,IAAIE,EAAc,EAAQ,QACtBK,EAAiB,EAAQ,QACzBgB,EAAW,EAAQ,QACnBlB,EAAc,EAAQ,QAEtB2c,EAAuBzgB,OAAOC,eAIlCtB,EAAQuE,EAAIS,EAAc8c,EAAuB,SAAwB5d,EAAGsB,EAAGuc,GAI7E,GAHA1b,EAASnC,GACTsB,EAAIL,EAAYK,GAAG,GACnBa,EAAS0b,GACL1c,EAAgB,IAClB,OAAOyc,EAAqB5d,EAAGsB,EAAGuc,GAClC,MAAOjd,IACT,GAAI,QAASid,GAAc,QAASA,EAAY,MAAMxY,UAAU,2BAEhE,MADI,UAAWwY,IAAY7d,EAAEsB,GAAKuc,EAAWngB,OACtCsC,I,oCCjBT,IAAI0Y,EAAoB,EAAQ,QAA+BA,kBAC3D3a,EAAS,EAAQ,QACjBiD,EAA2B,EAAQ,QACnC0T,EAAiB,EAAQ,QACzBpH,EAAY,EAAQ,QAEpByL,EAAa,WAAc,OAAO3c,MAEtCL,EAAOD,QAAU,SAAUmd,EAAqBzC,EAAMjQ,GACpD,IAAI7H,EAAgB8X,EAAO,YAI3B,OAHAyC,EAAoB5a,UAAYN,EAAO2a,EAAmB,CAAEnS,KAAMvF,EAAyB,EAAGuF,KAC9FmO,EAAeuE,EAAqBva,GAAe,GAAO,GAC1D4O,EAAU5O,GAAiBqa,EACpBE,I,oCCZT,IAAI1X,EAAQ,EAAQ,QAIpB,SAASuc,EAAGtf,EAAG6B,GACb,OAAO0C,OAAOvE,EAAG6B,GAGnBvE,EAAQkgB,cAAgBza,GAAM,WAE5B,IAAI+a,EAAKwB,EAAG,IAAK,KAEjB,OADAxB,EAAG5Y,UAAY,EACW,MAAnB4Y,EAAGnX,KAAK,WAGjBrJ,EAAQmgB,aAAe1a,GAAM,WAE3B,IAAI+a,EAAKwB,EAAG,KAAM,MAElB,OADAxB,EAAG5Y,UAAY,EACU,MAAlB4Y,EAAGnX,KAAK,W,kCCpBjB,IAAIqF,EAAU,EAAQ,QAClB/K,EAAW,EAAQ,QACnBxB,EAAO,EAAQ,QAIfsB,EAAmB,SAAUK,EAAQme,EAAU3Z,EAAQnE,EAAW4Q,EAAOmN,EAAOC,EAAQC,GAC1F,IAGIC,EAHAC,EAAcvN,EACdwN,EAAc,EACdC,IAAQL,GAAShgB,EAAKggB,EAAQC,EAAS,GAG3C,MAAOG,EAAcpe,EAAW,CAC9B,GAAIoe,KAAeja,EAAQ,CAGzB,GAFA+Z,EAAUG,EAAQA,EAAMla,EAAOia,GAAcA,EAAaN,GAAY3Z,EAAOia,GAEzEL,EAAQ,GAAKxT,EAAQ2T,GACvBC,EAAc7e,EAAiBK,EAAQme,EAAUI,EAAS1e,EAAS0e,EAAQnf,QAASof,EAAaJ,EAAQ,GAAK,MACzG,CACL,GAAII,GAAe,iBAAkB,MAAM/Y,UAAU,sCACrDzF,EAAOwe,GAAeD,EAGxBC,IAEFC,IAEF,OAAOD,GAGTriB,EAAOD,QAAUyD,G,qBC/BjB,IAAIqH,EAAY,EAAQ,QAExB7K,EAAOD,QAAU,qBAAqB6C,KAAKiI,I,kCCD3C,IAAItH,EAAI,EAAQ,QACZgG,EAAS,EAAQ,QACjBY,EAAa,EAAQ,QACrBgK,EAAU,EAAQ,QAClBpP,EAAc,EAAQ,QACtByd,EAAgB,EAAQ,QACxBC,EAAoB,EAAQ,QAC5Bjd,EAAQ,EAAQ,QAChBL,EAAM,EAAQ,QACdsJ,EAAU,EAAQ,QAClBkD,EAAW,EAAQ,QACnBvL,EAAW,EAAQ,QACnB3C,EAAW,EAAQ,QACnBW,EAAkB,EAAQ,QAC1Bc,EAAc,EAAQ,QACtBD,EAA2B,EAAQ,QACnCyd,EAAqB,EAAQ,QAC7BlR,EAAa,EAAQ,QACrB8C,EAA4B,EAAQ,QACpCqO,EAA8B,EAAQ,QACtCpO,EAA8B,EAAQ,QACtCqO,EAAiC,EAAQ,QACzCtU,EAAuB,EAAQ,QAC/BtJ,EAA6B,EAAQ,QACrC0E,EAA8B,EAAQ,QACtChE,EAAW,EAAQ,QACnBqS,EAAS,EAAQ,QACjBC,EAAY,EAAQ,QACpBvK,EAAa,EAAQ,QACrBoV,EAAM,EAAQ,QACdngB,EAAkB,EAAQ,QAC1B8X,EAA+B,EAAQ,QACvCsI,EAAwB,EAAQ,QAChCnK,EAAiB,EAAQ,QACzB9G,EAAsB,EAAQ,QAC9B/H,EAAW,EAAQ,QAAgCL,QAEnDsZ,EAAS/K,EAAU,UACnBgL,EAAS,SACTjI,EAAY,YACZkI,EAAevgB,EAAgB,eAC/BsP,EAAmBH,EAAoBzC,IACvC6C,EAAmBJ,EAAoBK,UAAU8Q,GACjDE,EAAkB9hB,OAAO2Z,GACzBoI,EAAU5Z,EAAO9H,OACjB2hB,EAAajZ,EAAW,OAAQ,aAChC9E,EAAiCud,EAA+Bte,EAChEud,EAAuBvT,EAAqBhK,EAC5CD,EAA4Bse,EAA4Bre,EACxD+e,EAA6Bre,EAA2BV,EACxDgf,EAAavL,EAAO,WACpBwL,EAAyBxL,EAAO,cAChCyL,GAAyBzL,EAAO,6BAChC0L,GAAyB1L,EAAO,6BAChC2L,GAAwB3L,EAAO,OAC/B4L,GAAUpa,EAAOoa,QAEjBC,IAAcD,KAAYA,GAAQ5I,KAAe4I,GAAQ5I,GAAW8I,UAGpEC,GAAsB/e,GAAeS,GAAM,WAC7C,OAES,GAFFkd,EAAmBb,EAAqB,GAAI,IAAK,CACtDtgB,IAAK,WAAc,OAAOsgB,EAAqBxhB,KAAM,IAAK,CAAEsB,MAAO,IAAKwB,MACtEA,KACD,SAAUc,EAAGsB,EAAGuc,GACnB,IAAIiC,EAA4B1e,EAA+B6d,EAAiB3d,GAC5Ewe,UAAkCb,EAAgB3d,GACtDsc,EAAqB5d,EAAGsB,EAAGuc,GACvBiC,GAA6B9f,IAAMif,GACrCrB,EAAqBqB,EAAiB3d,EAAGwe,IAEzClC,EAEAmC,GAAO,SAAUC,EAAKC,GACxB,IAAI3O,EAAS+N,EAAWW,GAAOvB,EAAmBS,EAAQpI,IAO1D,OANA/I,EAAiBuD,EAAQ,CACvBnD,KAAM4Q,EACNiB,IAAKA,EACLC,YAAaA,IAEVnf,IAAawQ,EAAO2O,YAAcA,GAChC3O,GAGL4O,GAAW1B,EAAoB,SAAU7d,GAC3C,MAAoB,iBAANA,GACZ,SAAUA,GACZ,OAAOxD,OAAOwD,aAAeue,GAG3BiB,GAAkB,SAAwBngB,EAAGsB,EAAGuc,GAC9C7d,IAAMif,GAAiBkB,GAAgBb,EAAwBhe,EAAGuc,GACtE1b,EAASnC,GACT,IAAIhC,EAAMiD,EAAYK,GAAG,GAEzB,OADAa,EAAS0b,GACL3c,EAAIme,EAAYrhB,IACb6f,EAAWxgB,YAIV6D,EAAIlB,EAAG8e,IAAW9e,EAAE8e,GAAQ9gB,KAAMgC,EAAE8e,GAAQ9gB,IAAO,GACvD6f,EAAaY,EAAmBZ,EAAY,CAAExgB,WAAY2D,EAAyB,GAAG,OAJjFE,EAAIlB,EAAG8e,IAASlB,EAAqB5d,EAAG8e,EAAQ9d,EAAyB,EAAG,KACjFhB,EAAE8e,GAAQ9gB,IAAO,GAIV6hB,GAAoB7f,EAAGhC,EAAK6f,IAC9BD,EAAqB5d,EAAGhC,EAAK6f,IAGpCuC,GAAoB,SAA0BpgB,EAAGwN,GACnDrL,EAASnC,GACT,IAAIqgB,EAAalgB,EAAgBqN,GAC7BC,EAAOF,EAAW8S,GAAY5W,OAAO6W,GAAuBD,IAIhE,OAHAxa,EAAS4H,GAAM,SAAUzP,GAClB8C,IAAeyf,GAAsB3jB,KAAKyjB,EAAYriB,IAAMmiB,GAAgBngB,EAAGhC,EAAKqiB,EAAWriB,OAE/FgC,GAGLwgB,GAAU,SAAgBxgB,EAAGwN,GAC/B,YAAsBvO,IAAfuO,EAA2BiR,EAAmBze,GAAKogB,GAAkB3B,EAAmBze,GAAIwN,IAGjG+S,GAAwB,SAA8BE,GACxD,IAAInf,EAAIL,EAAYwf,GAAG,GACnBpjB,EAAa+hB,EAA2BxiB,KAAKR,KAAMkF,GACvD,QAAIlF,OAAS6iB,GAAmB/d,EAAIme,EAAY/d,KAAOJ,EAAIoe,EAAwBhe,QAC5EjE,IAAe6D,EAAI9E,KAAMkF,KAAOJ,EAAIme,EAAY/d,IAAMJ,EAAI9E,KAAM0iB,IAAW1iB,KAAK0iB,GAAQxd,KAAKjE,IAGlGqjB,GAA4B,SAAkC1gB,EAAGsB,GACnE,IAAIX,EAAKR,EAAgBH,GACrBhC,EAAMiD,EAAYK,GAAG,GACzB,GAAIX,IAAOse,IAAmB/d,EAAIme,EAAYrhB,IAASkD,EAAIoe,EAAwBthB,GAAnF,CACA,IAAIiL,EAAa7H,EAA+BT,EAAI3C,GAIpD,OAHIiL,IAAc/H,EAAIme,EAAYrhB,IAAUkD,EAAIP,EAAIme,IAAWne,EAAGme,GAAQ9gB,KACxEiL,EAAW5L,YAAa,GAEnB4L,IAGL0X,GAAuB,SAA6B3gB,GACtD,IAAI4gB,EAAQxgB,EAA0BD,EAAgBH,IAClDoF,EAAS,GAIb,OAHAS,EAAS+a,GAAO,SAAU5iB,GACnBkD,EAAIme,EAAYrhB,IAASkD,EAAIsI,EAAYxL,IAAMoH,EAAO1C,KAAK1E,MAE3DoH,GAGLkb,GAAyB,SAA+BtgB,GAC1D,IAAI6gB,EAAsB7gB,IAAMif,EAC5B2B,EAAQxgB,EAA0BygB,EAAsBvB,EAAyBnf,EAAgBH,IACjGoF,EAAS,GAMb,OALAS,EAAS+a,GAAO,SAAU5iB,IACpBkD,EAAIme,EAAYrhB,IAAU6iB,IAAuB3f,EAAI+d,EAAiBjhB,IACxEoH,EAAO1C,KAAK2c,EAAWrhB,OAGpBoH,GAkHT,GA7GKmZ,IACHW,EAAU,WACR,GAAI9iB,gBAAgB8iB,EAAS,MAAM7Z,UAAU,+BAC7C,IAAI4a,EAAe5gB,UAAUL,aAA2BC,IAAjBI,UAAU,GAA+BT,OAAOS,UAAU,SAA7BJ,EAChE+gB,EAAMpB,EAAIqB,GACVa,EAAS,SAAUpjB,GACjBtB,OAAS6iB,GAAiB6B,EAAOlkB,KAAK0iB,EAAwB5hB,GAC9DwD,EAAI9E,KAAM0iB,IAAW5d,EAAI9E,KAAK0iB,GAASkB,KAAM5jB,KAAK0iB,GAAQkB,IAAO,GACrEH,GAAoBzjB,KAAM4jB,EAAKhf,EAAyB,EAAGtD,KAG7D,OADIoD,GAAe6e,IAAYE,GAAoBZ,EAAiBe,EAAK,CAAEzV,cAAc,EAAMY,IAAK2V,IAC7Ff,GAAKC,EAAKC,IAGnBxe,EAASyd,EAAQpI,GAAY,YAAY,WACvC,OAAO9I,EAAiB5R,MAAM4jB,OAGhCve,EAASyd,EAAS,iBAAiB,SAAUe,GAC3C,OAAOF,GAAKnB,EAAIqB,GAAcA,MAGhClf,EAA2BV,EAAIkgB,GAC/BlW,EAAqBhK,EAAI8f,GACzBxB,EAA+Bte,EAAIqgB,GACnCrQ,EAA0BhQ,EAAIqe,EAA4Bre,EAAIsgB,GAC9DrQ,EAA4BjQ,EAAIigB,GAEhC/J,EAA6BlW,EAAI,SAAUrD,GACzC,OAAO+iB,GAAKthB,EAAgBzB,GAAOA,IAGjC8D,IAEF8c,EAAqBsB,EAAQpI,GAAY,cAAe,CACtDvM,cAAc,EACdjN,IAAK,WACH,OAAO0Q,EAAiB5R,MAAM6jB,eAG7B/P,GACHzO,EAASwd,EAAiB,uBAAwBsB,GAAuB,CAAEnW,QAAQ,MAKzF9K,EAAE,CAAEgG,QAAQ,EAAMya,MAAM,EAAMhZ,QAASwX,EAAevX,MAAOuX,GAAiB,CAC5E/gB,OAAQ0hB,IAGVrZ,EAAS0H,EAAWkS,KAAwB,SAAUziB,GACpD6hB,EAAsB7hB,MAGxBsC,EAAE,CAAEM,OAAQmf,EAAQjY,MAAM,EAAMC,QAASwX,GAAiB,CAGxD,IAAO,SAAUvgB,GACf,IAAIuF,EAAS3E,OAAOZ,GACpB,GAAIkD,EAAIqe,GAAwBhc,GAAS,OAAOgc,GAAuBhc,GACvE,IAAI+N,EAAS4N,EAAQ3b,GAGrB,OAFAgc,GAAuBhc,GAAU+N,EACjCkO,GAAuBlO,GAAU/N,EAC1B+N,GAITyP,OAAQ,SAAgBC,GACtB,IAAKd,GAASc,GAAM,MAAM3b,UAAU2b,EAAM,oBAC1C,GAAI9f,EAAIse,GAAwBwB,GAAM,OAAOxB,GAAuBwB,IAEtEC,UAAW,WAActB,IAAa,GACtCuB,UAAW,WAAcvB,IAAa,KAGxCrgB,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,QAASwX,EAAevX,MAAOlG,GAAe,CAG9E/C,OAAQyiB,GAGRpjB,eAAgB+iB,GAGhBtZ,iBAAkBuZ,GAGlB/e,yBAA0Bqf,KAG5BphB,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,QAASwX,GAAiB,CAG1D9d,oBAAqBkgB,GAGrB/R,sBAAuB0R,KAKzBhhB,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,OAAQxF,GAAM,WAAc+O,EAA4BjQ,EAAE,OAAU,CACpGuO,sBAAuB,SAA+BjO,GACpD,OAAO2P,EAA4BjQ,EAAEb,EAASmB,OAM9Cwe,EAAY,CACd,IAAIgC,IAAyB5C,GAAiBhd,GAAM,WAClD,IAAI+P,EAAS4N,IAEb,MAA+B,UAAxBC,EAAW,CAAC7N,KAEe,MAA7B6N,EAAW,CAAEjgB,EAAGoS,KAEc,MAA9B6N,EAAWhiB,OAAOmU,OAGzBhS,EAAE,CAAEM,OAAQ,OAAQkH,MAAM,EAAMC,OAAQoa,IAAyB,CAE/DC,UAAW,SAAmBzgB,EAAI0gB,EAAUC,GAC1C,IAEIC,EAFAhV,EAAO,CAAC5L,GACR0D,EAAQ,EAEZ,MAAOhF,UAAUL,OAASqF,EAAOkI,EAAK7J,KAAKrD,UAAUgF,MAErD,GADAkd,EAAYF,GACP3T,EAAS2T,SAAoBpiB,IAAP0B,KAAoBuf,GAASvf,GAMxD,OALK6J,EAAQ6W,KAAWA,EAAW,SAAUrjB,EAAKN,GAEhD,GADwB,mBAAb6jB,IAAyB7jB,EAAQ6jB,EAAU3kB,KAAKR,KAAM4B,EAAKN,KACjEwiB,GAASxiB,GAAQ,OAAOA,IAE/B6O,EAAK,GAAK8U,EACHlC,EAAW/f,MAAM,KAAMmN,MAO/B2S,EAAQpI,GAAWkI,IACtBvZ,EAA4ByZ,EAAQpI,GAAYkI,EAAcE,EAAQpI,GAAW0K,SAInF9M,EAAewK,EAASH,GAExBvV,EAAWsV,IAAU,G,qBCtTrB,IAAIxf,EAAI,EAAQ,QACZmH,EAAO,EAAQ,QACfgO,EAA8B,EAAQ,QAEtCgN,GAAuBhN,GAA4B,SAAU5M,GAC/DrB,MAAMC,KAAKoB,MAKbvI,EAAE,CAAEM,OAAQ,QAASkH,MAAM,EAAMC,OAAQ0a,GAAuB,CAC9Dhb,KAAMA,K,kCCVR,IAAIlF,EAAQ,EAAQ,QAEpBxF,EAAOD,QAAU,SAAUqL,EAAa8I,GACtC,IAAIyR,EAAS,GAAGva,GAChB,QAASua,GAAUngB,GAAM,WAEvBmgB,EAAO9kB,KAAK,KAAMqT,GAAY,WAAc,MAAM,GAAM,Q,mBCP5D,IAAI0R,EAAO/e,KAAK+e,KACZC,EAAQhf,KAAKgf,MAIjB7lB,EAAOD,QAAU,SAAUmU,GACzB,OAAO4R,MAAM5R,GAAYA,GAAY,GAAKA,EAAW,EAAI2R,EAAQD,GAAM1R,K,kCCLzE,IAAInP,EAAc,EAAQ,QACtBwE,EAAS,EAAQ,QACjBuD,EAAW,EAAQ,QACnBpH,EAAW,EAAQ,QACnBP,EAAM,EAAQ,QACd+D,EAAU,EAAQ,QAClB0P,EAAoB,EAAQ,QAC5B1T,EAAc,EAAQ,QACtBM,EAAQ,EAAQ,QAChBxD,EAAS,EAAQ,QACjB0C,EAAsB,EAAQ,QAA8CJ,EAC5EgB,EAA2B,EAAQ,QAAmDhB,EACtFjD,EAAiB,EAAQ,QAAuCiD,EAChE0Q,EAAO,EAAQ,QAA4BA,KAE3C+Q,EAAS,SACTC,EAAezc,EAAOwc,GACtBE,EAAkBD,EAAa1jB,UAG/B4jB,EAAiBhd,EAAQlH,EAAOikB,KAAqBF,EAIrDI,EAAW,SAAUjS,GACvB,IACI6B,EAAOqQ,EAAOC,EAAOC,EAASC,EAAQtjB,EAAQqF,EAAOke,EADrD5hB,EAAKM,EAAYgP,GAAU,GAE/B,GAAiB,iBAANtP,GAAkBA,EAAG3B,OAAS,EAGvC,GAFA2B,EAAKoQ,EAAKpQ,GACVmR,EAAQnR,EAAGuR,WAAW,GACR,KAAVJ,GAA0B,KAAVA,GAElB,GADAqQ,EAAQxhB,EAAGuR,WAAW,GACR,KAAViQ,GAA0B,MAAVA,EAAe,OAAOngB,SACrC,GAAc,KAAV8P,EAAc,CACvB,OAAQnR,EAAGuR,WAAW,IACpB,KAAK,GAAI,KAAK,GAAIkQ,EAAQ,EAAGC,EAAU,GAAI,MAC3C,KAAK,GAAI,KAAK,IAAKD,EAAQ,EAAGC,EAAU,GAAI,MAC5C,QAAS,OAAQ1hB,EAInB,IAFA2hB,EAAS3hB,EAAGE,MAAM,GAClB7B,EAASsjB,EAAOtjB,OACXqF,EAAQ,EAAGA,EAAQrF,EAAQqF,IAI9B,GAHAke,EAAOD,EAAOpQ,WAAW7N,GAGrBke,EAAO,IAAMA,EAAOF,EAAS,OAAOrgB,IACxC,OAAOwgB,SAASF,EAAQF,GAE5B,OAAQzhB,GAKZ,GAAIkI,EAASiZ,GAASC,EAAa,UAAYA,EAAa,QAAUA,EAAa,SAAU,CAS3F,IARA,IAgBqB/jB,EAhBjBykB,EAAgB,SAAgB/kB,GAClC,IAAIiD,EAAKtB,UAAUL,OAAS,EAAI,EAAItB,EAChCmY,EAAQzZ,KACZ,OAAOyZ,aAAiB4M,IAElBR,EAAiB1gB,GAAM,WAAcygB,EAAgBR,QAAQ5kB,KAAKiZ,MAAa5Q,EAAQ4Q,IAAUiM,GACjGnN,EAAkB,IAAIoN,EAAaG,EAASvhB,IAAMkV,EAAO4M,GAAiBP,EAASvhB,IAElF8M,EAAO3M,EAAcL,EAAoBshB,GAAgB,8LAQhE3e,MAAM,KAAMuO,EAAI,EAAQlE,EAAKzO,OAAS2S,EAAGA,IACrCzQ,EAAI6gB,EAAc/jB,EAAMyP,EAAKkE,MAAQzQ,EAAIuhB,EAAezkB,IAC1DZ,EAAeqlB,EAAezkB,EAAKqD,EAAyB0gB,EAAc/jB,IAG9EykB,EAAcpkB,UAAY2jB,EAC1BA,EAAgB3a,YAAcob,EAC9BhhB,EAAS6D,EAAQwc,EAAQW,K,qBC9E3B,IAAIhkB,EAAkB,EAAQ,QAE1BiQ,EAAQjQ,EAAgB,SAE5B1C,EAAOD,QAAU,SAAUqL,GACzB,IAAI5C,EAAS,IACb,IACE,MAAM4C,GAAa5C,GACnB,MAAOme,GACP,IAEE,OADAne,EAAOmK,IAAS,EACT,MAAMvH,GAAa5C,GAC1B,MAAOoe,KACT,OAAO,I,kCCZX,IAAIrjB,EAAI,EAAQ,QACZ6F,EAAO,EAAQ,QAInB7F,EAAE,CAAEM,OAAQ,SAAUC,OAAO,EAAMkH,OAAQ,IAAI5B,OAASA,GAAQ,CAC9DA,KAAMA,K,kCCNR,IAAIhD,EAAW,EAAQ,QAIvBpG,EAAOD,QAAU,WACf,IAAIiD,EAAOoD,EAAS/F,MAChBgJ,EAAS,GAOb,OANIrG,EAAKuG,SAAQF,GAAU,KACvBrG,EAAK+E,aAAYsB,GAAU,KAC3BrG,EAAKgF,YAAWqB,GAAU,KAC1BrG,EAAK6jB,SAAQxd,GAAU,KACvBrG,EAAKiF,UAASoB,GAAU,KACxBrG,EAAKkF,SAAQmB,GAAU,KACpBA,I,kCCbT,IAcIsT,EAAmBmK,EAAmCC,EAdtDvhB,EAAQ,EAAQ,QAChBiX,EAAiB,EAAQ,QACzB/S,EAA8B,EAAQ,QACtCvE,EAAM,EAAQ,QACdzC,EAAkB,EAAQ,QAC1ByR,EAAU,EAAQ,QAElB/J,EAAW1H,EAAgB,YAC3Bka,GAAyB,EAEzBI,EAAa,WAAc,OAAO3c,MAMlC,GAAGqR,OACLqV,EAAgB,GAAGrV,OAEb,SAAUqV,GAEdD,EAAoCrK,EAAeA,EAAesK,IAC9DD,IAAsC1lB,OAAOkB,YAAWqa,EAAoBmK,IAHlDlK,GAAyB,GAO3D,IAAIoK,OAA8C9jB,GAArByZ,GAAkCnX,GAAM,WACnE,IAAI5C,EAAO,GAEX,OAAO+Z,EAAkBvS,GAAUvJ,KAAK+B,KAAUA,KAGhDokB,IAAwBrK,EAAoB,IAG1CxI,IAAW6S,GAA4B7hB,EAAIwX,EAAmBvS,IAClEV,EAA4BiT,EAAmBvS,EAAU4S,GAG3Dhd,EAAOD,QAAU,CACf4c,kBAAmBA,EACnBC,uBAAwBA,I,kCCzC1B,IAAIqK,EAAwB,EAAQ,QAChC/d,EAAU,EAAQ,QAItBlJ,EAAOD,QAAUknB,EAAwB,GAAG1iB,SAAW,WACrD,MAAO,WAAa2E,EAAQ7I,MAAQ,M,qBCPtC,IAAI0E,EAAc,EAAQ,QACtB1D,EAAiB,EAAQ,QAAuCiD,EAEhE4iB,EAAoBzW,SAASnO,UAC7B6kB,EAA4BD,EAAkB3iB,SAC9C6iB,EAAS,wBACT3M,EAAO,OAIP1V,KAAiB0V,KAAQyM,IAC3B7lB,EAAe6lB,EAAmBzM,EAAM,CACtCjM,cAAc,EACdjN,IAAK,WACH,IACE,OAAO4lB,EAA0BtmB,KAAKR,MAAMqH,MAAM0f,GAAQ,GAC1D,MAAOviB,GACP,MAAO,Q,qBCjBf,IAeIwiB,EAAOC,EAAMvQ,EAAMwQ,EAAQC,EAAQC,EAAMC,EAASC,EAflDpe,EAAS,EAAQ,QACjBjE,EAA2B,EAAQ,QAAmDhB,EACtFsjB,EAAY,EAAQ,QAAqBxY,IACzCH,EAAS,EAAQ,QACjB4Y,EAAkB,EAAQ,QAC1B3Y,EAAU,EAAQ,QAElB4Y,EAAmBve,EAAOue,kBAAoBve,EAAOwe,uBACrD7L,EAAW3S,EAAO2S,SAClB1M,EAAUjG,EAAOiG,QACjBwY,EAAUze,EAAOye,QAEjBC,EAA2B3iB,EAAyBiE,EAAQ,kBAC5D2e,EAAiBD,GAA4BA,EAAyBtmB,MAKrEumB,IACHb,EAAQ,WACN,IAAIc,EAAQplB,EACRmM,IAAYiZ,EAAS3Y,EAAQ8M,SAAS6L,EAAOC,OACjD,MAAOd,EAAM,CACXvkB,EAAKukB,EAAKvkB,GACVukB,EAAOA,EAAK9c,KACZ,IACEzH,IACA,MAAO8B,GAGP,MAFIyiB,EAAMC,IACLxQ,OAAO7T,EACN2B,GAERkS,OAAO7T,EACLilB,GAAQA,EAAOE,SAKhBpZ,GAAWC,GAAY2Y,IAAmBC,IAAoB5L,EAQxD8L,GAAWA,EAAQM,SAE5BZ,EAAUM,EAAQM,aAAQplB,GAC1BykB,EAAOD,EAAQC,KACfJ,EAAS,WACPI,EAAK9mB,KAAK6mB,EAASL,KAIrBE,EADSrY,EACA,WACPM,EAAQkB,SAAS2W,IASV,WAEPO,EAAU/mB,KAAK0I,EAAQ8d,KA5BzBG,GAAS,EACTC,EAAOvL,EAASqM,eAAe,IAC/B,IAAIT,EAAiBT,GAAOmB,QAAQf,EAAM,CAAEgB,eAAe,IAC3DlB,EAAS,WACPE,EAAKtX,KAAOqX,GAAUA,KA6B5BxnB,EAAOD,QAAUmoB,GAAkB,SAAUnlB,GAC3C,IAAI2lB,EAAO,CAAE3lB,GAAIA,EAAIyH,UAAMtH,GACvB6T,IAAMA,EAAKvM,KAAOke,GACjBpB,IACHA,EAAOoB,EACPnB,KACAxQ,EAAO2R,I,qBC9EX,IAAInf,EAAS,EAAQ,QACjBwO,EAAS,EAAQ,QACjB5S,EAAM,EAAQ,QACd0d,EAAM,EAAQ,QACdL,EAAgB,EAAQ,QACxBC,EAAoB,EAAQ,QAE5BiB,EAAwB3L,EAAO,OAC/BtW,EAAS8H,EAAO9H,OAChBknB,EAAwBlG,EAAoBhhB,EAASA,GAAUA,EAAOmnB,eAAiB/F,EAE3F7iB,EAAOD,QAAU,SAAUkB,GAOvB,OANGkE,EAAIue,EAAuBziB,KAAWuhB,GAAuD,iBAA/BkB,EAAsBziB,MACnFuhB,GAAiBrd,EAAI1D,EAAQR,GAC/ByiB,EAAsBziB,GAAQQ,EAAOR,GAErCyiB,EAAsBziB,GAAQ0nB,EAAsB,UAAY1nB,IAE3DyiB,EAAsBziB,K,qBClBjC,IAAIsC,EAAI,EAAQ,QACZE,EAAW,EAAQ,QACnBolB,EAAa,EAAQ,QACrBrjB,EAAQ,EAAQ,QAEhBsjB,EAAsBtjB,GAAM,WAAcqjB,EAAW,MAIzDtlB,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,OAAQ8d,GAAuB,CAC/DpX,KAAM,SAAc9M,GAClB,OAAOikB,EAAWplB,EAASmB,Q,qBCX/B,IAAI1C,EAAO,EAAQ,QACfiT,EAAgB,EAAQ,QACxB1R,EAAW,EAAQ,QACnBC,EAAW,EAAQ,QACnBE,EAAqB,EAAQ,QAE7B+C,EAAO,GAAGA,KAGVoM,EAAe,SAAU6B,GAC3B,IAAIiC,EAAiB,GAARjC,EACTmU,EAAoB,GAARnU,EACZoU,EAAkB,GAARpU,EACVqU,EAAmB,GAARrU,EACXsU,EAAwB,GAARtU,EAChBuU,EAAwB,GAARvU,EAChBwU,EAAmB,GAARxU,GAAasU,EAC5B,OAAO,SAAUjW,EAAOhJ,EAAYjH,EAAMqmB,GASxC,IARA,IAOI1nB,EAAO0H,EAPPpF,EAAIR,EAASwP,GACb7S,EAAO+U,EAAclR,GACrBoT,EAAgBnV,EAAK+H,EAAYjH,EAAM,GACvCC,EAASS,EAAStD,EAAK6C,QACvBqF,EAAQ,EACRtG,EAASqnB,GAAkBzlB,EAC3BC,EAASgT,EAAS7U,EAAOiR,EAAOhQ,GAAU8lB,GAAaI,EAAgBnnB,EAAOiR,EAAO,QAAK/P,EAExFD,EAASqF,EAAOA,IAAS,IAAI8gB,GAAY9gB,KAASlI,KACtDuB,EAAQvB,EAAKkI,GACbe,EAASgO,EAAc1V,EAAO2G,EAAOrE,GACjC2Q,GACF,GAAIiC,EAAQhT,EAAOyE,GAASe,OACvB,GAAIA,EAAQ,OAAQuL,GACvB,KAAK,EAAG,OAAO,EACf,KAAK,EAAG,OAAOjT,EACf,KAAK,EAAG,OAAO2G,EACf,KAAK,EAAG3B,EAAK9F,KAAKgD,EAAQlC,QACrB,OAAQiT,GACb,KAAK,EAAG,OAAO,EACf,KAAK,EAAGjO,EAAK9F,KAAKgD,EAAQlC,GAIhC,OAAOunB,GAAiB,EAAIF,GAAWC,EAAWA,EAAWplB,IAIjE7D,EAAOD,QAAU,CAGf0J,QAASsJ,EAAa,GAGtBuW,IAAKvW,EAAa,GAGlBM,OAAQN,EAAa,GAGrBwW,KAAMxW,EAAa,GAGnByW,MAAOzW,EAAa,GAGpB0W,KAAM1W,EAAa,GAGnB2W,UAAW3W,EAAa,GAGxB4W,UAAW5W,EAAa,K,qBCtE1B,IAAIvN,EAAQ,EAAQ,QAEpBxF,EAAOD,SAAWyF,GAAM,WACtB,OAAOpE,OAAOwoB,aAAaxoB,OAAOyoB,kBAAkB,S,qBCHtD,IAAIlY,EAAW,EAAQ,QAMvB3R,EAAOD,QAAU,SAAU2gB,EAAOoJ,GAChC,IAAKnY,EAAS+O,GAAQ,OAAOA,EAC7B,IAAI3d,EAAIgnB,EACR,GAAID,GAAoD,mBAAxB/mB,EAAK2d,EAAMnc,YAA4BoN,EAASoY,EAAMhnB,EAAGlC,KAAK6f,IAAS,OAAOqJ,EAC9G,GAAmC,mBAAvBhnB,EAAK2d,EAAM+E,WAA2B9T,EAASoY,EAAMhnB,EAAGlC,KAAK6f,IAAS,OAAOqJ,EACzF,IAAKD,GAAoD,mBAAxB/mB,EAAK2d,EAAMnc,YAA4BoN,EAASoY,EAAMhnB,EAAGlC,KAAK6f,IAAS,OAAOqJ,EAC/G,MAAMzgB,UAAU,6C,kCCZlB,W,mBCAAtJ,EAAOD,SAAU,G,mBCAjB,IAAIwE,EAAW,GAAGA,SAElBvE,EAAOD,QAAU,SAAU6E,GACzB,OAAOL,EAAS1D,KAAK+D,GAAIE,MAAM,GAAI,K,qBCHrC,IAAIyE,EAAS,EAAQ,QACjBqD,EAAY,EAAQ,QAEpBod,EAAS,qBACT5V,EAAQ7K,EAAOygB,IAAWpd,EAAUod,EAAQ,IAEhDhqB,EAAOD,QAAUqU,G,kCCLjB,IAAI7Q,EAAI,EAAQ,QACZ0mB,EAAa,EAAQ,QAAgCP,UACrDQ,EAAmB,EAAQ,QAE3BC,EAAa,YACbC,GAAc,EAGdD,IAAc,IAAI1f,MAAM,GAAG0f,IAAY,WAAcC,GAAc,KAIvE7mB,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,OAAQof,GAAe,CACvDV,UAAW,SAAmBzf,GAC5B,OAAOggB,EAAW5pB,KAAM4J,EAAY3G,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,MAK9EgnB,EAAiBC,I,mBCpBjB,IAAIE,EAGJA,EAAI,WACH,OAAOhqB,KADJ,GAIJ,IAECgqB,EAAIA,GAAK,IAAI5Z,SAAS,cAAb,GACR,MAAOzH,GAEc,kBAAXvE,SAAqB4lB,EAAI5lB,QAOrCzE,EAAOD,QAAUsqB,G,qBCnBjB,IAAIllB,EAAM,EAAQ,QACdf,EAAkB,EAAQ,QAC1B2J,EAAU,EAAQ,QAA+BA,QACjDN,EAAa,EAAQ,QAEzBzN,EAAOD,QAAU,SAAUqC,EAAQyiB,GACjC,IAGI5iB,EAHAgC,EAAIG,EAAgBhC,GACpB1B,EAAI,EACJ2I,EAAS,GAEb,IAAKpH,KAAOgC,GAAIkB,EAAIsI,EAAYxL,IAAQkD,EAAIlB,EAAGhC,IAAQoH,EAAO1C,KAAK1E,GAEnE,MAAO4iB,EAAM5hB,OAASvC,EAAOyE,EAAIlB,EAAGhC,EAAM4iB,EAAMnkB,SAC7CqN,EAAQ1E,EAAQpH,IAAQoH,EAAO1C,KAAK1E,IAEvC,OAAOoH,I,kCCdT,IAAI9F,EAAI,EAAQ,QACZ+mB,EAAY,EAAQ,QAA+Bzc,SACnDqc,EAAmB,EAAQ,QAI/B3mB,EAAE,CAAEM,OAAQ,QAASC,OAAO,GAAQ,CAClC+J,SAAU,SAAkBqF,GAC1B,OAAOoX,EAAUjqB,KAAM6S,EAAI5P,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,MAKrEgnB,EAAiB,a,qBCdjB,IAAI3gB,EAAS,EAAQ,QACjBoI,EAAW,EAAQ,QAEnBuK,EAAW3S,EAAO2S,SAElBqO,EAAS5Y,EAASuK,IAAavK,EAASuK,EAASzW,eAErDzF,EAAOD,QAAU,SAAU6E,GACzB,OAAO2lB,EAASrO,EAASzW,cAAcb,GAAM,K,qBCR/C,IAAIrB,EAAI,EAAQ,QACZ8R,EAAS,EAAQ,QAIrB9R,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,OAAQ5J,OAAOiU,SAAWA,GAAU,CACpEA,OAAQA,K,qBCNV,IAAIjP,EAAW,EAAQ,QACnBuL,EAAW,EAAQ,QACnB6Y,EAAuB,EAAQ,QAEnCxqB,EAAOD,QAAU,SAAU8I,EAAG4hB,GAE5B,GADArkB,EAASyC,GACL8I,EAAS8Y,IAAMA,EAAEnf,cAAgBzC,EAAG,OAAO4hB,EAC/C,IAAIC,EAAoBF,EAAqBlmB,EAAEuE,GAC3Cyf,EAAUoC,EAAkBpC,QAEhC,OADAA,EAAQmC,GACDC,EAAkBhD,U,qBCV3B,IAAIne,EAAS,EAAQ,QACjBG,EAA8B,EAAQ,QAE1C1J,EAAOD,QAAU,SAAUkC,EAAKN,GAC9B,IACE+H,EAA4BH,EAAQtH,EAAKN,GACzC,MAAOkD,GACP0E,EAAOtH,GAAON,EACd,OAAOA,I,mBCRX3B,EAAOD,QAAU,I,mBCAjBC,EAAOD,QAAU,SAAUqJ,GACzB,IACE,QAASA,IACT,MAAOvE,GACP,OAAO,K,qBCJX,IAAI0V,EAAO,EAAQ,QACfhR,EAAS,EAAQ,QAEjBzG,EAAY,SAAU6nB,GACxB,MAA0B,mBAAZA,EAAyBA,OAAWznB,GAGpDlD,EAAOD,QAAU,SAAU6qB,EAAWjF,GACpC,OAAOriB,UAAUL,OAAS,EAAIH,EAAUyX,EAAKqQ,KAAe9nB,EAAUyG,EAAOqhB,IACzErQ,EAAKqQ,IAAcrQ,EAAKqQ,GAAWjF,IAAWpc,EAAOqhB,IAAcrhB,EAAOqhB,GAAWjF,K,kCCR3F,IAAItC,EAA6B,GAAG9Q,qBAChCjN,EAA2BlE,OAAOkE,yBAGlCulB,EAAcvlB,IAA6B+d,EAA2BxiB,KAAK,CAAEiqB,EAAG,GAAK,GAIzF/qB,EAAQuE,EAAIumB,EAAc,SAA8BnG,GACtD,IAAIxX,EAAa5H,EAAyBjF,KAAMqkB,GAChD,QAASxX,GAAcA,EAAW5L,YAChC+hB,G,qBCZJ,IAAIP,EAAwB,EAAQ,QAIpCA,EAAsB,a,qBCHtB,IAAI1c,EAAW,EAAQ,QACnB2kB,EAAqB,EAAQ,QAKjC/qB,EAAOD,QAAUqB,OAAO+Y,iBAAmB,aAAe,GAAK,WAC7D,IAEI4K,EAFAiG,GAAiB,EACjBpoB,EAAO,GAEX,IACEmiB,EAAS3jB,OAAOkE,yBAAyBlE,OAAOkB,UAAW,aAAa8M,IACxE2V,EAAOlkB,KAAK+B,EAAM,IAClBooB,EAAiBpoB,aAAgB6H,MACjC,MAAO5F,IACT,OAAO,SAAwBZ,EAAGH,GAKhC,OAJAsC,EAASnC,GACT8mB,EAAmBjnB,GACfknB,EAAgBjG,EAAOlkB,KAAKoD,EAAGH,GAC9BG,EAAEgnB,UAAYnnB,EACZG,GAdoD,QAgBzDf,I,qBCvBN,IAAI+jB,EAAwB,EAAQ,QAChCvhB,EAAW,EAAQ,QACnBnB,EAAW,EAAQ,QAIlB0iB,GACHvhB,EAAStE,OAAOkB,UAAW,WAAYiC,EAAU,CAAE8J,QAAQ,K,qBCP7D,IAAIhN,EAAiB,EAAQ,QAAuCiD,EAChEa,EAAM,EAAQ,QACdzC,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAEpC1C,EAAOD,QAAU,SAAU6E,EAAIsmB,EAAK7d,GAC9BzI,IAAOO,EAAIP,EAAKyI,EAASzI,EAAKA,EAAGtC,UAAWK,IAC9CtB,EAAeuD,EAAIjC,EAAe,CAAE6L,cAAc,EAAM7M,MAAOupB,M,0DCRnE,sHAAIC,EAActkB,KAAKukB,GAAK,IAC5B,SAASC,IACL,MAA0B,qBAAX5mB,SACmB,oBAA7B,GAAGF,SAAS1D,KAAK4D,SACe,oBAA7B,GAAGF,SAAS1D,KAAK4D,SAEtB,MAAM6mB,EAAyB,qBAAX/hB,EACrBA,EACkB,qBAAX9E,OACHA,OAC6B,qBAAtB8mB,kBACHnrB,KACA,GACDorB,EAAQ,CACjBC,QAASH,EACTla,QAAS,QACTsa,UAAWL,IACXM,aAAc,QAAQ/oB,KAAK,SAAUgpB,KAAWrnB,YAChDsnB,eAAgB,IAChB,SAASC,GACL,OAAON,EAAMO,SAAWD,EAAQX,EAAcW,GAElDE,aAAa,EACbC,sBAAsB,EACtBC,iBAAiB,EACjBC,kBAAkB,EAClBC,6BAA6B,EAC7BC,mBAAmB,EACnBC,mBAAmB,EACnBC,qBAAqB,EACrBC,wBAAwB,EACxBC,wBAAwB,EACxBC,0BAA0B,EAC1BC,wBAAyB,KACzBC,wBAAyB,KACzBC,0BAA2B,KAC3BC,WAA+B,qBAAXroB,QAA0BA,OAAOsoB,kBAAqB,EAC1EC,aAAc,EACdjB,UAAU,EACVkB,cAAc,EACdC,YAAa,CAAC,EAAG,GACjB,aACI,OAAO1B,EAAM,MAAM2B,YAEvB,cACI,QAAS3B,EAAM,MAAM/D,MAEzBvL,SAAUoP,EAAKpP,SACf,cAAcsP,GACVF,EAAKE,MAAQA,IAGR4B,EAAiBC,IAC1B7B,EAAM6B,EAAU/qB,UAAUgrB,gBAAkBD,GAEhD7B,EAAM+B,cAAc/B,K,wDCrDpB,EAAQ,QACR,IAAI9lB,EAAW,EAAQ,QACnBF,EAAQ,EAAQ,QAChB9C,EAAkB,EAAQ,QAC1B+D,EAAa,EAAQ,QACrBiD,EAA8B,EAAQ,QAEtCyB,EAAUzI,EAAgB,WAE1B8qB,GAAiChoB,GAAM,WAIzC,IAAI+a,EAAK,IAMT,OALAA,EAAGnX,KAAO,WACR,IAAIC,EAAS,GAEb,OADAA,EAAOokB,OAAS,CAAEtqB,EAAG,KACdkG,GAEyB,MAA3B,GAAGwL,QAAQ0L,EAAI,WAKpBmN,EAAmB,WACrB,MAAkC,OAA3B,IAAI7Y,QAAQ,IAAK,MADH,GAInBwE,EAAU3W,EAAgB,WAE1BirB,EAA+C,WACjD,QAAI,IAAItU,IAC6B,KAA5B,IAAIA,GAAS,IAAK,MAFsB,GAS/CuU,GAAqCpoB,GAAM,WAE7C,IAAI+a,EAAK,OACLsN,EAAetN,EAAGnX,KACtBmX,EAAGnX,KAAO,WAAc,OAAOykB,EAAaxqB,MAAMhD,KAAMiD,YACxD,IAAI+F,EAAS,KAAKhC,MAAMkZ,GACxB,OAAyB,IAAlBlX,EAAOpG,QAA8B,MAAdoG,EAAO,IAA4B,MAAdA,EAAO,MAG5DrJ,EAAOD,QAAU,SAAUoZ,EAAKlW,EAAQmG,EAAM6B,GAC5C,IAAI+X,EAAStgB,EAAgByW,GAEzB2U,GAAuBtoB,GAAM,WAE/B,IAAIvB,EAAI,GAER,OADAA,EAAE+e,GAAU,WAAc,OAAO,GACZ,GAAd,GAAG7J,GAAKlV,MAGb8pB,EAAoBD,IAAwBtoB,GAAM,WAEpD,IAAIwoB,GAAa,EACbzN,EAAK,IAkBT,MAhBY,UAARpH,IAIFoH,EAAK,GAGLA,EAAGjV,YAAc,GACjBiV,EAAGjV,YAAYH,GAAW,WAAc,OAAOoV,GAC/CA,EAAGzY,MAAQ,GACXyY,EAAGyC,GAAU,IAAIA,IAGnBzC,EAAGnX,KAAO,WAAiC,OAAnB4kB,GAAa,EAAa,MAElDzN,EAAGyC,GAAQ,KACHgL,KAGV,IACGF,IACAC,GACQ,YAAR5U,KACCqU,IACAE,GACCC,IAEM,UAARxU,IAAoByU,EACrB,CACA,IAAIK,EAAqB,IAAIjL,GACzB1F,EAAUlU,EAAK4Z,EAAQ,GAAG7J,IAAM,SAAUC,EAAc5Q,EAAQ6X,EAAK6N,EAAMC,GAC7E,OAAI3lB,EAAOY,OAAS3C,EACdqnB,IAAwBK,EAInB,CAAEzlB,MAAM,EAAM/G,MAAOssB,EAAmBptB,KAAK2H,EAAQ6X,EAAK6N,IAE5D,CAAExlB,MAAM,EAAM/G,MAAOyX,EAAavY,KAAKwf,EAAK7X,EAAQ0lB,IAEtD,CAAExlB,MAAM,KACd,CACDglB,iBAAkBA,EAClBC,6CAA8CA,IAE5CS,EAAe9Q,EAAQ,GACvB+Q,EAAc/Q,EAAQ,GAE1B5X,EAAS7C,OAAOP,UAAW6W,EAAKiV,GAChC1oB,EAASsB,OAAO1E,UAAW0gB,EAAkB,GAAV/f,EAG/B,SAAUuE,EAAQia,GAAO,OAAO4M,EAAYxtB,KAAK2G,EAAQnH,KAAMohB,IAG/D,SAAUja,GAAU,OAAO6mB,EAAYxtB,KAAK2G,EAAQnH,QAItD4K,GAAMvB,EAA4B1C,OAAO1E,UAAU0gB,GAAS,QAAQ,K,kCC3H1E,IAAIzf,EAAI,EAAQ,QACZ+qB,EAAO,EAAQ,QAAgChF,IAC/ChW,EAA+B,EAAQ,QAEvCC,EAAsBD,EAA6B,OAKvD/P,EAAE,CAAEM,OAAQ,QAASC,OAAO,EAAMkH,QAASuI,GAAuB,CAChE+V,IAAK,SAAarf,GAChB,OAAOqkB,EAAKjuB,KAAM4J,EAAY3G,UAAUL,OAAS,EAAIK,UAAU,QAAKJ,O,sBCZxE,8BACE,OAAO0B,GAAMA,EAAGiC,MAAQA,MAAQjC,GAIlC5E,EAAOD,QAELwuB,EAA2B,iBAAdC,YAA0BA,aACvCD,EAAuB,iBAAV9pB,QAAsBA,SACnC8pB,EAAqB,iBAARnuB,MAAoBA,OACjCmuB,EAAuB,iBAAVhlB,GAAsBA,IAEnC,WAAe,OAAOlJ,KAAtB,IAAoCoQ,SAAS,cAATA,K,2CCZtC,IAAIlN,EAAI,EAAQ,QACZwB,EAAc,EAAQ,QACtB0pB,EAAU,EAAQ,QAClBrqB,EAAkB,EAAQ,QAC1Bwe,EAAiC,EAAQ,QACzCnP,EAAiB,EAAQ,QAI7BlQ,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAME,MAAOlG,GAAe,CACtD2pB,0BAA2B,SAAmCtsB,GAC5D,IAKIH,EAAKiL,EALLjJ,EAAIG,EAAgBhC,GACpBkD,EAA2Bsd,EAA+Bte,EAC1DoN,EAAO+c,EAAQxqB,GACfoF,EAAS,GACTf,EAAQ,EAEZ,MAAOoJ,EAAKzO,OAASqF,EACnB4E,EAAa5H,EAAyBrB,EAAGhC,EAAMyP,EAAKpJ,WACjCpF,IAAfgK,GAA0BuG,EAAepK,EAAQpH,EAAKiL,GAE5D,OAAO7D,M,qBCrBX,IAAIE,EAAS,EAAQ,QACjBC,EAAe,EAAQ,QACvBmlB,EAAuB,EAAQ,QAC/BjlB,EAA8B,EAAQ,QACtChH,EAAkB,EAAQ,QAE1B0H,EAAW1H,EAAgB,YAC3BC,EAAgBD,EAAgB,eAChCksB,EAAcD,EAAqB7Q,OAEvC,IAAK,IAAInU,KAAmBH,EAAc,CACxC,IAAII,EAAaL,EAAOI,GACpBE,EAAsBD,GAAcA,EAAWtH,UACnD,GAAIuH,EAAqB,CAEvB,GAAIA,EAAoBO,KAAcwkB,EAAa,IACjDllB,EAA4BG,EAAqBO,EAAUwkB,GAC3D,MAAO/pB,GACPgF,EAAoBO,GAAYwkB,EAKlC,GAHK/kB,EAAoBlH,IACvB+G,EAA4BG,EAAqBlH,EAAegH,GAE9DH,EAAaG,GAAkB,IAAK,IAAIyB,KAAeujB,EAEzD,GAAI9kB,EAAoBuB,KAAiBujB,EAAqBvjB,GAAc,IAC1E1B,EAA4BG,EAAqBuB,EAAaujB,EAAqBvjB,IACnF,MAAOvG,GACPgF,EAAoBuB,GAAeujB,EAAqBvjB,O,qBC5BhE,IAAImC,EAAqB,EAAQ,QAC7BC,EAAc,EAAQ,QAI1BxN,EAAOD,QAAUqB,OAAOsQ,MAAQ,SAAczN,GAC5C,OAAOsJ,EAAmBtJ,EAAGuJ,K,kCCH/B,IAAIjK,EAAI,EAAQ,QACZwB,EAAc,EAAQ,QACtBwE,EAAS,EAAQ,QACjBpE,EAAM,EAAQ,QACdwM,EAAW,EAAQ,QACnBtQ,EAAiB,EAAQ,QAAuCiD,EAChEuI,EAA4B,EAAQ,QAEpCgiB,EAAetlB,EAAO9H,OAE1B,GAAIsD,GAAsC,mBAAhB8pB,MAAiC,gBAAiBA,EAAavsB,iBAExDY,IAA/B2rB,IAAe3K,aACd,CACD,IAAI4K,EAA8B,GAE9BC,EAAgB,WAClB,IAAI7K,EAAc5gB,UAAUL,OAAS,QAAsBC,IAAjBI,UAAU,QAAmBJ,EAAYL,OAAOS,UAAU,IAChG+F,EAAShJ,gBAAgB0uB,EACzB,IAAIF,EAAa3K,QAEDhhB,IAAhBghB,EAA4B2K,IAAiBA,EAAa3K,GAE9D,MADoB,KAAhBA,IAAoB4K,EAA4BzlB,IAAU,GACvDA,GAETwD,EAA0BkiB,EAAeF,GACzC,IAAIG,EAAkBD,EAAczsB,UAAYusB,EAAavsB,UAC7D0sB,EAAgB1jB,YAAcyjB,EAE9B,IAAIE,EAAiBD,EAAgBzqB,SACjC2qB,EAAyC,gBAAhCrsB,OAAOgsB,EAAa,SAC7BrmB,EAAS,wBACbnH,EAAe2tB,EAAiB,cAAe,CAC7CxgB,cAAc,EACdjN,IAAK,WACH,IAAIgU,EAAS5D,EAAStR,MAAQA,KAAKolB,UAAYplB,KAC3CmH,EAASynB,EAAepuB,KAAK0U,GACjC,GAAIpQ,EAAI2pB,EAA6BvZ,GAAS,MAAO,GACrD,IAAI4Z,EAAOD,EAAS1nB,EAAO1C,MAAM,GAAI,GAAK0C,EAAOqN,QAAQrM,EAAQ,MACjE,MAAgB,KAAT2mB,OAAcjsB,EAAYisB,KAIrC5rB,EAAE,CAAEgG,QAAQ,EAAMyB,QAAQ,GAAQ,CAChCvJ,OAAQstB,M,qBC/CZ,IAAI5pB,EAAM,EAAQ,QACd1B,EAAW,EAAQ,QACnBuU,EAAY,EAAQ,QACpBoX,EAA2B,EAAQ,QAEnCnU,EAAWjD,EAAU,YACrBkL,EAAkB9hB,OAAOkB,UAI7BtC,EAAOD,QAAUqvB,EAA2BhuB,OAAOqb,eAAiB,SAAUxY,GAE5E,OADAA,EAAIR,EAASQ,GACTkB,EAAIlB,EAAGgX,GAAkBhX,EAAEgX,GACH,mBAAjBhX,EAAEqH,aAA6BrH,aAAaA,EAAEqH,YAChDrH,EAAEqH,YAAYhJ,UACd2B,aAAa7C,OAAS8hB,EAAkB,O,qBCfnD,IAAI1d,EAAQ,EAAQ,QAEpBxF,EAAOD,SAAWyF,GAAM,WACtB,SAAS4W,KAET,OADAA,EAAE9Z,UAAUgJ,YAAc,KACnBlK,OAAOqb,eAAe,IAAIL,KAASA,EAAE9Z,c,kCCJ9C,IAAI8B,EAAkB,EAAQ,QAC1B8lB,EAAmB,EAAQ,QAC3B3Y,EAAY,EAAQ,QACpBM,EAAsB,EAAQ,QAC9BC,EAAiB,EAAQ,QAEzBud,EAAiB,iBACjBrd,EAAmBH,EAAoBzC,IACvC6C,EAAmBJ,EAAoBK,UAAUmd,GAYrDrvB,EAAOD,QAAU+R,EAAerH,MAAO,SAAS,SAAU0H,EAAUwF,GAClE3F,EAAiB3R,KAAM,CACrB+R,KAAMid,EACNxrB,OAAQO,EAAgB+N,GACxB7J,MAAO,EACPqP,KAAMA,OAIP,WACD,IAAIrF,EAAQL,EAAiB5R,MACzBwD,EAASyO,EAAMzO,OACf8T,EAAOrF,EAAMqF,KACbrP,EAAQgK,EAAMhK,QAClB,OAAKzE,GAAUyE,GAASzE,EAAOZ,QAC7BqP,EAAMzO,YAASX,EACR,CAAEvB,WAAOuB,EAAWwF,MAAM,IAEvB,QAARiP,EAAuB,CAAEhW,MAAO2G,EAAOI,MAAM,GACrC,UAARiP,EAAyB,CAAEhW,MAAOkC,EAAOyE,GAAQI,MAAM,GACpD,CAAE/G,MAAO,CAAC2G,EAAOzE,EAAOyE,IAASI,MAAM,KAC7C,UAKH6I,EAAU+d,UAAY/d,EAAU9G,MAGhCyf,EAAiB,QACjBA,EAAiB,UACjBA,EAAiB,Y,qBCpDjB,IAAIxkB,EAAW,EAAQ,QAEvB1F,EAAOD,QAAU,SAAU8D,EAAQmY,EAAKhQ,GACtC,IAAK,IAAI/J,KAAO+Z,EAAKtW,EAAS7B,EAAQ5B,EAAK+Z,EAAI/Z,GAAM+J,GACrD,OAAOnI,I,qBCJT,IAAIN,EAAI,EAAQ,QACZiC,EAAQ,EAAQ,QAChBpB,EAAkB,EAAQ,QAC1BiB,EAAiC,EAAQ,QAAmDf,EAC5FS,EAAc,EAAQ,QAEtB+jB,EAAsBtjB,GAAM,WAAcH,EAA+B,MACzE0H,GAAUhI,GAAe+jB,EAI7BvlB,EAAE,CAAEM,OAAQ,SAAUkH,MAAM,EAAMC,OAAQ+B,EAAQ9B,MAAOlG,GAAe,CACtEO,yBAA0B,SAAkCV,EAAI3C,GAC9D,OAAOoD,EAA+BjB,EAAgBQ,GAAK3C,O,qBCb/D,IAAIS,EAAkB,EAAQ,QAE9B3C,EAAQuE,EAAI5B,G,mBCFZ1C,EAAOD,QAAU,SAAUqJ,GACzB,IACE,MAAO,CAAEvE,OAAO,EAAOlD,MAAOyH,KAC9B,MAAOvE,GACP,MAAO,CAAEA,OAAO,EAAMlD,MAAOkD,M,kCCHjC,IAiDI0qB,EAAUC,EAAsBC,EAAgBC,EAjDhDnsB,EAAI,EAAQ,QACZ4Q,EAAU,EAAQ,QAClB5K,EAAS,EAAQ,QACjBY,EAAa,EAAQ,QACrBwlB,EAAgB,EAAQ,QACxBjqB,EAAW,EAAQ,QACnB2Q,EAAc,EAAQ,QACtBsC,EAAiB,EAAQ,QACzBnC,EAAa,EAAQ,QACrB7E,EAAW,EAAQ,QACnB7O,EAAY,EAAQ,QACpBwT,EAAa,EAAQ,QACrByD,EAAgB,EAAQ,QACxBxD,EAAU,EAAQ,QAClBmC,EAA8B,EAAQ,QACtCpS,EAAqB,EAAQ,QAC7BoiB,EAAO,EAAQ,QAAqBtZ,IACpCwgB,EAAY,EAAQ,QACpBC,EAAiB,EAAQ,QACzBC,EAAmB,EAAQ,QAC3BC,EAA6B,EAAQ,QACrCC,EAAU,EAAQ,QAClBne,EAAsB,EAAQ,QAC9B/E,EAAW,EAAQ,QACnBpK,EAAkB,EAAQ,QAC1BwM,EAAU,EAAQ,QAClBhE,EAAa,EAAQ,QAErBC,EAAUzI,EAAgB,WAC1ButB,EAAU,UACVhe,EAAmBJ,EAAoBtQ,IACvCyQ,EAAmBH,EAAoBzC,IACvC8gB,EAA0Bre,EAAoBK,UAAU+d,GACxDE,EAAqBR,EACrBrmB,EAAYC,EAAOD,UACnB4S,EAAW3S,EAAO2S,SAClB1M,EAAUjG,EAAOiG,QACjB4gB,EAASjmB,EAAW,SACpBqgB,EAAuBuF,EAA2BzrB,EAClD+rB,EAA8B7F,EAC9B8F,KAAoBpU,GAAYA,EAASqU,aAAehnB,EAAOinB,eAC/DC,EAAyD,mBAAzBC,sBAChCC,EAAsB,qBACtBC,EAAoB,mBACpBC,EAAU,EACVC,EAAY,EACZC,EAAW,EACXC,EAAU,EACVC,GAAY,EAGZlkB,GAASD,EAASmjB,GAAS,WAC7B,IAAIiB,EAAyBnX,EAAcoW,KAAwBttB,OAAOstB,GAC1E,IAAKe,EAAwB,CAI3B,GAAmB,KAAfhmB,EAAmB,OAAO,EAE9B,IAAKgE,IAAYuhB,EAAwB,OAAO,EAGlD,GAAItc,IAAYgc,EAAmB7tB,UAAU,WAAY,OAAO,EAIhE,GAAI4I,GAAc,IAAM,cAActI,KAAKutB,GAAqB,OAAO,EAEvE,IAAIzI,EAAUyI,EAAmB7H,QAAQ,GACrC6I,EAAc,SAAU/nB,GAC1BA,GAAK,eAA6B,gBAEhCkC,EAAcoc,EAAQpc,YAAc,GAExC,OADAA,EAAYH,GAAWgmB,IACdzJ,EAAQC,MAAK,yBAAwCwJ,MAG5DzL,GAAsB3Y,KAAW2L,GAA4B,SAAU5M,GACzEqkB,EAAmBiB,IAAItlB,GAAU,UAAS,kBAIxCulB,GAAa,SAAUzsB,GACzB,IAAI+iB,EACJ,SAAOhW,EAAS/M,IAAkC,mBAAnB+iB,EAAO/iB,EAAG+iB,QAAsBA,GAG7DJ,GAAS,SAAUjV,EAAOgf,GAC5B,IAAIhf,EAAMif,SAAV,CACAjf,EAAMif,UAAW,EACjB,IAAIC,EAAQlf,EAAMmf,UAClB7B,GAAU,WACR,IAAIjuB,EAAQ2Q,EAAM3Q,MACd+vB,EAAKpf,EAAMA,OAASwe,EACpBxoB,EAAQ,EAEZ,MAAOkpB,EAAMvuB,OAASqF,EAAO,CAC3B,IAKIe,EAAQse,EAAMgK,EALdC,EAAWJ,EAAMlpB,KACjBupB,EAAUH,EAAKE,EAASF,GAAKE,EAASE,KACtCxJ,EAAUsJ,EAAStJ,QACnByJ,EAASH,EAASG,OAClBzV,EAASsV,EAAStV,OAEtB,IACMuV,GACGH,IACCpf,EAAM0f,YAAcf,IAAWgB,GAAkB3f,GACrDA,EAAM0f,UAAYhB,IAEJ,IAAZa,EAAkBxoB,EAAS1H,GAEzB2a,GAAQA,EAAO+L,QACnBhf,EAASwoB,EAAQlwB,GACb2a,IACFA,EAAO8L,OACPuJ,GAAS,IAGTtoB,IAAWuoB,EAASlK,QACtBqK,EAAOzoB,EAAU,yBACRqe,EAAO0J,GAAWhoB,IAC3Bse,EAAK9mB,KAAKwI,EAAQif,EAASyJ,GACtBzJ,EAAQjf,IACV0oB,EAAOpwB,GACd,MAAOkD,GACHyX,IAAWqV,GAAQrV,EAAO8L,OAC9B2J,EAAOltB,IAGXyN,EAAMmf,UAAY,GAClBnf,EAAMif,UAAW,EACbD,IAAahf,EAAM0f,WAAWE,GAAY5f,QAI9Cke,GAAgB,SAAUvvB,EAAMymB,EAASyK,GAC3C,IAAIjiB,EAAO2hB,EACPvB,GACFpgB,EAAQgM,EAASqU,YAAY,SAC7BrgB,EAAMwX,QAAUA,EAChBxX,EAAMiiB,OAASA,EACfjiB,EAAMkiB,UAAUnxB,GAAM,GAAO,GAC7BsI,EAAOinB,cAActgB,IAChBA,EAAQ,CAAEwX,QAASA,EAASyK,OAAQA,IACtC1B,IAA2BoB,EAAUtoB,EAAO,KAAOtI,IAAQ4wB,EAAQ3hB,GAC/DjP,IAAS0vB,GAAqBb,EAAiB,8BAA+BqC,IAGrFD,GAAc,SAAU5f,GAC1BoW,EAAK7nB,KAAK0I,GAAQ,WAChB,IAGIF,EAHAqe,EAAUpV,EAAMiG,OAChB5W,EAAQ2Q,EAAM3Q,MACd0wB,EAAeC,GAAYhgB,GAE/B,GAAI+f,IACFhpB,EAAS2mB,GAAQ,WACX9gB,EACFM,EAAQ+iB,KAAK,qBAAsB5wB,EAAO+lB,GACrC8I,GAAcG,EAAqBjJ,EAAS/lB,MAGrD2Q,EAAM0f,UAAY9iB,GAAWojB,GAAYhgB,GAAS2e,GAAYD,EAC1D3nB,EAAOxE,OAAO,MAAMwE,EAAO1H,UAKjC2wB,GAAc,SAAUhgB,GAC1B,OAAOA,EAAM0f,YAAchB,IAAY1e,EAAM6V,QAG3C8J,GAAoB,SAAU3f,GAChCoW,EAAK7nB,KAAK0I,GAAQ,WAChB,IAAIme,EAAUpV,EAAMiG,OAChBrJ,EACFM,EAAQ+iB,KAAK,mBAAoB7K,GAC5B8I,GAAcI,EAAmBlJ,EAASpV,EAAM3Q,WAIvDO,GAAO,SAAUa,EAAIuP,EAAOkgB,GAC9B,OAAO,SAAU7wB,GACfoB,EAAGuP,EAAO3Q,EAAO6wB,KAIjBC,GAAiB,SAAUngB,EAAO3Q,EAAO6wB,GACvClgB,EAAM5J,OACV4J,EAAM5J,MAAO,EACT8pB,IAAQlgB,EAAQkgB,GACpBlgB,EAAM3Q,MAAQA,EACd2Q,EAAMA,MAAQye,EACdxJ,GAAOjV,GAAO,KAGZogB,GAAkB,SAAUpgB,EAAO3Q,EAAO6wB,GAC5C,IAAIlgB,EAAM5J,KAAV,CACA4J,EAAM5J,MAAO,EACT8pB,IAAQlgB,EAAQkgB,GACpB,IACE,GAAIlgB,EAAMiG,SAAW5W,EAAO,MAAM2H,EAAU,oCAC5C,IAAIqe,EAAO0J,GAAW1vB,GAClBgmB,EACFiI,GAAU,WACR,IAAIhZ,EAAU,CAAElO,MAAM,GACtB,IACEif,EAAK9mB,KAAKc,EACRO,GAAKwwB,GAAiB9b,EAAStE,GAC/BpQ,GAAKuwB,GAAgB7b,EAAStE,IAEhC,MAAOzN,GACP4tB,GAAe7b,EAAS/R,EAAOyN,QAInCA,EAAM3Q,MAAQA,EACd2Q,EAAMA,MAAQwe,EACdvJ,GAAOjV,GAAO,IAEhB,MAAOzN,GACP4tB,GAAe,CAAE/pB,MAAM,GAAS7D,EAAOyN,MAKvCvF,KAEFojB,EAAqB,SAAiBwC,GACpCrc,EAAWjW,KAAM8vB,EAAoBF,GACrCntB,EAAU6vB,GACVpD,EAAS1uB,KAAKR,MACd,IAAIiS,EAAQL,EAAiB5R,MAC7B,IACEsyB,EAASzwB,GAAKwwB,GAAiBpgB,GAAQpQ,GAAKuwB,GAAgBngB,IAC5D,MAAOzN,GACP4tB,GAAengB,EAAOzN,KAI1B0qB,EAAW,SAAiBoD,GAC1B3gB,EAAiB3R,KAAM,CACrB+R,KAAM6d,EACNvnB,MAAM,EACN6oB,UAAU,EACVpJ,QAAQ,EACRsJ,UAAW,GACXO,WAAW,EACX1f,MAAOue,EACPlvB,WAAOuB,KAGXqsB,EAASjtB,UAAY+T,EAAY8Z,EAAmB7tB,UAAW,CAG7DqlB,KAAM,SAAciL,EAAaC,GAC/B,IAAIvgB,EAAQ4d,EAAwB7vB,MAChCuxB,EAAWpH,EAAqBlkB,EAAmBjG,KAAM8vB,IAO7D,OANAyB,EAASF,GAA2B,mBAAfkB,GAA4BA,EACjDhB,EAASE,KAA4B,mBAAde,GAA4BA,EACnDjB,EAAStV,OAASpN,EAAUM,EAAQ8M,YAASpZ,EAC7CoP,EAAM6V,QAAS,EACf7V,EAAMmf,UAAU9qB,KAAKirB,GACjBtf,EAAMA,OAASue,GAAStJ,GAAOjV,GAAO,GACnCsf,EAASlK,SAIlB,MAAS,SAAUmL,GACjB,OAAOxyB,KAAKsnB,UAAKzkB,EAAW2vB,MAGhCrD,EAAuB,WACrB,IAAI9H,EAAU,IAAI6H,EACdjd,EAAQL,EAAiByV,GAC7BrnB,KAAKqnB,QAAUA,EACfrnB,KAAKioB,QAAUpmB,GAAKwwB,GAAiBpgB,GACrCjS,KAAK0xB,OAAS7vB,GAAKuwB,GAAgBngB,IAErCyd,EAA2BzrB,EAAIkmB,EAAuB,SAAU3hB,GAC9D,OAAOA,IAAMsnB,GAAsBtnB,IAAM4mB,EACrC,IAAID,EAAqB3mB,GACzBwnB,EAA4BxnB,IAG7BsL,GAAmC,mBAAjBwb,IACrBD,EAAaC,EAAcrtB,UAAUqlB,KAGrCjiB,EAASiqB,EAAcrtB,UAAW,QAAQ,SAAcswB,EAAaC,GACnE,IAAI7vB,EAAO3C,KACX,OAAO,IAAI8vB,GAAmB,SAAU7H,EAASyJ,GAC/CrC,EAAW7uB,KAAKmC,EAAMslB,EAASyJ,MAC9BpK,KAAKiL,EAAaC,KAEpB,CAAExkB,QAAQ,IAGQ,mBAAV+hB,GAAsB7sB,EAAE,CAAEgG,QAAQ,EAAMjI,YAAY,EAAM0J,QAAQ,GAAQ,CAEnF8nB,MAAO,SAAepS,GACpB,OAAOmP,EAAeM,EAAoBC,EAAO/sB,MAAMkG,EAAQjG,iBAMvEC,EAAE,CAAEgG,QAAQ,EAAMya,MAAM,EAAMhZ,OAAQ+B,IAAU,CAC9Cib,QAASmI,IAGXxX,EAAewX,EAAoBF,GAAS,GAAO,GACnDzZ,EAAWyZ,GAEXR,EAAiBtlB,EAAW8lB,GAG5B1sB,EAAE,CAAEM,OAAQosB,EAASllB,MAAM,EAAMC,OAAQ+B,IAAU,CAGjDglB,OAAQ,SAAgBvwB,GACtB,IAAIuxB,EAAavI,EAAqBnqB,MAEtC,OADA0yB,EAAWhB,OAAOlxB,UAAKqC,EAAW1B,GAC3BuxB,EAAWrL,WAItBnkB,EAAE,CAAEM,OAAQosB,EAASllB,MAAM,EAAMC,OAAQmJ,GAAWpH,IAAU,CAG5Dub,QAAS,SAAiBmC,GACxB,OAAOoF,EAAe1b,GAAW9T,OAASovB,EAAiBU,EAAqB9vB,KAAMoqB,MAI1FlnB,EAAE,CAAEM,OAAQosB,EAASllB,MAAM,EAAMC,OAAQ0a,IAAuB,CAG9D0L,IAAK,SAAatlB,GAChB,IAAIjD,EAAIxI,KACJ0yB,EAAavI,EAAqB3hB,GAClCyf,EAAUyK,EAAWzK,QACrByJ,EAASgB,EAAWhB,OACpB1oB,EAAS2mB,GAAQ,WACnB,IAAIgD,EAAkBlwB,EAAU+F,EAAEyf,SAC9BxK,EAAS,GACTnO,EAAU,EACVsjB,EAAY,EAChB1c,EAAQzK,GAAU,SAAU4b,GAC1B,IAAIpf,EAAQqH,IACRujB,GAAgB,EACpBpV,EAAOnX,UAAKzD,GACZ+vB,IACAD,EAAgBnyB,KAAKgI,EAAG6e,GAASC,MAAK,SAAUhmB,GAC1CuxB,IACJA,GAAgB,EAChBpV,EAAOxV,GAAS3G,IACdsxB,GAAa3K,EAAQxK,MACtBiU,QAEHkB,GAAa3K,EAAQxK,MAGzB,OADIzU,EAAOxE,OAAOktB,EAAO1oB,EAAO1H,OACzBoxB,EAAWrL,SAIpByL,KAAM,SAAcrnB,GAClB,IAAIjD,EAAIxI,KACJ0yB,EAAavI,EAAqB3hB,GAClCkpB,EAASgB,EAAWhB,OACpB1oB,EAAS2mB,GAAQ,WACnB,IAAIgD,EAAkBlwB,EAAU+F,EAAEyf,SAClC/R,EAAQzK,GAAU,SAAU4b,GAC1BsL,EAAgBnyB,KAAKgI,EAAG6e,GAASC,KAAKoL,EAAWzK,QAASyJ,SAI9D,OADI1oB,EAAOxE,OAAOktB,EAAO1oB,EAAO1H,OACzBoxB,EAAWrL,Y,qBC1XtB,IAAIviB,EAAM,EAAQ,QACdspB,EAAU,EAAQ,QAClB7L,EAAiC,EAAQ,QACzCtU,EAAuB,EAAQ,QAEnCtO,EAAOD,QAAU,SAAU8D,EAAQwE,GAIjC,IAHA,IAAIqJ,EAAO+c,EAAQpmB,GACfhH,EAAiBiN,EAAqBhK,EACtCgB,EAA2Bsd,EAA+Bte,EACrD5D,EAAI,EAAGA,EAAIgR,EAAKzO,OAAQvC,IAAK,CACpC,IAAIuB,EAAMyP,EAAKhR,GACVyE,EAAItB,EAAQ5B,IAAMZ,EAAewC,EAAQ5B,EAAKqD,EAAyB+C,EAAQpG,O,qBCXxF,IAAIiH,EAAU,EAAQ,QAItBlJ,EAAOD,QAAU0K,MAAMgE,SAAW,SAAiBgT,GACjD,MAAuB,SAAhBvY,EAAQuY,K,qBCLjB,IAAI/e,EAAkB,EAAQ,QAC1B6O,EAAY,EAAQ,QAEpBnH,EAAW1H,EAAgB,YAC3B+P,EAAiBhI,MAAMnI,UAG3BtC,EAAOD,QAAU,SAAU6E,GACzB,YAAc1B,IAAP0B,IAAqB2M,EAAU9G,QAAU7F,GAAM6N,EAAerI,KAAcxF,K,kCCPrF,IAAI9B,EAAY,EAAQ,QAEpBswB,EAAoB,SAAUvqB,GAChC,IAAIyf,EAASyJ,EACb1xB,KAAKqnB,QAAU,IAAI7e,GAAE,SAAUwqB,EAAWC,GACxC,QAAgBpwB,IAAZolB,QAAoCplB,IAAX6uB,EAAsB,MAAMzoB,UAAU,2BACnEgf,EAAU+K,EACVtB,EAASuB,KAEXjzB,KAAKioB,QAAUxlB,EAAUwlB,GACzBjoB,KAAK0xB,OAASjvB,EAAUivB,IAI1B/xB,EAAOD,QAAQuE,EAAI,SAAUuE,GAC3B,OAAO,IAAIuqB,EAAkBvqB,K,qBChB/B,IAAI4E,EAAa,EAAQ,QACrBkE,EAAW,EAAQ,QACnBxM,EAAM,EAAQ,QACd9D,EAAiB,EAAQ,QAAuCiD,EAChEue,EAAM,EAAQ,QACd0Q,EAAW,EAAQ,QAEnBC,EAAW3Q,EAAI,QACf9S,EAAK,EAEL6Z,EAAexoB,OAAOwoB,cAAgB,WACxC,OAAO,GAGL6J,EAAc,SAAU7uB,GAC1BvD,EAAeuD,EAAI4uB,EAAU,CAAE7xB,MAAO,CACpC+xB,SAAU,OAAQ3jB,EAClB4jB,SAAU,OAIVld,EAAU,SAAU7R,EAAI5C,GAE1B,IAAK2P,EAAS/M,GAAK,MAAoB,iBAANA,EAAiBA,GAAmB,iBAANA,EAAiB,IAAM,KAAOA,EAC7F,IAAKO,EAAIP,EAAI4uB,GAAW,CAEtB,IAAK5J,EAAahlB,GAAK,MAAO,IAE9B,IAAK5C,EAAQ,MAAO,IAEpByxB,EAAY7uB,GAEZ,OAAOA,EAAG4uB,GAAUE,UAGpBE,EAAc,SAAUhvB,EAAI5C,GAC9B,IAAKmD,EAAIP,EAAI4uB,GAAW,CAEtB,IAAK5J,EAAahlB,GAAK,OAAO,EAE9B,IAAK5C,EAAQ,OAAO,EAEpByxB,EAAY7uB,GAEZ,OAAOA,EAAG4uB,GAAUG,UAIpBE,EAAW,SAAUjvB,GAEvB,OADI2uB,GAAYO,EAAKva,UAAYqQ,EAAahlB,KAAQO,EAAIP,EAAI4uB,IAAWC,EAAY7uB,GAC9EA,GAGLkvB,EAAO9zB,EAAOD,QAAU,CAC1BwZ,UAAU,EACV9C,QAASA,EACTmd,YAAaA,EACbC,SAAUA,GAGZpmB,EAAW+lB,IAAY,G,qBC5DvB,IAAIvM,EAAwB,EAAQ,QAChC8M,EAAa,EAAQ,QACrBrxB,EAAkB,EAAQ,QAE1BC,EAAgBD,EAAgB,eAEhCsxB,EAAuE,aAAnDD,EAAW,WAAc,OAAOzwB,UAArB,IAG/B2wB,EAAS,SAAUrvB,EAAI3C,GACzB,IACE,OAAO2C,EAAG3C,GACV,MAAO4C,MAIX7E,EAAOD,QAAUknB,EAAwB8M,EAAa,SAAUnvB,GAC9D,IAAIX,EAAGggB,EAAK5a,EACZ,YAAcnG,IAAP0B,EAAmB,YAAqB,OAAPA,EAAc,OAEM,iBAAhDqf,EAAMgQ,EAAOhwB,EAAI7C,OAAOwD,GAAKjC,IAA8BshB,EAEnE+P,EAAoBD,EAAW9vB,GAEH,WAA3BoF,EAAS0qB,EAAW9vB,KAAsC,mBAAZA,EAAEiwB,OAAuB,YAAc7qB,I,qBCxB5F,IAAI0O,EAAS,EAAQ,QACjB8K,EAAM,EAAQ,QAEdnR,EAAOqG,EAAO,QAElB/X,EAAOD,QAAU,SAAUkC,GACzB,OAAOyP,EAAKzP,KAASyP,EAAKzP,GAAO4gB,EAAI5gB,M,kCCJvC,G,qDAAsB,qBAAXwC,OAAwB,CACjC,IAAIwZ,EAAgBxZ,OAAOyX,SAAS+B,cAE9BD,EAAmB,EAAQ,QAC/BC,EAAgBD,IAGV,kBAAmB9B,UACvB9a,OAAOC,eAAe6a,SAAU,gBAAiB,CAAE3a,IAAKyc,IAI5D,IAAIhC,EAAMiC,GAAiBA,EAAcjC,IAAItU,MAAM,2BAC/CsU,IACF,IAA0BA,EAAI,I,oBAKnB,I,6GCpBRmY,MAAM,oBACNC,IAAI,gB,GAEFD,MAAM,kBACNC,IAAI,gB,GAKFD,MAAM,kBACNC,IAAI,gB,yFAVb,yBAYM,MAZN,EAYM,CATJ,yBAC8B,MAD9B,EAC8B,U,4BAE9B,yBAKM,OALDD,MAAM,eAELrY,MAAK,OAAW,EAAAuY,WAAU,O,CAC9B,yBAC8B,MAD9B,EAC8B,W,gBAHnB,EAAAC,WAAWC,c,kBCRb,SAASC,EAAgBC,GACtC,GAAIhqB,MAAMgE,QAAQgmB,GAAM,OAAOA,E,sECDlB,SAASC,EAAsBD,EAAK/zB,GACjD,GAAsB,qBAAXe,QAA4BA,OAAOwK,YAAY7K,OAAOqzB,GAAjE,CACA,IAAIE,EAAO,GACPC,GAAK,EACLC,GAAK,EACLC,OAAK5xB,EAET,IACE,IAAK,IAAiC6xB,EAA7BC,EAAKP,EAAIhzB,OAAOwK,cAAmB2oB,GAAMG,EAAKC,EAAGxqB,QAAQ9B,MAAOksB,GAAK,EAG5E,GAFAD,EAAKhuB,KAAKouB,EAAGpzB,OAETjB,GAAKi0B,EAAK1xB,SAAWvC,EAAG,MAE9B,MAAOyd,GACP0W,GAAK,EACLC,EAAK3W,EARP,QAUE,IACOyW,GAAsB,MAAhBI,EAAG,WAAmBA,EAAG,YADtC,QAGE,GAAIH,EAAI,MAAMC,GAIlB,OAAOH,G,oBCxBM,SAASM,EAAkBR,EAAK9S,IAClC,MAAPA,GAAeA,EAAM8S,EAAIxxB,UAAQ0e,EAAM8S,EAAIxxB,QAE/C,IAAK,IAAIvC,EAAI,EAAGw0B,EAAO,IAAIzqB,MAAMkX,GAAMjhB,EAAIihB,EAAKjhB,IAC9Cw0B,EAAKx0B,GAAK+zB,EAAI/zB,GAGhB,OAAOw0B,ECNM,SAASC,EAA4Bh0B,EAAGi0B,GACrD,GAAKj0B,EAAL,CACA,GAAiB,kBAANA,EAAgB,OAAOk0B,EAAiBl0B,EAAGi0B,GACtD,IAAIjzB,EAAIf,OAAOkB,UAAUiC,SAAS1D,KAAKM,GAAG2D,MAAM,GAAI,GAEpD,MADU,WAAN3C,GAAkBhB,EAAEmK,cAAanJ,EAAIhB,EAAEmK,YAAYrK,MAC7C,QAANkB,GAAqB,QAANA,EAAoBsI,MAAMC,KAAKvJ,GACxC,cAANgB,GAAqB,2CAA2CS,KAAKT,GAAWkzB,EAAiBl0B,EAAGi0B,QAAxG,GCPa,SAASE,IACtB,MAAM,IAAIhsB,UAAU,6ICGP,SAASisB,EAAed,EAAK/zB,GAC1C,OAAO80B,EAAef,IAAQgB,EAAqBhB,EAAK/zB,IAAMg1B,EAA2BjB,EAAK/zB,IAAMi1B,ICJvF,SAASC,EAAmBnB,GACzC,GAAIhqB,MAAMgE,QAAQgmB,GAAM,OAAOY,EAAiBZ,GCFnC,SAASoB,EAAiBC,GACvC,GAAsB,qBAAXr0B,QAA0BA,OAAOwK,YAAY7K,OAAO00B,GAAO,OAAOrrB,MAAMC,KAAKorB,GCD3E,SAASC,IACtB,MAAM,IAAIzsB,UAAU,wICGP,SAAS0sB,EAAmBvB,GACzC,OAAOwB,EAAkBxB,IAAQyB,EAAgBzB,IAAQiB,EAA2BjB,IAAQ0B,I,gFCL/E,SAASC,EAAgBC,EAAKp0B,EAAKN,GAYhD,OAXIM,KAAOo0B,EACTj1B,OAAOC,eAAeg1B,EAAKp0B,EAAK,CAC9BN,MAAOA,EACPL,YAAY,EACZkN,cAAc,EACd0G,UAAU,IAGZmhB,EAAIp0B,GAAON,EAGN00B,ECVT,SAAS5H,EAAQrsB,EAAQk0B,GACvB,IAAI5kB,EAAOtQ,OAAOsQ,KAAKtP,GAEvB,GAAIhB,OAAOyR,sBAAuB,CAChC,IAAI0jB,EAAUn1B,OAAOyR,sBAAsBzQ,GACvCk0B,IAAgBC,EAAUA,EAAQljB,QAAO,SAAU4R,GACrD,OAAO7jB,OAAOkE,yBAAyBlD,EAAQ6iB,GAAK3jB,eAEtDoQ,EAAK/K,KAAKtD,MAAMqO,EAAM6kB,GAGxB,OAAO7kB,EAGM,SAAS8kB,EAAe3yB,GACrC,IAAK,IAAInD,EAAI,EAAGA,EAAI4C,UAAUL,OAAQvC,IAAK,CACzC,IAAI2H,EAAyB,MAAhB/E,UAAU5C,GAAa4C,UAAU5C,GAAK,GAE/CA,EAAI,EACN+tB,EAAQrtB,OAAOiH,IAAS,GAAMoB,SAAQ,SAAUxH,GAC9CZ,EAAewC,EAAQ5B,EAAKoG,EAAOpG,OAE5Bb,OAAOstB,0BAChBttB,OAAO0J,iBAAiBjH,EAAQzC,OAAOstB,0BAA0BrmB,IAEjEomB,EAAQrtB,OAAOiH,IAASoB,SAAQ,SAAUxH,GACxCb,OAAOC,eAAewC,EAAQ5B,EAAKb,OAAOkE,yBAAyB+C,EAAQpG,OAKjF,OAAO4B,E,4JChCF,MAAM4yB,EACT,YAAY31B,EAAI,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,IAC5BT,KAAKq2B,OAAQ,EACbr2B,KAAKS,EAAKA,GAAKA,EAAEgE,SAAY,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAEjD,QACIzE,KAAKS,EAAE,GAAK,EACZT,KAAKS,EAAE,GAAK,EACZT,KAAKS,EAAE,GAAK,EACZT,KAAKS,EAAE,GAAK,EACZT,KAAKS,EAAE,GAAK,EACZT,KAAKS,EAAE,GAAK,EAEhB,OACI,OAAO,IAAI21B,EAAUp2B,KAAKS,GAE9B,SAAS61B,GACLA,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GACjB61B,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GACjB61B,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GACjB61B,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GACjB61B,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GACjB61B,EAAG71B,EAAE,GAAKT,KAAKS,EAAE,GAErB,MAAMuR,GACF,IAAIvR,EAAIT,KAAKS,EACb,MAAO,CACH2pB,EAAG3pB,EAAE,GAAKuR,EAAMoY,EAAI3pB,EAAE,GAAKuR,EAAMukB,EAAI91B,EAAE,GACvC81B,EAAG91B,EAAE,GAAKuR,EAAMoY,EAAI3pB,EAAE,GAAKuR,EAAMukB,EAAI91B,EAAE,IAG/C,UAAU2pB,EAAGmM,GAGT,OAFAv2B,KAAKS,EAAE,IAAMT,KAAKS,EAAE,GAAK2pB,EAAIpqB,KAAKS,EAAE,GAAK81B,EACzCv2B,KAAKS,EAAE,IAAMT,KAAKS,EAAE,GAAK2pB,EAAIpqB,KAAKS,EAAE,GAAK81B,EAClCv2B,KAEX,MAAMw2B,EAAIC,GAKN,OAJAz2B,KAAKS,EAAE,IAAM+1B,EACbx2B,KAAKS,EAAE,IAAM+1B,EACbx2B,KAAKS,EAAE,IAAMg2B,EACbz2B,KAAKS,EAAE,IAAMg2B,EACNz2B,KAEX,OAAO02B,GACH,IAAIh2B,EAAI8F,KAAKmwB,IAAID,GACbt0B,EAAIoE,KAAKowB,IAAIF,GACbG,EAAM72B,KAAKS,EAAE,GAAKC,EAAIV,KAAKS,EAAE,GAAK2B,EAClC00B,EAAM92B,KAAKS,EAAE,GAAKC,EAAIV,KAAKS,EAAE,GAAK2B,EAClC20B,EAAM/2B,KAAKS,EAAE,IAAM2B,EAAIpC,KAAKS,EAAE,GAAKC,EACnCs2B,EAAMh3B,KAAKS,EAAE,IAAM2B,EAAIpC,KAAKS,EAAE,GAAKC,EAKvC,OAJAV,KAAKS,EAAE,GAAKo2B,EACZ72B,KAAKS,EAAE,GAAKq2B,EACZ92B,KAAKS,EAAE,GAAKs2B,EACZ/2B,KAAKS,EAAE,GAAKu2B,EACLh3B,KAEX,iBACI,MAAO,CACHoqB,EAAGpqB,KAAKS,EAAE,GACV81B,EAAGv2B,KAAKS,EAAE,IAGlB,KAAK+1B,EAAIC,GACL,IAAII,EAAM72B,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKg2B,EAC9BK,EAAM92B,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKg2B,EAC9BM,EAAM/2B,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK+1B,EAC9BQ,EAAMh3B,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAK+1B,EAKlC,OAJAx2B,KAAKS,EAAE,GAAKo2B,EACZ72B,KAAKS,EAAE,GAAKq2B,EACZ92B,KAAKS,EAAE,GAAKs2B,EACZ/2B,KAAKS,EAAE,GAAKu2B,EACLh3B,KAEX,SAASi3B,GACL,IAAIJ,EAAM72B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GACrDq2B,EAAM92B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GACrDs2B,EAAM/2B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GACrDu2B,EAAMh3B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GACrDy2B,EAAKl3B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAChE02B,EAAKn3B,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAAKw2B,EAAOx2B,EAAE,GAAKT,KAAKS,EAAE,GAOpE,OANAT,KAAKS,EAAE,GAAKo2B,EACZ72B,KAAKS,EAAE,GAAKq2B,EACZ92B,KAAKS,EAAE,GAAKs2B,EACZ/2B,KAAKS,EAAE,GAAKu2B,EACZh3B,KAAKS,EAAE,GAAKy2B,EACZl3B,KAAKS,EAAE,GAAK02B,EACLn3B,KAEX,SACI,IAAIW,EAAI,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IACpD22B,EAAKp3B,KAAKS,EAAE,GAAKE,EACjB02B,GAAMr3B,KAAKS,EAAE,GAAKE,EAClB22B,GAAMt3B,KAAKS,EAAE,GAAKE,EAClB42B,EAAKv3B,KAAKS,EAAE,GAAKE,EACjB62B,EAAK72B,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IACrDg3B,EAAK92B,GAAKX,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,GAAKT,KAAKS,EAAE,IAOzD,OANAT,KAAKS,EAAE,GAAK22B,EACZp3B,KAAKS,EAAE,GAAK42B,EACZr3B,KAAKS,EAAE,GAAK62B,EACZt3B,KAAKS,EAAE,GAAK82B,EACZv3B,KAAKS,EAAE,GAAK+2B,EACZx3B,KAAKS,EAAE,GAAKg3B,EACLz3B,KAEX,YACI,OAAOA,KAAKS,EAEhB,YACI,IAAIqC,EAAI9C,KAAKS,EAAE,GACXsC,EAAI/C,KAAKS,EAAE,GACXC,EAAIV,KAAKS,EAAE,GACXE,EAAIX,KAAKS,EAAE,GACXkI,EAAI3I,KAAKS,EAAE,GACXwD,EAAIjE,KAAKS,EAAE,GACXi3B,EAAQ50B,EAAInC,EAAIoC,EAAIrC,EACxB,IAAIsI,EAAS,CACTohB,EAAGzhB,EACH4tB,EAAGtyB,EACH0zB,SAAU,EACVC,OAAQ,EACRC,OAAQ,EACRC,MAAO,EACPC,MAAO,GAEX,GAAS,GAALj1B,GAAe,GAALC,EAAQ,CAClB,IAAI5B,EAAIqF,KAAKwxB,KAAKl1B,EAAIA,EAAIC,EAAIA,GAC9BiG,EAAO2uB,SAAW50B,EAAI,EAAIyD,KAAKyxB,KAAKn1B,EAAI3B,IAAMqF,KAAKyxB,KAAKn1B,EAAI3B,GAC5D6H,EAAO4uB,OAASz2B,EAChB6H,EAAO6uB,OAASH,EAAQv2B,EACxB6H,EAAO8uB,OAASh1B,EAAIpC,EAAIqC,EAAIpC,GAAK+2B,EACjC1uB,EAAO+uB,MAAQ,OAEd,GAAS,GAALr3B,GAAe,GAALC,EAAQ,CACvB,IAAIyB,EAAIoE,KAAKwxB,KAAKt3B,EAAIA,EAAIC,EAAIA,GAC9BqI,EAAO2uB,SACHnxB,KAAKukB,GAAK,GAAKpqB,EAAI,EAAI6F,KAAKyxB,MAAMv3B,EAAI0B,IAAMoE,KAAKyxB,KAAKv3B,EAAI0B,IAC9D4G,EAAO4uB,OAASF,EAAQt1B,EACxB4G,EAAO6uB,OAASz1B,EAChB4G,EAAO8uB,MAAQ,EACf9uB,EAAO+uB,OAASj1B,EAAIpC,EAAIqC,EAAIpC,GAAK+2B,EAKrC,OADA1uB,EAAO2uB,SAAWO,EAAKC,aAAanvB,EAAO2uB,UACpC3uB,GAGf,IAAIovB,EAAe,iBAAkBC,EAAgB,kBAAmBC,EAAgB,kBAAmBC,EAAiB,mBAAoBC,EAAiBhyB,KAAKukB,GAAK,IAAK0N,EAAiB,IAAMjyB,KAAKukB,GAAI2N,EAAO,IAAKC,EAAe,GAAIC,EAAO,IAAKC,EAAgB,kBAAmBC,EAAc,gBAAiBC,EAAY,OAAQC,EAAS,CACtVC,UAAW,CAAC,IAAK,IAAK,KACtBC,aAAc,CAAC,IAAK,IAAK,KACzBC,KAAM,CAAC,EAAG,IAAK,KACfC,WAAY,CAAC,IAAK,IAAK,KACvBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,MAAO,CAAC,EAAG,EAAG,GACdC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,KAAM,CAAC,EAAG,EAAG,KACbC,WAAY,CAAC,IAAK,GAAI,KACtBC,MAAO,CAAC,IAAK,GAAI,IACjBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,WAAY,CAAC,IAAK,IAAK,GACvBC,UAAW,CAAC,IAAK,IAAK,IACtBC,MAAO,CAAC,IAAK,IAAK,IAClBC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,SAAU,CAAC,IAAK,IAAK,KACrBC,QAAS,CAAC,IAAK,GAAI,IACnBC,KAAM,CAAC,EAAG,IAAK,KACfC,SAAU,CAAC,EAAG,EAAG,KACjBC,SAAU,CAAC,EAAG,IAAK,KACnBC,cAAe,CAAC,IAAK,IAAK,IAC1BC,SAAU,CAAC,IAAK,IAAK,KACrBC,UAAW,CAAC,EAAG,IAAK,GACpBC,SAAU,CAAC,IAAK,IAAK,KACrBC,UAAW,CAAC,IAAK,IAAK,KACtBC,YAAa,CAAC,IAAK,EAAG,KACtBC,eAAgB,CAAC,GAAI,IAAK,IAC1BC,WAAY,CAAC,IAAK,IAAK,GACvBC,WAAY,CAAC,IAAK,GAAI,KACtBC,QAAS,CAAC,IAAK,EAAG,GAClBC,WAAY,CAAC,IAAK,IAAK,KACvBC,aAAc,CAAC,IAAK,IAAK,KACzBC,cAAe,CAAC,GAAI,GAAI,KACxBC,cAAe,CAAC,GAAI,GAAI,IACxBC,cAAe,CAAC,GAAI,GAAI,IACxBC,cAAe,CAAC,EAAG,IAAK,KACxBC,WAAY,CAAC,IAAK,EAAG,KACrBC,SAAU,CAAC,IAAK,GAAI,KACpBC,YAAa,CAAC,EAAG,IAAK,KACtBC,QAAS,CAAC,IAAK,IAAK,KACpBC,QAAS,CAAC,IAAK,IAAK,KACpBC,WAAY,CAAC,GAAI,IAAK,KACtBC,UAAW,CAAC,IAAK,GAAI,IACrBC,YAAa,CAAC,IAAK,IAAK,KACxBC,YAAa,CAAC,GAAI,IAAK,IACvBC,QAAS,CAAC,IAAK,EAAG,KAClBC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,KAAM,CAAC,IAAK,IAAK,GACjBC,UAAW,CAAC,IAAK,IAAK,IACtBC,KAAM,CAAC,IAAK,IAAK,KACjBC,MAAO,CAAC,EAAG,IAAK,GAChBC,YAAa,CAAC,IAAK,IAAK,IACxBC,KAAM,CAAC,IAAK,IAAK,KACjBC,SAAU,CAAC,IAAK,IAAK,KACrBC,QAAS,CAAC,IAAK,IAAK,KACpBC,UAAW,CAAC,IAAK,GAAI,IACrBC,OAAQ,CAAC,GAAI,EAAG,KAChBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,SAAU,CAAC,IAAK,IAAK,KACrBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,UAAW,CAAC,IAAK,IAAK,GACtBC,aAAc,CAAC,IAAK,IAAK,KACzBC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,qBAAsB,CAAC,IAAK,IAAK,KACjCC,UAAW,CAAC,IAAK,IAAK,KACtBC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,YAAa,CAAC,IAAK,IAAK,KACxBC,cAAe,CAAC,GAAI,IAAK,KACzBC,aAAc,CAAC,IAAK,IAAK,KACzBC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,eAAgB,CAAC,IAAK,IAAK,KAC3BC,YAAa,CAAC,IAAK,IAAK,KACxBC,KAAM,CAAC,EAAG,IAAK,GACfC,UAAW,CAAC,GAAI,IAAK,IACrBC,MAAO,CAAC,IAAK,IAAK,KAClBC,QAAS,CAAC,IAAK,EAAG,KAClBC,OAAQ,CAAC,IAAK,EAAG,GACjBC,iBAAkB,CAAC,IAAK,IAAK,KAC7BC,WAAY,CAAC,EAAG,EAAG,KACnBC,aAAc,CAAC,IAAK,GAAI,KACxBC,aAAc,CAAC,IAAK,IAAK,KACzBC,eAAgB,CAAC,GAAI,IAAK,KAC1BC,gBAAiB,CAAC,IAAK,IAAK,KAC5BC,kBAAmB,CAAC,EAAG,IAAK,KAC5BC,gBAAiB,CAAC,GAAI,IAAK,KAC3BC,gBAAiB,CAAC,IAAK,GAAI,KAC3BC,aAAc,CAAC,GAAI,GAAI,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,SAAU,CAAC,IAAK,IAAK,KACrBC,YAAa,CAAC,IAAK,IAAK,KACxBC,KAAM,CAAC,EAAG,EAAG,KACbC,QAAS,CAAC,IAAK,IAAK,KACpBC,MAAO,CAAC,IAAK,IAAK,GAClBC,UAAW,CAAC,IAAK,IAAK,IACtBC,OAAQ,CAAC,IAAK,IAAK,GACnBC,UAAW,CAAC,IAAK,GAAI,GACrBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,UAAW,CAAC,IAAK,IAAK,KACtBC,cAAe,CAAC,IAAK,IAAK,KAC1BC,cAAe,CAAC,IAAK,IAAK,KAC1BC,WAAY,CAAC,IAAK,IAAK,KACvBC,UAAW,CAAC,IAAK,IAAK,KACtBC,KAAM,CAAC,IAAK,IAAK,IACjBC,KAAM,CAAC,IAAK,IAAK,KACjBC,KAAM,CAAC,IAAK,IAAK,KACjBC,WAAY,CAAC,IAAK,IAAK,KACvBC,OAAQ,CAAC,IAAK,EAAG,KACjBC,cAAe,CAAC,IAAK,GAAI,KACzBC,IAAK,CAAC,IAAK,EAAG,GACdC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,YAAa,CAAC,IAAK,GAAI,IACvBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,WAAY,CAAC,IAAK,IAAK,IACvBC,SAAU,CAAC,GAAI,IAAK,IACpBC,SAAU,CAAC,IAAK,IAAK,KACrBC,OAAQ,CAAC,IAAK,GAAI,IAClBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,QAAS,CAAC,IAAK,IAAK,KACpBC,UAAW,CAAC,IAAK,GAAI,KACrBC,UAAW,CAAC,IAAK,IAAK,KACtBC,UAAW,CAAC,IAAK,IAAK,KACtBC,KAAM,CAAC,IAAK,IAAK,KACjBC,YAAa,CAAC,EAAG,IAAK,KACtBC,UAAW,CAAC,GAAI,IAAK,KACrBC,IAAK,CAAC,IAAK,IAAK,KAChBC,KAAM,CAAC,EAAG,IAAK,KACfC,QAAS,CAAC,IAAK,IAAK,KACpBC,YAAa,CAAC,IAAK,IAAK,IAAK,GAC7BC,OAAQ,CAAC,IAAK,GAAI,IAClBC,UAAW,CAAC,GAAI,IAAK,KACrBC,OAAQ,CAAC,IAAK,IAAK,KACnBC,MAAO,CAAC,IAAK,IAAK,KAClBC,MAAO,CAAC,IAAK,IAAK,KAClBC,WAAY,CAAC,IAAK,IAAK,KACvBC,OAAQ,CAAC,IAAK,IAAK,GACnBC,YAAa,CAAC,IAAK,IAAK,IACzBC,EAAY,uCAAwCC,EAAY,GACnE,MAAMC,EAAwC,qBAA1BC,uBAAyCA,uBACzD,SAAUx+B,GACN6M,WAAW7M,EAAG,KAETi0B,EAAO,CAChB,WAAWlC,GACP,SAAUA,GAAuB,GAAhBA,EAAI0M,WAEzB,YAAY1M,GACR,SAAUA,GAAOA,EAAI/qB,aAAe+qB,EAAIx1B,MAAQw1B,EAAIhzB,QAExD,eAAegzB,GACX,QAASA,GAAOA,EAAI/qB,cAAgBlK,QAExC,SAASi1B,GACL,OAAOj1B,OAAOkB,UAAUiC,SAAS1D,KAAKw1B,KAASoC,GAEnD,UAAUpC,GACN,OAAQj1B,OAAOkB,UAAUiC,SAAS1D,KAAKw1B,KAASqC,IAC3C5S,MAAMuQ,IACP2M,SAAS3M,IAEjB,UAAUA,GACN,OAAOj1B,OAAOkB,UAAUiC,SAAS1D,KAAKw1B,KAASsC,GAEnD,WAAWtC,GACP,OAAOj1B,OAAOkB,UAAUiC,SAAS1D,KAAKw1B,KAASuC,GAEnD,SAAS7O,GACL,OAAOA,aAAe3oB,QAE1B,gBAAgB6hC,GACZ,GAAwB,kBAAbA,EACP,OAAO,EAEX,IAAIC,EAAYD,EAAS,GACzB,MAAsB,MAAdC,GACU,MAAdA,GACAA,IAAcA,EAAUC,eAEhC,MAAMC,GACF,OAAe,IAAXA,GAGAA,EAAS,EAFF,GAMC,GAGhB,iBAAiBC,GACbT,EAAUj8B,KAAK08B,GACU,IAArBT,EAAU3/B,QACV4/B,GAAI,WACA,MAAMjzB,EAAQgzB,EACdA,EAAY,GACZhzB,EAAMnG,SAAQ,SAAU65B,GACpBA,WAKhB,sBACI,IAAIC,EAASrnB,SAASzW,cAAc,UACpC,IACI89B,EAAOznB,MAAQynB,EAAOznB,OAAS,GAEnC,MAAO9S,IACP,OAAOu6B,GAEX,qBACI,OAAOrnB,SAASzW,cAAc,QAElC,cAAcyN,GACV,MAAQA,EAAKA,EAAGswB,WACZ,GAAItwB,GAAMgJ,SACN,OAAO,EAGf,OAAO,GAEX,YAAYunB,EAAKJ,GACb,IAAIK,EAAWnL,EAAKoL,qBACpBD,EAASE,OAAS,WACdP,EAASK,IAEbA,EAAS1nB,IAAMynB,GAEnB,UAAUjiC,EAAG6oB,EAAGjnB,GACZ,QAAS,GAAK,KAAO5B,GAAK,KAAO6oB,GAAK,GAAKjnB,GAAGmB,SAAS,IAAIO,MAAM,IAErE,UAAU++B,GACNA,EAAMA,EAAIhvB,QAAQkkB,EAAMC,GACxB,IAAI8K,EAASrd,SAASod,EAAK,IAC3B,MAAO,CACHriC,EAAIsiC,GAAU,GAAM,IACpBzZ,EAAIyZ,GAAU,EAAK,IACnB1gC,EAAY,IAAT0gC,IAGX,iBACI,IAAIC,GAA8B,SAAhBl9B,KAAK2Y,UAAwB,GAAGjb,SAAS,IAC3D,MAAOw/B,EAAU9gC,OAAS,EACtB8gC,EAAY9K,EAAO8K,EAEvB,OAAOhL,EAAOgL,GAElB,OAAOC,GACH,IAAIC,EACJ,OAAID,KAAS3K,GACT4K,EAAM5K,EAAO2K,GACN,CACHxiC,EAAGyiC,EAAI,GACP5Z,EAAG4Z,EAAI,GACP7gC,EAAG6gC,EAAI,KAGND,EAAM,KAAOjL,EACX14B,KAAK6jC,UAAUF,EAAMG,UAAU,IAEjCH,EAAMI,OAAO,EAAG,KAAOhL,GAC5B6K,EAAMtB,EAAUv5B,KAAK46B,EAAMnvB,QAAQ,KAAM,KAClC,CACHrT,EAAGilB,SAASwd,EAAI,GAAI,IACpB5Z,EAAG5D,SAASwd,EAAI,GAAI,IACpB7gC,EAAGqjB,SAASwd,EAAI,GAAI,MAIjB,CACHziC,EAAG,EACH6oB,EAAG,EACHjnB,EAAG,IAIf,YAAYid,GAER,OADAA,EAAMA,GAAO,QACLkY,EAAK8L,iBAAiBhkB,IAC1BkY,EAAK+L,iBAAiBjkB,IACtBkY,EAAKgM,iBAAiBlkB,IACtBkY,EAAKiM,gBAAgBnkB,IACrBkY,EAAKkM,iBAAiBpkB,IACtBkY,EAAKmM,gBAAgBrkB,IAE7B,iBAAiBA,GACb,IAAItf,EAAIs4B,EAAOhZ,EAAIY,eACnB,OAAKlgB,EAGE,CACHS,EAAGT,EAAE,GACLspB,EAAGtpB,EAAE,GACLqC,EAAGrC,EAAE,GACLoC,EAAG,GANI,MASf,gBAAgBkd,GACZ,GAA4B,IAAxBA,EAAItS,QAAQ,QAAe,CAC3BsS,EAAMA,EAAI3Y,MAAM,kBAAkB,GAClC,IAAIi9B,EAAQtkB,EAAIhZ,MAAM,SAASiiB,IAAIsb,QACnC,MAAO,CACHpjC,EAAGmjC,EAAM,GACTta,EAAGsa,EAAM,GACTvhC,EAAGuhC,EAAM,GACTxhC,EAAG,KAIf,iBAAiBkd,GACb,GAA6B,IAAzBA,EAAItS,QAAQ,SAAgB,CAC5BsS,EAAMA,EAAI3Y,MAAM,mBAAmB,GACnC,IAAIi9B,EAAQtkB,EAAIhZ,MAAM,SAASiiB,IAAI,CAACnnB,EAAGmG,IACf,MAAhBnG,EAAE2C,OAAO,GACQ,IAAVwD,EAAcme,SAAStkB,GAAK,IAAOskB,SAAStkB,GAAK,IAAO,IAE5DyiC,OAAOziC,IAElB,MAAO,CACHX,EAAGmjC,EAAM,GACTta,EAAGsa,EAAM,GACTvhC,EAAGuhC,EAAM,GACTxhC,EAAGwhC,EAAM,MAIrB,iBAAiBtkB,GACb,GAAe,MAAXA,EAAI,IAA6B,IAAfA,EAAIpd,OACtB,MAAO,CACHzB,EAAGilB,SAASpG,EAAIvb,MAAM,EAAG,GAAI,IAC7BulB,EAAG5D,SAASpG,EAAIvb,MAAM,EAAG,GAAI,IAC7B1B,EAAGqjB,SAASpG,EAAIvb,MAAM,EAAG,GAAI,IAC7B3B,EAAG,IAIf,iBAAiBkd,GACb,GAAe,MAAXA,EAAI,IAA6B,IAAfA,EAAIpd,OACtB,MAAO,CACHzB,EAAGilB,SAASpG,EAAI,GAAKA,EAAI,GAAI,IAC7BgK,EAAG5D,SAASpG,EAAI,GAAKA,EAAI,GAAI,IAC7Bjd,EAAGqjB,SAASpG,EAAI,GAAKA,EAAI,GAAI,IAC7Bld,EAAG,IAIf,gBAAgBkd,GACZ,GAAI,0CAA0Czd,KAAKyd,GAAM,CACrD,MAAOwkB,KAAMC,GAAO,0CAA0C17B,KAAKiX,GAC7D0kB,EAAIH,OAAOE,EAAI,IAAM,IACrBriC,EAAImiC,OAAOE,EAAI,IAAM,IACrBnkC,EAAIikC,OAAOE,EAAI,IAAM,IAC3B,IAAIE,EACAC,EACAlb,EACJ,GAAU,IAANtnB,EAEA,OADAsnB,EAAU,IAAJppB,EACC,CACHa,EAAGqF,KAAKq+B,MAAMnb,GACdM,EAAGxjB,KAAKq+B,MAAMnb,GACd3mB,EAAGyD,KAAKq+B,MAAMnb,GACd5mB,EAAG,GAIP6hC,EADArkC,EAAI,GACCA,GAAK,EAAI8B,GAGT9B,EAAI8B,EAAI9B,EAAI8B,EAErB,MAAM0iC,EAAK,EAAIxkC,EAAIqkC,EACbf,EAAM,CAAC,EAAG,EAAG,GACnB,IAAK,IAAIvjC,EAAI,EAAGA,EAAI,EAAGA,IACnBukC,EAAKF,EAAK,EAAI,IAAOrkC,EAAI,GACrBukC,EAAK,GACLA,IAEAA,EAAK,GACLA,IAGAlb,EADA,EAAIkb,EAAK,EACHE,EAAiB,GAAXH,EAAKG,GAAUF,EAEtB,EAAIA,EAAK,EACRD,EAED,EAAIC,EAAK,EACRE,GAAMH,EAAKG,IAAO,EAAI,EAAIF,GAAM,EAGhCE,EAEVlB,EAAIvjC,GAAW,IAANqpB,EAEb,MAAO,CACHvoB,EAAGqF,KAAKq+B,MAAMjB,EAAI,IAClB5Z,EAAGxjB,KAAKq+B,MAAMjB,EAAI,IAClB7gC,EAAGyD,KAAKq+B,MAAMjB,EAAI,IAClB9gC,EAAG,KAIf,iBAAiBiiC,EAAIC,GACjB,QAASA,EAAG5a,EAAI2a,EAAG3a,EAAI2a,EAAGE,OACtBD,EAAG5a,EAAI4a,EAAGC,MAAQF,EAAG3a,GACrB4a,EAAGzO,EAAIwO,EAAGxO,EAAIwO,EAAGG,QACjBF,EAAGzO,EAAIyO,EAAGE,OAASH,EAAGxO,IAE9B,YAAYP,GACR,IAAImP,EAAS,GACb,IAAK,IAAIvjC,KAAOo0B,EACRh2B,KAAKolC,eAAepP,EAAIp0B,IACxBujC,EAAOvjC,GAAO5B,KAAKqlC,YAAYrP,EAAIp0B,IAE9B5B,KAAKslC,SAAStP,EAAIp0B,IACvBujC,EAAOvjC,GAAO5B,KAAKulC,WAAWvP,EAAIp0B,IAGlCujC,EAAOvjC,GAAOo0B,EAAIp0B,GAG1B,OAAOujC,GAEX,WAAW/Q,GACP,OAAOA,EAAI3vB,MAAM,IAErB,SAAS+gC,GACL,OAAOA,EAAMhN,GAEjB,SAAS9B,GACL,OAAOA,EAAM+B,GAEjB,UAAU+M,GAEN,OADAtN,EAAKuN,KAAK,uEACHvN,EAAKwN,SAASF,IAEzB,UAAU9O,GAEN,OADAwB,EAAKuN,KAAK,uEACHvN,EAAKyN,SAASjP,IAEzB,aAAakP,GACT,OAAO,OAAMla,SAAWwM,EAAKyN,SAASC,GAAWA,GAErD,YAAY5lB,GACR,OAAOA,EAAIzO,OAAO,GAAGuxB,cAAgB9iB,EAAIvb,MAAM,IAEnD,MAAMub,GACF,MAAM,IAAInC,MAAMib,EAAc9Y,IAElC,MAAMA,GACF3N,QAAQ7N,MAAMs0B,EAAc9Y,IAEhC,KAAKA,GACI,OAAM4M,cAGXva,QAAQozB,KAAK5M,EAAgB7Y,IAEjC,KAAKgW,EAAK6P,GACN,IAAK,IAAIjkC,KAAOo0B,EACZ6P,EAAKjkC,EAAKo0B,EAAIp0B,KAGtB,SAAS8nB,EAAKoc,EAAMC,GAChB,OAAOD,GAAQpc,GAAOA,EAAMqc,GAEhC,wBAAwBC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACxC,IAAIjc,EAAGmM,EAAG+P,EACNC,GAAOP,EAAKE,IAAOF,EAAKE,IAAOD,EAAKE,IAAOF,EAAKE,GACpD,GAAW,GAAPI,EACAnc,EAAI4b,EACJzP,EAAI0P,EACJK,GAAQF,EAAKF,IAAOE,EAAKF,IAAOG,EAAKF,IAAOE,EAAKF,OAEhD,CACD,IAAIK,IAAMJ,EAAKJ,IAAOE,EAAKF,IAAOK,EAAKJ,IAAOE,EAAKF,IAAOM,EACtDC,EAAI,GACJpc,EAAI4b,EACJzP,EAAI0P,EACJK,GAAQN,EAAKI,IAAOJ,EAAKI,IAAOH,EAAKI,IAAOJ,EAAKI,IAE5CG,EAAI,GACTpc,EAAI8b,EACJ3P,EAAI4P,EACJG,GAAQJ,EAAKE,IAAOF,EAAKE,IAAOD,EAAKE,IAAOF,EAAKE,KAGjDjc,EAAI4b,EAAKQ,GAAKN,EAAKF,GACnBzP,EAAI0P,EAAKO,GAAKL,EAAKF,GACnBK,GAAQlc,EAAIgc,IAAOhc,EAAIgc,IAAO7P,EAAI8P,IAAO9P,EAAI8P,IAGrD,MAAO,CAACjc,EAAGmM,EAAG+P,IAElB,qBAAqBG,EAAIloB,EAAMmoB,GAC3B,IAAIC,EAAKzO,EAAKmN,YAAYoB,GACtBH,EAAO/B,OAAOqC,UAclB,OAbAroB,EAAKnV,SAAQ,SAAUy9B,EAAIxmC,GACvB,GAAKqmC,GAAYrmC,IAAMke,EAAK3b,OAAS,EAArC,CAGA,IAAIkkC,EAAKvoB,GAAMle,EAAI,GAAKke,EAAK3b,QACzBmkC,EAAO7O,EAAK8O,wBAAwBH,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,EAAGkQ,EAAGrc,EAAGqc,EAAGlQ,GACrE0Q,EAAKF,EAAK,GAAIG,EAAKH,EAAK,GAAII,EAAQJ,EAAK,GACzCI,EAAQb,IACRK,EAAGvc,EAAI6c,EACPN,EAAGpQ,EAAI2Q,EACPZ,EAAOa,OAGRR,GAEX,sBAAsBS,EAAYC,EAAUX,GACxC,IAAI5kC,EAAG2S,EAAQ,GAAIC,EAAM,GACzB,GAAI0yB,EAAWxkC,OAASykC,EAASzkC,OAAQ,CACrC,IAAIuY,EAAOksB,EACXA,EAAWD,EACXA,EAAajsB,EAEjB,IAAKrZ,EAAI,EAAGA,EAAIslC,EAAWxkC,OAAQd,GAAK,EACpC2S,EAAMnO,KAAK,CACP8jB,EAAGgd,EAAWtlC,GACdy0B,EAAG6Q,EAAWtlC,EAAI,KAG1B,IAAKA,EAAI,EAAGA,EAAIulC,EAASzkC,OAAQd,GAAK,EAClC4S,EAAIpO,KAAK,CACL8jB,EAAGid,EAASvlC,GACZy0B,EAAG8Q,EAASvlC,EAAI,KAGxB,IAAIwlC,EAAW,GAMf,OALA5yB,EAAItL,SAAQ,SAAU4I,GAClB,IAAIu1B,EAAKrP,EAAKsP,qBAAqBx1B,EAAOyC,EAAOiyB,GACjDY,EAAShhC,KAAKihC,EAAGnd,GACjBkd,EAAShhC,KAAKihC,EAAGhR,MAEd+Q,GAEX,oBAAoBtR,GAChB,IAAIlH,EAEJ,IAAK,IAAIltB,KADTo0B,EAAIyR,mCAAoC,EACxBzR,EACZ,GAAMA,EAAI9zB,eAAeN,IAAQo0B,EAAIp0B,IAA2B,iBAAZo0B,EAAIp0B,GAIxD,GADAktB,EAAO/tB,OAAOkE,yBAAyB+wB,EAAKp0B,GACxCo0B,EAAIp0B,GAAK6lC,mCACTvP,EAAKwP,WAAW1R,EAAIp0B,IAAO,CAC3B,IAAIktB,EAAK3gB,aAIL,OAAO,YAHA6nB,EAAIp0B,QAMd,GAA2C,OAAvCs2B,EAAKyP,oBAAoB3R,EAAIp0B,IAAgB,CAClD,IAAIktB,EAAK3gB,aAIL,OAAO,YAHA6nB,EAAIp0B,GAQvB,cADOo0B,EAAIyR,kCACJzR,GAEX,QAAQxyB,EAAQwE,GACZ,IAAK,IAAIpG,KAAOoG,EACZxE,EAAO5B,GAAOoG,EAAOpG,GAEzB,OAAO4B,GAEX,mBAAmBokC,GACf,OAAKA,EAAIC,QAIED,EAAIE,eAAe,GAAGC,WAHtBH,EAAII,WAAa,MC9tBpC,SAASC,EAAave,GAClB,OAAIwO,EAAKgQ,UAAUxe,GACR,IAAMA,EAAM,IAEqB,oBAAxC3oB,OAAOkB,UAAUiC,SAAS1D,KAAKkpB,IAG/BwO,EAAKiQ,WAAWze,GAFTA,EAKJ3oB,OAAOkB,UAAUiC,SAAS1D,KAAKkpB,GAEnC,SAAS0e,EAAa1e,GACzB,OAAIA,EAAM,IACC,IAEFA,EAAM,EACJ,EAEJljB,KAAKq+B,MAAMnb,GAWf,SAAS2e,IACZ,GAAI,OAAM/c,aACN,OAAO,SAAU5B,EAAK4e,GAOlB,OANKpQ,EAAKqQ,UAAU7e,IAChBwO,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,8CAED5e,GAIZ,SAAS8e,EAAmCC,GAC/C,GAAI,OAAMnd,aACN,OAAO,SAAU5B,EAAK4e,GAClB,IAAII,EAAWxQ,EAAKqQ,UAAU7e,GAC1Bif,EAAezQ,EAAKoN,SAAS5b,IAAQA,EAAI9mB,QAAU6lC,EASvD,OARKC,GAAaC,GACdzQ,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,8DACAG,EACA,KAED/e,GAIZ,SAASkf,IACZ,GAAI,OAAMtd,aACN,OAAO,SAAU5B,EAAK4e,GAClB,IAAII,EAAWxQ,EAAKqQ,UAAU7e,GAC1Bmf,EAAiB,SAARnf,EAOb,OANMgf,GAAYG,GACd3Q,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,wDAED5e,GAIZ,SAASof,IACZ,GAAI,OAAMxd,aACN,OAAO,SAAU5B,EAAK4e,GAOlB,OANKpQ,EAAKgQ,UAAUxe,IAChBwO,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,8CAED5e,GAIZ,SAASqf,IACZ,GAAI,OAAMzd,aACN,OAAO,SAAU5B,EAAK4e,GAClB,MAAMU,EAAW9Q,EAAKgQ,UAAUxe,GAC1Buf,EAAqD,4BAAxCloC,OAAOkB,UAAUiC,SAAS1D,KAAKkpB,IAC7CA,GAAOA,EAAIwf,aAOhB,OANMF,GAAYC,GACd/Q,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,mEAED5e,GAiBZ,SAASyf,IACZ,GAAI,OAAM7d,aACN,OAAO,SAAU5B,EAAK4e,GAkBlB,OAjBKpQ,EAAKoN,SAAS5b,GAOfA,EAAItgB,SAAQ,SAAUggC,GACblR,EAAKqQ,UAAUa,IAChBlR,EAAKuN,KAAK,IACN6C,EACA,uCACAc,EACA,iDAZZlR,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,wDAaD5e,GAIZ,SAAS2f,IACZ,GAAI,OAAM/d,aACN,OAAO,SAAU5B,EAAK4e,GAClB,IAAIgB,GAAiB,IAAR5f,IAAwB,IAARA,EAO7B,OANK4f,GACDpR,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,+CAED5e,GAIZ,SAAS6f,EAAsBC,GAClC,GAAI,OAAMle,aACN,OAAO,SAAU5B,EAAK4e,GAQlB,OAPKpQ,EAAK5mB,SAASoY,IACfwO,EAAKuN,KAAKwC,EAAave,GACnB,8BACA4e,EACA,8DACAkB,GAED9f,GCrKnB,IAAI+f,GAAM,MAAOC,GAAM,MAChB,MAAMC,GAAU,CACnB,gBAAgB1+B,EAAaq9B,EAAMsB,EAAKC,EAAWC,GAC/CH,GAAQI,UAAU9+B,EAAaq9B,EAAMsB,GACrCD,GAAQK,UAAU/+B,EAAaq9B,EAAMuB,EAAWC,GAChDH,GAAQM,0BAA0Bh/B,EAAaq9B,IAEnD,UAAUr9B,EAAaq9B,EAAMsB,GACzB,IAAItkB,EAASmkB,GAAMvR,EAAKgS,YAAY5B,GACpCr9B,EAAYhJ,UAAUqjB,GAClBra,EAAYhJ,UAAUqjB,IAClB,WACI,IAAIoE,EAAM1pB,KAAKmqC,MAAM7B,GACrB,YAAezlC,IAAR6mB,EAAoBkgB,EAAMlgB,IAGjD,UAAUze,EAAaq9B,EAAMuB,EAAWC,GACpC,IAAIxkB,EAASokB,GAAMxR,EAAKgS,YAAY5B,GAC/Br9B,EAAYhJ,UAAUqjB,IACvBqkB,GAAQS,gBAAgBn/B,EAAaq9B,EAAMuB,EAAWC,IAG9D,gBAAgB7+B,EAAaq9B,EAAMuB,EAAWC,GAC1C,IAAIxkB,EAASokB,GAAMxR,EAAKgS,YAAY5B,GACpCr9B,EAAYhJ,UAAUqjB,GAAU,SAAUoE,GAQtC,OAPImgB,QAAqBhnC,IAAR6mB,GAA6B,OAARA,IAClCA,EAAMmgB,EAAUrpC,KAAKR,KAAM0pB,EAAK4e,IAEpCtoC,KAAKqqC,SAAS/B,EAAM5e,GAChBogB,GACAA,EAAMtpC,KAAKR,MAERA,OAGf,0BAA0BiL,EAAaq9B,EAAMkB,EAAYK,EAAWC,GAChE,IAA8HhoC,EAAGwoC,EAA7HhpB,EAAMkoB,EAAW5mC,OAAQ2nC,EAAarS,EAAKgS,YAAarpC,EAAS4oC,GAAMc,EAAWjC,GAAO5jB,EAASglB,GAAMa,EAAWjC,GACvHr9B,EAAYhJ,UAAUpB,GAAU,WAC5B,IAAI2pC,EAAM,GACV,IAAK1oC,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBwoC,EAAYd,EAAW1nC,GACvB0oC,EAAIF,GAAatqC,KAAKyqC,QAAQnC,EAAOiC,EAAWD,IAEpD,OAAOE,GAEX,IAAIE,EAAiBnB,EAAsBC,GAC3Cv+B,EAAYhJ,UAAUyiB,GAAU,SAAUgF,GACtC,IAA+B9nB,EAA3B+oC,EAAS3qC,KAAKmqC,MAAM7B,GAOxB,IAAK1mC,KANDioC,IACAngB,EAAMmgB,EAAUrpC,KAAKR,KAAM0pB,IAE3BghB,GACAA,EAAelqC,KAAKR,KAAM0pB,EAAK4e,GAEvB5e,EACHA,EAAIxnB,eAAeN,IAGxB5B,KAAKqqC,SAAS/B,EAAOiC,EAAW3oC,GAAM8nB,EAAI9nB,IAM9C,OAJA5B,KAAK4qC,iBAAiBtC,EAAMqC,EAAQjhB,GAChCogB,GACAA,EAAMtpC,KAAKR,MAERA,MAEX2pC,GAAQM,0BAA0Bh/B,EAAaq9B,IAEnD,0BAA0Br9B,EAAaq9B,GACnC,IAAIuC,EAAkB3S,EAAKgS,YAAY5B,GAAO5jB,EAASglB,GAAMmB,EAAiBhqC,EAAS4oC,GAAMoB,EAC7F5/B,EAAYhJ,UAAUqmC,GAAQ,WAC1B,OAAIrlC,UAAUL,QACV5C,KAAK0kB,GAAQzhB,UAAU,IAChBjD,MAEJA,KAAKa,OAGpB,0BAA0BoK,EAAaq9B,EAAMsB,EAAKC,GAC9C3R,EAAK1zB,MAAM,qBAAuB8jC,GAClC,IAAIhjB,EAASmkB,GAAMvR,EAAKgS,YAAY5B,GAChCwC,EAAUxC,EACV,mGACJr9B,EAAYhJ,UAAUqjB,GAAU,WAC5B4S,EAAK1zB,MAAMsmC,GACX,IAAIphB,EAAM1pB,KAAKmqC,MAAM7B,GACrB,YAAezlC,IAAR6mB,EAAoBkgB,EAAMlgB,GAErCigB,GAAQK,UAAU/+B,EAAaq9B,EAAMuB,GAAW,WAC5C3R,EAAK1zB,MAAMsmC,MAEfnB,GAAQM,0BAA0Bh/B,EAAaq9B,IAEnD,WAAWr9B,EAAagS,GACpBib,EAAK6S,KAAK9tB,GAAS,SAAU+tB,EAAeC,GACxC,IAAI3lB,EAASra,EAAYhJ,UAAUgpC,GAC/BC,EAAYzB,GAAMvR,EAAKgS,YAAYc,GACnCG,EAAYzB,GAAMxR,EAAKgS,YAAYc,GACvC,SAASI,IACL9lB,EAAOtiB,MAAMhD,KAAMiD,WACnBi1B,EAAK1zB,MAAM,IACPwmC,EACA,0DACAC,EACA,cAERhgC,EAAYhJ,UAAU+oC,GAAiBI,EACvCngC,EAAYhJ,UAAUipC,GAAaE,EACnCngC,EAAYhJ,UAAUkpC,GAAaC,MAG3C,iBACIprC,KAAKqrC,iBAAkB,IChH/B,SAASC,GAAclX,GACnB,IAAgDtyB,EAAG4nB,EAA/C6hB,EAAS,GAAIjqB,EAAM8S,EAAIxxB,OAAQ4oC,EAAOtT,EAC1C,IAAKp2B,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB4nB,EAAM0K,EAAItyB,GACN0pC,EAAKjD,UAAU7e,GACfA,EAAMljB,KAAKq+B,MAAY,IAANnb,GAAc,IAEzB8hB,EAAKtD,UAAUxe,KACrBA,GAAY,IAEhB6hB,EAAOjlC,KAAKojB,GAEhB,OAAO6hB,EAEX,IAAIE,GAAQ,IAAKC,GAAa,IAAKC,GAAc,IAAKC,GAAqB,KAAMC,GAAsB,KAAMC,GAAY,IAAKC,GAAe,KAAMC,GAAS,IAAKC,GAAkB,CAC/K,MACA,QACA,YACA,gBACA,YACA,OACA,YACA,uBACA,gBACA,uBACA,YACA,UACA,OACA,WACA,eACA,kBACA,SACA,SACA,eACA,mBACA,OACA,UACA,SACA,OACA,QACA,cACA,eACA,SACA,aACA,YACA,aAEAC,GAAqB,CACrB,YACA,cACA,cACA,aACA,gBACA,gBACA,UACA,iBACA,WACA,YACA,aACA,OACA,YACA,eACA,cACA,2BACA,yBAEJ,MAAMC,GAAc,IACb,MAAM,GACT,YAAYjJ,GACRljC,KAAKkjC,OAASA,EACdljC,KAAKosC,SAAWlJ,EAAOmJ,QAAQC,WAAW,MACtC,OAAM3gB,cACN3rB,KAAKusC,SAAW,GAChBvsC,KAAKwsC,gBAGb,UAAUC,GACFA,EAAMC,eACN1sC,KAAK2sC,MAAMF,GAGnB,MAAMA,IAEN,YAAYA,GACJA,EAAMG,aACN5sC,KAAK6sC,QAAQJ,GAGrB,QAAQA,IAER,gBAAgBA,GACRA,EAAMtC,MAAM2C,wBACZ9sC,KAAK+sC,YAAYN,GACjBzsC,KAAKgtC,UAAUP,KAGfzsC,KAAKgtC,UAAUP,GACfzsC,KAAK+sC,YAAYN,IAGzB,SAASQ,EAASC,GACd,IAA+DprC,EAAGqrC,EAAO7nB,EAAQnV,EAA7Eo8B,EAAWvsC,KAAKusC,SAAUjrB,EAAMirB,EAAS3pC,OAAQod,EAAM,GAC3D,IAAKle,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBqrC,EAAQZ,EAASzqC,GACjBwjB,EAAS6nB,EAAM7nB,OACXA,GACAnV,EAAOg9B,EAAMh9B,KACb6P,GAAOsF,EACH2nB,EACAjtB,GAAO+rB,GAGH7T,EAAKoN,SAASn1B,EAAK,IACnB6P,GAAO4rB,GAAqBz7B,EAAKkF,KAAKo2B,IAASI,IAG3CqB,IACA/8B,EAAOA,EAAK8Y,IAAKnmB,GAAmB,kBAANA,EAAiB0D,KAAKgf,MAAM1iB,GAAKA,IAEnEkd,GAAO0rB,GAAav7B,EAAKkF,KAAKo2B,IAASE,MAK/C3rB,GAAOmtB,EAAMnrC,SACRirC,IACDjtB,GAAOgsB,GAASmB,EAAMzjB,MAG9B1J,GAAO8rB,GAEX,OAAO9rB,EAEX,aACIhgB,KAAKusC,SAAW,GAEpB,OAAOvsB,GACH,IAA8BsB,EAA1BirB,EAAWvsC,KAAKusC,SACpBA,EAASjmC,KAAK0Z,GACdsB,EAAMirB,EAAS3pC,OACX0e,GAAO6qB,IACPI,EAASa,QAGjB,QACI,IAAI3gB,EAAazsB,KAAKqtC,YAAYC,gBAClCttC,KAAKutC,aAAa,EAAI9gB,EAAY,EAAG,EAAG,EAAIA,EAAY,EAAG,GAE/D,YACI,OAAOzsB,KAAKkjC,OAEhB,MAAMsK,GACF,IAAItK,EAASljC,KAAKqtC,YACdG,EACAxtC,KAAKytC,UAAUD,EAAOpjB,GAAK,EAAGojB,EAAOjX,GAAK,EAAGiX,EAAOvI,OAAS,EAAGuI,EAAOtI,QAAU,GAGjFllC,KAAKytC,UAAU,EAAG,EAAGvK,EAAOwK,WAAaxK,EAAOzW,WAAYyW,EAAOyK,YAAczK,EAAOzW,YAGhG,cAAcggB,GACV,IAAImB,EAAUnB,EAAMoB,aAChBD,GACA5tC,KAAK8tC,QAAQ,UAAWF,GAGhC,cAAcnB,GACV,IAAIsB,EAAatB,EAAMuB,qBACJ,IAAfD,GACA/tC,KAAK8tC,QAAQ,cAAeC,GAGpC,eAAetB,GACX,IAAIwB,EAAWxB,EAAMtC,MAAM8D,SACvBA,GACAjuC,KAAK8tC,QAAQ,WAAYG,GAGjC,QAAQ3F,EAAM5e,GACV1pB,KAAKosC,SAAS9D,GAAQ5e,EAE1B,IAAIwkB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACpBvuC,KAAKosC,SAASoC,IAAIN,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAE1C,MAAML,EAAIC,EAAIC,EAAIC,EAAIC,GAClBtuC,KAAKosC,SAASqC,MAAMP,EAAIC,EAAIC,EAAIC,EAAIC,GAExC,YACItuC,KAAKosC,SAASsC,YAElB,cAAcR,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC9BvuC,KAAKosC,SAASuC,cAAcT,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAEpD,UAAUL,EAAIC,EAAIC,EAAIC,GAClBruC,KAAKosC,SAASqB,UAAUS,EAAIC,EAAIC,EAAIC,GAExC,OACIruC,KAAKosC,SAASwC,OAElB,YACI5uC,KAAKosC,SAASyC,YAElB,gBAAgBX,EAAIC,GAChB,IAAIrrC,EAAIG,UACR,OAAiB,IAAbH,EAAEF,OACK5C,KAAKosC,SAAS0C,gBAAgBZ,EAAIC,GAEvB,IAAbrrC,EAAEF,OACA5C,KAAKosC,SAAS0C,gBAAgBZ,QADpC,EAIT,qBAAqBA,EAAIC,EAAIC,EAAIC,GAC7B,OAAOruC,KAAKosC,SAAS2C,qBAAqBb,EAAIC,EAAIC,EAAIC,GAE1D,cAAcH,EAAIC,GACd,OAAOnuC,KAAKosC,SAAS4C,cAAcd,EAAIC,GAE3C,qBAAqBD,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GACrC,OAAOvuC,KAAKosC,SAAS6C,qBAAqBf,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAElE,UAAUL,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIW,EAAIC,EAAIC,GACtC,IAAItsC,EAAIG,UAAWmpC,EAAWpsC,KAAKosC,SAClB,IAAbtpC,EAAEF,OACFwpC,EAASiD,UAAUnB,EAAIC,EAAIC,GAET,IAAbtrC,EAAEF,OACPwpC,EAASiD,UAAUnB,EAAIC,EAAIC,EAAIC,EAAIC,GAEjB,IAAbxrC,EAAEF,QACPwpC,EAASiD,UAAUnB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIW,EAAIC,EAAIC,GAG3D,QAAQlB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIW,EAAIC,GAChCnvC,KAAKosC,SAASkD,QAAQpB,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIW,EAAIC,GAEtD,cAAc/kB,EAAGmM,GACb,OAAOv2B,KAAKosC,SAASmD,cAAcnlB,EAAGmM,GAE1C,KAAKiZ,GACGA,EACAxvC,KAAKosC,SAASqD,KAAKD,GAGnBxvC,KAAKosC,SAASqD,OAGtB,SAASrlB,EAAGmM,EAAG0O,EAAOC,GAClBllC,KAAKosC,SAASsD,SAAStlB,EAAGmM,EAAG0O,EAAOC,GAExC,WAAW9a,EAAGmM,EAAG0O,EAAOC,GACpBllC,KAAKosC,SAASuD,WAAWvlB,EAAGmM,EAAG0O,EAAOC,GAE1C,SAAS0K,EAAMxlB,EAAGmM,EAAGsZ,GACbA,EACA7vC,KAAKosC,SAAS0D,SAASF,EAAMxlB,EAAGmM,EAAGsZ,GAGnC7vC,KAAKosC,SAAS0D,SAASF,EAAMxlB,EAAGmM,GAGxC,YAAYqZ,GACR,OAAO5vC,KAAKosC,SAAS2D,YAAYH,GAErC,aAAa1B,EAAIC,EAAIC,EAAIC,GACrB,OAAOruC,KAAKosC,SAAS4D,aAAa9B,EAAIC,EAAIC,EAAIC,GAElD,OAAOH,EAAIC,GACPnuC,KAAKosC,SAAS6D,OAAO/B,EAAIC,GAE7B,OAAOD,EAAIC,GACPnuC,KAAKosC,SAAS8D,OAAOhC,EAAIC,GAE7B,KAAKD,EAAIC,EAAIC,EAAIC,GACbruC,KAAKosC,SAAS+D,KAAKjC,EAAIC,EAAIC,EAAIC,GAEnC,aAAaH,EAAIC,EAAIC,GACjBpuC,KAAKosC,SAASgE,aAAalC,EAAIC,EAAIC,GAEvC,iBAAiBF,EAAIC,EAAIC,EAAIC,GACzBruC,KAAKosC,SAASiE,iBAAiBnC,EAAIC,EAAIC,EAAIC,GAE/C,UACIruC,KAAKosC,SAASkE,UAElB,OAAOpC,GACHluC,KAAKosC,SAASmE,OAAOrC,GAEzB,OACIluC,KAAKosC,SAASoE,OAElB,MAAMtC,EAAIC,GACNnuC,KAAKosC,SAASqE,MAAMvC,EAAIC,GAE5B,YAAYD,GACJluC,KAAKosC,SAASsE,YACd1wC,KAAKosC,SAASsE,YAAYxC,GAErB,YAAaluC,KAAKosC,SACvBpsC,KAAKosC,SAAS,WAAa8B,EAEtB,mBAAoBluC,KAAKosC,WAC9BpsC,KAAKosC,SAAS,kBAAoB8B,GAG1C,cACI,OAAOluC,KAAKosC,SAASuE,cAEzB,aAAazC,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC7BvuC,KAAKosC,SAASmB,aAAaW,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAEnD,OAAOiB,GACCA,EACAxvC,KAAKosC,SAASwE,OAAOpB,GAGrBxvC,KAAKosC,SAASwE,SAGtB,WAAW1C,EAAIC,EAAIC,EAAIC,GACnBruC,KAAKosC,SAASyE,WAAW3C,EAAIC,EAAIC,EAAIC,GAEzC,UAAUH,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAC1BvuC,KAAKosC,SAAS0E,UAAU5C,EAAIC,EAAIC,EAAIC,EAAIC,EAAIC,GAEhD,UAAUL,EAAIC,GACVnuC,KAAKosC,SAAS2E,UAAU7C,EAAIC,GAEhC,eACI,IAA0ErsC,EAAGqO,EAAzExN,EAAO3C,KAAMshB,EAAM2qB,GAAgBrpC,OAAQouC,EAAahxC,KAAK8tC,QAC7DjI,EAAO,SAAUoL,GACjB,IAAmCzG,EAA/B0G,EAAavuC,EAAKsuC,GACtBtuC,EAAKsuC,GAAc,WAOf,OANA9gC,EAAOm7B,GAAclhC,MAAMnI,UAAUwC,MAAMjE,KAAKyC,UAAW,IAC3DunC,EAAM0G,EAAWluC,MAAML,EAAMM,WAC7BN,EAAKwuC,OAAO,CACR7rB,OAAQ2rB,EACR9gC,KAAMA,IAEHq6B,IAGf,IAAK1oC,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB+jC,EAAKoG,GAAgBnqC,IAEzBa,EAAKmrC,QAAU,WACXkD,EAAWhuC,MAAML,EAAMM,WACvB,IAAImuC,EAAOnuC,UAAU,GACjBymB,EAAMzmB,UAAU,GACP,kBAATmuC,GACS,kBAATA,GACS,eAATA,IACA1nB,GAAY1pB,KAAKkjC,OAAOoK,iBAE5B3qC,EAAKwuC,OAAO,CACRnvC,SAAUovC,EACV1nB,IAAKA,KAIjB,+BAA+BtC,GAC3B,MAAMiqB,EAAKjqB,EAAK+iB,MAAMmH,yBACtB,IAAI1H,GAAOyH,GAAa,gBAAPA,EACZzH,GACD5pC,KAAK8tC,QAAQ,2BAA4BuD,IAIrDnF,GAAmB9iC,SAAQ,SAAUgoC,GACjCrwC,OAAOC,eAAe,GAAQiB,UAAWmvC,EAAM,CAC3C,MACI,OAAOpxC,KAAKosC,SAASgF,IAEzB,IAAI1nB,GACA1pB,KAAKosC,SAASgF,GAAQ1nB,QAI3B,MAAM6nB,WAAqB,GAC9B,WAAW9E,GACP,IAAIgD,EAAOhD,EAAMgD,OACjBzvC,KAAK8tC,QAAQ,YAAa2B,GAC1BhD,EAAM+E,UAAUxxC,MAEpB,aAAaysC,GACTzsC,KAAK8tC,QAAQ,YAAarB,EAAMgF,mBAChChF,EAAM+E,UAAUxxC,MAEpB,oBAAoBysC,GAChB,IAAIiF,EAAMjF,EAAMkF,qBACZD,IACA1xC,KAAK8tC,QAAQ,YAAa4D,GAC1BjF,EAAM+E,UAAUxxC,OAGxB,oBAAoBysC,GAChB,IAAIiF,EAAMjF,EAAMmF,qBACZF,IACA1xC,KAAK8tC,QAAQ,YAAa4D,GAC1BjF,EAAM+E,UAAUxxC,OAGxB,MAAMysC,GACF,IAAIoF,EAAWpF,EAAMgD,OAAQqC,EAAerF,EAAMsF,kBAClD,GAAIF,GAA6B,UAAjBC,EACZ9xC,KAAKgyC,WAAWvF,OADpB,CAIA,IAAIwF,EAAaxF,EAAMyF,sBACvB,GAAID,GAA+B,YAAjBH,EACd9xC,KAAKmyC,aAAa1F,OADtB,CAIA,IAAI2F,EAAoB3F,EAAM4F,kCAC9B,GAAID,GAAsC,oBAAjBN,EACrB9xC,KAAKsyC,oBAAoB7F,OAD7B,CAIA,IAAI8F,EAAoB9F,EAAM+F,kCAC1BD,GAAsC,oBAAjBT,EACrB9xC,KAAKyyC,oBAAoBhG,GAGzBoF,EACA7xC,KAAKgyC,WAAWvF,GAEXwF,EACLjyC,KAAKmyC,aAAa1F,GAEb2F,EACLpyC,KAAKsyC,oBAAoB7F,GAEpB8F,GACLvyC,KAAKyyC,oBAAoBhG,MAGjC,sBAAsBA,GAClB,IAAIh4B,EAAQg4B,EAAMiG,oCAAqCh+B,EAAM+3B,EAAMkG,kCAAmCC,EAAanG,EAAMoG,oCAAqCnB,EAAM1xC,KAAK+uC,qBAAqBt6B,EAAM2V,EAAG3V,EAAM8hB,EAAG7hB,EAAI0V,EAAG1V,EAAI6hB,GAC3N,GAAIqc,EAAY,CACZ,IAAK,IAAI9wC,EAAI,EAAGA,EAAI8wC,EAAWhwC,OAAQd,GAAK,EACxC4vC,EAAIxI,aAAa0J,EAAW9wC,GAAI8wC,EAAW9wC,EAAI,IAEnD9B,KAAK8tC,QAAQ,cAAe4D,IAGpC,QAAQjF,GACJ,IAAIqG,EAAOrG,EAAMqG,OAAQC,EAAqBtG,EAAMuG,wBACpD,GAAIvG,EAAMG,YAAa,CACnB,IAAKmG,EAAoB,CACrB/yC,KAAKwwC,OACL,IAAI/jB,EAAazsB,KAAKqtC,YAAYC,gBAClCttC,KAAKutC,aAAa9gB,EAAY,EAAG,EAAGA,EAAY,EAAG,GAEvDzsB,KAAKizC,cAAcxG,GACfqG,GAAQrG,EAAMyG,gBACdlzC,KAAK0wC,YAAYoC,GACjB9yC,KAAK8tC,QAAQ,iBAAkBrB,EAAM0G,eAEzCnzC,KAAK8tC,QAAQ,YAAarB,EAAM2G,eAC3B3G,EAAM4G,6BACPrzC,KAAK8tC,QAAQ,cAAe,iBAEhC,IAAIsE,EAAoB3F,EAAMoG,oCAC1BT,EACApyC,KAAKszC,sBAAsB7G,GAG3BzsC,KAAK8tC,QAAQ,cAAerB,EAAMmE,UAEtCnE,EAAM8G,YAAYvzC,MACb+yC,GACD/yC,KAAKswC,WAIjB,aAAa7D,GACT,IAAI+G,EAAIC,EAAIC,EACR/P,EAAyC,QAAhC6P,EAAK/G,EAAMkH,uBAAoC,IAAPH,EAAgBA,EAAK,QAASI,EAAwC,QAAhCH,EAAKhH,EAAMoH,uBAAoC,IAAPJ,EAAgBA,EAAK,EAAGK,EAA4C,QAAlCJ,EAAKjH,EAAMsH,yBAAsC,IAAPL,EAAgBA,EAAK,CAChOtpB,EAAG,EACHmM,EAAG,GACJka,EAAQhE,EAAMuH,mBAAoBC,EAAQj0C,KAAKkjC,OAAOoK,gBAAiB1V,EAAS6Y,EAAMrmB,EAAI6pB,EAAOpc,EAAS4Y,EAAMla,EAAI0d,EACvHj0C,KAAK8tC,QAAQ,cAAenK,GAC5B3jC,KAAK8tC,QAAQ,aAAc8F,EAAOptC,KAAKD,IAAIC,KAAK0tC,IAAItc,GAASpxB,KAAK0tC,IAAIrc,KACtE73B,KAAK8tC,QAAQ,gBAAiBgG,EAAO1pB,EAAIwN,GACzC53B,KAAK8tC,QAAQ,gBAAiBgG,EAAOvd,EAAIsB,IAG1C,MAAMsc,WAAmB,GAC5B,MAAM1H,GACFzsC,KAAKwwC,OACLxwC,KAAK8tC,QAAQ,YAAarB,EAAM2H,UAChC3H,EAAM4H,aAAar0C,MACnBA,KAAKswC,UAET,YAAY7D,GACJA,EAAM6H,gBACNt0C,KAAK6sC,QAAQJ,GAGrB,QAAQA,GACJ,GAAIA,EAAM6H,eAAgB,CACtB,IAAIvB,EAAqBtG,EAAMuG,wBAC/B,IAAKD,EAAoB,CACrB/yC,KAAKwwC,OACL,IAAI/jB,EAAazsB,KAAKqtC,YAAYC,gBAClCttC,KAAKutC,aAAa9gB,EAAY,EAAG,EAAGA,EAAY,EAAG,GAEvDzsB,KAAKizC,cAAcxG,GACnB,IAAI8H,EAAiB9H,EAAM8H,iBACvBnB,EAAiC,SAAnBmB,EAA4B9H,EAAM2G,cAAgBmB,EACpEv0C,KAAK8tC,QAAQ,YAAasF,GAC1BpzC,KAAK8tC,QAAQ,cAAerB,EAAM2H,UAClC3H,EAAM+H,eAAex0C,MAChB+yC,GACD/yC,KAAKswC,YC9frB,IAAImE,GACJ,SAASC,KACL,GAAID,GACA,OAAOA,GAEX,IAAIvR,EAAShL,EAAKyc,sBACdC,EAAU1R,EAAOoJ,WAAW,MAUhC,OATAmI,GAAc,WACV,IAAI/nB,EAAmB,OAAMtB,QAAQsB,kBAAoB,EAAGmoB,EAAoBD,EAAQE,8BACpFF,EAAQG,2BACRH,EAAQI,0BACRJ,EAAQK,yBACRL,EAAQM,wBACR,EACJ,OAAOxoB,EAAmBmoB,EAPhB,GASPJ,GAEJ,MAAM,GACT,YAAYU,GACRn1C,KAAKysB,WAAa,EAClBzsB,KAAKilC,MAAQ,EACbjlC,KAAKklC,OAAS,EACdllC,KAAKo1C,SAAU,EACf,IAAIC,EAAOF,GAAU,GACjB1oB,EAAa4oB,EAAK5oB,YAAc,OAAMA,YAAcioB,KACxD10C,KAAKysB,WAAaA,EAClBzsB,KAAKqsC,QAAUnU,EAAKyc,sBACpB30C,KAAKqsC,QAAQ5wB,MAAM65B,QAAU,IAC7Bt1C,KAAKqsC,QAAQ5wB,MAAM85B,OAAS,IAC5Bv1C,KAAKqsC,QAAQ5wB,MAAM+5B,OAAS,IAC5Bx1C,KAAKqsC,QAAQ5wB,MAAMg6B,WAAa,cAChCz1C,KAAKqsC,QAAQ5wB,MAAM7F,SAAW,WAC9B5V,KAAKqsC,QAAQ5wB,MAAMi6B,IAAM,IACzB11C,KAAKqsC,QAAQ5wB,MAAMqqB,KAAO,IAE9B,aACI,OAAO9lC,KAAK40C,QAEhB,gBACI,OAAO50C,KAAKysB,WAEhB,cAAcA,GACV,IAAIkpB,EAAgB31C,KAAKysB,WACzBzsB,KAAKysB,WAAaA,EAClBzsB,KAAK41C,QAAQ51C,KAAK0tC,WAAaiI,EAAe31C,KAAK2tC,YAAcgI,GAErE,SAAS1Q,GACLjlC,KAAKilC,MAAQjlC,KAAKqsC,QAAQpH,MAAQA,EAAQjlC,KAAKysB,WAC/CzsB,KAAKqsC,QAAQ5wB,MAAMwpB,MAAQA,EAAQ,KACnC,IAAIxY,EAAazsB,KAAKysB,WAAY2f,EAAWpsC,KAAKssC,aAAaF,SAC/DA,EAASqE,MAAMhkB,EAAYA,GAE/B,UAAUyY,GACNllC,KAAKklC,OAASllC,KAAKqsC,QAAQnH,OAASA,EAASllC,KAAKysB,WAClDzsB,KAAKqsC,QAAQ5wB,MAAMypB,OAASA,EAAS,KACrC,IAAIzY,EAAazsB,KAAKysB,WAAY2f,EAAWpsC,KAAKssC,aAAaF,SAC/DA,EAASqE,MAAMhkB,EAAYA,GAE/B,WACI,OAAOzsB,KAAKilC,MAEhB,YACI,OAAOjlC,KAAKklC,OAEhB,QAAQD,EAAOC,GACXllC,KAAK61C,SAAS5Q,GAAS,GACvBjlC,KAAK81C,UAAU5Q,GAAU,GAE7B,UAAU6Q,EAAUC,GAChB,IACI,OAAOh2C,KAAKqsC,QAAQ4J,UAAUF,EAAUC,GAE5C,MAAOrtC,GACH,IACI,OAAO3I,KAAKqsC,QAAQ4J,YAExB,MAAOn4B,GAIH,OAHAoa,EAAK1zB,MAAM,2BACPsZ,EAAIgtB,QACJ,2EACG,MAKvBnB,GAAQuM,gBAAgB,GAAQ,kBAAcrzC,EAAWwlC,KAClD,MAAM,WAAoB,GAC7B,YAAY8M,EAAS,CAAElQ,MAAO,EAAGC,OAAQ,IACrCiR,MAAMhB,GACNn1C,KAAK40C,QAAU,IAAIrD,GAAavxC,MAChCA,KAAK41C,QAAQT,EAAOlQ,MAAOkQ,EAAOjQ,SAGnC,MAAM,WAAkB,GAC3B,YAAYiQ,EAAS,CAAElQ,MAAO,EAAGC,OAAQ,IACrCiR,MAAMhB,GACNn1C,KAAKo2C,WAAY,EACjBp2C,KAAK40C,QAAU,IAAIT,GAAWn0C,MAC9BA,KAAK41C,QAAQT,EAAOlQ,MAAOkQ,EAAOjQ,SCtGnC,MAAMmR,GAAK,CACd,iBACI,IAAIC,GAAO,EAMX,OALAD,GAAGE,cAAcntC,QAASotC,IACE,aAApBA,EAAKC,aACLH,GAAO,KAGRA,GAEXI,aAAa,EACb,WACI,IAAItvB,EAIJ,OAHAivB,GAAGE,cAAcntC,QAASotC,IACtBpvB,EAAOovB,EAAKpvB,OAETA,GAEXmvB,cAAe,IAAII,IACnB,MAAM/O,GACF,MAAMgP,EAAoB,GAC1BP,GAAGE,cAAcntC,QAAQ,CAACotC,EAAM50C,KAC5B,MAAM,KAAEwlB,GAASovB,EACXK,EAAQzvB,EAAK0vB,WACnBD,EAAME,qBAAqBnP,QACJ/kC,IAAnB2zC,EAAKxO,YACLwO,EAAKxO,UAAY9P,EAAK8e,mBAAmBpP,IAE7C,MAAMnyB,EAAMohC,EAAMI,yBAAyB7tB,KAAM3T,GAAQA,EAAI/F,KAAO8mC,EAAKxO,WACzE,GAAKvyB,EAAL,CAGA,GAAwB,aAApB+gC,EAAKC,WAA2B,CAChC,IAAI9pB,EAAevF,EAAKuF,eACpBuqB,EAAW1wC,KAAK6F,IAAI7F,KAAK0tC,IAAIz+B,EAAI2U,EAAIosB,EAAKW,gBAAgB/sB,GAAI5jB,KAAK0tC,IAAIz+B,EAAI8gB,EAAIigB,EAAKW,gBAAgB5gB,IACxG,GAAI2gB,EAAWvqB,EACX,OAGJ,GADAvF,EAAKgwB,UAAU,CAAExP,SACZxgB,EAAK0F,aACN,OAGR1F,EAAKiwB,iBAAiBzP,EAAK4O,GAC3BI,EAAkBtwC,KAAK8gB,MAE3BwvB,EAAkBxtC,QAASge,IACvBA,EAAKkwB,KAAK,WAAY,CAClBvlC,KAAM,WACNvO,OAAQ4jB,EACRwgB,IAAKA,IACN,MAGX,eAAeA,GACXyO,GAAGE,cAAcntC,QAASotC,IACtB,MAAM,KAAEpvB,GAASovB,EACXK,EAAQzvB,EAAK0vB,WACflP,GACAiP,EAAME,qBAAqBnP,GAE/B,MAAMnyB,EAAMohC,EAAMI,yBAAyB7tB,KAAM3T,GAAQA,EAAI/F,KAAO8mC,EAAKxO,WACzE,IAAKvyB,EACD,OAEoB,aAApB+gC,EAAKC,YAAiD,YAApBD,EAAKC,aACvCJ,GAAGK,aAAc,EACjB,OAAM1qB,mBAAoB,EAC1B,OAAMC,mBAAoB,EAC1B,OAAMC,qBAAsB,EAC5BsqB,EAAKC,WAAa,WAEtB,MAAMc,EAAWf,EAAKpvB,KAAKowB,YACtBhB,EAAKpvB,gBAAgB,OAAM,UAAYovB,EAAKpvB,KAC7CmwB,GACAA,EAASE,eAIrB,cAAc7P,GACVyO,GAAGE,cAAcntC,QAAQ,CAACotC,EAAM50C,KACJ,YAApB40C,EAAKC,YACLD,EAAKpvB,KAAKkwB,KAAK,UAAW,CACtBvlC,KAAM,UACNvO,OAAQgzC,EAAKpvB,KACbwgB,IAAKA,IACN,GAEiB,aAApB4O,EAAKC,YACLJ,GAAGE,cAAcmB,OAAO91C,OAKpC,OAAMypB,YACNjnB,OAAOsM,iBAAiB,UAAW2lC,GAAGsB,gBAAgB,GACtDvzC,OAAOsM,iBAAiB,WAAY2lC,GAAGsB,gBAAgB,GACvDvzC,OAAOsM,iBAAiB,YAAa2lC,GAAGuB,OACxCxzC,OAAOsM,iBAAiB,YAAa2lC,GAAGuB,OACxCxzC,OAAOsM,iBAAiB,UAAW2lC,GAAGwB,eAAe,GACrDzzC,OAAOsM,iBAAiB,WAAY2lC,GAAGwB,eAAe,IChG1D,IAAIC,GAAmB,kBAAmBC,GAAgB,oBAAqBC,GAAqB,oBAAqBC,GAAiB,gBAAiBC,GAAS,SAAUC,GAAS,SAAUC,GAAW,WAAYC,GAAQ,QAASC,GAAY,YAAaC,GAAa,aAAcC,GAAa,aAA6B,GAAM,MAAOC,GAAQ,QAASC,GAAQ,IAAKC,GAAQ,QAASC,GAAY,YAAaC,GAAc,QAASC,GAAU,UAAWC,GAAuB,CAC3d,gBACA,gBACA,qBACA,qBACA,oBACA,oBACA,uBACA,sBACA,sBACA,iCACF1jC,KAAKqjC,IACP,IAAIM,GAAY,EACT,MAAM,GACT,YAAY7D,GACRn1C,KAAKi5C,IAAMD,KACXh5C,KAAKk5C,eAAiB,GACtBl5C,KAAKmqC,MAAQ,GACbnqC,KAAKiI,MAAQ,EACbjI,KAAKm5C,mBAAqB,KAC1Bn5C,KAAK8nB,OAAS,KACd9nB,KAAKo5C,OAAS,IAAIzC,IAClB32C,KAAKq5C,uBAAyB,IAAI1C,IAClC32C,KAAKs5C,SAAW,KAChBt5C,KAAKu5C,0BAA2B,EAChCv5C,KAAKw5C,0BAA2B,EAChCx5C,KAAKqrC,iBAAkB,EACvBrrC,KAAKy5C,eAAgB,EACrBz5C,KAAK05C,aAAe,KACpB15C,KAAK25C,yBAA0B,EAC/B35C,KAAK45C,SAASzE,GACdn1C,KAAK25C,yBAA0B,EAEnC,cACI,OAAO,EAEX,YAAYrR,GACHA,IAASsQ,IAAatQ,IAAS0P,KAChCh4C,KAAKo5C,OAAOl4C,IAAIonC,GAGXA,EACLtoC,KAAKo5C,OAAO1B,OAAOpP,GAGnBtoC,KAAKo5C,OAAOnqC,QANZjP,KAAKo5C,OAAOl4C,IAAIonC,GAAMjS,OAAQ,EAStC,UAAUiS,EAAMuR,GACZ,IAAIC,EAAQ95C,KAAKo5C,OAAOl4C,IAAIonC,GACxByR,EAAczR,IAASsQ,IAAatQ,IAAS0P,GAC7CgC,OAAoBn3C,IAAVi3C,GAAwBC,IAA+B,IAAhBD,EAAMzjB,MAK3D,OAJI2jB,IACAF,EAAQD,EAAcr5C,KAAKR,MAC3BA,KAAKo5C,OAAOrqC,IAAIu5B,EAAMwR,IAEnBA,EAEX,WAAWl5C,EAAMq5C,EAAMp5C,GACnB,IAAKb,KAAKq5C,uBAAuBn4C,IAAIN,GAAO,CACxC,MAAMs5C,EAAaD,EAAKhxB,IAAKkxB,GAAQA,EAAM,gBAAgB9kC,KAAKqjC,IAChE14C,KAAKo6C,GAAGF,EAAY,KAChBl6C,KAAKq6C,YAAYz5C,KAErBZ,KAAKq5C,uBAAuBtqC,IAAInO,GAAM,GAE1C,OAAOZ,KAAKs6C,UAAU15C,EAAMC,GAEhC,kBACI,OAAOb,KAAKo5C,OAAOl4C,IAAIg3C,IAE3B,6BAA6B5P,GACzBtoC,KAAKq6C,YAAY/R,GACbA,IAAS0P,IACTh4C,KAAKs3C,KAAK,2BAGlB,aAII,OAHAt3C,KAAKo5C,OAAO1B,OAAOQ,IACnBl4C,KAAKu6C,+BACLv6C,KAAKw6C,eACEx6C,KAEX,MAAMm1C,GACF,IAAIE,EAAOF,GAAU,GACjBhF,EAAO,QACIttC,IAAXwyC,EAAKjrB,QACMvnB,IAAXwyC,EAAK9e,QACU1zB,IAAfwyC,EAAKpQ,YACWpiC,IAAhBwyC,EAAKnQ,SACLiL,EAAOnwC,KAAKy6C,cAAc,CACtBC,eAAe,EACfC,WAAY36C,KAAK46C,eAGzB,IAAI3V,EAAQz+B,KAAK+e,KAAK8vB,EAAKpQ,OAASkL,EAAKlL,OAAQC,EAAS1+B,KAAK+e,KAAK8vB,EAAKnQ,QAAUiL,EAAKjL,QAASzY,EAAa4oB,EAAK5oB,WAAYrC,OAAevnB,IAAXwyC,EAAKjrB,EAAkB5jB,KAAKgf,MAAM2qB,EAAK/lB,GAAKirB,EAAKjrB,EAAGmM,OAAe1zB,IAAXwyC,EAAK9e,EAAkB/vB,KAAKgf,MAAM2qB,EAAK5Z,GAAK8e,EAAK9e,EAAGud,EAASuB,EAAKvB,QAAU,EAAG+G,EAAaxF,EAAKwF,aAAc,EAAOC,EAAsBzF,EAAKyF,qBAAuB,EACnW,GAAK7V,GAAUC,EAAf,CAIAD,GAAkB,EAAT6O,EAAa,EACtB5O,GAAmB,EAAT4O,EAAa,EACvB1pB,GAAK0pB,EACLvd,GAAKud,EACL,IAAIiH,EAAoB,IAAI,GAAY,CACpCtuB,WAAYA,EACZwY,MAAOA,EACPC,OAAQA,IACR8V,EAAqB,IAAI,GAAY,CACrCvuB,WAAYA,EACZwY,MAAO,EACPC,OAAQ,IACR+V,EAAkB,IAAI,GAAU,CAChCxuB,WAAYquB,EACZ7V,MAAOA,EACPC,OAAQA,IACRgW,EAAeH,EAAkBzO,aAAc6O,EAAaF,EAAgB3O,aAuChF,OAtCA2O,EAAgB7F,SAAU,EAC1B2F,EAAkB3F,SAAU,EAC5Bp1C,KAAKo5C,OAAO1B,OAAOQ,IACnBl4C,KAAKqrC,iBAAkB,GACY,IAA/BgK,EAAK+F,wBACLL,EAAkBzO,aAAaF,SAASgP,uBAAwB,EAChEJ,EAAmB1O,aAAaF,SAASgP,uBAAwB,GAErEF,EAAa1K,OACb2K,EAAW3K,OACX0K,EAAanK,WAAW3mB,GAAImM,GAC5B4kB,EAAWpK,WAAW3mB,GAAImM,GAC1Bv2B,KAAKy5C,eAAgB,EACrBz5C,KAAKu6C,6BAA6BzC,IAClC93C,KAAKu6C,6BAA6BtC,IAClCj4C,KAAKq7C,UAAUN,EAAmB/6C,MAClCA,KAAKs7C,QAAQL,EAAiBj7C,MAC9BA,KAAKy5C,eAAgB,EACrByB,EAAa5K,UACb6K,EAAW7K,UACPuK,IACAK,EAAa1K,OACb0K,EAAaxM,YACbwM,EAAa/K,KAAK,EAAG,EAAGlL,EAAOC,GAC/BgW,EAAarM,YACbqM,EAAapN,QAAQ,cAAe,OACpCoN,EAAapN,QAAQ,YAAa,GAClCoN,EAAatK,SACbsK,EAAa5K,WAEjBtwC,KAAKo5C,OAAOrqC,IAAImpC,GAAQ,CACpBqD,MAAOR,EACP/nC,OAAQgoC,EACRQ,IAAKP,EACL7wB,EAAGA,EACHmM,EAAGA,IAEPv2B,KAAKw6C,eACEx6C,KA1DHk4B,EAAK1zB,MAAM,qFA4DnB,WACI,OAAOxE,KAAKo5C,OAAOt0C,IAAIozC,IAE3B,cAAc/C,GACV,MAAM,IAAIt3B,MAAM,wCAEpB,iBAAiBsyB,EAAMuF,GACnB,IAMI+F,EAAMC,EAAMC,EAAMC,EANlBC,EAAS,CACT,CAAEzxB,EAAG+lB,EAAK/lB,EAAGmM,EAAG4Z,EAAK5Z,GACrB,CAAEnM,EAAG+lB,EAAK/lB,EAAI+lB,EAAKlL,MAAO1O,EAAG4Z,EAAK5Z,GAClC,CAAEnM,EAAG+lB,EAAK/lB,EAAI+lB,EAAKlL,MAAO1O,EAAG4Z,EAAK5Z,EAAI4Z,EAAKjL,QAC3C,CAAE9a,EAAG+lB,EAAK/lB,EAAGmM,EAAG4Z,EAAK5Z,EAAI4Z,EAAKjL,SAG9B4W,EAAQ97C,KAAK+7C,qBAAqBrG,GAYtC,OAXAmG,EAAOzyC,SAAQ,SAAU4I,GACrB,IAAIgqC,EAAcF,EAAM9pC,MAAMA,QACjBnP,IAAT44C,IACAA,EAAOE,EAAOK,EAAY5xB,EAC1BsxB,EAAOE,EAAOI,EAAYzlB,GAE9BklB,EAAOj1C,KAAKD,IAAIk1C,EAAMO,EAAY5xB,GAClCsxB,EAAOl1C,KAAKD,IAAIm1C,EAAMM,EAAYzlB,GAClColB,EAAOn1C,KAAK6F,IAAIsvC,EAAMK,EAAY5xB,GAClCwxB,EAAOp1C,KAAK6F,IAAIuvC,EAAMI,EAAYzlB,MAE/B,CACHnM,EAAGqxB,EACHllB,EAAGmlB,EACHzW,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,GAGvB,uBAAuB9G,GACnBA,EAAQpE,OACRoE,EAAQqH,cAAcj8C,MACtB40C,EAAQsH,+BAA+Bl8C,MACvC,MAAMm8C,EAAcn8C,KAAKo8C,kBACzBxH,EAAQ7D,UAAUoL,EAAY/xB,EAAG+xB,EAAY5lB,GAC7C,IAAI8lB,EAAcr8C,KAAKs8C,wBACnBrI,EAAQoI,EAAY5vB,WACxBmoB,EAAQvF,UAAUgN,EAAYhQ,QAAS,EAAG,EAAGgQ,EAAYpX,MAAQgP,EAAOoI,EAAYnX,OAAS+O,GAC7FW,EAAQtE,UAEZ,qBAAqBsE,GACjB,IAAIuH,EAAcn8C,KAAKo8C,kBAAmBhG,EAAY+F,EAAYX,IAClE5G,EAAQpE,OACRoE,EAAQ7D,UAAUoL,EAAY/xB,EAAG+xB,EAAY5lB,GAC7Cqe,EAAQvF,UAAU+G,EAAU/J,QAAS,EAAG,EAAG+J,EAAUnR,MAAQmR,EAAU3pB,WAAY2pB,EAAUlR,OAASkR,EAAU3pB,YAChHmoB,EAAQtE,UAEZ,wBACI,IAAsLhvB,EAAKi7B,EAAWz6C,EAAGkR,EAArMwpC,EAAUx8C,KAAKw8C,UAAWC,EAAez8C,KAAKo8C,kBAAmBM,EAAcD,EAAalB,MAAOoB,EAAeF,EAAazpC,OAAQ4pC,EAAgBD,EAAarQ,aACxK,GAAIkQ,EAAS,CACT,IAAKx8C,KAAKqrC,gBAAiB,CACvB,IAAI4I,EAAQyI,EAAYjwB,WACxBkwB,EAAa/G,QAAQ8G,EAAYzX,MAAQyX,EAAYjwB,WAAYiwB,EAAYxX,OAASwX,EAAYjwB,YAClG,IAKI,IAJAnL,EAAMk7B,EAAQ55C,OACdg6C,EAAc3tC,QACd2tC,EAAcvN,UAAUqN,EAAYrQ,QAAS,EAAG,EAAGqQ,EAAYhP,WAAauG,EAAOyI,EAAY/O,YAAcsG,GAC7GsI,EAAYK,EAAc5M,aAAa,EAAG,EAAG2M,EAAajP,WAAYiP,EAAahP,aAC9E7rC,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBkR,EAASwpC,EAAQ16C,GACK,oBAAXkR,GAMXA,EAAOxS,KAAKR,KAAMu8C,GAClBK,EAAcxM,aAAamM,EAAW,EAAG,IANrCrkB,EAAK1zB,MAAM,qDACAwO,EACP,0CAOhB,MAAOrK,GACHuvB,EAAK1zB,MAAM,2BACPmE,EAAEmiC,QACF,8EAER9qC,KAAKqrC,iBAAkB,EAE3B,OAAOsR,EAEX,OAAOD,EAEX,GAAGG,EAAQrrB,GAEP,GADAxxB,KAAKo5C,QAAUp5C,KAAKo5C,OAAO1B,OAAOK,IACT,IAArB90C,UAAUL,OACV,OAAO5C,KAAK88C,UAAU95C,MAAMhD,KAAMiD,WAEtC,IAAuDnB,EAAG+N,EAAOy0B,EAAOyY,EAAWn8C,EAA/Eo8C,EAASH,EAAO71C,MAAM0xC,IAAQp3B,EAAM07B,EAAOp6C,OAC/C,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB+N,EAAQmtC,EAAOl7C,GACfwiC,EAAQz0B,EAAM7I,MAAM,KACpB+1C,EAAYzY,EAAM,GAClB1jC,EAAO0jC,EAAM,IAAM,GACdtkC,KAAKk5C,eAAe6D,KACrB/8C,KAAKk5C,eAAe6D,GAAa,IAErC/8C,KAAKk5C,eAAe6D,GAAWz2C,KAAK,CAChC1F,KAAMA,EACN4wB,QAASA,IAGjB,OAAOxxB,KAEX,IAAI68C,EAAQ7Z,GACR,IAA+DlhC,EAAGP,EAAGsO,EAAOy0B,EAAOyY,EAAWn8C,EAA1Fo8C,GAAUH,GAAU,IAAI71C,MAAM0xC,IAAQp3B,EAAM07B,EAAOp6C,OAEvD,GADA5C,KAAKo5C,QAAUp5C,KAAKo5C,OAAO1B,OAAOK,KAC7B8E,EACD,IAAKt7C,KAAKvB,KAAKk5C,eACXl5C,KAAKi9C,KAAK17C,GAGlB,IAAKO,EAAI,EAAGA,EAAIwf,EAAKxf,IAKjB,GAJA+N,EAAQmtC,EAAOl7C,GACfwiC,EAAQz0B,EAAM7I,MAAM,KACpB+1C,EAAYzY,EAAM,GAClB1jC,EAAO0jC,EAAM,GACTyY,EACI/8C,KAAKk5C,eAAe6D,IACpB/8C,KAAKi9C,KAAKF,EAAWn8C,EAAMoiC,QAI/B,IAAKzhC,KAAKvB,KAAKk5C,eACXl5C,KAAKi9C,KAAK17C,EAAGX,EAAMoiC,GAI/B,OAAOhjC,KAEX,cAAc4nC,GACV,IAAIj/B,EAAI,CACJnF,OAAQxD,KACR+R,KAAM61B,EAAI71B,KACV61B,IAAKA,GAGT,OADA5nC,KAAKs3C,KAAK1P,EAAI71B,KAAMpJ,GACb3I,KAEX,iBAAiB+R,EAAMyf,GAInB,OAHAxxB,KAAKo6C,GAAGroC,GAAM,SAAU61B,GACpBpW,EAAQhxB,KAAKR,KAAM4nC,EAAIA,QAEpB5nC,KAEX,oBAAoB+R,GAEhB,OADA/R,KAAKk9C,IAAInrC,GACF/R,KAEX,UAAU6P,EAAO+yB,EAAUpR,GACvB,IAAI2rB,EAAWn9C,KACfA,KAAKo6C,GAAGvqC,GAAO,SAAU+3B,GAErB,IADA,IAAIwV,EAAUxV,EAAIpkC,OAAO65C,cAAcza,GAAU,EAAMua,GAC9C98C,EAAI,EAAGA,EAAI+8C,EAAQx6C,OAAQvC,IAChCunC,EAAM1P,EAAKmN,YAAYuC,GACvBA,EAAI0V,cAAgBF,EAAQ/8C,GAC5BmxB,EAAQhxB,KAAK48C,EAAQ/8C,GAAIunC,MAIrC,SAMI,OALI5nC,KAAK8sB,cACL9sB,KAAKu9C,WAETlH,GAAGE,cAAcmB,OAAO13C,KAAKi5C,KAC7Bj5C,KAAKw9C,UACEx9C,KAEX,eACIA,KAAKu6C,6BAA6BvC,IAClCh4C,KAAKu6C,6BAA6BzC,IAClC93C,KAAKu6C,6BAA6BtC,IAClCj4C,KAAKu6C,6BAA6B5B,IAClC34C,KAAKu6C,6BAA6BzB,IAClC94C,KAAKu6C,6BAA6BjC,IAEtC,UACIt4C,KAAKy9C,eACL,IAAI31B,EAAS9nB,KAAK46C,YACd9yB,GAAUA,EAAO41B,WACjB51B,EAAO41B,SAASC,OAAO39C,KAAKiI,MAAO,GACnC6f,EAAO81B,sBACP59C,KAAK8nB,OAAS,MAGtB,UAEI,OADA9nB,KAAK69C,SACE79C,KAEX,QAAQsoC,GACJ,IAAIhjB,EAAS,MAAQ4S,EAAKgS,YAAY5B,GACtC,OAAIpQ,EAAK4lB,YAAY99C,KAAKslB,IACftlB,KAAKslB,KAETtlB,KAAKmqC,MAAM7B,GAEtB,eACI,IAAIxgB,EAAS9nB,KAAK46C,YAAamD,EAAY,GAC3C,MAAOj2B,EACHi2B,EAAUz3C,KAAKwhB,GACfA,EAASA,EAAO8yB,YAEpB,OAAOmD,EAEX,WACI,OAAO/9C,KAAKmqC,OAAS,GAEzB,SAASgL,GAmBL,OAlBAn1C,KAAKg+C,uBAAuB,KACxB,IAAIp8C,EAAK0jB,EACT,IAAK6vB,EACD,OAAOn1C,KAEX,IAAK4B,KAAOuzC,EACJvzC,IAAQw2C,KAGZ9yB,EAAS,GAAM4S,EAAKgS,YAAYtoC,GAC5Bs2B,EAAK4lB,YAAY99C,KAAKslB,IACtBtlB,KAAKslB,GAAQ6vB,EAAOvzC,IAGpB5B,KAAKqqC,SAASzoC,EAAKuzC,EAAOvzC,OAI/B5B,KAEX,cACI,OAAOA,KAAKs6C,UAAUhC,GAAWt4C,KAAKi+C,cAE1C,aAAatD,GACT,MAAMuD,EAAYl+C,KAAKk+C,YACvB,IAAKA,EACD,OAAO,EAEX,MAAMp2B,EAAS9nB,KAAK46C,YACpB,OAAI9yB,GAAUA,IAAW6yB,GAAc36C,OAAS26C,GACrC7yB,EAAOm2B,aAAatD,GAMnC,YACI,OAAO36C,KAAKs6C,UAAUxB,GAAS94C,KAAKm+C,YAExC,WAAWxD,GACP,MAAMyD,EAAUp+C,KAAKo+C,UACrB,IAAKA,EACD,OAAO,EAEX,MAAMt2B,EAAS9nB,KAAK46C,YACpB,OAAI9yB,GAAUA,IAAW6yB,GAAc36C,OAAS26C,GACrC7yB,EAAOq2B,WAAWxD,GAMjC,cAAcjF,EAAK2I,GAAgB,GAC/B,GAAI3I,EACA,OAAO11C,KAAKm+C,WAAWzI,IAAQ11C,KAAKi+C,aAAavI,GAErD,IAAI4I,EAAQt+C,KAAKw3C,WACb+G,GAAiB,EACrBlI,GAAGE,cAAcntC,QAASotC,IACE,aAApBA,EAAKC,aAGuB,UAAvBD,EAAKpvB,KAAKsb,UAGV8T,EAAKpvB,KAAKowB,aAAe8G,KAF9BC,GAAiB,KAMzB,IAAIC,GAAYH,IAAkB,OAAMvyB,kBAAoByyB,EAC5D,OAAOv+C,KAAKy+C,eAAiBz+C,KAAK0+C,cAAgBF,EAEtD,OAEI,OADAx+C,KAAKo+C,SAAQ,GACNp+C,KAEX,OAEI,OADAA,KAAKo+C,SAAQ,GACNp+C,KAEX,YACI,OAAOA,KAAKiI,OAAS,EAEzB,oBACI,IAAqD02C,EAAOr9B,EAAKxf,EAAG88C,EAAhEh9B,EAAQ5hB,KAAK6+C,WAAYl8C,EAAO3C,KAAMiI,EAAQ,EAClD,SAAS62C,EAAYpB,GAGjB,IAFAiB,EAAQ,GACRr9B,EAAMo8B,EAAS96C,OACVd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB88C,EAAQlB,EAAS57C,GACjBmG,IACI22C,EAAMlc,WAAa+V,KACnBkG,EAAQA,EAAMtxC,OAAOuxC,EAAMG,cAAct6C,UAEzCm6C,EAAM3F,MAAQt2C,EAAKs2C,MACnBn3C,EAAIwf,GAGRq9B,EAAM/7C,OAAS,GAAK+7C,EAAM,GAAGE,YAAcj9B,GAC3Ck9B,EAAYH,GAMpB,OAHIh8C,EAAK+/B,WAAamW,IAClBiG,EAAYn8C,EAAKm0C,WAAWiI,eAEzB92C,EAEX,WACI,IAAI2Z,EAAQ,EAAGkG,EAAS9nB,KAAK8nB,OAC7B,MAAOA,EACHlG,IACAkG,EAASA,EAAOA,OAEpB,OAAOlG,EAEX,uBAAuBikB,GACnB7lC,KAAKu5C,0BAA2B,EAChC1T,IACA7lC,KAAKu5C,0BAA2B,EAC5Bv5C,KAAKw5C,2BACLx5C,KAAKq6C,YAAYzB,IACjB54C,KAAKu6C,6BAA6BvC,KAEtCh4C,KAAKw5C,0BAA2B,EAEpC,YAAY/jC,GAKR,OAJAzV,KAAKg+C,uBAAuB,KACxBh+C,KAAKoqB,EAAE3U,EAAI2U,GACXpqB,KAAKu2B,EAAE9gB,EAAI8gB,KAERv2B,KAEX,cACI,MAAO,CACHoqB,EAAGpqB,KAAKoqB,IACRmM,EAAGv2B,KAAKu2B,KAGhB,6BACI,IAAKv2B,KAAK82C,WACN,OAAO,KAEX,IAAIrhC,EAAMzV,KAAK82C,WAAWkI,qBAC1B,IAAKvpC,EACD,OAAO,KAEX,IAAIq7B,EAAY9wC,KAAK+7C,uBAAuBkD,OAE5C,OADAnO,EAAUoO,SACHpO,EAAU9+B,MAAMyD,GAE3B,oBAAoBigC,GAChB,IAAIyJ,GAAmB,EACnBr3B,EAAS9nB,KAAK8nB,OAClB,MAAOA,EAAQ,CACX,GAAIA,EAAOs3B,WAAY,CACnBD,GAAmB,EACnB,MAEJr3B,EAASA,EAAOA,OAEhBq3B,IAAqBzJ,IACrBA,GAAM,GAEV,IAAI2J,EAAiBr/C,KAAK+7C,qBAAqBrG,GAAK4J,YAAaC,EAAoB,IAAInpB,EAAa0d,EAAS9zC,KAAK8zC,SAGpH,OAFAyL,EAAkB9+C,EAAI4+C,EAAe56C,QACrC86C,EAAkBxO,UAAU+C,EAAO1pB,EAAG0pB,EAAOvd,GACtCgpB,EAAkBC,iBAE7B,oBAAoB/pC,GAChB,IAAIgqC,EAAYz/C,KAAK0/C,kBACrB1/C,KAAKmqC,MAAM/f,EAAIq1B,EAAUr1B,EACzBpqB,KAAKmqC,MAAM5T,EAAIkpB,EAAUlpB,SAClBkpB,EAAUr1B,SACVq1B,EAAUlpB,EACjBv2B,KAAKq6C,YAAYzB,IACjB,IAAIr0C,EAAKvE,KAAK2/C,wBAAwBV,OAWtC,OAVA16C,EAAG26C,SACH36C,EAAGwsC,UAAUt7B,EAAI2U,EAAG3U,EAAI8gB,GACxB9gB,EAAM,CACF2U,EAAGpqB,KAAKmqC,MAAM/f,EAAI7lB,EAAGi7C,iBAAiBp1B,EACtCmM,EAAGv2B,KAAKmqC,MAAM5T,EAAIhyB,EAAGi7C,iBAAiBjpB,GAE1Cv2B,KAAK4/C,cAAcH,GACnBz/C,KAAK6/C,YAAY,CAAEz1B,EAAG3U,EAAI2U,EAAGmM,EAAG9gB,EAAI8gB,IACpCv2B,KAAKq6C,YAAYzB,IACjB54C,KAAKu6C,6BAA6BvC,IAC3Bh4C,KAEX,cAAc87C,GACV,IAAIl6C,EACJ,IAAKA,KAAOk6C,EACR97C,KAAKmqC,MAAMvoC,GAAOk6C,EAAMl6C,GAGhC,kBACI,IAAIk6C,EAAQ,CACR1xB,EAAGpqB,KAAKoqB,IACRmM,EAAGv2B,KAAKu2B,IACRoB,SAAU33B,KAAK23B,WACfC,OAAQ53B,KAAK43B,SACbC,OAAQ73B,KAAK63B,SACbioB,QAAS9/C,KAAK8/C,UACdC,QAAS//C,KAAK+/C,UACdjoB,MAAO93B,KAAK83B,QACZC,MAAO/3B,KAAK+3B,SAWhB,OATA/3B,KAAKmqC,MAAM/f,EAAI,EACfpqB,KAAKmqC,MAAM5T,EAAI,EACfv2B,KAAKmqC,MAAMxS,SAAW,EACtB33B,KAAKmqC,MAAMvS,OAAS,EACpB53B,KAAKmqC,MAAMtS,OAAS,EACpB73B,KAAKmqC,MAAM2V,QAAU,EACrB9/C,KAAKmqC,MAAM4V,QAAU,EACrB//C,KAAKmqC,MAAMrS,MAAQ,EACnB93B,KAAKmqC,MAAMpS,MAAQ,EACZ+jB,EAEX,KAAKkE,GACD,IAAIC,EAAUD,EAAO51B,EAAG81B,EAAUF,EAAOzpB,EAAGnM,EAAIpqB,KAAKoqB,IAAKmM,EAAIv2B,KAAKu2B,IAQnE,YAPgB1zB,IAAZo9C,IACA71B,GAAK61B,QAEOp9C,IAAZq9C,IACA3pB,GAAK2pB,GAETlgD,KAAK6/C,YAAY,CAAEz1B,EAAGA,EAAGmM,EAAGA,IACrBv2B,KAEX,qBAAqB6lC,EAAM6P,GACvB,IAA4Cp0B,EAAKxf,EAA7Cq+C,EAAS,GAAIr4B,EAAS9nB,KAAK46C,YAC/B,IAAIlF,GAAOA,EAAIuD,MAAQj5C,KAAKi5C,IAA5B,CAGAkH,EAAOC,QAAQpgD,MACf,MAAO8nB,KAAY4tB,GAAO5tB,EAAOmxB,MAAQvD,EAAIuD,KACzCkH,EAAOC,QAAQt4B,GACfA,EAASA,EAAOA,OAGpB,IADAxG,EAAM6+B,EAAOv9C,OACRd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB+jC,EAAKsa,EAAOr+C,KAGpB,OAAOu+C,GAEH,OADArgD,KAAK23B,SAAS33B,KAAK23B,WAAa0oB,GACzBrgD,KAEX,YACI,IAAKA,KAAK8nB,OAEN,OADAoQ,EAAKuN,KAAK,uDACH,EAEX,IAAIx9B,EAAQjI,KAAKiI,MAAOqZ,EAAMthB,KAAK8nB,OAAOi3B,cAAcn8C,OACxD,OAAIqF,EAAQqZ,EAAM,IACdthB,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAO,GACnCjI,KAAK8nB,OAAO41B,SAASp3C,KAAKtG,MAC1BA,KAAK8nB,OAAO81B,uBACL,GAIf,SACI,IAAK59C,KAAK8nB,OAEN,OADAoQ,EAAKuN,KAAK,oDACH,EAEX,IAAIx9B,EAAQjI,KAAKiI,MAAOqZ,EAAMthB,KAAK8nB,OAAOi3B,cAAcn8C,OACxD,OAAIqF,EAAQqZ,EAAM,IACdthB,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAO,GACnCjI,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAQ,EAAG,EAAGjI,MAC1CA,KAAK8nB,OAAO81B,uBACL,GAIf,WACI,IAAK59C,KAAK8nB,OAEN,OADAoQ,EAAKuN,KAAK,sDACH,EAEX,IAAIx9B,EAAQjI,KAAKiI,MACjB,OAAIA,EAAQ,IACRjI,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAO,GACnCjI,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAQ,EAAG,EAAGjI,MAC1CA,KAAK8nB,OAAO81B,uBACL,GAIf,eACI,IAAK59C,KAAK8nB,OAEN,OADAoQ,EAAKuN,KAAK,0DACH,EAEX,IAAIx9B,EAAQjI,KAAKiI,MACjB,OAAIA,EAAQ,IACRjI,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAO,GACnCjI,KAAK8nB,OAAO41B,SAAS0C,QAAQpgD,MAC7BA,KAAK8nB,OAAO81B,uBACL,GAIf,UAAU0C,GACN,IAAKtgD,KAAK8nB,OAEN,OADAoQ,EAAKuN,KAAK,oDACHzlC,MAEPsgD,EAAS,GAAKA,GAAUtgD,KAAK8nB,OAAO41B,SAAS96C,SAC7Cs1B,EAAKuN,KAAK,oBACN6a,EACA,gHACCtgD,KAAK8nB,OAAO41B,SAAS96C,OAAS,GAC/B,KAER,IAAIqF,EAAQjI,KAAKiI,MAIjB,OAHAjI,KAAK8nB,OAAO41B,SAASC,OAAO11C,EAAO,GACnCjI,KAAK8nB,OAAO41B,SAASC,OAAO2C,EAAQ,EAAGtgD,MACvCA,KAAK8nB,OAAO81B,sBACL59C,KAEX,qBACI,OAAOA,KAAKs6C,UAAUxC,GAAkB93C,KAAKugD,qBAEjD,sBACI,IAAIxS,EAAa/tC,KAAKwgD,UAClB14B,EAAS9nB,KAAK46C,YAIlB,OAHI9yB,IAAWA,EAAO2xB,gBAClB1L,GAAcjmB,EAAOkmB,sBAElBD,EAEX,OAAO0S,GAKH,OAJIzgD,KAAK46C,cAAgB6F,IACrBzgD,KAAKw9C,UACLiD,EAAaxpC,IAAIjX,OAEdA,KAEX,WACI,IAAuC4B,EAAK8nB,EAAK7oB,EAAQ6/C,EAAcC,EAAnE3qB,EAAM,GAAImU,EAAQnqC,KAAK4gD,WAE3B,IAAKh/C,KADLo0B,EAAImU,MAAQ,GACAA,EACRzgB,EAAMygB,EAAMvoC,GACZ++C,EACIzoB,EAAK5mB,SAASoY,KAASwO,EAAKkN,eAAe1b,KAASwO,EAAKoN,SAAS5b,GAClEi3B,IAGJ9/C,EAA8B,oBAAdb,KAAK4B,IAAuB5B,KAAK4B,UAC1CuoC,EAAMvoC,GACb8+C,EAAe7/C,EAASA,EAAOL,KAAKR,MAAQ,KAC5CmqC,EAAMvoC,GAAO8nB,EACTg3B,IAAiBh3B,IACjBsM,EAAImU,MAAMvoC,GAAO8nB,IAIzB,OADAsM,EAAI6qB,UAAY7gD,KAAKitB,eACdiL,EAAKyP,oBAAoB3R,GAEpC,SACI,OAAO8qB,KAAK97B,UAAUhlB,KAAKoD,YAE/B,YACI,OAAOpD,KAAK8nB,OAEhB,cAAc8a,EAAUme,EAAa5D,GACjC,IAAI/0C,EAAM,GACN24C,GAAe/gD,KAAKghD,SAASpe,IAC7Bx6B,EAAI9B,KAAKtG,MAEb,IAAIihD,EAAWjhD,KAAK8nB,OACpB,MAAOm5B,EAAU,CACb,GAAIA,IAAa9D,EACb,OAAO/0C,EAEP64C,EAASD,SAASpe,IAClBx6B,EAAI9B,KAAK26C,GAEbA,EAAWA,EAASn5B,OAExB,OAAO1f,EAEX,aAAagf,GACT,OAAO,EAEX,aAAawb,EAAUme,EAAa5D,GAChC,OAAOn9C,KAAKq9C,cAAcza,EAAUme,EAAa5D,GAAU,GAE/D,SAASva,GACL,IAAKA,EACD,OAAO,EAEX,GAAwB,oBAAbA,EACP,OAAOA,EAAS5iC,MAEpB,IAAmF8B,EAAGo/C,EAAlFC,EAAcve,EAASpuB,QAAQ,KAAM,IAAIxN,MAAM,KAAMsa,EAAM6/B,EAAYv+C,OAC3E,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IASjB,GARAo/C,EAAMC,EAAYr/C,GACbo2B,EAAKkpB,gBAAgBF,KACtBhpB,EAAKuN,KAAK,aACNyb,EACA,2EACJhpB,EAAKuN,KAAK,gHACVvN,EAAKuN,KAAK,6BAEQ,MAAlByb,EAAI3vC,OAAO,IACX,GAAIvR,KAAK0P,OAASwxC,EAAIz8C,MAAM,GACxB,OAAO,OAGV,GAAsB,MAAlBy8C,EAAI3vC,OAAO,IAChB,GAAIvR,KAAKqhD,QAAQH,EAAIz8C,MAAM,IACvB,OAAO,OAGV,GAAIzE,KAAK6gD,YAAcK,GAAOlhD,KAAK0iC,WAAawe,EACjD,OAAO,EAGf,OAAO,EAEX,WACI,IAAIp5B,EAAS9nB,KAAK46C,YAClB,OAAO9yB,EAASA,EAAO0vB,WAAa,KAExC,WACI,OAAOx3C,KAAKs6C,UAAU3B,GAAO34C,KAAKshD,WAEtC,YACI,IAAIx5B,EAAS9nB,KAAK46C,YAClB,OAAI9yB,EACOA,EAAOgvB,gBAGd,EAGR,KAAKyK,EAAW3Z,EAAM,GAAI4Z,GAQtB,OAPA5Z,EAAIpkC,OAASokC,EAAIpkC,QAAUxD,KACvBwhD,EACAxhD,KAAKyhD,eAAeF,EAAW3Z,GAG/B5nC,KAAK0hD,MAAMH,EAAW3Z,GAEnB5nC,KAEX,qBAAqB01C,GACjB,OAAIA,EACO11C,KAAK2/C,sBAAsBjK,GAG3B11C,KAAKs6C,UAAUtC,GAAoBh4C,KAAK2/C,uBAGvD,sBAAsBjK,GAClB,IAAIiM,EACJ,GAAIjM,EAWA,OAVAiM,EAAK,IAAIvrB,EACTp2B,KAAK4hD,sBAAqB,SAAUx6B,GAChC,IAAIy6B,EAAoBz6B,EAAKy6B,oBACH,QAAtBA,EACAF,EAAGG,SAAS16B,EAAK26B,gBAEU,aAAtBF,GACLF,EAAG5Q,UAAU3pB,EAAKgD,IAAMhD,EAAK04B,UAAW14B,EAAKmP,IAAMnP,EAAK24B,aAE7DrK,GACIiM,EAGPA,EAAK3hD,KAAKo5C,OAAOl4C,IAAI82C,KAAuB,IAAI5hB,EAC5Cp2B,KAAK8nB,OACL9nB,KAAK8nB,OAAOi0B,uBAAuBiG,SAASL,GAG5CA,EAAGM,QAEP,IAAIJ,EAAoB7hD,KAAK6hD,oBAC7B,GAA0B,QAAtBA,EACAF,EAAGG,SAAS9hD,KAAK+hD,qBAEhB,GAA0B,aAAtBF,EAAkC,CACvC,MAAMz3B,EAAIpqB,KAAKmqC,MAAM/f,GAAK,EACpBmM,EAAIv2B,KAAKmqC,MAAM5T,GAAK,EACpBupB,EAAU9/C,KAAKmqC,MAAM2V,SAAW,EAChCC,EAAU//C,KAAKmqC,MAAM4V,SAAW,EACtC4B,EAAG5Q,UAAU3mB,EAAI01B,EAASvpB,EAAIwpB,GAGlC,OADA4B,EAAGtrB,OAAQ,EACJsrB,EAGf,iBAAiBjM,GACb,IAAI5tB,EAAS9nB,KACb,MAAO8nB,EACCA,EAAO2xB,gBACP/D,EAAM5tB,GAEVA,EAASA,EAAO8yB,YAEpB,MAAM9J,EAAY9wC,KAAK+7C,qBAAqBrG,GACtCvL,EAAQ2G,EAAUoR,YACxB,MAAO,CACH93B,EAAG+f,EAAMvS,OACTrB,EAAG4T,EAAMtS,QAGjB,sBACI,OAAO73B,KAAK+7C,uBAAuBmG,YAAYvqB,SAEnD,eACI,OAAO33B,KAAKs6C,UAAU1B,GAAW54C,KAAKmiD,eAE1C,gBACI,IAAI3O,EAAIC,EACJhzC,EAAIT,KAAKo5C,OAAOl4C,IAAI03C,KAAc,IAAIxiB,EAC1C31B,EAAEwhD,QACF,IAAI73B,EAAIpqB,KAAKoqB,IAAKmM,EAAIv2B,KAAKu2B,IAAKoB,EAAW,OAAMyqB,SAASpiD,KAAK23B,YAAaC,EAAsC,QAA5B4b,EAAKxzC,KAAKmqC,MAAMvS,cAA2B,IAAP4b,EAAgBA,EAAK,EAAG3b,EAAsC,QAA5B4b,EAAKzzC,KAAKmqC,MAAMtS,cAA2B,IAAP4b,EAAgBA,EAAK,EAAG3b,EAAQ93B,KAAKmqC,MAAMrS,OAAS,EAAGC,EAAQ/3B,KAAKmqC,MAAMpS,OAAS,EAAG+nB,EAAU9/C,KAAKmqC,MAAM2V,SAAW,EAAGC,EAAU//C,KAAKmqC,MAAM4V,SAAW,EAiBzV,OAhBU,IAAN31B,GAAiB,IAANmM,GACX91B,EAAEswC,UAAU3mB,EAAGmM,GAEF,IAAboB,GACAl3B,EAAE8vC,OAAO5Y,GAEC,IAAVG,GAAyB,IAAVC,GACft3B,EAAE4hD,KAAKvqB,EAAOC,GAEH,IAAXH,GAA2B,IAAXC,GAChBp3B,EAAEgwC,MAAM7Y,EAAQC,GAEJ,IAAZioB,GAA6B,IAAZC,GACjBt/C,EAAEswC,WAAW,EAAI+O,GAAU,EAAIC,GAEnCt/C,EAAE41B,OAAQ,EACH51B,EAEX,MAAMu1B,GACF,IAA0Cp0B,EAAK0gD,EAAchhC,EAAKxf,EAAG8N,EAAjEu6B,EAAQjS,EAAKmN,YAAYrlC,KAAKmqC,OAClC,IAAKvoC,KAAOo0B,EACRmU,EAAMvoC,GAAOo0B,EAAIp0B,GAErB,IAAIwlB,EAAO,IAAIpnB,KAAKiL,YAAYk/B,GAChC,IAAKvoC,KAAO5B,KAAKk5C,eAGb,IAFAoJ,EAAetiD,KAAKk5C,eAAet3C,GACnC0f,EAAMghC,EAAa1/C,OACdd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB8N,EAAW0yC,EAAaxgD,GACpB8N,EAAShP,KAAK8M,QAAQ2qC,IAAS,IAC1BjxB,EAAK8xB,eAAet3C,KACrBwlB,EAAK8xB,eAAet3C,GAAO,IAE/BwlB,EAAK8xB,eAAet3C,GAAK0E,KAAKsJ,IAI1C,OAAOwX,EAEX,eAAe+tB,GACXA,EAASA,GAAU,GACnB,IAAIoN,EAAMviD,KAAKy6C,gBACX5D,EAAQ72C,KAAK82C,WAAY1sB,OAAiBvnB,IAAbsyC,EAAO/qB,EAAkB+qB,EAAO/qB,EAAI5jB,KAAKgf,MAAM+8B,EAAIn4B,GAAImM,OAAiB1zB,IAAbsyC,EAAO5e,EAAkB4e,EAAO5e,EAAI/vB,KAAKgf,MAAM+8B,EAAIhsB,GAAI9J,EAAa0oB,EAAO1oB,YAAc,EAAGyW,EAAS,IAAI,GAAY,CAC7M+B,MAAOkQ,EAAOlQ,OAASz+B,KAAK+e,KAAKg9B,EAAItd,SAAW4R,EAAQA,EAAM5R,QAAU,GACxEC,OAAQiQ,EAAOjQ,QACX1+B,KAAK+e,KAAKg9B,EAAIrd,UACb2R,EAAQA,EAAM3R,SAAW,GAC9BzY,WAAYA,IACZmoB,EAAU1R,EAAOoJ,aAUrB,OATqC,IAAjC6I,EAAOiG,wBACPxG,EAAQxI,SAASgP,uBAAwB,GAE7CxG,EAAQpE,QACJpmB,GAAKmM,IACLqe,EAAQ7D,WAAW,EAAI3mB,GAAI,EAAImM,GAEnCv2B,KAAKq7C,UAAUnY,GACf0R,EAAQtE,UACDpN,EAEX,SAASiS,GACL,OAAOn1C,KAAKwiD,eAAerN,GAAQ9I,QAEvC,UAAU8I,GACNA,EAASA,GAAU,GACnB,IAAIY,EAAWZ,EAAOY,UAAY,KAAMC,EAAUb,EAAOa,SAAW,KAChE5S,EAAMpjC,KAAKwiD,eAAerN,GAAQc,UAAUF,EAAUC,GAI1D,OAHIb,EAAOnS,UACPmS,EAAOnS,SAASI,GAEbA,EAEX,QAAQ+R,GACJ,IAAKA,IAAWA,EAAOnS,SACnB,KAAM,uDAEV,IAAIA,EAAWmS,EAAOnS,gBACfmS,EAAOnS,SACd9K,EAAKuqB,YAAYziD,KAAKi2C,UAAUd,IAAS,SAAUuN,GAC/C1f,EAAS0f,MAGjB,QAAQ7sC,GAGJ,OAFA7V,KAAKilC,MAAMpvB,EAAKovB,OAChBjlC,KAAKklC,OAAOrvB,EAAKqvB,QACVllC,KAEX,UACI,MAAO,CACHilC,MAAOjlC,KAAKilC,QACZC,OAAQllC,KAAKklC,UAGrB,eACI,OAAOllC,KAAK6gD,WAAa7gD,KAAK0iC,SAElC,UACI,OAAO1iC,KAAK0iC,SAEhB,kBACI,YAAgC7/B,IAA5B7C,KAAKmqC,MAAMxd,aACJ3sB,KAAKmqC,MAAMxd,aAEb3sB,KAAK8nB,OACH9nB,KAAK8nB,OAAO66B,kBAGZ,OAAMh2B,aAGrB,KAAK5a,EAAMnR,EAAMoiC,GACb,IAA8C3iC,EAAGuiD,EAASpxB,EAAtDqxB,EAAe7iD,KAAKk5C,eAAennC,GACvC,IAAK1R,EAAI,EAAGA,EAAIwiD,EAAajgD,OAAQvC,IAGjC,GAFAuiD,EAAUC,EAAaxiD,GAAGO,KAC1B4wB,EAAUqxB,EAAaxiD,GAAGmxB,SACT,UAAZoxB,GAAgC,UAAThiD,MACtBA,GAAQgiD,IAAYhiD,MACpBoiC,GAAYA,IAAaxR,GAAU,CAErC,GADAqxB,EAAalF,OAAOt9C,EAAG,GACK,IAAxBwiD,EAAajgD,OAAc,QACpB5C,KAAKk5C,eAAennC,GAC3B,MAEJ1R,KAIZ,iBAAiBioC,EAAMqC,EAAQmY,GAC3B9iD,KAAK0hD,MAAMpZ,EAAO6P,GAAQ,CACtBxN,OAAQA,EACRmY,OAAQA,IAGhB,QAAQliD,GACJ,IAAKZ,KAAKqhD,QAAQzgD,GAAO,CACrB,IAAImiD,EAAU/iD,KAAKY,OACfoiD,EAAUD,EAAUA,EAAU,IAAMniD,EAAOA,EAC/CZ,KAAKY,KAAKoiD,GAEd,OAAOhjD,KAEX,QAAQY,GACJ,IAAKA,EACD,OAAO,EAEX,MAAMqiD,EAAWjjD,KAAKY,OACtB,IAAKqiD,EACD,OAAO,EAEX,IAAIz+B,GAASy+B,GAAY,IAAIj8C,MAAM,OACnC,OAAgC,IAAzBwd,EAAM9W,QAAQ9M,GAEzB,WAAWA,GACP,IAAI4jB,GAASxkB,KAAKY,QAAU,IAAIoG,MAAM,OAClCiB,EAAQuc,EAAM9W,QAAQ9M,GAK1B,OAJe,IAAXqH,IACAuc,EAAMm5B,OAAO11C,EAAO,GACpBjI,KAAKY,KAAK4jB,EAAMnP,KAAK,OAElBrV,KAEX,QAAQsoC,EAAM5e,GACV,IAAImc,EAAO7lC,KAAK,GAAMk4B,EAAKgS,YAAY5B,IAOvC,OANIpQ,EAAK4lB,YAAYjY,GACjBA,EAAKrlC,KAAKR,KAAM0pB,GAGhB1pB,KAAKqqC,SAAS/B,EAAM5e,GAEjB1pB,KAEX,eACI,GAAI,OAAM6rB,gBAAiB,CACvB,MAAM0rB,EAAWv3C,KAAKw3C,YAAcx3C,KAAK82C,WAC5B,OAAbS,QAAkC,IAAbA,GAA+BA,EAASE,aAGrE,SAAS71C,EAAK8nB,GACV,IAAIihB,EAAS3qC,KAAKmqC,MAAMvoC,IACpB+oC,IAAWjhB,GAAQwO,EAAK5mB,SAASoY,WAGzB7mB,IAAR6mB,GAA6B,OAARA,SACd1pB,KAAKmqC,MAAMvoC,GAGlB5B,KAAKmqC,MAAMvoC,GAAO8nB,EAElB1pB,KAAK25C,yBACL35C,KAAK4qC,iBAAiBhpC,EAAK+oC,EAAQjhB,GAEvC1pB,KAAKw6C,gBAET,kBAAkB54C,EAAK0oC,EAAW5gB,GAC9B,IAAIihB,OACQ9nC,IAAR6mB,IACAihB,EAAS3qC,KAAKmqC,MAAMvoC,GACf+oC,IACD3qC,KAAKmqC,MAAMvoC,GAAO5B,KAAKyqC,QAAQ7oC,IAEnC5B,KAAKmqC,MAAMvoC,GAAK0oC,GAAa5gB,EAC7B1pB,KAAK4qC,iBAAiBhpC,EAAK+oC,EAAQjhB,IAG3C,eAAe63B,EAAW3Z,EAAKsb,GACvBtb,GAAO5nC,KAAK0iC,WAAa+V,KACzB7Q,EAAIpkC,OAASxD,MAEjB,IAAImjD,GAAc5B,IAAchJ,IAAcgJ,IAAc/I,MACtD0K,IACGljD,OAASkjD,GACLljD,KAAKojD,cAAgBpjD,KAAKojD,aAAaF,KACzB,UAAlBljD,KAAK0iC,WAAyBwgB,GACvC,IAAKC,EAAY,CACbnjD,KAAK0hD,MAAMH,EAAW3Z,GACtB,IAAIyb,GAAc9B,IAAchJ,IAAcgJ,IAAc/I,KACxD0K,GACAA,EAAaE,cACbF,EAAaE,aAAapjD,QACzBkjD,EAAaE,aAAapjD,KAAK8nB,SAC9B8f,IAAQA,EAAI0b,eAAkB1b,IAChC5nC,KAAK8nB,QACL9nB,KAAK8nB,OAAO22B,gBACX4E,IACGH,GAAgBA,EAAap7B,OAC7B9nB,KAAKyhD,eAAejhD,KAAKR,KAAK8nB,OAAQy5B,EAAW3Z,EAAKsb,GAGtDljD,KAAKyhD,eAAejhD,KAAKR,KAAK8nB,OAAQy5B,EAAW3Z,KAKjE,mBAAmB2Z,GACf,IAAIgC,EAAYvjD,KAAKo5C,OAAOl4C,IAAI62C,IAChC,IAAKwL,EAAW,CACZA,EAAY,GACZ,IAAIvtB,EAAMj1B,OAAOqb,eAAepc,MAChC,MAAOg2B,EACH,GAAKA,EAAIkjB,eAAT,CAIA,IAAK,IAAIrpC,KAASmmB,EAAIkjB,eAAgB,CAClC,MAAMsK,EAAYxtB,EAAIkjB,eAAerpC,GAC/B4zC,EAAYF,EAAU1zC,IAAU,GACtC0zC,EAAU1zC,GAAS2zC,EAAUn2C,OAAOo2C,GAExCztB,EAAMj1B,OAAOqb,eAAe4Z,QARxBA,EAAMj1B,OAAOqb,eAAe4Z,GAUpCh2B,KAAKo5C,OAAOrqC,IAAIgpC,GAAewL,GAEnC,OAAOA,EAAUhC,GAErB,MAAMA,EAAW3Z,GACbA,EAAMA,GAAO,GACbA,EAAI0V,cAAgBt9C,KACpB4nC,EAAI71B,KAAOwvC,EACX,MAAMmC,EAAe1jD,KAAK2jD,mBAAmBpC,GAC7C,GAAImC,EACA,IAAK,IAAIrjD,EAAI,EAAGA,EAAIqjD,EAAa9gD,OAAQvC,IACrCqjD,EAAarjD,GAAGmxB,QAAQhxB,KAAKR,KAAM4nC,GAG3C,MAAMgc,EAAgB5jD,KAAKk5C,eAAeqI,GAC1C,GAAIqC,EACA,IAASvjD,EAAI,EAAGA,EAAIujD,EAAchhD,OAAQvC,IACtCujD,EAAcvjD,GAAGmxB,QAAQhxB,KAAKR,KAAM4nC,GAIhD,OAGI,OAFA5nC,KAAKq7C,YACLr7C,KAAKs7C,UACEt7C,KAEX,mBAAmB4nC,GACf,IAAII,EAAYJ,EAAMA,EAAII,eAAYnlC,EAClCg0C,EAAQ72C,KAAK82C,WACb+M,EAAK7jD,KAAK8jD,sBACVruC,EAAMohC,EAAMkN,gBAAgB/b,IAC5B6O,EAAMI,yBAAyB,IAC/B4M,EACJxN,GAAGE,cAAcxnC,IAAI/O,KAAKi5C,IAAK,CAC3B7xB,KAAMpnB,KACNm3C,gBAAiB1hC,EACjBq+B,OAAQ,CACJ1pB,EAAG3U,EAAI2U,EAAIy5B,EAAGz5B,EACdmM,EAAG9gB,EAAI8gB,EAAIstB,EAAGttB,GAElBkgB,WAAY,QACZzO,cAGR,UAAUJ,EAAKoc,GAAc,GACpB3N,GAAGE,cAAczxC,IAAI9E,KAAKi5C,MAC3Bj5C,KAAKikD,mBAAmBrc,GAE5B,MAAM4O,EAAOH,GAAGE,cAAcr1C,IAAIlB,KAAKi5C,KACvCzC,EAAKC,WAAa,WAClBz2C,KAAKs3C,KAAK,YAAa,CACnBvlC,KAAM,YACNvO,OAAQxD,KACR4nC,IAAKA,GAAOA,EAAIA,KACjBoc,GAEP,iBAAiBpc,EAAK4O,GAClB,MAAM/gC,EAAMzV,KAAK82C,WAAWiN,gBAAgBvN,EAAKxO,WACjD,GAAKvyB,EAAL,CAGA,IAAIyuC,EAAa,CACb95B,EAAG3U,EAAI2U,EAAIosB,EAAK1C,OAAO1pB,EACvBmM,EAAG9gB,EAAI8gB,EAAIigB,EAAK1C,OAAOvd,GAEvB4tB,EAAMnkD,KAAKokD,gBACf,QAAYvhD,IAARshD,EAAmB,CACnB,MAAME,EAAUF,EAAI3jD,KAAKR,KAAMkkD,EAAYtc,GACtCyc,EAIDH,EAAaG,EAHbnsB,EAAKuN,KAAK,kIAMbzlC,KAAKs5C,UACNt5C,KAAKs5C,SAASlvB,IAAM85B,EAAW95B,GAC/BpqB,KAAKs5C,SAAS/iB,IAAM2tB,EAAW3tB,IAC/Bv2B,KAAKskD,oBAAoBJ,GACzBlkD,KAAKw6C,gBAETx6C,KAAKs5C,SAAW4K,GAEpB,SAAStc,GACL,MAAM4O,EAAOH,GAAGE,cAAcr1C,IAAIlB,KAAKi5C,KACnCzC,IACAA,EAAKC,WAAa,WAEtBJ,GAAGsB,eAAe/P,GAClByO,GAAGwB,cAAcjQ,GAErB,aAAa2c,GACTvkD,KAAKqqC,SAAS,YAAaka,GAC3BvkD,KAAKwkD,cAET,aACI,MAAMhO,EAAOH,GAAGE,cAAcr1C,IAAIlB,KAAKi5C,KACvC,QAAOzC,GAA2B,aAApBA,EAAKC,WAEvB,cACIz2C,KAAKykD,eACLzkD,KAAKo6C,GAAG,oCAAoC,SAAUxS,GAClD,IAAI8c,OAA0C7hD,IAAtB+kC,EAAIA,IAAI,UAC5B+c,GAAWD,GAAqB,OAAM73B,YAAYnf,QAAQk6B,EAAIA,IAAI,YAAc,EACpF,GAAK+c,IAGD3kD,KAAK8sB,aAAT,CAGA,IAAI83B,GAAmB,EACvBvO,GAAGE,cAAcntC,QAASotC,IAClBx2C,KAAKojD,aAAa5M,EAAKpvB,QACvBw9B,GAAmB,KAGtBA,GACD5kD,KAAKikD,mBAAmBrc,OAIpC,cACI,GAAI5nC,KAAKmqC,MAAMoa,UACXvkD,KAAK6kD,kBAEJ,CACD7kD,KAAKykD,eACL,IAAI5N,EAAQ72C,KAAK82C,WACjB,IAAKD,EACD,OAEJ,MAAMiO,EAAczO,GAAGE,cAAcr1C,IAAIlB,KAAKi5C,KACxCnsB,EAAag4B,GAA0C,aAA3BA,EAAYrO,WACxCsO,EAAUD,GAA0C,UAA3BA,EAAYrO,WACvC3pB,EACA9sB,KAAKu9C,WAEAwH,GACL1O,GAAGE,cAAcmB,OAAO13C,KAAKi5C,MAIzC,eACIj5C,KAAKk9C,IAAI,mBACTl9C,KAAKk9C,IAAI,oBAEb,qBAAqB3H,EAAS,CAAEnrB,EAAG,EAAGmM,EAAG,IACrC,MAAMsgB,EAAQ72C,KAAK82C,WACnB,IAAKD,EACD,OAAO,EAEX,MAAMmO,EAAa,CACf56B,GAAImrB,EAAOnrB,EACXmM,GAAIgf,EAAOhf,EACX0O,MAAO4R,EAAM5R,QAAU,EAAIsQ,EAAOnrB,EAClC8a,OAAQ2R,EAAM3R,SAAW,EAAIqQ,EAAOhf,GAExC,OAAO2B,EAAK+sB,iBAAiBD,EAAYhlD,KAAKy6C,iBAElD,cAAc3qC,EAAMo1C,GAIhB,OAHIhtB,EAAKgQ,UAAUp4B,KACfA,EAAOgxC,KAAKqE,MAAMr1C,IAEf9P,KAAKolD,YAAYt1C,EAAMo1C,GAElC,mBAAmBlvB,EAAKkvB,GACpB,IAAgFG,EAAI/jC,EAAKxf,EAArF++C,EAAY,GAAK5+C,UAAUgrB,aAAazsB,KAAKw1B,GAAM0nB,EAAW1nB,EAAI0nB,SAClEwH,IACAlvB,EAAImU,MAAM+a,UAAYA,GAErB,OAAMrE,KACP3oB,EAAKuN,KAAK,wCACNob,EACA,2BACJA,EAAY,SAEhB,MAAMyE,EAAQ,OAAMzE,GAEpB,GADAwE,EAAK,IAAIC,EAAMtvB,EAAImU,OACfuT,EAEA,IADAp8B,EAAMo8B,EAAS96C,OACVd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBujD,EAAGpuC,IAAI,GAAKmuC,YAAY1H,EAAS57C,KAGzC,OAAOujD,GAGf,GAAKpjD,UAAUygC,SAAW,OAC1B,GAAKzgC,UAAUsjD,oBAAsB,GACrC,GAAKtjD,UAAUi3C,eAAiB,GAChC,GAAKj3C,UAAUm4C,GAAG55C,KAAK,GAAKyB,UAAW82C,IAAsB,WACrD/4C,KAAKu5C,yBACLv5C,KAAKw5C,0BAA2B,GAGpCx5C,KAAKq6C,YAAYzB,IACjB54C,KAAKu6C,6BAA6BvC,QAEtC,GAAK/1C,UAAUm4C,GAAG55C,KAAK,GAAKyB,UAAW,uBAAuB,WAC1DjC,KAAKu6C,6BAA6BzB,OAEtC,GAAK72C,UAAUm4C,GAAG55C,KAAK,GAAKyB,UAAW,yBAAyB,WAC5DjC,KAAKu6C,6BAA6BjC,OAEtC,GAAKr2C,UAAUm4C,GAAG55C,KAAK,GAAKyB,UAAW,uBAAuB,WAC1DjC,KAAKu6C,6BAA6BzC,OAEtC,MAAM5B,GAAkBvM,GAAQuM,gBAChCA,GAAgB,GAAM,UACtBA,GAAgB,GAAM,oBACtBA,GAAgB,GAAM,YACtBA,GAAgB,GAAM,IAAK,EAAG7N,KAC9B6N,GAAgB,GAAM,IAAK,EAAG7N,KAC9B6N,GAAgB,GAAM,2BAA4B,cAAepN,KACjEoN,GAAgB,GAAM,UAAW,EAAG7N,KACpC6N,GAAgB,GAAM,OAAQ,GAAIpN,KAClCoN,GAAgB,GAAM,KAAM,GAAIpN,KAChCoN,GAAgB,GAAM,WAAY,EAAG7N,KACrCsB,GAAQ6b,0BAA0B,GAAM,QAAS,CAAC,IAAK,MACvDtP,GAAgB,GAAM,SAAU,EAAG7N,KACnC6N,GAAgB,GAAM,SAAU,EAAG7N,KACnCsB,GAAQ6b,0BAA0B,GAAM,OAAQ,CAAC,IAAK,MACtDtP,GAAgB,GAAM,QAAS,EAAG7N,KAClC6N,GAAgB,GAAM,QAAS,EAAG7N,KAClCsB,GAAQ6b,0BAA0B,GAAM,SAAU,CAAC,IAAK,MACxDtP,GAAgB,GAAM,UAAW,EAAG7N,KACpC6N,GAAgB,GAAM,UAAW,EAAG7N,KACpC6N,GAAgB,GAAM,eAAgB,KAAM7N,KAC5C6N,GAAgB,GAAM,QAAS,EAAG7N,KAClC6N,GAAgB,GAAM,SAAU,EAAG7N,KACnC6N,GAAgB,GAAM,aAAa,EAAM7M,KACzC6M,GAAgB,GAAM,kBAAkB,EAAM7M,KAC9C6M,GAAgB,GAAM,UAAW,MAAM,SAAUxsB,GAE7C,OADA1pB,KAAKqrC,iBAAkB,EAChB3hB,KAEXwsB,GAAgB,GAAM,WAAW,EAAM7M,KACvC6M,GAAgB,GAAM,oBAAqB,MAAOpN,KAClDoN,GAAgB,GAAM,QACtBA,GAAgB,GAAM,iBACtBA,GAAgB,GAAM,aAAa,EAAO7M,KAC1CM,GAAQ8b,WAAW,GAAM,CACrBC,UAAW,SACXC,eAAgB,cAChBC,eAAgB,gBCx2Cb,MAAM,WAAkB,GAC3B,cACIzP,SAASlzC,WACTjD,KAAK09C,SAAW,GAEpB,YAAYmI,GACR,IAAKA,EACD,OAAO7lD,KAAK09C,UAAY,GAE5B,MAAMA,EAAW19C,KAAK09C,UAAY,GAClC,IAAIoI,EAAU,GAMd,OALApI,EAASt0C,SAAQ,SAAUw1C,GACnBiH,EAAWjH,IACXkH,EAAQx/C,KAAKs4C,MAGdkH,EAEX,cACI,OAAO9lD,KAAK++C,cAAcn8C,OAAS,EAEvC,iBAQI,OAPA5C,KAAK++C,cAAc31C,QAASw1C,IACxBA,EAAM92B,OAAS,KACf82B,EAAM32C,MAAQ,EACd22C,EAAMf,WAEV79C,KAAK09C,SAAW,GAChB19C,KAAKw6C,eACEx6C,KAEX,kBAQI,OAPAA,KAAK++C,cAAc31C,QAASw1C,IACxBA,EAAM92B,OAAS,KACf82B,EAAM32C,MAAQ,EACd22C,EAAMmH,YAEV/lD,KAAK09C,SAAW,GAChB19C,KAAKw6C,eACEx6C,KAEX,OAAO09C,GACH,GAAIz6C,UAAUL,OAAS,EAAG,CACtB,IAAK,IAAIvC,EAAI,EAAGA,EAAI4C,UAAUL,OAAQvC,IAClCL,KAAKiX,IAAIhU,UAAU5C,IAEvB,OAAOL,KAEX,IAAI4+C,EAAQlB,EAAS,GACrB,OAAIkB,EAAMhE,aACNgE,EAAM1O,OAAOlwC,MACNA,OAEXA,KAAKgmD,aAAapH,GAClBA,EAAM32C,MAAQjI,KAAK++C,cAAcn8C,OACjCg8C,EAAM92B,OAAS9nB,KACf4+C,EAAMnB,eACNz9C,KAAK++C,cAAcz4C,KAAKs4C,GACxB5+C,KAAK0hD,MAAM,MAAO,CACd9C,MAAOA,IAEX5+C,KAAKw6C,eACEx6C,MAEX,UAKI,OAJIA,KAAKimD,eACLjmD,KAAKkmD,kBAET/P,MAAM4P,UACC/lD,KAEX,KAAK4iC,GACD,OAAO5iC,KAAKmmD,aAAavjB,GAAU,GAEvC,QAAQA,GACJ,IAAI55B,EAAShJ,KAAKmmD,aAAavjB,GAAU,GACzC,OAAO55B,EAAOpG,OAAS,EAAIoG,EAAO,QAAKnG,EAE3C,aAAa+/B,EAAUwjB,GACnB,IAAI7a,EAAS,GAWb,OAVAvrC,KAAKqmD,aAAcj/B,IACf,MAAMk/B,EAAQl/B,EAAK45B,SAASpe,GAI5B,OAHI0jB,GACA/a,EAAOjlC,KAAK8gB,MAEZk/B,IAASF,KAKV7a,EAEX,aAAa7oC,GACT,IAAIygD,GAAa,EACjB,MAAMzF,EAAW19C,KAAK++C,cACtB,IAAK,MAAMH,KAASlB,EAAU,CAE1B,GADAyF,EAAazgD,EAAGk8C,GACZuE,EACA,OAAO,EAEX,GAAKvE,EAAMqH,gBAGX9C,EAAavE,EAAMyH,aAAa3jD,GAC5BygD,GACA,OAAO,EAGf,OAAO,EAEX,WACI,IAAIntB,EAAM,GAAK/zB,UAAUmB,SAAS5C,KAAKR,MAKvC,OAJAg2B,EAAI0nB,SAAW,GACf19C,KAAK++C,cAAc31C,QAASw1C,IACxB5oB,EAAI0nB,SAASp3C,KAAKs4C,EAAMx7C,cAErB4yB,EAEX,aAAa5O,GACT,IAAIU,EAASV,EAAKwzB,YAClB,MAAO9yB,EAAQ,CACX,GAAIA,EAAOmxB,MAAQj5C,KAAKi5C,IACpB,OAAO,EAEXnxB,EAASA,EAAO8yB,YAEpB,OAAO,EAEX,MAAM5kB,GACF,IAAI5O,EAAO,GAAKnlB,UAAUskD,MAAM/lD,KAAKR,KAAMg2B,GAI3C,OAHAh2B,KAAK++C,cAAc31C,SAAQ,SAAUi8C,GACjCj+B,EAAKnQ,IAAIouC,EAAGkB,YAETn/B,EAEX,oBAAoB3R,GAChB,IAAI2e,EAAM,GAMV,OALAp0B,KAAKopB,KAAK,SAAShgB,SAAQ,SAAUqjC,GAC7BA,EAAMiS,aAAejS,EAAM+Z,WAAW/wC,IACtC2e,EAAI9tB,KAAKmmC,MAGVrY,EAEX,6BAA6BkU,GACzB,IAAIkL,EACJ2C,MAAMoE,6BAA6BjS,GAC/BtoC,KAAKo/C,YAGgB,QAAxB5L,EAAKxzC,KAAK09C,gBAA6B,IAAPlK,GAAyBA,EAAGpqC,SAAQ,SAAUge,GAC3EA,EAAKmzB,6BAA6BjS,MAG1C,sBACI,IAAIkL,EACqB,QAAxBA,EAAKxzC,KAAK09C,gBAA6B,IAAPlK,GAAyBA,EAAGpqC,SAAQ,SAAUw1C,EAAO98C,GAClF88C,EAAM32C,MAAQnG,KAElB9B,KAAKw6C,eAET,UAAUiM,EAAK/Q,GACX,IAAI4I,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAQnI,GAASA,EAAMjR,YAAcuH,EAAU1R,GAAUA,EAAOoJ,aAAcmQ,EAAez8C,KAAKo8C,kBAAmBrB,EAAoB0B,GAAgBA,EAAalB,MACxMmL,EAAUxjB,GAAUA,EAAOkS,QAC/B,IAAKp1C,KAAK0+C,cAAgBgI,EACtB,OAAO1mD,KAEX,GAAI+6C,EAAmB,CACnBnG,EAAQpE,OACR,IAAI/vC,EAAIT,KAAK+7C,qBAAqBrG,GAAK4J,YACvC1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDT,KAAK2mD,uBAAuB/R,GAC5BA,EAAQtE,eAGRtwC,KAAK4mD,cAAc,YAAa1jB,EAAQwS,GAE5C,OAAO11C,KAEX,QAAQymD,EAAK/Q,GACT,IAAK11C,KAAK6mD,cAAcnR,GACpB,OAAO11C,KAEX,IAAIs+C,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAQnI,GAASA,EAAMlI,UAAYxB,EAAU1R,GAAUA,EAAOoJ,aAAcmQ,EAAez8C,KAAKo8C,kBAAmBnB,EAAkBwB,GAAgBA,EAAajB,IACxM,GAAIP,EAAiB,CACjBrG,EAAQpE,OACR,IAAI/vC,EAAIT,KAAK+7C,qBAAqBrG,GAAK4J,YACvC1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDT,KAAK8mD,qBAAqBlS,GAC1BA,EAAQtE,eAGRtwC,KAAK4mD,cAAc,UAAW1jB,EAAQwS,GAE1C,OAAO11C,KAEX,cAAc+mD,EAAY7jB,EAAQwS,GAC9B,IAAIlC,EACAoB,EAAU1R,GAAUA,EAAOoJ,aAAc0a,EAAYhnD,KAAKgnD,YAAaC,EAAajnD,KAAKinD,aAAcC,EAAWlnD,KAAKknD,WAAYC,EAAWH,GAAaC,GAAeC,EAC9K,MAAME,EAAY1R,IAAQ11C,KAC1B,GAAImnD,EAAS,CACTvS,EAAQpE,OACR,IAAIM,EAAY9wC,KAAK+7C,qBAAqBrG,GACtCj1C,EAAIqwC,EAAUwO,YAGlB,GAFA1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDm0C,EAAQlG,YACJwY,EACAA,EAAS1mD,KAAKR,KAAM40C,EAAS50C,UAE5B,CACD,IAAIqnD,EAAQrnD,KAAKqnD,QACbC,EAAQtnD,KAAKsnD,QACjB1S,EAAQzE,KAAKkX,EAAOC,EAAON,EAAWC,GAE1CrS,EAAQhG,OACRnuC,EAAIqwC,EAAUmO,OAAOC,SAASI,YAC9B1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAEtD,IAAI8mD,GAAkBH,GACkB,gBAApCpnD,KAAKsxC,4BACU,cAAfyV,EACAQ,IACA3S,EAAQpE,OACRoE,EAAQsH,+BAA+Bl8C,OAElB,QAAxBwzC,EAAKxzC,KAAK09C,gBAA6B,IAAPlK,GAAyBA,EAAGpqC,SAAQ,SAAUw1C,GAC3EA,EAAMmI,GAAY7jB,EAAQwS,MAE1B6R,GACA3S,EAAQtE,UAER6W,GACAvS,EAAQtE,UAGhB,cAAc6E,GACV,IAAI3B,EACJ2B,EAASA,GAAU,GACnB,IAEIsG,EAAMC,EAAMC,EAAMC,EAFlBlB,EAAgBvF,EAAOuF,cACvBC,EAAaxF,EAAOwF,WAEpB6M,EAAW,CACXp9B,EAAGq9B,IACHlxB,EAAGkxB,IACHxiB,MAAO,EACPC,OAAQ,GAERviC,EAAO3C,KACc,QAAxBwzC,EAAKxzC,KAAK09C,gBAA6B,IAAPlK,GAAyBA,EAAGpqC,SAAQ,SAAUw1C,GAC3E,GAAKA,EAAMR,UAAX,CAGA,IAAIjO,EAAOyO,EAAMnE,cAAc,CAC3BE,WAAYh4C,EACZ+kD,WAAYvS,EAAOuS,WACnBC,WAAYxS,EAAOwS,aAEJ,IAAfxX,EAAKlL,OAA+B,IAAhBkL,EAAKjL,cAGhBriC,IAAT44C,GACAA,EAAOtL,EAAK/lB,EACZsxB,EAAOvL,EAAK5Z,EACZolB,EAAOxL,EAAK/lB,EAAI+lB,EAAKlL,MACrB2W,EAAOzL,EAAK5Z,EAAI4Z,EAAKjL,SAGrBuW,EAAOj1C,KAAKD,IAAIk1C,EAAMtL,EAAK/lB,GAC3BsxB,EAAOl1C,KAAKD,IAAIm1C,EAAMvL,EAAK5Z,GAC3BolB,EAAOn1C,KAAK6F,IAAIsvC,EAAMxL,EAAK/lB,EAAI+lB,EAAKlL,OACpC2W,EAAOp1C,KAAK6F,IAAIuvC,EAAMzL,EAAK5Z,EAAI4Z,EAAKjL,cAK5C,IAFA,IAAI0iB,EAAS5nD,KAAKopB,KAAK,SACnBy+B,GAAa,EACRxnD,EAAI,EAAGA,EAAIunD,EAAOhlD,OAAQvC,IAAK,CACpC,IAAIosC,EAAQmb,EAAOvnD,GACnB,GAAIosC,EAAM0R,WAAWn+C,MAAO,CACxB6nD,GAAa,EACb,OAmBR,OAfIL,EADAK,QAAuBhlD,IAAT44C,EACH,CACPrxB,EAAGqxB,EACHllB,EAAGmlB,EACHzW,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,GAIR,CACPtxB,EAAG,EACHmM,EAAG,EACH0O,MAAO,EACPC,OAAQ,GAGXwV,EAGE8M,EAFIxnD,KAAK8nD,iBAAiBN,EAAU7M,IAKnDhR,GAAQ6b,0BAA0B,GAAW,OAAQ,CACjD,IACA,IACA,QACA,WAEJ7b,GAAQuM,gBAAgB,GAAW,aAASrzC,EAAWwlC,KACvDsB,GAAQuM,gBAAgB,GAAW,aAASrzC,EAAWwlC,KACvDsB,GAAQuM,gBAAgB,GAAW,iBAAarzC,EAAWwlC,KAC3DsB,GAAQuM,gBAAgB,GAAW,kBAAcrzC,EAAWwlC,KAC5DsB,GAAQuM,gBAAgB,GAAW,YC5TnC,MAAM6R,GAAW,IAAIpR,IACfqR,QAA2DnlD,IAAlC,OAAMuoB,QAAQ,gBACtC,SAAS68B,GAAiBjgB,GAC7B,OAAO+f,GAAS7mD,IAAI8mC,GAEjB,SAAS9X,GAAY0X,GACxB,MAAO,CACHA,MACAI,UAAWJ,EAAII,WAGhB,SAASkgB,GAAkBlgB,EAAWyE,GACzC,OAAOsb,GAAS7mD,IAAI8mC,KAAeyE,EAEhC,SAAS0b,GAAkBngB,EAAWyE,GACzC2b,GAAepgB,GACf,MAAM6O,EAAQpK,EAAMqK,WACfD,IAELkR,GAASh5C,IAAIi5B,EAAWyE,GACpBub,IACAvb,EAAMiV,MAAM,oBAAqBxxB,GAAY,IAAIm4B,aAAa,wBAG/D,SAASD,GAAepgB,EAAWxkC,GACtC,MAAMipC,EAAQsb,GAAS7mD,IAAI8mC,GAC3B,IAAKyE,EACD,OACJ,MAAMoK,EAAQpK,EAAMqK,WAChBD,GAASA,EAAM97B,QAEnBgtC,GAASrQ,OAAO1P,GACZggB,IACAvb,EAAMiV,MAAM,qBAAsBxxB,GAAY,IAAIm4B,aAAa,wBC1BvE,IAAI,GAAQ,QAASC,GAAS,SAAUC,GAAK,KAAMC,GAAW,WAAY,GAAa,aAAcC,GAAY,YAAa,GAAa,aAAcC,GAAY,YAAaC,GAAY,YAAaC,GAAU,UAAWC,GAAc,cAAeC,GAAc,cAAeC,GAAY,YAAaC,GAAgB,gBAAiBC,GAAqB,qBAAsBC,GAAa,aAAcC,GAAe,eAAgBC,GAAc,cAAeC,GAAe,eAAgBC,GAAc,cAAeC,GAAa,aAAcC,GAAW,WAAYC,GAAY,YAAaC,GAAc,cAAeC,GAAQ,QAASC,GAAoB,EAAGC,GAAS,CACvqB,CAAC,GAAY,iBACb,CAAClB,GAAW,gBACZ,CAACD,GAAW,gBACZ,CAACE,GAAS,cACV,CAAC,GAAY,iBACb,CAACW,GAAY,gBACb,CAACE,GAAW,gBACZ,CAACD,GAAU,cACX,CAACE,GAAa,kBACd,CAACjB,GAAW,gBACZ,CAACkB,GAAO,UACR,CAACL,GAAa,gBACd,CAACR,GAAa,gBACd,CAACD,GAAa,gBACd,CAACE,GAAW,cACZ,CAACC,GAAe,kBAChB,CAACC,GAAoB,wBAEzB,MAAMa,GAAa,CACfC,MAAO,CACH,CAACb,IAAaV,GACd,CAACW,IAAe,GAChB,CAACC,IAAcX,GACf,CAACY,IAAe,GAChB,CAACR,IAAcH,GACf,CAACI,IAAcH,GACf,CAACI,IAAYH,GACb,CAACI,IAAgB,cACjBgB,aAAc,QACdC,gBAAiB,YAErBC,MAAO,CACH,CAAChB,IAAa,WACd,CAACC,IAAe,aAChB,CAACC,IAAc,YACf,CAACC,IAAe,aAChB,CAACR,IAAcY,GACf,CAACX,IAAcS,GACf,CAACR,IAAYS,GACb,CAACR,IAAgBU,GACjBM,aAAc,MACdC,gBAAiB,UAErBE,QAAS,CACL,CAACjB,IAAaA,GACd,CAACC,IAAeA,GAChB,CAACC,IAAcA,GACf,CAACC,IAAeA,GAChB,CAACR,IAAcA,GACf,CAACC,IAAcA,GACf,CAACC,IAAYA,GACb,CAACC,IAAgBA,GACjBgB,aAAc,eACdC,gBAAiB,oBAGnBG,GAAgBr4C,GACdA,EAAKrE,QAAQ,YAAc,EACpB,UAEPqE,EAAKrE,QAAQ,UAAY,EAClB,QAEJ,QAEL28C,GAAgB9I,IAClB,MAAMxvC,EAAOq4C,GAAa7I,GAC1B,MAAa,YAATxvC,EACO,OAAM6Z,sBAAwBk+B,GAAWK,QAEvC,UAATp4C,EACO+3C,GAAWI,MAET,UAATn4C,EACO+3C,GAAWC,WADtB,GAIJ,SAASO,GAAYngB,EAAQ,IAIzB,OAHIA,EAAM+c,UAAY/c,EAAM6c,WAAa7c,EAAM8c,aAC3C/uB,EAAKuN,KAAK,0EAEP0E,EAEX,MAAMogB,GAAsB,uLACfC,GAAS,GACf,MAAM,WAAc,GACvB,YAAYrV,GACRgB,MAAMmU,GAAYnV,IAClBn1C,KAAKyqD,kBAAoB,GACzBzqD,KAAKi3C,yBAA2B,GAChCj3C,KAAK0qD,YACL1qD,KAAK2qD,qBACLH,GAAOlkD,KAAKtG,MACZA,KAAKo6C,GAAG,uCAAwCp6C,KAAK4qD,YACrD5qD,KAAKo6C,GAAG,sBAAuBp6C,KAAK6qD,kBACpC7qD,KAAKo6C,GAAG,oEAAqE,KACzEkQ,GAAYtqD,KAAKmqC,SAErBnqC,KAAK6qD,mBAET,aAAajM,GACT,MAAMkM,EAA8B,UAApBlM,EAAMmM,UAChBC,EAAkC,cAApBpM,EAAMmM,UACpBzE,EAAQwE,GAAWE,EACpB1E,GACDpuB,EAAK+yB,MAAM,yCAGnB,mBACI,IAAKjrD,KAAK+a,QACN,OAEJ,MAAMU,EAAQzb,KAAKo+C,UAAY,GAAK,OACpCp+C,KAAK+a,QAAQU,MAAMC,QAAUD,EAEjC,aAAaypC,GACT,UAAWA,IAAcoD,GAAQ,CAC7B,GAA4B,MAAxBpD,EAAU3zC,OAAO,GAAY,CAC7B,IAAIsvC,EAAYqE,EAAUzgD,MAAM,GAChCygD,EAAYrpC,SAASqvC,uBAAuBrK,GAAW,OAEtD,CACD,IAAInxC,EAEAA,EADwB,MAAxBw1C,EAAU3zC,OAAO,GACZ2zC,EAGAA,EAAUzgD,MAAM,GAEzBygD,EAAYrpC,SAASsvC,eAAez7C,GAExC,IAAKw1C,EACD,KAAM,8CAAgDx1C,EAU9D,OAPA1P,KAAKqqC,SAAS,YAAa6a,GACvBllD,KAAK+a,UACD/a,KAAK+a,QAAQqwC,eACbprD,KAAK+a,QAAQqwC,cAAcv6C,YAAY7Q,KAAK+a,SAEhDmqC,EAAUt0C,YAAY5Q,KAAK+a,UAExB/a,KAEX,gBACI,OAAO,EAEX,QACI,IAAiD8B,EAA7CupD,EAASrrD,KAAK09C,SAAUp8B,EAAM+pC,EAAOzoD,OACzC,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBupD,EAAOvpD,GAAGmN,QAEd,OAAOjP,KAEX,MAAMg2B,GAMF,OALKA,IACDA,EAAM,IAEVA,EAAIkvB,UACoB,qBAAbrpC,UAA4BA,SAASzW,cAAc,OACvD,GAAUnD,UAAUskD,MAAM/lD,KAAKR,KAAMg2B,GAEhD,UACImgB,MAAM4P,UACN,IAAIhrC,EAAU/a,KAAK+a,QACfA,GAAWmd,EAAKozB,cAAcvwC,IAC9B/a,KAAKklD,YAAYr0C,YAAYkK,GAEjC,IAAI9S,EAAQuiD,GAAO98C,QAAQ1N,MAI3B,OAHIiI,GAAS,GACTuiD,GAAO7M,OAAO11C,EAAO,GAElBjI,KAEX,qBACI,MAAMyV,EAAMzV,KAAKyqD,kBAAkB,IAAMzqD,KAAKi3C,yBAAyB,GACvE,OAAKxhC,EAIE,CACH2U,EAAG3U,EAAI2U,EACPmM,EAAG9gB,EAAI8gB,IALP2B,EAAKuN,KAAK8kB,IACH,MAOf,gBAAgB76C,GACZ,OAAO1P,KAAKyqD,kBAAkBrhC,KAAMjnB,GAAMA,EAAEuN,KAAOA,GAEvD,uBACI,OAAO1P,KAAKyqD,kBAEhB,WACI,OAAOzqD,KAEX,aACI,OAAOA,KAAK+a,QAEhB,eAAeo6B,GACXA,EAASA,GAAU,GACnBA,EAAO/qB,EAAI+qB,EAAO/qB,GAAK,EACvB+qB,EAAO5e,EAAI4e,EAAO5e,GAAK,EACvB4e,EAAOlQ,MAAQkQ,EAAOlQ,OAASjlC,KAAKilC,QACpCkQ,EAAOjQ,OAASiQ,EAAOjQ,QAAUllC,KAAKklC,SACtC,IAAIhC,EAAS,IAAI,GAAY,CACzB+B,MAAOkQ,EAAOlQ,MACdC,OAAQiQ,EAAOjQ,OACfzY,WAAY0oB,EAAO1oB,YAAc,IAEjC2f,EAAWlJ,EAAOoJ,aAAaF,SAC/Bif,EAASrrD,KAAK09C,SAWlB,OAVIvI,EAAO/qB,GAAK+qB,EAAO5e,IACnB6V,EAAS2E,WAAW,EAAIoE,EAAO/qB,GAAI,EAAI+qB,EAAO5e,GAElD80B,EAAOjiD,SAAQ,SAAUk1C,GACrB,GAAKA,EAAMI,YAAX,CAGA,IAAI6M,EAAcjN,EAAMkE,eAAerN,GACvC/I,EAASiD,UAAUkc,EAAYlf,QAAS8I,EAAO/qB,EAAG+qB,EAAO5e,EAAGg1B,EAAY7d,WAAa6d,EAAYje,gBAAiBie,EAAY5d,YAAc4d,EAAYje,qBAErJpK,EAEX,gBAAgBztB,GACZ,IAAKA,EACD,OAAO,KAEX,IAAgE3T,EAA5DupD,EAASrrD,KAAK09C,SAAUp8B,EAAM+pC,EAAOzoD,OAAQ8R,EAAM4M,EAAM,EAC7D,IAAKxf,EAAI4S,EAAK5S,GAAK,EAAGA,IAAK,CACvB,MAAM2qC,EAAQ4e,EAAOvpD,GAAG0pD,gBAAgB/1C,GACxC,GAAIg3B,EACA,OAAOA,EAGf,OAAO,KAEX,aACI,IAAIxH,EAAQjlC,KAAKilC,QACbC,EAASllC,KAAKklC,SACdllC,KAAK+a,UACL/a,KAAK+a,QAAQU,MAAMwpB,MAAQA,EAAQsjB,GACnCvoD,KAAK+a,QAAQU,MAAMypB,OAASA,EAASqjB,IAEzCvoD,KAAKyrD,aAAa7V,QAAQ3Q,EAAOC,GACjCllC,KAAK0rD,gBAAgB9V,QAAQ3Q,EAAOC,GACpCllC,KAAK09C,SAASt0C,QAASk1C,IACnBA,EAAM1I,QAAQ,CAAE3Q,QAAOC,WACvBoZ,EAAMqN,SAGd,IAAIrN,KAAUsN,GACV,GAAI3oD,UAAUL,OAAS,EAAG,CACtB,IAAK,IAAIvC,EAAI,EAAGA,EAAI4C,UAAUL,OAAQvC,IAClCL,KAAKiX,IAAIhU,UAAU5C,IAEvB,OAAOL,KAEXm2C,MAAMl/B,IAAIqnC,GACV,IAAI17C,EAAS5C,KAAK09C,SAAS96C,OAW3B,OAVIA,EAASgnD,IACT1xB,EAAKuN,KAAK,iBACN7iC,EACA,2KAER07C,EAAM1I,QAAQ,CAAE3Q,MAAOjlC,KAAKilC,QAASC,OAAQllC,KAAKklC,WAClDoZ,EAAMqN,OACF,OAAMtgC,WACNrrB,KAAK+a,QAAQnK,YAAY0tC,EAAMpb,OAAOmJ,SAEnCrsC,KAEX,YACI,OAAO,KAEX,WACI,OAAO,KAEX,kBAAkBgoC,GACd,OAAO,GAAgCA,EAAWhoC,MAEtD,kBAAkBgoC,GACd,GAAgCA,EAAWhoC,MAE/C,eAAegoC,GACX,GAA6BA,EAAWhoC,MAE5C,YACI,OAAOA,KAAK09C,SAEhB,qBACS,OAAMryB,WAGXw+B,GAAOzgD,QAAQ,EAAEyG,EAAOohC,MACpBjxC,KAAK+a,QAAQrK,iBAAiBb,EAAQ+3B,IAClC5nC,KAAKixC,GAAYrJ,OAI7B,cAAcA,GACV5nC,KAAK+2C,qBAAqBnP,GAC1B,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAChC/R,KAAK0hD,MAAM1E,EAAO6O,aAAc,CAC5BjkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAGvB,aAAa4nC,GACT5nC,KAAK+2C,qBAAqBnP,GAC1B,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAChC/R,KAAK0hD,MAAM1E,EAAO8O,YAAa,CAC3BlkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAGvB,gBAAgB+rD,GACZ,IAAItf,EAAQzsC,KAAK+rD,EAAW,eAI5B,OAHItf,IAAUA,EAAMqK,aAChBrK,EAAQ,MAELA,EAEX,cAAc7E,GACV,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAC1BwvC,EAAY6I,GAAaxiB,EAAI71B,MACnC,GAAKirC,EAAL,CAGAh9C,KAAK+2C,qBAAqBnP,GAC1B,IAAIokB,EAAchsD,KAAKisD,gBAAgB1K,GACnC2K,GAAiB7V,GAAGvpB,YAAc,OAAMhB,iBACxCkgC,GAAeE,GACfF,EAAYvK,eAAezE,EAAOmP,WAAY,CAAEvkB,IAAKA,IACrDokB,EAAYvK,eAAezE,EAAOoP,aAAc,CAAExkB,IAAKA,IACvD5nC,KAAK0hD,MAAM1E,EAAOoP,aAAc,CAC5BxkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAEnBA,KAAKuhD,EAAY,eAAiB,MAE7B2K,IACLlsD,KAAK0hD,MAAM1E,EAAOoP,aAAc,CAC5BxkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAEnBA,KAAK0hD,MAAM1E,EAAOmP,WAAY,CAC1BvkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,QAGvBA,KAAKqsD,gBAAaxpD,EAClB7C,KAAKyqD,kBAAoB,IAE7B,aAAa7iB,GACT,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAC1BwvC,EAAY6I,GAAaxiB,EAAI71B,MACnC,GAAKirC,EAAL,CAGAh9C,KAAK+2C,qBAAqBnP,GAC1B,IAAI0kB,GAAmB,EACvBtsD,KAAKi3C,yBAAyB7tC,QAASqM,IACnC,IAAIg3B,EAAQzsC,KAAKwrD,gBAAgB/1C,GACjC4gC,GAAGK,aAAc,EACjB,OAAM,IAAM6K,EAAY,gBAAiB,EACzC,MAAMgL,EAAW9f,GAASA,EAAMgS,cAChC,IAAK8N,EACD,OAEA,OAAMxgC,6BACN0gB,EAAM0b,kBAAkB1yC,EAAI/F,IAEhC1P,KAAKuhD,EAAY,mBAAqB9U,EACtCA,EAAMgV,eAAezE,EAAOwP,YAAa,CACrC5kB,IAAKA,EACLI,UAAWvyB,EAAI/F,KAEnB48C,GAAmB,EACnB,MAAMG,EAAU7kB,EAAI71B,KAAKrE,QAAQ,UAAY,EACzC++B,EAAMigB,kBAAoB9kB,EAAI+kB,YAAcF,GAC5C7kB,EAAI8kB,mBAGPJ,GACDtsD,KAAK0hD,MAAM1E,EAAOwP,YAAa,CAC3B5kB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,UAAWhoC,KAAKyqD,kBAAkB,GAAG/6C,MAIjD,aAAak4B,GACT,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAC1BwvC,EAAY6I,GAAaxiB,EAAI71B,MACnC,IAAKirC,EACD,OAEA3G,GAAGvpB,YAAcupB,GAAGjvB,KAAKslC,kBAAoB9kB,EAAI+kB,YACjD/kB,EAAI8kB,iBAER1sD,KAAK+2C,qBAAqBnP,GAC1B,IAAIskB,GAAiB7V,GAAGvpB,YAAc,OAAMhB,iBAC5C,IAAKogC,EACD,OAEJ,IAAIU,EAAqB,GACzB,IAAIN,GAAmB,EACvB,IAAIN,EAAchsD,KAAKisD,gBAAgB1K,GACvCvhD,KAAKi3C,yBAAyB7tC,QAASqM,IACnC,MAAMg3B,EAAS,GAA+Bh3B,EAAI/F,KAC9C1P,KAAKwrD,gBAAgB/1C,GACnBuyB,EAAYvyB,EAAI/F,GAChBG,EAAQ,CAAE+3B,IAAKA,EAAKI,aAC1B,IAAI6kB,EAAkBb,IAAgBvf,EAKtC,GAJIogB,GAAmBb,IACnBA,EAAYvK,eAAezE,EAAOmP,WAAYprD,OAAOiU,OAAO,GAAInF,GAAQ48B,GACxEuf,EAAYvK,eAAezE,EAAOoP,aAAcrrD,OAAOiU,OAAO,GAAInF,GAAQ48B,IAE1EA,EAAO,CACP,GAAImgB,EAAmBngB,EAAMwM,KACzB,OAEJ2T,EAAmBngB,EAAMwM,MAAO,EAEhCxM,GAASA,EAAMgS,eACf6N,GAAmB,EACfO,IACApgB,EAAMgV,eAAezE,EAAO8O,YAAa/qD,OAAOiU,OAAO,GAAInF,GAAQm8C,GACnEvf,EAAMgV,eAAezE,EAAO6O,aAAc9qD,OAAOiU,OAAO,GAAInF,GAAQm8C,GACpEhsD,KAAKuhD,EAAY,eAAiB9U,GAEtCA,EAAMgV,eAAezE,EAAO8P,YAAa/rD,OAAOiU,OAAO,GAAInF,KAGvDm8C,IACAhsD,KAAK0hD,MAAM1E,EAAO8O,YAAa,CAC3BlkB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,cAEJhoC,KAAKuhD,EAAY,eAAiB,QAIzC+K,GACDtsD,KAAK0hD,MAAM1E,EAAO8P,YAAa,CAC3BllB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,UAAWhoC,KAAKi3C,yBAAyB,GAAGvnC,KAIxD,WAAWk4B,GACP,MAAMoV,EAASqN,GAAaziB,EAAI71B,MAC1BwvC,EAAY6I,GAAaxiB,EAAI71B,MACnC,IAAKirC,EACD,OAEJh9C,KAAK+2C,qBAAqBnP,GAC1B,MAAMmlB,EAAkB/sD,KAAKuhD,EAAY,mBACnCyL,EAAgBhtD,KAAKuhD,EAAY,iBACvC,IAAIqL,EAAqB,GACzB,IAAIN,GAAmB,EACvBtsD,KAAKi3C,yBAAyB7tC,QAASqM,IACnC,MAAMg3B,EAAS,GAA+Bh3B,EAAI/F,KAC9C1P,KAAKwrD,gBAAgB/1C,GACzB,GAAIg3B,EAAO,CAEP,GADAA,EAAM2b,eAAe3yC,EAAI/F,IACrBk9C,EAAmBngB,EAAMwM,KACzB,OAEJ2T,EAAmBngB,EAAMwM,MAAO,EAEpC,MAAMjR,EAAYvyB,EAAI/F,GAChBG,EAAQ,CAAE+3B,IAAKA,EAAKI,aAC1B,IAAIilB,GAAe,EACf,OAAM,IAAM1L,EAAY,qBACxB0L,GAAe,EACfC,aAAaltD,KAAKuhD,EAAY,gBAExBlL,GAAGK,cACT,OAAM,IAAM6K,EAAY,qBAAsB,EAC9C2L,aAAaltD,KAAKuhD,EAAY,gBAElCvhD,KAAKuhD,EAAY,cAAgBzwC,YAAW,WACxC,OAAM,IAAMywC,EAAY,qBAAsB,IAC/C,OAAM/1B,gBACLihB,GAASA,EAAMgS,eACf6N,GAAmB,EACnBtsD,KAAKuhD,EAAY,iBAAmB9U,EACpCA,EAAMgV,eAAezE,EAAOmQ,UAAWpsD,OAAOiU,OAAO,GAAInF,IACrD,OAAM,IAAM0xC,EAAY,gBACxBwL,GACAA,IAAoBtgB,IACpBA,EAAMgV,eAAezE,EAAOgN,aAAcjpD,OAAOiU,OAAO,GAAInF,IACxDo9C,GAAgBD,GAAiBA,IAAkBvgB,GACnDA,EAAMgV,eAAezE,EAAOiN,gBAAiBlpD,OAAOiU,OAAO,GAAInF,OAKvE7P,KAAKuhD,EAAY,iBAAmB,KAChC,OAAM,IAAMA,EAAY,gBACxBvhD,KAAK0hD,MAAM1E,EAAOgN,aAAc,CAC5BpiB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,cAGJilB,GACAjtD,KAAK0hD,MAAM1E,EAAOiN,gBAAiB,CAC/BriB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,iBAKXskB,GACDtsD,KAAK0hD,MAAM1E,EAAOmQ,UAAW,CACzBvlB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,KACfgoC,UAAWhoC,KAAKi3C,yBAAyB,GAAGvnC,KAGpD,OAAM,IAAM6xC,EAAY,gBAAiB,EACrC3Z,EAAI+kB,YACJ/kB,EAAI8kB,iBAGZ,aAAa9kB,GACT5nC,KAAK+2C,qBAAqBnP,GAC1B,IAAI6E,EAAQzsC,KAAKwrD,gBAAgBxrD,KAAKg/C,sBAClCvS,GAASA,EAAMgS,cACfhS,EAAMgV,eAAe6H,GAAa,CAAE1hB,IAAKA,IAGzC5nC,KAAK0hD,MAAM4H,GAAa,CACpB1hB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAI3B,OAAO4nC,GACH5nC,KAAK+2C,qBAAqBnP,GAC1B,IAAI6E,EAAQzsC,KAAKwrD,gBAAgBxrD,KAAKg/C,sBAClCvS,GAASA,EAAMgS,cACfhS,EAAMgV,eAAekI,GAAO,CAAE/hB,IAAKA,IAGnC5nC,KAAK0hD,MAAMiI,GAAO,CACd/hB,IAAKA,EACLpkC,OAAQxD,KACRs9C,cAAet9C,OAI3B,eAAe4nC,GACX5nC,KAAK+2C,qBAAqBnP,GAC1B,MAAM6E,EAAQ,GAA+B7E,EAAII,YAC7ChoC,KAAKwrD,gBAAgBxrD,KAAKg/C,sBAC1BvS,GACAA,EAAMgV,eAAesH,GAAW,GAA0BnhB,IAE9D,GAA6BA,EAAII,WAErC,oBAAoBJ,GAChB,GAA6BA,EAAII,WAErC,qBAAqBJ,GACjB,IAAIwlB,EAAkBptD,KAAKqtD,sBAAuBjjC,EAAI,KAAMmM,EAAI,KAChEqR,EAAMA,GAAYxjC,OAAOyL,WACLhN,IAAhB+kC,EAAIC,SACJ7nC,KAAKyqD,kBAAoB,GACzBzqD,KAAKi3C,yBAA2B,GAChC7sC,MAAMnI,UAAUmH,QAAQ5I,KAAKonC,EAAIC,QAAUqiB,IACvClqD,KAAKyqD,kBAAkBnkD,KAAK,CACxBoJ,GAAIw6C,EAAMniB,WACV3d,GAAI8/B,EAAMoD,QAAUF,EAAgBtnB,MAAQsnB,EAAgBx1B,OAC5DrB,GAAI2zB,EAAMqD,QAAUH,EAAgB1X,KAAO0X,EAAgBv1B,WAGnEztB,MAAMnI,UAAUmH,QAAQ5I,KAAKonC,EAAIE,gBAAkBF,EAAIC,QAAUqiB,IAC7DlqD,KAAKi3C,yBAAyB3wC,KAAK,CAC/BoJ,GAAIw6C,EAAMniB,WACV3d,GAAI8/B,EAAMoD,QAAUF,EAAgBtnB,MAAQsnB,EAAgBx1B,OAC5DrB,GAAI2zB,EAAMqD,QAAUH,EAAgB1X,KAAO0X,EAAgBv1B,aAKnEzN,GAAKwd,EAAI0lB,QAAUF,EAAgBtnB,MAAQsnB,EAAgBx1B,OAC3DrB,GAAKqR,EAAI2lB,QAAUH,EAAgB1X,KAAO0X,EAAgBv1B,OAC1D73B,KAAKqsD,WAAa,CACdjiC,EAAGA,EACHmM,EAAGA,GAEPv2B,KAAKyqD,kBAAoB,CAAC,CAAErgC,IAAGmM,IAAG7mB,GAAIwoB,EAAK8e,mBAAmBpP,KAC9D5nC,KAAKi3C,yBAA2B,CAC5B,CAAE7sB,IAAGmM,IAAG7mB,GAAIwoB,EAAK8e,mBAAmBpP,MAIhD,oBAAoBA,GAChB1P,EAAKuN,KAAK,8FACVzlC,KAAK+2C,qBAAqBnP,GAE9B,sBACI,IAAK5nC,KAAK+a,UAAY/a,KAAK+a,QAAQyyC,sBAC/B,MAAO,CACH9X,IAAK,EACL5P,KAAM,EACNlO,OAAQ,EACRC,OAAQ,GAGhB,IAAIsY,EAAOnwC,KAAK+a,QAAQyyC,wBACxB,MAAO,CACH9X,IAAKvF,EAAKuF,IACV5P,KAAMqK,EAAKrK,KACXlO,OAAQuY,EAAKlL,MAAQjlC,KAAK+a,QAAQ0yC,aAAe,EACjD51B,OAAQsY,EAAKjL,OAASllC,KAAK+a,QAAQ2yC,cAAgB,GAG3D,YAUI,GATA1tD,KAAKyrD,aAAe,IAAI,GAAY,CAChCxmB,MAAOjlC,KAAKilC,QACZC,OAAQllC,KAAKklC,WAEjBllC,KAAK0rD,gBAAkB,IAAI,GAAU,CACjCj/B,WAAY,EACZwY,MAAOjlC,KAAKilC,QACZC,OAAQllC,KAAKklC,WAEZ,OAAM7Z,UAAX,CAGA,IAAI65B,EAAYllD,KAAKklD,YACrB,IAAKA,EACD,KAAM,mDAEVA,EAAUlmC,UAAY,GACtBhf,KAAK+a,QAAUc,SAASzW,cAAc,OACtCpF,KAAK+a,QAAQU,MAAM7F,SAAW,WAC9B5V,KAAK+a,QAAQU,MAAMkyC,WAAa,OAChC3tD,KAAK+a,QAAQ8lC,UAAY,kBACzB7gD,KAAK+a,QAAQ6yC,aAAa,OAAQ,gBAClC1I,EAAUt0C,YAAY5Q,KAAK+a,SAC3B/a,KAAK4qD,cAET,QAEI,OADA1yB,EAAKuN,KAAK,kGACHzlC,KAEX,aACI,OAAOA,KAEX,YAII,OAHAA,KAAK++C,cAAc31C,SAAQ,SAAUk1C,GACjCA,EAAM7G,eAEHz3C,MAGf,GAAMiC,UAAUygC,SAAW,GAC3B,eAAc,IACdiH,GAAQuM,gBAAgB,GAAO,aCvqB/B,IAAI2X,GAAa,YACbC,GAAc,aACdC,GAAe,eACfC,GAAiB,iBACjBC,GAAiB,iBACrB,IAAIC,GACJ,SAASC,KACL,OAAID,KAGJA,GAAeh2B,EAAKyc,sBAAsBrI,WAAW,MAC9C4hB,IAEJ,MAAMtG,GAAS,GACtB,SAASpW,GAAUoD,GACfA,EAAQnF,OAEZ,SAAS8D,GAAYqB,GACjBA,EAAQhE,SAEZ,SAASyD,GAAaO,GAClBA,EAAQnF,OAEZ,SAAS+E,GAAeI,GACpBA,EAAQhE,SAEZ,SAASwd,KACLpuD,KAAKq6C,YAAYwT,IAErB,SAASQ,KACLruD,KAAKq6C,YAAYyT,IAErB,SAASQ,KACLtuD,KAAKq6C,YAAY0T,IAErB,SAASQ,KACLvuD,KAAKq6C,YAAY2T,IAErB,SAASQ,KACLxuD,KAAKq6C,YAAY4T,IAEd,MAAM,WAAc,GACvB,YAAY9Y,GAER,IAAIvzC,EADJu0C,MAAMhB,GAEN,MAAO,EAEH,GADAvzC,EAAMs2B,EAAKu2B,iBACP7sD,KAASA,KAAOgmD,IAChB,MAGR5nD,KAAKo0C,SAAWxyC,EAChBgmD,GAAOhmD,GAAO5B,KAElB,aAEI,OADAk4B,EAAKuN,KAAK,kEACHzlC,KAAKw3C,WAAWlL,aAE3B,YAEI,OADApU,EAAKuN,KAAK,iEACHzlC,KAAKw3C,WAAWnK,YAE3B,eACI,OAAOrtC,KAAKmqC,MAAMukB,WAAa1uD,KAAK,cAExC,aACI,OAAOA,KAAKmqC,MAAMwkB,SAAW3uD,KAAK,YAEtC,YACI,OAAOA,KAAKs6C,UAAUuT,GAAY7tD,KAAK4uD,YAE3C,aACI,OAAQ5uD,KAAK6uD,iBACgB,IAAzB7uD,KAAK8uD,oBACF9uD,KAAK+uD,eACJ/uD,KAAKgvD,cACLhvD,KAAKivD,iBACLjvD,KAAKkvD,iBAEjB,kBACI,OAAOlvD,KAAKs6C,UAAUyT,GAAc/tD,KAAKmvD,kBAE7C,mBACI,GAAInvD,KAAKovD,mBAAoB,CACzB,IAAIC,EAAMlB,KACV,MAAMmB,EAAUD,EAAIrgB,cAAchvC,KAAKovD,mBAAoBpvD,KAAKuvD,qBAAuB,UACvF,GAAID,GAAWA,EAAQ/hB,aAAc,CACjC,MAAMjX,EAAK,IAAIF,EACfE,EAAGya,UAAU/wC,KAAKwvD,eAAgBxvD,KAAKyvD,gBACvCn5B,EAAGia,OAAO,OAAM6R,SAASpiD,KAAK0vD,wBAC9Bp5B,EAAGma,MAAMzwC,KAAK2vD,oBAAqB3vD,KAAK4vD,qBACxCt5B,EAAGya,WAAW,EAAI/wC,KAAK6vD,sBAAuB,EAAI7vD,KAAK8vD,sBACvD,MAAMrvD,EAAI61B,EAAGgpB,YACProB,EAA8B,qBAAd84B,UAChB,CACEjtD,EAAGrC,EAAE,GACLsC,EAAGtC,EAAE,GACLC,EAAGD,EAAE,GACLE,EAAGF,EAAE,GACLkI,EAAGlI,EAAE,GACLwD,EAAGxD,EAAE,IAEP,IAAIsvD,UAAUtvD,GACpB6uD,EAAQ/hB,aAAatW,GAEzB,OAAOq4B,GAGf,qBACI,OAAOtvD,KAAKs6C,UAAU0T,GAAgBhuD,KAAKgwD,qBAE/C,sBACI,IAAIpd,EAAa5yC,KAAKiwD,+BACtB,GAAIrd,EAAY,CAKZ,IAJA,IAAIyc,EAAMlB,KACN15C,EAAQzU,KAAKkwD,+BACbx7C,EAAM1U,KAAKmwD,6BACXze,EAAM2d,EAAItgB,qBAAqBt6B,EAAM2V,EAAG3V,EAAM8hB,EAAG7hB,EAAI0V,EAAG1V,EAAI6hB,GACvDz0B,EAAI,EAAGA,EAAI8wC,EAAWhwC,OAAQd,GAAK,EACxC4vC,EAAIxI,aAAa0J,EAAW9wC,GAAI8wC,EAAW9wC,EAAI,IAEnD,OAAO4vC,GAGf,qBACI,OAAO1xC,KAAKs6C,UAAU2T,GAAgBjuD,KAAKowD,qBAE/C,sBACI,IAAIxd,EAAa5yC,KAAKqwD,+BACtB,GAAIzd,EAAY,CAKZ,IAJA,IAAIyc,EAAMlB,KACN15C,EAAQzU,KAAKswD,+BACb57C,EAAM1U,KAAKuwD,6BACX7e,EAAM2d,EAAIpgB,qBAAqBx6B,EAAM2V,EAAG3V,EAAM8hB,EAAGv2B,KAAKwwD,gCAAiC97C,EAAI0V,EAAG1V,EAAI6hB,EAAGv2B,KAAKywD,+BACrG3uD,EAAI,EAAGA,EAAI8wC,EAAWhwC,OAAQd,GAAK,EACxC4vC,EAAIxI,aAAa0J,EAAW9wC,GAAI8wC,EAAW9wC,EAAI,IAEnD,OAAO4vC,GAGf,gBACI,OAAO1xC,KAAKs6C,UAAUwT,GAAa9tD,KAAK0wD,gBAE5C,iBACI,GAAI1wD,KAAK2wD,YAAa,CAClB,IAAIC,EAAO14B,EAAK24B,YAAY7wD,KAAK+uD,eACjC,MAAQ,QACJ6B,EAAKzvD,EACL,IACAyvD,EAAK5mC,EACL,IACA4mC,EAAK7tD,EACL,IACA6tD,EAAK9tD,GAAK9C,KAAK8uD,iBAAmB,GAClC,KAGZ,UACI,OAAO9uD,KAAK8wD,WAAW,UAAW,CAC9B,cACA,OACA,mBACA,+BACA,gCACD,IACS9wD,KAAK0sC,kBACN1sC,KAAKyvC,QACJzvC,KAAKovD,oBACLpvD,KAAKiwD,gCACLjwD,KAAKqwD,iCAGrB,YACI,OAAOrwD,KAAK8wD,WAAW,YAAa,CAChC,gBACA,cACA,SACA,kCACD,IACS9wD,KAAK+wD,iBACT/wD,KAAKozC,kBACFpzC,KAAK4wC,WAAY5wC,KAAKgxD,mCAGrC,eACI,MAAM/rB,EAAQjlC,KAAKu0C,iBACnB,MAAc,SAAVtP,EACOjlC,KAAK4sC,YAET5sC,KAAK+wD,mBAAqB9rB,EAErC,WAAWjzB,GACP,IAAsE7P,EAAlE00C,EAAQ72C,KAAK82C,WAAY4U,EAAkB7U,EAAM6U,gBAIrD,OAHAA,EAAgBpf,aAAar9B,QAC7BjP,KAAKs7C,QAAQoQ,EAAiB,MAAM,GACpCvpD,EAAIupD,EAAgB9W,QAAQ5E,aAAaxpC,KAAKq+B,MAAM7yB,EAAMoY,GAAI5jB,KAAKq+B,MAAM7yB,EAAMukB,GAAI,EAAG,GAAGzmB,KAClF3N,EAAE,GAAK,EAElB,UAII,OAHA,GAAKF,UAAU8jD,QAAQvlD,KAAKR,aACrB4nD,GAAO5nD,KAAKo0C,iBACZp0C,KAAKo0C,SACLp0C,KAEX,iBAAiBixD,GACb,IAAIzd,EACJ,IAAKxzC,KAAK82C,WACN,OAAO,EAEX,MAAMoa,EAA8D,QAAxC1d,EAAKxzC,KAAKmqC,MAAM+mB,0BAAuC,IAAP1d,GAAgBA,EAC5F,IAAK0d,EACD,OAAO,EAEX,MAAMC,EAAUF,GAAajxD,KAAKmxD,UAC5BvkB,EAAY5sC,KAAK4sC,YACjBwkB,EAA8C,IAA9BpxD,KAAKguC,qBAC3B,GAAImjB,GAAWvkB,GAAawkB,EACxB,OAAO,EAEX,MAAMT,EAAY3wD,KAAK2wD,YACjBU,EAAkBrxD,KAAKsxD,yBAC7B,SAAIH,GAAWvkB,GAAa+jB,GAAaU,GAK7C,oBAAoB3nC,GAChBwO,EAAKuN,KAAK,+EACN/b,EACA1pB,KAAKu0C,eAAe,QAGpBv0C,KAAKu0C,eAAe,GAG5B,sBACI,OAA8B,IAA1Bv0C,KAAKu0C,iBAOb,cACI,IAAI1+B,EAAO7V,KAAK6V,OAChB,MAAO,CACHuU,EAAGpqB,KAAKuxD,WAAa17C,EAAKovB,MAAQ,EAAI,EACtC1O,EAAGv2B,KAAKuxD,WAAa17C,EAAKqvB,OAAS,EAAI,EACvCD,MAAOpvB,EAAKovB,MACZC,OAAQrvB,EAAKqvB,QAGrB,cAAciQ,EAAS,IACnB,MAAMuF,EAAgBvF,EAAOuF,cACvBC,EAAaxF,EAAOwF,WACpBjL,EAAW1vC,KAAKwxD,cAChBC,GAAetc,EAAOwS,YAAc3nD,KAAK4sC,YACzCwG,EAAeqe,GAAezxD,KAAKozC,eAAkB,EACrDse,EAAqBhiB,EAASzK,MAAQmO,EACtCue,EAAsBjiB,EAASxK,OAASkO,EACxCwe,GAAezc,EAAOuS,YAAc1nD,KAAK2wD,YACzC1B,EAAgB2C,EAAc5xD,KAAKivD,gBAAkB,EACrDC,EAAgB0C,EAAc5xD,KAAKkvD,gBAAkB,EACrD2C,EAAWH,EAAqBlrD,KAAK0tC,IAAI+a,GACzC6C,EAAYH,EAAsBnrD,KAAK0tC,IAAIgb,GAC3C6C,EAAcH,GAAe5xD,KAAKgvD,cAAiB,EACnD/pB,EAAQ4sB,EAAwB,EAAbE,EACnB7sB,EAAS4sB,EAAyB,EAAbC,EACrB5hB,EAAO,CACTlL,MAAOA,EACPC,OAAQA,EACR9a,IAAKgpB,EAAc,EAAI2e,GACnBvrD,KAAKD,IAAI0oD,EAAe,GACxBvf,EAAStlB,EACbmM,IAAK6c,EAAc,EAAI2e,GACnBvrD,KAAKD,IAAI2oD,EAAe,GACxBxf,EAASnZ,GAEjB,OAAKmkB,EAGEvK,EAFInwC,KAAK8nD,iBAAiB3X,EAAMwK,GAI3C,UAAU8L,EAAK/Q,GACX,IAAoMmB,EAAO4U,EAAcuG,EAArN1T,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAOnI,EAAMjR,YAAauH,EAAU1R,EAAOoJ,aAAcmQ,EAAez8C,KAAKo8C,kBAAmB6V,EAAWjyD,KAAKkyD,eAAgBvB,EAAY3wD,KAAK2wD,YACnLwB,EAAajvB,EAAOkS,QACpBgd,EAAc1c,IAAQ11C,KAC1B,IAAKA,KAAK0+C,cAAgB0T,EACtB,OAAOpyD,KAEX,GAAIy8C,EAAc,CACd7H,EAAQpE,OACR,IAAI/vC,EAAIT,KAAK+7C,qBAAqBrG,GAAK4J,YAIvC,OAHA1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDT,KAAK2mD,uBAAuB/R,GAC5BA,EAAQtE,UACDtwC,KAEX,IAAKiyD,EACD,OAAOjyD,KAGX,GADA40C,EAAQpE,OACJxwC,KAAKqyD,qBAAuBF,EAAY,CACxCtb,EAAQ72C,KAAK82C,WACb2U,EAAe5U,EAAM4U,aACrBuG,EAAgBvG,EAAanf,aAC7B0lB,EAAc/iD,QACd+iD,EAAcxhB,OACdwhB,EAAcM,eAAetyD,MAC7B,IAAIc,EAAId,KAAK+7C,qBAAqBrG,GAAK4J,YACvC0S,EAAclhB,UAAUhwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACxDmxD,EAASzxD,KAAKR,KAAMgyD,EAAehyD,MACnCgyD,EAAc1hB,UACd,IAAI2D,EAAQwX,EAAah/B,WACrBkkC,GACA/b,EAAQ2d,aAAavyD,MAEzB40C,EAAQqH,cAAcj8C,MACtB40C,EAAQsH,+BAA+Bl8C,MACvC40C,EAAQvF,UAAUoc,EAAapf,QAAS,EAAG,EAAGof,EAAaxmB,MAAQgP,EAAOwX,EAAavmB,OAAS+O,OAE/F,CAED,GADAW,EAAQ0d,eAAetyD,OAClBoyD,EAAa,CACVtxD,EAAId,KAAK+7C,qBAAqBrG,GAAK4J,YACvC1K,EAAQ9D,UAAUhwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClD8zC,EAAQqH,cAAcj8C,MACtB40C,EAAQsH,+BAA+Bl8C,MAEvC2wD,GACA/b,EAAQ2d,aAAavyD,MAEzBiyD,EAASzxD,KAAKR,KAAM40C,EAAS50C,MAGjC,OADA40C,EAAQtE,UACDtwC,KAEX,QAAQymD,EAAK/Q,EAAK2I,GAAgB,GAC9B,IAAKr+C,KAAK6mD,cAAcnR,EAAK2I,GACzB,OAAOr+C,KAEX,IAAIs+C,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAOnI,EAAMlI,UAAWxB,EAAU1R,GAAUA,EAAOoJ,aAAc2lB,EAAWjyD,KAAK2uD,WAAa3uD,KAAK0uD,YAAajS,EAAez8C,KAAKo8C,kBAAmBnB,EAAkBwB,GAAgBA,EAAajB,IAI5O,GAHKx7C,KAAKo0C,UACNlc,EAAKuN,KAAK,2KAEVwV,EAAiB,CACjBrG,EAAQpE,OACR,IAAI/vC,EAAIT,KAAK+7C,qBAAqBrG,GAAK4J,YAIvC,OAHA1K,EAAQ9D,UAAUrwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAClDT,KAAK8mD,qBAAqBlS,GAC1BA,EAAQtE,UACDtwC,KAEX,IAAKiyD,EACD,OAAOjyD,KAEX40C,EAAQpE,OACRoE,EAAQ0d,eAAetyD,MACvB,MAAMonD,EAAYpnD,OAAS01C,EAC3B,IAAK0R,EAAW,CACZ,IAAItmD,EAAId,KAAK+7C,qBAAqBrG,GAAK4J,YACvC1K,EAAQ9D,UAAUhwC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAItD,OAFAmxD,EAASzxD,KAAKR,KAAM40C,EAAS50C,MAC7B40C,EAAQtE,UACDtwC,KAEX,iBAAiBwyD,EAAiB,GAC9B,IAA8NC,EAAcC,EAASpxC,EAAKqxC,EAAatyD,EAAGuyD,EAAtQnW,EAAez8C,KAAKo8C,kBAAmBM,EAAc18C,KAAKs8C,wBAAyBlG,EAAYqG,EAAajB,IAAKL,EAAa/E,EAAU9J,aAAcumB,EAAWzc,EAAU1I,WAAYolB,EAAY1c,EAAUzI,YACjNwN,EAAWlsC,QACXksC,EAAW9L,UAAUqN,EAAYrQ,QAAS,EAAG,EAAGwmB,EAAUC,GAC1D,IAKI,IAJAL,EAAetX,EAAWnL,aAAa,EAAG,EAAG6iB,EAAUC,GACvDJ,EAAUD,EAAa3iD,KACvBwR,EAAMoxC,EAAQ9vD,OACd+vD,EAAcz6B,EAAK2L,UAAU7jC,KAAKo0C,UAC7B/zC,EAAI,EAAGA,EAAIihB,EAAKjhB,GAAK,EACtBuyD,EAAQF,EAAQryD,EAAI,GAChBuyD,EAAQJ,GACRE,EAAQryD,GAAKsyD,EAAYxxD,EACzBuxD,EAAQryD,EAAI,GAAKsyD,EAAY3oC,EAC7B0oC,EAAQryD,EAAI,GAAKsyD,EAAY5vD,EAC7B2vD,EAAQryD,EAAI,GAAK,KAGjBqyD,EAAQryD,EAAI,GAAK,EAGzB86C,EAAW/K,aAAaqiB,EAAc,EAAG,GAE7C,MAAO9pD,GACHuvB,EAAK1zB,MAAM,sDAAwDmE,EAAEmiC,SAEzE,OAAO9qC,KAEX,kBAAkBgoC,GACd,OAAO,GAAgCA,EAAWhoC,MAEtD,kBAAkBgoC,GACd,GAAgCA,EAAWhoC,MAE/C,eAAegoC,GACX,GAA6BA,EAAWhoC,OAGhD,GAAMiC,UAAUuvC,UAAYA,GAC5B,GAAMvvC,UAAUsxC,YAAcA,GAC9B,GAAMtxC,UAAUoyC,aAAeA,GAC/B,GAAMpyC,UAAUuyC,eAAiBA,GACjC,GAAMvyC,UAAUsvD,WAAY,EAC5B,GAAMtvD,UAAUygC,SAAW,QAC3B,eAAc,IACd,GAAMzgC,UAAUi3C,eAAiB,GACjC,GAAMj3C,UAAUm4C,GAAG55C,KAAK,GAAMyB,UAAW,8HAA+HmsD,IACxK,GAAMnsD,UAAUm4C,GAAG55C,KAAK,GAAMyB,UAAW,8EAA+EosD,IACxH,GAAMpsD,UAAUm4C,GAAG55C,KAAK,GAAMyB,UAAW,kSAAmSqsD,IAC5U,GAAMrsD,UAAUm4C,GAAG55C,KAAK,GAAMyB,UAAW,wOAAyOssD,IAClR,GAAMtsD,UAAUm4C,GAAG55C,KAAK,GAAMyB,UAAW,0TAA2TusD,IACpW7kB,GAAQuM,gBAAgB,GAAO,cAAUrzC,EAAWkmC,KACpDY,GAAQuM,gBAAgB,GAAO,cAAe,EAAG7N,KACjDsB,GAAQuM,gBAAgB,GAAO,0BAA0B,GACzDvM,GAAQuM,gBAAgB,GAAO,iBAAkB,OAAQtN,KACzDe,GAAQuM,gBAAgB,GAAO,oBAAoB,EAAM7M,KACzDM,GAAQuM,gBAAgB,GAAO,sBAAsB,EAAM7M,KAC3DM,GAAQuM,gBAAgB,GAAO,0BAA0B,EAAM7M,KAC/DM,GAAQuM,gBAAgB,GAAO,YAC/BvM,GAAQuM,gBAAgB,GAAO,WAC/BvM,GAAQuM,gBAAgB,GAAO,aAC/BvM,GAAQuM,gBAAgB,GAAO,WAC/BvM,GAAQuM,gBAAgB,GAAO,QAC/BvM,GAAQuM,gBAAgB,GAAO,aAAc,EAAG7N,KAChDsB,GAAQuM,gBAAgB,GAAO,mBAAerzC,EAAWimC,KACzDa,GAAQuM,gBAAgB,GAAO,aAAc,EAAG7N,KAChDsB,GAAQuM,gBAAgB,GAAO,gBAAiB,EAAG7N,KACnDsB,GAAQ6b,0BAA0B,GAAO,eAAgB,CAAC,IAAK,MAC/D7b,GAAQuM,gBAAgB,GAAO,gBAAiB,EAAG7N,KACnDsB,GAAQuM,gBAAgB,GAAO,gBAAiB,EAAG7N,KACnDsB,GAAQuM,gBAAgB,GAAO,oBAC/BvM,GAAQuM,gBAAgB,GAAO,YAAQrzC,EAAWkmC,KAClDY,GAAQuM,gBAAgB,GAAO,eAAgB,EAAG7N,KAClDsB,GAAQuM,gBAAgB,GAAO,eAAgB,EAAG7N,KAClDsB,GAAQuM,gBAAgB,GAAO,gCAC/BvM,GAAQuM,gBAAgB,GAAO,kCAC/BvM,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQuM,gBAAgB,GAAO,8BAA+B,GAC9DvM,GAAQuM,gBAAgB,GAAO,gCAC/BvM,GAAQuM,gBAAgB,GAAO,oBAAqB,UACpDvM,GAAQuM,gBAAgB,GAAO,eAAe,GAC9CvM,GAAQuM,gBAAgB,GAAO,iBAAiB,GAChDvM,GAAQuM,gBAAgB,GAAO,iBAAiB,GAChDvM,GAAQuM,gBAAgB,GAAO,eAAe,GAC9CvM,GAAQuM,gBAAgB,GAAO,sBAAsB,GACrDvM,GAAQuM,gBAAgB,GAAO,eAAgB,SAC/CvM,GAAQ6b,0BAA0B,GAAO,oBAAqB,CAAC,IAAK,MACpE7b,GAAQuM,gBAAgB,GAAO,qBAAsB,EAAG7N,KACxDsB,GAAQuM,gBAAgB,GAAO,qBAAsB,EAAG7N,KACxDsB,GAAQ6b,0BAA0B,GAAO,mBAAoB,CAAC,IAAK,MACnE7b,GAAQuM,gBAAgB,GAAO,oBAAqB,EAAG7N,KACvDsB,GAAQuM,gBAAgB,GAAO,oBAAqB,EAAG7N,KACvDsB,GAAQ6b,0BAA0B,GAAO,+BAAgC,CACrE,IACA,MAEJ7b,GAAQ6b,0BAA0B,GAAO,iCAAkC,CACvE,IACA,MAEJ7b,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQuM,gBAAgB,GAAO,kCAAmC,GAClEvM,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQuM,gBAAgB,GAAO,kCAAmC,GAClEvM,GAAQ6b,0BAA0B,GAAO,6BAA8B,CACnE,IACA,MAEJ7b,GAAQ6b,0BAA0B,GAAO,+BAAgC,CACrE,IACA,MAEJ7b,GAAQuM,gBAAgB,GAAO,8BAA+B,GAC9DvM,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQuM,gBAAgB,GAAO,8BAA+B,GAC9DvM,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQ6b,0BAA0B,GAAO,+BAAgC,CACrE,IACA,MAEJ7b,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQuM,gBAAgB,GAAO,gCAAiC,GAChEvM,GAAQ6b,0BAA0B,GAAO,6BAA8B,CACnE,IACA,MAEJ7b,GAAQuM,gBAAgB,GAAO,8BAA+B,GAC9DvM,GAAQuM,gBAAgB,GAAO,8BAA+B,GAC9DvM,GAAQuM,gBAAgB,GAAO,sBAAuB,GACtDvM,GAAQ8b,WAAW,GAAO,CACtBsN,UAAW,OACXC,aAAc,UACdC,aAAc,UACdhB,SAAU,YACViB,YAAa,eACbC,YAAa,eACbC,YAAa,UACbC,eAAgB,aAChBC,eAAgB,eCxfpB,IAAI,GAAO,IAAKC,GAAc,aAAcC,GAAO,OAAQC,GAAuB,CAC9E,CAAErpC,EAAG,EAAGmM,EAAG,GACX,CAAEnM,GAAI,EAAGmM,GAAI,GACb,CAAEnM,EAAG,EAAGmM,GAAI,GACZ,CAAEnM,EAAG,EAAGmM,EAAG,GACX,CAAEnM,GAAI,EAAGmM,EAAG,IACbm9B,GAA2BD,GAAqB7wD,OAC5C,MAAM,WAAc,GACvB,YAAYuyC,GACRgB,MAAMhB,GACNn1C,KAAKkjC,OAAS,IAAI,GAClBljC,KAAKo2C,UAAY,IAAI,GAAU,CAC3B3pB,WAAY,IAEhBzsB,KAAK2zD,iBAAkB,EACvB3zD,KAAKo6C,GAAG,sBAAuBp6C,KAAK6qD,kBACpC7qD,KAAK6qD,mBACL7qD,KAAKo6C,GAAG,oCAAqCp6C,KAAK4zD,mBAClD5zD,KAAK4zD,oBAET,kBACI,MAAMlzD,EAAIV,KAAKkjC,OAAOmJ,QACtB,OAAO3rC,EAAEmzD,kBAEb,YACI,OAAO7zD,KAAKkjC,OAEhB,yBACI,OAAOljC,KAAKkjC,OAAOmJ,QAEvB,eACI,OAAOrsC,KAAKo2C,UAEhB,aACI,OAAOp2C,KAAKqtC,YAAYf,aAE5B,MAAMkB,GAGF,OAFAxtC,KAAKssC,aAAar9B,MAAMu+B,GACxBxtC,KAAK8zD,eAAexnB,aAAar9B,MAAMu+B,GAChCxtC,KAEX,UAAUiI,GACNkuC,MAAM4d,UAAU9rD,GAChB,IAAI4uC,EAAQ72C,KAAK82C,WAUjB,OATID,GAASA,EAAM97B,UACf87B,EAAM97B,QAAQlK,YAAY7Q,KAAKg0D,0BAC3B/rD,EAAQ4uC,EAAM6G,SAAS96C,OAAS,EAChCi0C,EAAM97B,QAAQk5C,aAAaj0D,KAAKg0D,yBAA0Bnd,EAAM6G,SAASz1C,EAAQ,GAAGolC,YAAYhB,SAGhGwK,EAAM97B,QAAQnK,YAAY5Q,KAAKg0D,2BAGhCh0D,KAEX,YACI,GAAKiC,UAAUiyD,UAAU1zD,KAAKR,MAC9B,IAAI62C,EAAQ72C,KAAK82C,WAKjB,OAJID,GAASA,EAAM97B,UACf87B,EAAM97B,QAAQlK,YAAY7Q,KAAKg0D,0BAC/Bnd,EAAM97B,QAAQnK,YAAY5Q,KAAKg0D,4BAE5B,EAEX,SACI,IAAIG,EAAQ,GAAKlyD,UAAUmyD,OAAO5zD,KAAKR,MACvC,IAAKm0D,EACD,OAAO,EAEX,IAAItd,EAAQ72C,KAAK82C,WACjB,SAAKD,IAAUA,EAAM97B,WAGrB87B,EAAM97B,QAAQlK,YAAY7Q,KAAKg0D,0BAC3Bh0D,KAAKiI,MAAQ4uC,EAAM6G,SAAS96C,OAAS,EACrCi0C,EAAM97B,QAAQk5C,aAAaj0D,KAAKg0D,yBAA0Bnd,EAAM6G,SAAS19C,KAAKiI,MAAQ,GAAGolC,YAAYhB,SAGrGwK,EAAM97B,QAAQnK,YAAY5Q,KAAKg0D,2BAE5B,GAEX,WACI,GAAI,GAAK/xD,UAAUoyD,SAAS7zD,KAAKR,MAAO,CACpC,IAAI62C,EAAQ72C,KAAK82C,WACjB,GAAID,EAAO,CACP,IAAI6G,EAAW7G,EAAM6G,SACjB7G,EAAM97B,UACN87B,EAAM97B,QAAQlK,YAAY7Q,KAAKg0D,0BAC/Bnd,EAAM97B,QAAQk5C,aAAaj0D,KAAKg0D,yBAA0BtW,EAAS19C,KAAKiI,MAAQ,GAAGolC,YAAYhB,UAGvG,OAAO,EAEX,OAAO,EAEX,eACI,GAAI,GAAKpqC,UAAUqyD,aAAa9zD,KAAKR,MAAO,CACxC,IAAI62C,EAAQ72C,KAAK82C,WACjB,GAAID,EAAO,CACP,IAAI6G,EAAW7G,EAAM6G,SACjB7G,EAAM97B,UACN87B,EAAM97B,QAAQlK,YAAY7Q,KAAKg0D,0BAC/Bnd,EAAM97B,QAAQk5C,aAAaj0D,KAAKg0D,yBAA0BtW,EAAS,GAAGrQ,YAAYhB,UAG1F,OAAO,EAEX,OAAO,EAEX,WACI,OAAOrsC,KAEX,SACI,IAAIqsC,EAAUrsC,KAAKg0D,yBAKnB,OAJA,GAAK/xD,UAAU47C,OAAOr9C,KAAKR,MACvBqsC,GAAWA,EAAQlJ,YAAcjL,EAAKozB,cAAcjf,IACpDA,EAAQlJ,WAAWtyB,YAAYw7B,GAE5BrsC,KAEX,WACI,OAAOA,KAAK8nB,OAEhB,SAAQ,MAAEmd,EAAK,OAAEC,IAIb,OAHAllC,KAAKkjC,OAAO0S,QAAQ3Q,EAAOC,GAC3BllC,KAAKo2C,UAAUR,QAAQ3Q,EAAOC,GAC9BllC,KAAK4zD,oBACE5zD,KAEX,aAAa4+C,GACT,IAAI7sC,EAAO6sC,EAAMmM,UACJ,UAATh5C,GAA6B,UAATA,GACpBmmB,EAAK+yB,MAAM,kDAGnB,eAAe9V,GAMX,OALAA,EAASA,GAAU,GACnBA,EAAOlQ,MAAQkQ,EAAOlQ,OAASjlC,KAAK0tC,WACpCyH,EAAOjQ,OAASiQ,EAAOjQ,QAAUllC,KAAK2tC,YACtCwH,EAAO/qB,OAAiBvnB,IAAbsyC,EAAO/qB,EAAkB+qB,EAAO/qB,EAAIpqB,KAAKoqB,IACpD+qB,EAAO5e,OAAiB1zB,IAAbsyC,EAAO5e,EAAkB4e,EAAO5e,EAAIv2B,KAAKu2B,IAC7C,GAAKt0B,UAAUugD,eAAehiD,KAAKR,KAAMm1C,GAEpD,mBACI,MAAMiJ,EAAUp+C,KAAKo+C,UAEjBp+C,KAAKkjC,OAAOmJ,QAAQ5wB,MAAMC,QAD1B0iC,EACoC,QAGA,OAG5C,oBACIp+C,KAAKssC,aAAaF,SAASgP,sBACvBp7C,KAAKo7C,wBAEb,WACI,GAAIp7C,KAAK8nB,OACL,OAAO9nB,KAAK8nB,OAAOmd,QAG3B,WACI/M,EAAKuN,KAAK,6EAEd,YACI,GAAIzlC,KAAK8nB,OACL,OAAO9nB,KAAK8nB,OAAOod,SAG3B,YACIhN,EAAKuN,KAAK,+EAEd,YAQI,OAPKzlC,KAAK2zD,kBACN3zD,KAAK2zD,iBAAkB,EACvBz7B,EAAKq8B,iBAAiB,KAClBv0D,KAAK2rD,OACL3rD,KAAK2zD,iBAAkB,KAGxB3zD,KAEX,gBAAgByV,GACZ,IAAKzV,KAAKy+C,gBAAkBz+C,KAAK0+C,YAC7B,OAAO,KAEX,IAAI8V,EAAuB,EACvBC,GAAiB,EACrB,MAAO,EAAM,CACT,IAAK,IAAIp0D,EAAI,EAAGA,EAAIqzD,GAA0BrzD,IAAK,CAC/C,MAAMq0D,EAAqBjB,GAAqBpzD,GAC1C21B,EAAMh2B,KAAK20D,iBAAiB,CAC9BvqC,EAAG3U,EAAI2U,EAAIsqC,EAAmBtqC,EAAIoqC,EAClCj+B,EAAG9gB,EAAI8gB,EAAIm+B,EAAmBn+B,EAAIi+B,IAEhC/nB,EAAQzW,EAAIyW,MAClB,GAAIA,EACA,OAAOA,EAGX,GADAgoB,IAAmBz+B,EAAI4+B,aAClB5+B,EAAI4+B,YACL,MAGR,IAAIH,EAIA,OAAO,KAHPD,GAAwB,GAOpC,iBAAiB/+C,GACb,MAAMw+B,EAAQj0C,KAAKo2C,UAAU3pB,WACvBtqB,EAAInC,KAAKo2C,UAAUxB,QAAQ5E,aAAaxpC,KAAKq+B,MAAMpvB,EAAI2U,EAAI6pB,GAAQztC,KAAKq+B,MAAMpvB,EAAI8gB,EAAI0d,GAAQ,EAAG,GAAGnkC,KACpG+kD,EAAK1yD,EAAE,GACb,GAAW,MAAP0yD,EAAY,CACZ,MAAMzgB,EAAWlc,EAAK48B,UAAU3yD,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACxCsqC,EAAQmb,GAAO,GAAOxT,GAC5B,OAAI3H,EACO,CACHA,MAAOA,GAGR,CACHmoB,aAAa,GAGhB,OAAIC,EAAK,EACH,CACHD,aAAa,GAGd,GAEX,UAAUnO,EAAK/Q,GACX,IAAI4I,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAQnI,GAASA,EAAMjR,YAW7D,OAVArtC,KAAK0hD,MAAM6R,GAAa,CACpBnsC,KAAMpnB,OAENA,KAAK+0D,mBACL7xB,EAAOoJ,aAAar9B,QAExB,GAAUhN,UAAUo5C,UAAU76C,KAAKR,KAAMkjC,EAAQwS,GACjD11C,KAAK0hD,MAAM8R,GAAM,CACbpsC,KAAMpnB,OAEHA,KAEX,QAAQymD,EAAK/Q,GACT,IAAI4I,EAAQt+C,KAAKw3C,WAAYtU,EAASujB,GAAQnI,GAASA,EAAMlI,UAK7D,OAJIkI,GAASA,EAAMyW,mBACfzW,EAAMwV,eAAexnB,aAAar9B,QAEtC,GAAUhN,UAAUq5C,QAAQ96C,KAAKR,KAAMkjC,EAAQwS,GACxC11C,KAEX,iBAEI,OADAA,KAAKg1D,iBAAgB,GACdh1D,KAEX,kBAEI,OADAA,KAAKg1D,iBAAgB,GACdh1D,KAEX,mBAAmB0pB,GACfwO,EAAKuN,KAAK,+EACVzlC,KAAKk+C,UAAUx0B,GAEnB,mBAAmBA,GAEf,OADAwO,EAAKuN,KAAK,+EACHzlC,KAAKk+C,YAEhB,kBACI,GAAKl+C,KAAK8nB,QAAW9nB,KAAK8nB,OAAO,WAAjC,CAGA,IAAIA,EAAS9nB,KAAK8nB,OACdmtC,IAAUj1D,KAAKo2C,UAAU/J,QAAQlJ,WACjC8xB,EACAntC,EAAO/M,QAAQlK,YAAY7Q,KAAKo2C,UAAU/J,SAG1CvkB,EAAO/M,QAAQnK,YAAY5Q,KAAKo2C,UAAU/J,WAItD,GAAMpqC,UAAUygC,SAAW,QAC3B,eAAc,IACdiH,GAAQuM,gBAAgB,GAAO,yBAAyB,GACxDvM,GAAQuM,gBAAgB,GAAO,mBAAmB,GAClDvM,GAAQuM,gBAAgB,GAAO,mBAAmB,EAAM7M,KCzSjD,MAAM,WAAkB,GAC3B,YAAYc,GACRgM,MAAMhM,GACNnqC,KAAKk+C,WAAU,GACfhmB,EAAKuN,KAAK,gGAGlB,GAAUxjC,UAAUygC,SAAW,YAC/B,eAAc,ICRP,MAAM,WAAc,GACvB,aAAakc,GACT,IAAI7sC,EAAO6sC,EAAMmM,UACJ,UAATh5C,GAA6B,UAATA,GACpBmmB,EAAK+yB,MAAM,kDAIvB,GAAMhpD,UAAUygC,SAAW,QAC3B,eAAc,ICVd,IAAIpyB,GAAM,WACN,OAAI,OAAK4kD,aAAe,OAAKA,YAAY5kD,IAC9B,WACH,OAAO,OAAK4kD,YAAY5kD,OAGzB,WACH,OAAO,IAAI/K,MAAOI,WAPhB,GAUH,MAAM,GACT,YAAYkgC,EAAMwlB,GACdrrD,KAAK0P,GAAK,GAAUylD,gBACpBn1D,KAAKo1D,MAAQ,CACTC,KAAM,EACNC,SAAU,EACVC,SAAUjlD,KACVklD,UAAW,GAEfx1D,KAAK6lC,KAAOA,EACZ7lC,KAAKy1D,UAAUpK,GAEnB,UAAUA,GACN,IAAIqK,EAAO,GAWX,OANIA,EAJCrK,EAGIA,EAAOzoD,OAAS,EACdyoD,EAGA,CAACA,GAND,GAQXrrD,KAAKqrD,OAASqK,EACP11D,KAEX,YACI,OAAOA,KAAKqrD,OAEhB,SAAS/M,GACL,IAA+Cx8C,EAA3CupD,EAASrrD,KAAKqrD,OAAQ/pC,EAAM+pC,EAAOzoD,OACvC,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB,GAAIupD,EAAOvpD,GAAGm3C,MAAQqF,EAAMrF,IACxB,OAAO,EAIf,OADAj5C,KAAKqrD,OAAO/kD,KAAKg4C,IACV,EAEX,YACI,IAAuEx8C,EAAnEgB,EAAI,GAAW6yD,EAAa7yD,EAAE6yD,WAAYr0C,EAAMq0C,EAAW/yD,OAC/D,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB,GAAI6zD,EAAW7zD,GAAG4N,KAAO1P,KAAK0P,GAC1B,OAAO,EAGf,OAAO,EAEX,QAKI,OAJA1P,KAAKkM,OACLlM,KAAKo1D,MAAME,SAAW,EACtBt1D,KAAKo1D,MAAMG,SAAWjlD,KACtB,GAAUslD,cAAc51D,MACjBA,KAEX,OAEI,OADA,GAAU61D,iBAAiB71D,MACpBA,KAEX,mBAAmBq1D,GACfr1D,KAAKo1D,MAAME,SAAWD,EAAOr1D,KAAKo1D,MAAMG,SACxCv1D,KAAKo1D,MAAMG,SAAWF,EACtBr1D,KAAKo1D,MAAMC,MAAQr1D,KAAKo1D,MAAME,SAC9Bt1D,KAAKo1D,MAAMI,UAAY,IAAOx1D,KAAKo1D,MAAME,SAE7C,qBAAqBQ,GACjB91D,KAAK21D,WAAWrvD,KAAKwvD,GACrB91D,KAAK+1D,mBAET,wBAAwBD,GACpB,IAAyEh0D,EAArE4N,EAAKomD,EAAKpmD,GAAIimD,EAAa31D,KAAK21D,WAAYr0C,EAAMq0C,EAAW/yD,OACjE,IAAKd,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB,GAAI6zD,EAAW7zD,GAAG4N,KAAOA,EAAI,CACzB1P,KAAK21D,WAAWhY,OAAO77C,EAAG,GAC1B,OAIZ,oBACI,IAAkDg0D,EAAMzK,EAAQxlB,EAAM/jC,EAAGzB,EAAG21D,EAAW1X,EAAO18C,EAAKq0D,EAA/FC,EAAY,GAAIP,EAAa31D,KAAK21D,WACtC,IAAK7zD,EAAI,EAAGA,EAAI6zD,EAAW/yD,OAAQd,IAY/B,GAXAg0D,EAAOH,EAAW7zD,GAClBupD,EAASyK,EAAKzK,OACdxlB,EAAOiwB,EAAKjwB,KACZiwB,EAAKK,mBAAmB7lD,MACxB0lD,EAAY3K,EAAOzoD,OAEfqzD,GADApwB,IAC6C,IAAhCA,EAAKrlC,KAAKs1D,EAAMA,EAAKV,OAKjCa,EAGL,IAAK51D,EAAI,EAAGA,EAAI21D,EAAW31D,IACvBi+C,EAAQ+M,EAAOhrD,QACGwC,IAAdy7C,EAAMrF,MACNid,EAAU5X,EAAMrF,KAAOqF,GAInC,IAAK18C,KAAOs0D,EACHA,EAAUh0D,eAAeN,IAG9Bs0D,EAAUt0D,GAAK61C,YAGvB,wBACI,IAAI2e,EAAO,GACPA,EAAKT,WAAW/yD,QAChBwzD,EAAKC,aACLn+B,EAAKq8B,iBAAiB6B,EAAKE,iBAG3BF,EAAKG,aAAc,EAG3B,0BACSv2D,KAAKu2D,cACNv2D,KAAKu2D,aAAc,EACnBr+B,EAAKq8B,iBAAiBv0D,KAAKs2D,kBAIvC,GAAUX,WAAa,GACvB,GAAUR,cAAgB,EAC1B,GAAUoB,aAAc,ECxIxB,IAAIC,GAAY,CACZpvC,KAAM,EACNqvC,SAAU,EACVC,OAAQ,EACRC,SAAU,EACVC,KAAM,GACPC,GAAS,EAAGC,GAAU,EAAGC,GAAY,EAAG,GAAY,EAAGC,GAAa,CAAC,OAAQ,SAAU,eAC1F,MAAMC,GACF,YAAY7lB,EAAM8lB,EAAUrxB,EAAMsxB,EAAOC,EAAQX,EAAUG,GACvD52D,KAAKoxC,KAAOA,EACZpxC,KAAKk3D,SAAWA,EAChBl3D,KAAKm3D,MAAQA,EACbn3D,KAAKq3D,KAAOF,EACZn3D,KAAKy2D,SAAWA,EAChBz2D,KAAKs3D,QAAU,EACft3D,KAAKu3D,QAAU,EACfv3D,KAAK42D,KAAOA,EACZ52D,KAAKw3D,MAAQ,EACbx3D,KAAKy3D,UAAY,EACjBz3D,KAAK03D,WAAa,EAClB13D,KAAK23D,QAAU,EACf33D,KAAK6lC,KAAOA,EACZ7lC,KAAKs3D,QAAUF,EAASp3D,KAAKm3D,MAC7Bn3D,KAAK43D,QAET,KAAK53C,GACD,IAAIwR,EAAUxxB,KAAKggB,GACfwR,GACAA,IAGR,QAAQjwB,GACAA,EAAIvB,KAAKy2D,SACLz2D,KAAK42D,MACL52D,KAAKw3D,MAAQx3D,KAAKy2D,SAClBz2D,KAAKsO,WAGLtO,KAAKo3D,SAGJ71D,EAAI,EACLvB,KAAK42D,MACL52D,KAAKw3D,MAAQ,EACbx3D,KAAK63D,QAGL73D,KAAKiiD,SAITjiD,KAAKw3D,MAAQj2D,EACbvB,KAAK83D,UAGb,UACI,OAAO93D,KAAKw3D,MAEhB,YAAYr1D,GACRnC,KAAKu3D,QAAUv3D,KAAKq3D,KACpBr3D,KAAKk3D,SAAS/0D,GACdnC,KAAKq3D,KAAOl1D,EAEhB,YAAYZ,GAIR,YAHUsB,IAANtB,IACAA,EAAIvB,KAAKw3D,OAENx3D,KAAK6lC,KAAKtkC,EAAGvB,KAAKm3D,MAAOn3D,KAAKs3D,QAASt3D,KAAKy2D,UAEvD,OACIz2D,KAAKiS,MAAQ6kD,GACb92D,KAAK03D,WAAa13D,KAAK+3D,WAAa/3D,KAAKw3D,MACzCx3D,KAAKg4D,eACLh4D,KAAKs3C,KAAK,UAEd,UACIt3C,KAAKiS,MAAQ8kD,GACb/2D,KAAKw3D,MAAQx3D,KAAKy2D,SAAWz2D,KAAKw3D,MAClCx3D,KAAK03D,WAAa13D,KAAK+3D,WAAa/3D,KAAKw3D,MACzCx3D,KAAKg4D,eACLh4D,KAAKs3C,KAAK,aAEd,KAAK/1C,GACDvB,KAAK43D,QACL53D,KAAKw3D,MAAQj2D,EACbvB,KAAK83D,SACL93D,KAAKs3C,KAAK,UAEd,QACIt3C,KAAK43D,QACL53D,KAAKw3D,MAAQ,EACbx3D,KAAK83D,SACL93D,KAAKs3C,KAAK,WAEd,SACIt3C,KAAK43D,QACL53D,KAAKw3D,MAAQx3D,KAAKy2D,SAClBz2D,KAAK83D,SACL93D,KAAKs3C,KAAK,YAEd,SACIt3C,KAAK6/C,YAAY7/C,KAAKi4D,YAAYj4D,KAAKw3D,QACvCx3D,KAAKs3C,KAAK,YAEd,eACI,IAAI/1C,EAAIvB,KAAK+3D,WAAa/3D,KAAK03D,WAC3B13D,KAAKiS,QAAU6kD,GACf92D,KAAKk4D,QAAQ32D,GAERvB,KAAKiS,QAAU8kD,IACpB/2D,KAAKk4D,QAAQl4D,KAAKy2D,SAAWl1D,GAGrC,QACIvB,KAAKiS,MAAQ4kD,GACb72D,KAAKs3C,KAAK,WAEd,WACI,OAAO,IAAI/xC,MAAOI,WAGnB,MAAM,GACT,YAAYwvC,GACR,IAAwDshB,EAA0E70D,EAA9He,EAAO3C,KAAMonB,EAAO+tB,EAAO/tB,KAAM+wC,EAAS/wC,EAAK6xB,IAAeyd,EAASvhB,EAAOuhB,QAAU0B,GAAQC,OAAQzB,IAASzhB,EAAOyhB,KAExHH,EAD2B,qBAApBthB,EAAOshB,SACH,GAEc,IAApBthB,EAAOshB,SACD,KAGAthB,EAAOshB,SAEtBz2D,KAAKonB,KAAOA,EACZpnB,KAAKi5C,IAAM,KACX,IAAIoS,EAASjkC,EAAKowB,aACbpwB,aAAgB,OAAM,SAAWA,EAAKkxC,YAAc,MAoBzD,IAAK12D,KAnBAypD,GACDnzB,EAAK1zB,MAAM,2FAEfxE,KAAK81D,KAAO,IAAI,IAAU,WACtBnzD,EAAK41D,MAAMP,iBACZ3M,GACHrrD,KAAKu4D,MAAQ,IAAItB,GAAYr1D,GAAK,SAAUvB,GACxCsC,EAAK61D,WAAWn4D,KACjBq2D,EAAQ,EAAG,EAAc,IAAXD,EAAiBG,GAClC52D,KAAKy4D,gBACA,GAAMtuB,MAAMguB,KACb,GAAMhuB,MAAMguB,GAAU,IAErB,GAAMhuB,MAAMguB,GAAQn4D,KAAKi5C,OAC1B,GAAM9O,MAAMguB,GAAQn4D,KAAKi5C,KAAO,IAE/B,GAAMyf,OAAOP,KACd,GAAMO,OAAOP,GAAU,IAEfhjB,OACetyC,IAAnB2zD,GAAU50D,IACV5B,KAAK24D,SAAS/2D,EAAKuzC,EAAOvzC,IAGlC5B,KAAKiiD,QACLjiD,KAAK22D,SAAWxhB,EAAOwhB,SACvB32D,KAAK44D,QAAUzjB,EAAOyjB,QACtB54D,KAAK64D,SAAW1jB,EAAO0jB,SAE3B,SAASj3D,EAAK8S,GACV,IAAyCD,EAAOqkD,EAAMC,EAASj3D,EAAGwf,EAAK03C,EAASC,EAAWC,EAAvF9xC,EAAOpnB,KAAKonB,KAAM+wC,EAAS/wC,EAAK6xB,IAMpC,GALA8f,EAAU,GAAML,OAAOP,GAAQv2D,GAC3Bm3D,UACO,GAAM5uB,MAAMguB,GAAQY,GAASn3D,GAExC6S,EAAQ2S,EAAKqjB,QAAQ7oC,GACjBs2B,EAAKoN,SAAS5wB,GAad,GAZAokD,EAAO,GACPx3C,EAAM9a,KAAK6F,IAAIqI,EAAI9R,OAAQ6R,EAAM7R,QACrB,WAARhB,GAAoB8S,EAAI9R,SAAW6R,EAAM7R,SACrC8R,EAAI9R,OAAS6R,EAAM7R,QACnBq2D,EAAYxkD,EACZA,EAAQyjB,EAAKihC,sBAAsB1kD,EAAOC,EAAK0S,EAAKgyC,YAGpDJ,EAAUtkD,EACVA,EAAMwjB,EAAKihC,sBAAsBzkD,EAAKD,EAAO2S,EAAKgyC,YAG9B,IAAxBx3D,EAAI8L,QAAQ,QACZ,IAAK5L,EAAI,EAAGA,EAAIwf,EAAKxf,IACjB,GAAIA,EAAI,IAAM,EACVg3D,EAAKxyD,KAAKoO,EAAI5S,GAAK2S,EAAM3S,QAExB,CACD,IAAIu3D,EAAYnhC,EAAK24B,YAAYp8C,EAAM3S,IACvCo3D,EAAUhhC,EAAK24B,YAAYn8C,EAAI5S,IAC/B2S,EAAM3S,GAAKu3D,EACXP,EAAKxyD,KAAK,CACNnF,EAAG+3D,EAAQ/3D,EAAIk4D,EAAUl4D,EACzB6oB,EAAGkvC,EAAQlvC,EAAIqvC,EAAUrvC,EACzBjnB,EAAGm2D,EAAQn2D,EAAIs2D,EAAUt2D,EACzBD,EAAGo2D,EAAQp2D,EAAIu2D,EAAUv2D,SAMrC,IAAKhB,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBg3D,EAAKxyD,KAAKoO,EAAI5S,GAAK2S,EAAM3S,SAIC,IAA7Bk1D,GAAWtpD,QAAQ9L,IACxB6S,EAAQyjB,EAAK24B,YAAYp8C,GACzBykD,EAAUhhC,EAAK24B,YAAYn8C,GAC3BokD,EAAO,CACH33D,EAAG+3D,EAAQ/3D,EAAIsT,EAAMtT,EACrB6oB,EAAGkvC,EAAQlvC,EAAIvV,EAAMuV,EACrBjnB,EAAGm2D,EAAQn2D,EAAI0R,EAAM1R,EACrBD,EAAGo2D,EAAQp2D,EAAI2R,EAAM3R,IAIzBg2D,EAAOpkD,EAAMD,EAEjB,GAAM01B,MAAMguB,GAAQn4D,KAAKi5C,KAAKr3C,GAAO,CACjC6S,MAAOA,EACPqkD,KAAMA,EACNpkD,IAAKA,EACLskD,QAASA,EACTC,UAAWA,GAEf,GAAMP,OAAOP,GAAQv2D,GAAO5B,KAAKi5C,IAErC,WAAW54C,GACP,IAA+DuB,EAAK0mC,EAAM7zB,EAAOqkD,EAAMhW,EAAQhhD,EAAGwf,EAAK5M,EAAnG0S,EAAOpnB,KAAKonB,KAAM+iB,EAAQ,GAAMA,MAAM/iB,EAAK6xB,KAAKj5C,KAAKi5C,KACzD,IAAKr3C,KAAOuoC,EAAO,CAKf,GAJA7B,EAAO6B,EAAMvoC,GACb6S,EAAQ6zB,EAAK7zB,MACbqkD,EAAOxwB,EAAKwwB,KACZpkD,EAAM4zB,EAAK5zB,IACPwjB,EAAKoN,SAAS7wB,GAGd,GAFAquC,EAAS,GACTxhC,EAAM9a,KAAK6F,IAAIoI,EAAM7R,OAAQ8R,EAAI9R,QACL,IAAxBhB,EAAI8L,QAAQ,QACZ,IAAK5L,EAAI,EAAGA,EAAIwf,EAAKxf,IACbA,EAAI,IAAM,EACVghD,EAAOx8C,MAAMmO,EAAM3S,IAAM,GAAKg3D,EAAKh3D,GAAKzB,GAGxCyiD,EAAOx8C,KAAK,QACRE,KAAKq+B,MAAMpwB,EAAM3S,GAAGX,EAAI23D,EAAKh3D,GAAGX,EAAId,GACpC,IACAmG,KAAKq+B,MAAMpwB,EAAM3S,GAAGkoB,EAAI8uC,EAAKh3D,GAAGkoB,EAAI3pB,GACpC,IACAmG,KAAKq+B,MAAMpwB,EAAM3S,GAAGiB,EAAI+1D,EAAKh3D,GAAGiB,EAAI1C,GACpC,KACCoU,EAAM3S,GAAGgB,EAAIg2D,EAAKh3D,GAAGgB,EAAIzC,GAC1B,UAKZ,IAAKyB,EAAI,EAAGA,EAAIwf,EAAKxf,IACjBghD,EAAOx8C,MAAMmO,EAAM3S,IAAM,GAAKg3D,EAAKh3D,GAAKzB,QAKhDyiD,GADkC,IAA7BkU,GAAWtpD,QAAQ9L,GAEpB,QACI4E,KAAKq+B,MAAMpwB,EAAMtT,EAAI23D,EAAK33D,EAAId,GAC9B,IACAmG,KAAKq+B,MAAMpwB,EAAMuV,EAAI8uC,EAAK9uC,EAAI3pB,GAC9B,IACAmG,KAAKq+B,MAAMpwB,EAAM1R,EAAI+1D,EAAK/1D,EAAI1C,GAC9B,KACCoU,EAAM3R,EAAIg2D,EAAKh2D,EAAIzC,GACpB,IAGCoU,EAAQqkD,EAAOz4D,EAE5B+mB,EAAK0mB,QAAQlsC,EAAKkhD,IAG1B,gBACI9iD,KAAKu4D,MAAMe,OAAS,KAChBt5D,KAAK81D,KAAKrhD,SAEdzU,KAAKu4D,MAAMgB,UAAY,KACnBv5D,KAAK81D,KAAKrhD,SAEdzU,KAAKu4D,MAAMiB,QAAU,KACjBx5D,KAAK81D,KAAK5pD,QAEdlM,KAAKu4D,MAAM5B,SAAW,KAClB,IAAIvvC,EAAOpnB,KAAKonB,KACZ+iB,EAAQ,GAAMA,MAAM/iB,EAAK6xB,KAAKj5C,KAAKi5C,KACnC9O,EAAM0R,QAAU1R,EAAM0R,OAAOmd,SAC7B5xC,EAAK0mB,QAAQ,SAAU3D,EAAM0R,OAAOmd,SAEpCh5D,KAAK22D,UACL32D,KAAK22D,SAASn2D,KAAKR,OAG3BA,KAAKu4D,MAAMK,QAAU,KACjB,IAAIxxC,EAAOpnB,KAAKonB,KACZ+iB,EAAQ,GAAMA,MAAM/iB,EAAK6xB,KAAKj5C,KAAKi5C,KACnC9O,EAAM0R,QAAU1R,EAAM0R,OAAOod,WAC7B7xC,EAAKy0B,OAAO1R,EAAM0R,OAAOod,WAEzBj5D,KAAK44D,SACL54D,KAAK44D,WAGb54D,KAAKu4D,MAAMM,SAAW,KACd74D,KAAK64D,UACL74D,KAAK64D,SAASr4D,KAAKR,OAI/B,OAEI,OADAA,KAAKu4D,MAAMV,OACJ73D,KAEX,UAEI,OADAA,KAAKu4D,MAAMjqD,UACJtO,KAEX,QAEI,OADAA,KAAKu4D,MAAMtW,QACJjiD,KAEX,KAAKuB,GAED,OADAvB,KAAKu4D,MAAMkB,KAAS,IAAJl4D,GACTvB,KAEX,QAEI,OADAA,KAAKu4D,MAAMX,QACJ53D,KAEX,SAEI,OADAA,KAAKu4D,MAAMnB,SACJp3D,KAEX,UACI,IAA6E4B,EAAzEu2D,EAASn4D,KAAKonB,KAAK6xB,IAAKygB,EAAS15D,KAAKi5C,IAAK9O,EAAQ,GAAMuuB,OAAOP,GAEpE,IAAKv2D,KADL5B,KAAK43D,QACOztB,SACD,GAAMuuB,OAAOP,GAAQv2D,UAEzB,GAAMuoC,MAAMguB,GAAQuB,IAGnC,GAAMvvB,MAAQ,GACd,GAAMuuB,OAAS,GACf,GAAKz2D,UAAU03D,GAAK,SAAUC,GAC1B,IAAIjD,EAAWiD,EAAOjD,SACtBiD,EAAOxyC,KAAOpnB,KACd45D,EAAOjD,SAAW,WACd32D,KAAK+lD,UACD4Q,GACAA,KAGR,IAAI4B,EAAQ,IAAI,GAAMqB,GACtBrB,EAAMV,QAEH,MAAMO,GAAU,CACnB,WAAW72D,EAAGwB,EAAGrC,EAAGC,GAChB,IAAIyB,EAAI,QACR,OAAO1B,GAAKa,GAAKZ,GAAKY,IAAMa,EAAI,GAAKb,EAAIa,GAAKW,GAElD,YAAYxB,EAAGwB,EAAGrC,EAAGC,GACjB,IAAIyB,EAAI,QACR,OAAO1B,IAAMa,EAAIA,EAAIZ,EAAI,GAAKY,IAAMa,EAAI,GAAKb,EAAIa,GAAK,GAAKW,GAE/D,cAAcxB,EAAGwB,EAAGrC,EAAGC,GACnB,IAAIyB,EAAI,QACR,OAAKb,GAAKZ,EAAI,GAAK,EACPD,EAAI,GAAMa,EAAIA,IAAqB,GAAda,GAAK,QAAcb,EAAIa,IAAMW,EAEtDrC,EAAI,IAAOa,GAAK,GAAKA,IAAqB,GAAda,GAAK,QAAcb,EAAIa,GAAK,GAAKW,GAEzE,cAAcxB,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GACzB,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEM,KAAZxB,GAAKZ,GACCoC,EAAIrC,GAEVyB,IACDA,EAAQ,GAAJxB,IAEHmC,GAAKA,EAAI0D,KAAK0tC,IAAIxzC,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIqE,KAAKukB,IAAOvkB,KAAKqzD,KAAKn5D,EAAIoC,IAElCA,EACN0D,KAAKszD,IAAI,EAAG,IAAMv4D,GAAK,IACvBiF,KAAKowB,KAAMr1B,EAAIZ,EAAIyB,IAAM,EAAIoE,KAAKukB,IAAO5oB,GAAMY,IAEvD,eAAexB,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GAC1B,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEM,KAAZxB,GAAKZ,GACCoC,EAAIrC,GAEVyB,IACDA,EAAQ,GAAJxB,IAEHmC,GAAKA,EAAI0D,KAAK0tC,IAAIxzC,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIqE,KAAKukB,IAAOvkB,KAAKqzD,KAAKn5D,EAAIoC,GAEpCA,EAAI0D,KAAKszD,IAAI,GAAI,GAAKv4D,GAAKiF,KAAKowB,KAAMr1B,EAAIZ,EAAIyB,IAAM,EAAIoE,KAAKukB,IAAO5oB,GACxEzB,EACAqC,IAER,iBAAiBxB,EAAGwB,EAAGrC,EAAGC,EAAGmC,EAAGX,GAC5B,IAAIC,EAAI,EACR,OAAU,IAANb,EACOwB,EAEU,KAAhBxB,GAAKZ,EAAI,GACHoC,EAAIrC,GAEVyB,IACDA,EAAIxB,GAAK,GAAM,OAEdmC,GAAKA,EAAI0D,KAAK0tC,IAAIxzC,IACnBoC,EAAIpC,EACJ0B,EAAID,EAAI,GAGRC,EAAKD,GAAK,EAAIqE,KAAKukB,IAAOvkB,KAAKqzD,KAAKn5D,EAAIoC,GAExCvB,EAAI,EAECuB,EACG0D,KAAKszD,IAAI,EAAG,IAAMv4D,GAAK,IACvBiF,KAAKowB,KAAMr1B,EAAIZ,EAAIyB,IAAM,EAAIoE,KAAKukB,IAAO5oB,IAHxC,GAILY,EAEAD,EACJ0D,KAAKszD,IAAI,GAAI,IAAMv4D,GAAK,IACxBiF,KAAKowB,KAAMr1B,EAAIZ,EAAIyB,IAAM,EAAIoE,KAAKukB,IAAO5oB,GACzC,GACAzB,EACAqC,IAER,cAAcxB,EAAGwB,EAAGrC,EAAGC,GACnB,OAAKY,GAAKZ,GAAK,EAAI,KACRD,GAAK,OAASa,EAAIA,GAAKwB,EAEzBxB,EAAI,EAAI,KACNb,GAAK,QAAUa,GAAK,IAAM,MAAQA,EAAI,KAAQwB,EAEhDxB,EAAI,IAAM,KACRb,GAAK,QAAUa,GAAK,KAAO,MAAQA,EAAI,OAAUwB,EAGjDrC,GAAK,QAAUa,GAAK,MAAQ,MAAQA,EAAI,SAAYwB,GAGnE,aAAaxB,EAAGwB,EAAGrC,EAAGC,GAClB,OAAOD,EAAI03D,GAAQ2B,cAAcp5D,EAAIY,EAAG,EAAGb,EAAGC,GAAKoC,GAEvD,gBAAgBxB,EAAGwB,EAAGrC,EAAGC,GACrB,OAAIY,EAAIZ,EAAI,EACsC,GAAvCy3D,GAAQ4B,aAAiB,EAAJz4D,EAAO,EAAGb,EAAGC,GAAWoC,EAGD,GAA5Cq1D,GAAQ2B,cAAkB,EAAJx4D,EAAQZ,EAAG,EAAGD,EAAGC,GAAe,GAAJD,EAAUqC,GAG3E,OAAOxB,EAAGwB,EAAGrC,EAAGC,GACZ,OAAOD,GAAKa,GAAKZ,GAAKY,EAAIwB,GAE9B,QAAQxB,EAAGwB,EAAGrC,EAAGC,GACb,OAAQD,GAAKa,GAAKZ,IAAMY,EAAI,GAAKwB,GAErC,UAAUxB,EAAGwB,EAAGrC,EAAGC,GACf,OAAKY,GAAKZ,EAAI,GAAK,EACPD,EAAI,EAAKa,EAAIA,EAAIwB,GAEpBrC,EAAI,KAAQa,GAAKA,EAAI,GAAK,GAAKwB,GAE5C,aAAaxB,EAAGwB,EAAGrC,EAAGC,GAClB,OAAOD,GAAKa,GAAKZ,GAAKY,EAAIA,EAAIA,EAAIA,EAAIwB,GAE1C,cAAcxB,EAAGwB,EAAGrC,EAAGC,GACnB,OAAOD,IAAMa,EAAIA,EAAIZ,EAAI,GAAKY,EAAIA,EAAIA,EAAIA,EAAI,GAAKwB,GAEvD,gBAAgBxB,EAAGwB,EAAGrC,EAAGC,GACrB,OAAKY,GAAKZ,EAAI,GAAK,EACPD,EAAI,EAAKa,EAAIA,EAAIA,EAAIA,EAAIA,EAAIwB,EAEjCrC,EAAI,IAAOa,GAAK,GAAKA,EAAIA,EAAIA,EAAIA,EAAI,GAAKwB,GAEtD,OAAOxB,EAAGwB,EAAGrC,EAAGC,GACZ,OAAQD,EAAIa,EAAKZ,EAAIoC,ICnfhBooB,GAAQ+M,EAAK+hC,QAAQC,EAAA,KAAQ,CACtChiC,OACA9B,YACA+jC,KAAA,GACAC,UAAA,GACAC,MAAA,GACA7P,UACA8P,MAAA,GACAC,UAAA,GACAC,MAAA,GACAnkB,MACAokB,MAAA,GACA7S,UACA8S,UAAA,GACAC,MAAA,GACAvC,WACAwC,QAAA,GACAC,OAAA,KC1BG,MAAM,WAAY,GACrB,WAAWjmB,GACP,IAAInpB,EAAQ,OAAM22B,SAASpiD,KAAKyrB,SAAUqvC,EAAY96D,KAAK86D,YAC3DlmB,EAAQlG,YACRkG,EAAQpG,IAAI,EAAG,EAAGxuC,KAAK+6D,cAAe,EAAGtvC,EAAOqvC,GAChDlmB,EAAQpG,IAAI,EAAG,EAAGxuC,KAAKg7D,cAAevvC,EAAO,GAAIqvC,GACjDlmB,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAA4B,EAArBA,KAAK+6D,cAEhB,YACI,OAA4B,EAArB/6D,KAAK+6D,cAEhB,SAAS91B,GACLjlC,KAAK+6D,YAAY91B,EAAQ,GAE7B,UAAUC,GACNllC,KAAK+6D,YAAY71B,EAAS,GAE9B,cACI,MAAM81B,EAAch7D,KAAKg7D,cACnBD,EAAc/6D,KAAK+6D,cACnBD,EAAY96D,KAAK86D,YACjBrvC,EAAQ,OAAM22B,SAAS0Y,EAAY,IAAM96D,KAAKyrB,QAAUzrB,KAAKyrB,SAC7DyvC,EAAiB10D,KAAKmwB,IAAInwB,KAAKD,IAAIklB,EAAOjlB,KAAKukB,KAC/CowC,EAAkB,EAClBC,EAAgB50D,KAAKowB,IAAIpwB,KAAKD,IAAIC,KAAK6F,IAAI7F,KAAKukB,GAAIU,GAAS,EAAIjlB,KAAKukB,GAAM,IAC5EswC,EAAmB70D,KAAKowB,IAAIpwB,KAAKD,IAAIklB,EAAOjlB,KAAKukB,GAAK,IACtDuwC,EAAYJ,GAAkBA,EAAiB,EAAIF,EAAcD,GACjEQ,EAAaJ,GAAmBA,EAAkB,EAAIJ,EAAcC,GACpEQ,EAAWJ,GAAiBA,EAAgB,EAAIJ,EAAcD,GAC9DU,EAAcJ,GAAoBA,EAAmB,EAAIN,EAAcC,GAC7E,MAAO,CACH5wC,EAAGkxC,EACH/kC,EAAGukC,GAAa,EAAIW,EAAcD,EAClCv2B,MAAOs2B,EAAaD,EACpBp2B,OAAQu2B,EAAcD,ICvClC,SAASE,GAAiBC,EAAIC,EAAI51B,EAAIC,EAAIC,EAAIC,EAAI5kC,GAC9C,IAAIs6D,EAAMr1D,KAAKwxB,KAAKxxB,KAAKszD,IAAI9zB,EAAK21B,EAAI,GAAKn1D,KAAKszD,IAAI7zB,EAAK21B,EAAI,IAAKE,EAAMt1D,KAAKwxB,KAAKxxB,KAAKszD,IAAI5zB,EAAKF,EAAI,GAAKx/B,KAAKszD,IAAI3zB,EAAKF,EAAI,IAAK81B,EAAMx6D,EAAIs6D,GAAQA,EAAMC,GAAME,EAAMz6D,EAAIu6D,GAAQD,EAAMC,GAAMG,EAAMj2B,EAAK+1B,GAAM71B,EAAKy1B,GAAKO,EAAMj2B,EAAK81B,GAAM51B,EAAKy1B,GAAKO,EAAMn2B,EAAKg2B,GAAM91B,EAAKy1B,GAAKS,EAAMn2B,EAAK+1B,GAAM71B,EAAKy1B,GACnS,MAAO,CAACK,EAAKC,EAAKC,EAAKC,GAE3B,SAASC,GAAal6D,EAAGm6D,GACrB,IAAoCx6D,EAAGy6D,EAAnCj7C,EAAMnf,EAAES,OAAQ45D,EAAY,GAChC,IAAK16D,EAAI,EAAGA,EAAIwf,EAAM,EAAGxf,GAAK,EAC1By6D,EAAKb,GAAiBv5D,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIK,EAAEL,EAAI,GAAIw6D,GAC1E72C,MAAM82C,EAAG,MAGbC,EAAUl2D,KAAKi2D,EAAG,IAClBC,EAAUl2D,KAAKi2D,EAAG,IAClBC,EAAUl2D,KAAKnE,EAAEL,IACjB06D,EAAUl2D,KAAKnE,EAAEL,EAAI,IACrB06D,EAAUl2D,KAAKi2D,EAAG,IAClBC,EAAUl2D,KAAKi2D,EAAG,KAEtB,OAAOC,EDyBX,GAAIv6D,UAAUsvD,WAAY,EAC1B,GAAItvD,UAAU4+C,UAAY,MAC1B,GAAI5+C,UAAUsjD,oBAAsB,CAAC,cAAe,eACpD,eAAc,IACd5b,GAAQuM,gBAAgB,GAAK,cAAe,EAAG7N,KAC/CsB,GAAQuM,gBAAgB,GAAK,cAAe,EAAG7N,KAC/CsB,GAAQuM,gBAAgB,GAAK,QAAS,EAAG7N,KACzCsB,GAAQuM,gBAAgB,GAAK,aAAa,EAAO7M,KC9B1C,MAAM,WAAa,GACtB,YAAY8L,GACRgB,MAAMhB,GACNn1C,KAAKo6C,GAAG,gFAAgF,WACpFp6C,KAAKq6C,YAAY,oBAGzB,WAAWzF,GACP,IAA8H6nB,EAAIn7C,EAAKxf,EAAnI+5C,EAAS77C,KAAK67C,SAAUj5C,EAASi5C,EAAOj5C,OAAQ05D,EAAUt8D,KAAKs8D,UAAWlD,EAASp5D,KAAKo5D,SAAUsD,EAAS18D,KAAK08D,SACpH,GAAK95D,EAAL,CAKA,GAFAgyC,EAAQlG,YACRkG,EAAQ1E,OAAO2L,EAAO,GAAIA,EAAO,IACjB,IAAZygB,GAAiB15D,EAAS,EAAG,CAC7B65D,EAAKz8D,KAAK28D,mBACVr7C,EAAMm7C,EAAG75D,OACTd,EAAIs3D,EAAS,EAAI,EACZA,GACDxkB,EAAQvE,iBAAiBosB,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAErD,MAAO36D,EAAIwf,EAAM,EACbszB,EAAQjG,cAAc8tB,EAAG36D,KAAM26D,EAAG36D,KAAM26D,EAAG36D,KAAM26D,EAAG36D,KAAM26D,EAAG36D,KAAM26D,EAAG36D,MAErEs3D,GACDxkB,EAAQvE,iBAAiBosB,EAAGn7C,EAAM,GAAIm7C,EAAGn7C,EAAM,GAAIu6B,EAAOj5C,EAAS,GAAIi5C,EAAOj5C,EAAS,SAG1F,GAAI85D,EAAQ,CACb56D,EAAI,EACJ,MAAOA,EAAIc,EACPgyC,EAAQjG,cAAckN,EAAO/5C,KAAM+5C,EAAO/5C,KAAM+5C,EAAO/5C,KAAM+5C,EAAO/5C,KAAM+5C,EAAO/5C,KAAM+5C,EAAO/5C,WAIlG,IAAKA,EAAI,EAAGA,EAAIc,EAAQd,GAAK,EACzB8yC,EAAQ3E,OAAO4L,EAAO/5C,GAAI+5C,EAAO/5C,EAAI,IAGzCs3D,GACAxkB,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,OAGxB40C,EAAQ7H,YAAY/sC,OAG5B,mBACI,OAAOA,KAAKs6C,UAAU,gBAAiBt6C,KAAK48D,mBAEhD,oBACI,OAAI58D,KAAKo5D,SACEp5D,KAAK68D,0BAGLR,GAAar8D,KAAK67C,SAAU77C,KAAKs8D,WAGhD,0BACI,IAAIn6D,EAAInC,KAAK67C,SAAUv6B,EAAMnf,EAAES,OAAQ05D,EAAUt8D,KAAKs8D,UAAWQ,EAAqBpB,GAAiBv5D,EAAEmf,EAAM,GAAInf,EAAEmf,EAAM,GAAInf,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIm6D,GAAUS,EAAoBrB,GAAiBv5D,EAAEmf,EAAM,GAAInf,EAAEmf,EAAM,GAAInf,EAAEmf,EAAM,GAAInf,EAAEmf,EAAM,GAAInf,EAAE,GAAIA,EAAE,GAAIm6D,GAAUU,EAASX,GAAal6D,EAAGm6D,GAAUG,EAAK,CAACK,EAAmB,GAAIA,EAAmB,IAC1VzvD,OAAO2vD,GACP3vD,OAAO,CACR0vD,EAAkB,GAClBA,EAAkB,GAClB56D,EAAEmf,EAAM,GACRnf,EAAEmf,EAAM,GACRy7C,EAAkB,GAClBA,EAAkB,GAClBD,EAAmB,GACnBA,EAAmB,GACnB36D,EAAE,GACFA,EAAE,KAEN,OAAOs6D,EAEX,WACI,OAAOz8D,KAAKwxD,cAAcvsB,MAE9B,YACI,OAAOjlC,KAAKwxD,cAActsB,OAE9B,cACI,IAAI2W,EAAS77C,KAAK67C,SAClB,GAAIA,EAAOj5C,OAAS,EAChB,MAAO,CACHwnB,EAAGyxB,EAAO,IAAM,EAChBtlB,EAAGslB,EAAO,IAAM,EAChB5W,MAAO,EACPC,OAAQ,GAIZ2W,EADmB,IAAnB77C,KAAKs8D,UACI,CACLzgB,EAAO,GACPA,EAAO,MACJ77C,KAAK48D,oBACR/gB,EAAOA,EAAOj5C,OAAS,GACvBi5C,EAAOA,EAAOj5C,OAAS,IAIlB5C,KAAK67C,SAOlB,IALA,IAIIzxB,EAAGmM,EAJHklB,EAAOI,EAAO,GACdF,EAAOE,EAAO,GACdH,EAAOG,EAAO,GACdD,EAAOC,EAAO,GAETx7C,EAAI,EAAGA,EAAIw7C,EAAOj5C,OAAS,EAAGvC,IACnC+pB,EAAIyxB,EAAW,EAAJx7C,GACXk2B,EAAIslB,EAAW,EAAJx7C,EAAQ,GACnBo7C,EAAOj1C,KAAKD,IAAIk1C,EAAMrxB,GACtBuxB,EAAOn1C,KAAK6F,IAAIsvC,EAAMvxB,GACtBsxB,EAAOl1C,KAAKD,IAAIm1C,EAAMnlB,GACtBqlB,EAAOp1C,KAAK6F,IAAIuvC,EAAMrlB,GAE1B,MAAO,CACHnM,EAAGqxB,EACHllB,EAAGmlB,EACHzW,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,IAI3B,GAAKz5C,UAAU4+C,UAAY,OAC3B,GAAK5+C,UAAUsjD,oBAAsB,CAAC,SAAU,SAAU,WAC1D,eAAc,IACd5b,GAAQuM,gBAAgB,GAAM,UAAU,GACxCvM,GAAQuM,gBAAgB,GAAM,UAAU,GACxCvM,GAAQuM,gBAAgB,GAAM,UAAW,EAAG7N,KAC5CsB,GAAQuM,gBAAgB,GAAM,SAAU,GAAI/M,KCvJrC,MAAM,WAAa,GACtB,YAAYgM,GACRgB,MAAMhB,GACNn1C,KAAKi9D,UAAY,GACjBj9D,KAAKk9D,WAAa,EAClBl9D,KAAKi9D,UAAY,GAAKE,cAAcn9D,KAAK8P,QACzC9P,KAAKk9D,WAAa,EAClB,IAAK,IAAI78D,EAAI,EAAGA,EAAIL,KAAKi9D,UAAUr6D,SAAUvC,EACzCL,KAAKk9D,YAAcl9D,KAAKi9D,UAAU58D,GAAG68D,WAEzCl9D,KAAKo6C,GAAG,oBAAoB,WACxBp6C,KAAKi9D,UAAY,GAAKE,cAAcn9D,KAAK8P,QACzC9P,KAAKk9D,WAAa,EAClB,IAAK,IAAI78D,EAAI,EAAGA,EAAIL,KAAKi9D,UAAUr6D,SAAUvC,EACzCL,KAAKk9D,YAAcl9D,KAAKi9D,UAAU58D,GAAG68D,cAIjD,WAAWtoB,GACP,IAAIwoB,EAAKp9D,KAAKi9D,UACdroB,EAAQlG,YAER,IADA,IAAIhI,GAAW,EACN5kC,EAAI,EAAGA,EAAIs7D,EAAGx6D,OAAQd,IAAK,CAChC,IAAIpB,EAAI08D,EAAGt7D,GAAGu7D,QACVl7D,EAAIi7D,EAAGt7D,GAAG+5C,OACd,OAAQn7C,GACJ,IAAK,IACDk0C,EAAQ3E,OAAO9tC,EAAE,GAAIA,EAAE,IACvB,MACJ,IAAK,IACDyyC,EAAQ1E,OAAO/tC,EAAE,GAAIA,EAAE,IACvB,MACJ,IAAK,IACDyyC,EAAQjG,cAAcxsC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACtD,MACJ,IAAK,IACDyyC,EAAQvE,iBAAiBluC,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC7C,MACJ,IAAK,IACD,IAAIm7D,EAAKn7D,EAAE,GAAIo7D,EAAKp7D,EAAE,GAAImG,EAAKnG,EAAE,GAAIq7D,EAAKr7D,EAAE,GAAIk+C,EAAQl+C,EAAE,GAAIs7D,EAASt7D,EAAE,GAAIu7D,EAAMv7D,EAAE,GAAIw7D,EAAKx7D,EAAE,GAC5FhB,EAAImH,EAAKk1D,EAAKl1D,EAAKk1D,EACnB5lC,EAAStvB,EAAKk1D,EAAK,EAAIl1D,EAAKk1D,EAC5B3lC,EAASvvB,EAAKk1D,EAAKA,EAAKl1D,EAAK,EACjCssC,EAAQ7D,UAAUusB,EAAIC,GACtB3oB,EAAQrE,OAAOmtB,GACf9oB,EAAQnE,MAAM7Y,EAAQC,GACtB+c,EAAQpG,IAAI,EAAG,EAAGrtC,EAAGk/C,EAAOA,EAAQod,EAAQ,EAAIE,GAChD/oB,EAAQnE,MAAM,EAAI7Y,EAAQ,EAAIC,GAC9B+c,EAAQrE,QAAQmtB,GAChB9oB,EAAQ7D,WAAWusB,GAAKC,GACxB,MACJ,IAAK,IACD72B,GAAW,EACXkO,EAAQ/F,YACR,OAGPnI,GAAa1mC,KAAKmxD,UAInBvc,EAAQqmB,gBAAgBj7D,MAHxB40C,EAAQ7H,YAAY/sC,MAM5B,cACI,IAAI67C,EAAS,GACb77C,KAAKi9D,UAAU7zD,SAAQ,SAAU0G,GAC7B,GAAqB,MAAjBA,EAAKutD,QAAiB,CACtB,IAAI5oD,EAAQ3E,EAAK+rC,OAAO,GACpB4hB,EAAS3tD,EAAK+rC,OAAO,GACrBnnC,EAAM5E,EAAK+rC,OAAO,GAAK4hB,EACvBG,EAAMp3D,KAAKukB,GAAK,IAIpB,GAHIvkB,KAAK0tC,IAAIz/B,EAAQC,GAAOkpD,IACxBA,EAAMp3D,KAAK0tC,IAAIz/B,EAAQC,IAEvB+oD,EAAS,EACT,IAAK,IAAIl8D,EAAIkT,EAAQmpD,EAAKr8D,EAAImT,EAAKnT,GAAKq8D,EAAK,CACzC,MAAM5rD,EAAQ,GAAK6rD,wBAAwB/tD,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAIt6C,EAAG,GAC9Gs6C,EAAOv1C,KAAK0L,EAAMoY,EAAGpY,EAAMukB,QAI/B,IAAK,IAAIh1B,EAAIkT,EAAQmpD,EAAKr8D,EAAImT,EAAKnT,GAAKq8D,EAAK,CACzC,MAAM5rD,EAAQ,GAAK6rD,wBAAwB/tD,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAIt6C,EAAG,GAC9Gs6C,EAAOv1C,KAAK0L,EAAMoY,EAAGpY,EAAMukB,SAIlC,GAAqB,MAAjBzmB,EAAKutD,QACV,IAAK,IAAI97D,EAAI,EAAKA,GAAK,EAAGA,GAAK,IAAM,CACjC,MAAMyQ,EAAQ,GAAK8rD,sBAAsBv8D,EAAGuO,EAAK2E,MAAM2V,EAAGta,EAAK2E,MAAM8hB,EAAGzmB,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,GAAI/rC,EAAK+rC,OAAO,IACpKA,EAAOv1C,KAAK0L,EAAMoY,EAAGpY,EAAMukB,QAI/BslB,EAASA,EAAOxuC,OAAOyC,EAAK+rC,WAQpC,IALA,IAIIzxB,EAAGmM,EAJHklB,EAAOI,EAAO,GACdF,EAAOE,EAAO,GACdH,EAAOG,EAAO,GACdD,EAAOC,EAAO,GAETx7C,EAAI,EAAGA,EAAIw7C,EAAOj5C,OAAS,EAAGvC,IACnC+pB,EAAIyxB,EAAW,EAAJx7C,GACXk2B,EAAIslB,EAAW,EAAJx7C,EAAQ,GACdolB,MAAM2E,KACPqxB,EAAOj1C,KAAKD,IAAIk1C,EAAMrxB,GACtBuxB,EAAOn1C,KAAK6F,IAAIsvC,EAAMvxB,IAErB3E,MAAM8Q,KACPmlB,EAAOl1C,KAAKD,IAAIm1C,EAAMnlB,GACtBqlB,EAAOp1C,KAAK6F,IAAIuvC,EAAMrlB,IAG9B,MAAO,CACHnM,EAAGqxB,EACHllB,EAAGmlB,EACHzW,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,GAGvB,YACI,OAAO17C,KAAKk9D,WAEhB,iBAAiBt6D,GACb,IAAIoP,EAAO3R,EAAI,EAAG09D,EAAK/9D,KAAKi9D,UAAUr6D,OACtC,IAAKm7D,EACD,OAAO,KAEX,MAAO19D,EAAI09D,GAAMn7D,EAAS5C,KAAKi9D,UAAU58D,GAAG68D,WACxCt6D,GAAU5C,KAAKi9D,UAAU58D,GAAG68D,aAC1B78D,EAEN,GAAIA,IAAM09D,EAEN,OADA/rD,EAAQhS,KAAKi9D,UAAU58D,EAAI,GAAGw7C,OAAOp3C,OAAO,GACrC,CACH2lB,EAAGpY,EAAM,GACTukB,EAAGvkB,EAAM,IAGjB,GAAIpP,EAAS,IAET,OADAoP,EAAQhS,KAAKi9D,UAAU58D,GAAGw7C,OAAOp3C,MAAM,EAAG,GACnC,CACH2lB,EAAGpY,EAAM,GACTukB,EAAGvkB,EAAM,IAGjB,IAAIuqD,EAAKv8D,KAAKi9D,UAAU58D,GACpB8B,EAAIo6D,EAAG1gB,OACX,OAAQ0gB,EAAGc,SACP,IAAK,IACD,OAAO,GAAKW,eAAep7D,EAAQ25D,EAAG9nD,MAAM2V,EAAGmyC,EAAG9nD,MAAM8hB,EAAGp0B,EAAE,GAAIA,EAAE,IACvE,IAAK,IACD,OAAO,GAAK27D,sBAAsBl7D,EAAS25D,EAAGW,WAAYX,EAAG9nD,MAAM2V,EAAGmyC,EAAG9nD,MAAM8hB,EAAGp0B,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IACtH,IAAK,IACD,OAAO,GAAK87D,0BAA0Br7D,EAAS25D,EAAGW,WAAYX,EAAG9nD,MAAM2V,EAAGmyC,EAAG9nD,MAAM8hB,EAAGp0B,EAAE,GAAIA,EAAE,GAAIA,EAAE,GAAIA,EAAE,IAC9G,IAAK,IACD,IAAIm7D,EAAKn7D,EAAE,GAAIo7D,EAAKp7D,EAAE,GAAImG,EAAKnG,EAAE,GAAIq7D,EAAKr7D,EAAE,GAAIk+C,EAAQl+C,EAAE,GAAIs7D,EAASt7D,EAAE,GAAIu7D,EAAMv7D,EAAE,GAErF,OADAk+C,GAAUod,EAAS76D,EAAU25D,EAAGW,WACzB,GAAKW,wBAAwBP,EAAIC,EAAIj1D,EAAIk1D,EAAInd,EAAOqd,GAEnE,OAAO,KAEX,qBAAqB13B,EAAIC,EAAIC,EAAIC,GAC7B,OAAO3/B,KAAKwxB,MAAMkO,EAAKF,IAAOE,EAAKF,IAAOG,EAAKF,IAAOE,EAAKF,IAE/D,sBAAsBK,EAAM43B,EAAKC,EAAKC,EAAKC,EAAKC,EAAOC,QACrC17D,IAAVy7D,IACAA,EAAQJ,QAEEr7D,IAAV07D,IACAA,EAAQJ,GAEZ,IAAI19D,GAAK49D,EAAMF,IAAQC,EAAMF,EAAM,MAC/BzuD,EAAMjJ,KAAKwxB,KAAMsO,EAAOA,GAAS,EAAI7lC,EAAIA,IACzC29D,EAAMF,IACNzuD,IAAQ,GAEZ,IACIg3B,EADA+3B,EAAO/9D,EAAIgP,EAEf,GAAI2uD,IAAQF,EACRz3B,EAAK,CACDrc,EAAGk0C,EACH/nC,EAAGgoC,EAAQC,QAGd,IAAKD,EAAQJ,IAAQG,EAAQJ,EAAM,QAAgBz9D,EACpDgmC,EAAK,CACDrc,EAAGk0C,EAAQ7uD,EACX8mB,EAAGgoC,EAAQC,OAGd,CACD,IAAIC,EAAIC,EACJp9C,EAAMthB,KAAK2+D,cAAcT,EAAKC,EAAKC,EAAKC,GACxC73B,GAAK83B,EAAQJ,IAAQE,EAAMF,IAAQK,EAAQJ,IAAQE,EAAMF,GAC7D33B,GAASllB,EAAMA,EACfm9C,EAAKP,EAAM13B,GAAK43B,EAAMF,GACtBQ,EAAKP,EAAM33B,GAAK63B,EAAMF,GACtB,IAAIS,EAAQ5+D,KAAK2+D,cAAcL,EAAOC,EAAOE,EAAIC,GAC7CG,EAAOr4D,KAAKwxB,KAAKsO,EAAOA,EAAOs4B,EAAQA,GAC3CnvD,EAAMjJ,KAAKwxB,KAAM6mC,EAAOA,GAAS,EAAIp+D,EAAIA,IACrC29D,EAAMF,IACNzuD,IAAQ,GAEZ+uD,EAAO/9D,EAAIgP,EACXg3B,EAAK,CACDrc,EAAGq0C,EAAKhvD,EACR8mB,EAAGmoC,EAAKF,GAGhB,OAAO/3B,EAEX,6BAA6Bq4B,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,EAAKC,EAAKC,GACjE,SAASC,EAAI59D,GACT,OAAOA,EAAIA,EAAIA,EAEnB,SAAS69D,EAAI79D,GACT,OAAO,EAAIA,EAAIA,GAAK,EAAIA,GAE5B,SAAS89D,EAAI99D,GACT,OAAO,EAAIA,GAAK,EAAIA,IAAM,EAAIA,GAElC,SAAS+9D,EAAI/9D,GACT,OAAQ,EAAIA,IAAM,EAAIA,IAAM,EAAIA,GAEpC,IAAI6oB,EAAI60C,EAAME,EAAIL,GAAOC,EAAMK,EAAIN,GAAOV,EAAMiB,EAAIP,GAAOZ,EAAMoB,EAAIR,GACjEvoC,EAAI2oC,EAAMC,EAAIL,GAAOE,EAAMI,EAAIN,GAAOT,EAAMgB,EAAIP,GAAOX,EAAMmB,EAAIR,GACrE,MAAO,CACH10C,EAAGA,EACHmM,EAAGA,GAGX,iCAAiCuoC,EAAKZ,EAAKC,EAAKC,EAAKC,EAAKU,EAAKC,GAC3D,SAASO,EAAIh+D,GACT,OAAOA,EAAIA,EAEf,SAASi+D,EAAIj+D,GACT,OAAO,EAAIA,GAAK,EAAIA,GAExB,SAASk+D,EAAIl+D,GACT,OAAQ,EAAIA,IAAM,EAAIA,GAE1B,IAAI6oB,EAAI20C,EAAMQ,EAAIT,GAAOV,EAAMoB,EAAIV,GAAOZ,EAAMuB,EAAIX,GAChDvoC,EAAIyoC,EAAMO,EAAIT,GAAOT,EAAMmB,EAAIV,GAAOX,EAAMsB,EAAIX,GACpD,MAAO,CACH10C,EAAGA,EACHmM,EAAGA,GAGX,+BAA+B+mC,EAAIC,EAAIj1D,EAAIk1D,EAAInd,EAAOqd,GAClD,IAAIgC,EAASl5D,KAAKmwB,IAAI+mC,GAAMiC,EAASn5D,KAAKowB,IAAI8mC,GAC1Cj3B,EAAK,CACLrc,EAAG9hB,EAAK9B,KAAKmwB,IAAI0pB,GACjB9pB,EAAGinC,EAAKh3D,KAAKowB,IAAIypB,IAErB,MAAO,CACHj2B,EAAGkzC,GAAM72B,EAAGrc,EAAIs1C,EAASj5B,EAAGlQ,EAAIopC,GAChCppC,EAAGgnC,GAAM92B,EAAGrc,EAAIu1C,EAASl5B,EAAGlQ,EAAImpC,IAGxC,qBAAqB5vD,GACjB,IAAKA,EACD,MAAO,GAEX,IAAI8vD,EAAK9vD,EACL+vD,EAAK,CACL,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEJD,EAAKA,EAAGprD,QAAQ,IAAI7N,OAAO,IAAK,KAAM,KACtC,IAAK,IAAI7E,EAAI,EAAGA,EAAI+9D,EAAGj9D,OAAQd,IAC3B89D,EAAKA,EAAGprD,QAAQ,IAAI7N,OAAOk5D,EAAG/9D,GAAI,KAAM,IAAM+9D,EAAG/9D,IAErD,IAMIuF,EANA+sB,EAAMwrC,EAAG54D,MAAM,KACfo2D,EAAK,GACL0C,EAAS,GACTC,EAAM,EACNC,EAAM,EACN9/C,EAAK,sDAET,IAAKpe,EAAI,EAAGA,EAAIsyB,EAAIxxB,OAAQd,IAAK,CAC7B,IAAIke,EAAMoU,EAAItyB,GACVpB,EAAIsf,EAAIzO,OAAO,GACnByO,EAAMA,EAAIvb,MAAM,GAChBq7D,EAAOl9D,OAAS,EAChB,MAAQyE,EAAQ6Y,EAAGnX,KAAKiX,GACpB8/C,EAAOx5D,KAAKe,EAAM,IAGtB,IADA,IAAIlF,EAAI,GACCoT,EAAI,EAAG0qD,EAAOH,EAAOl9D,OAAQ2S,EAAI0qD,EAAM1qD,IAC5C,GAAkB,OAAduqD,EAAOvqD,GAAX,CAIA,IAAI2qD,EAASC,WAAWL,EAAOvqD,IAC1BkQ,MAAMy6C,GAIP/9D,EAAEmE,KAAK,GAHPnE,EAAEmE,KAAK45D,QALP/9D,EAAEmE,KAAK,EAAG,GAWlB,MAAOnE,EAAES,OAAS,EAAG,CACjB,GAAI6iB,MAAMtjB,EAAE,IACR,MAEJ,IAGIi+D,EAASC,EAAQC,EACjBh4D,EAAIk1D,EAAIE,EAAK3B,EAAI4B,EAAI33B,EAAIC,EAJzBs6B,EAAM,KACN1kB,EAAS,GACT2kB,EAAST,EAAKU,EAAST,EAG3B,OAAQt/D,GACJ,IAAK,IACDq/D,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDD,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRyO,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACD,IAAI9oC,EAAK/0B,EAAEirC,QACPjW,EAAKh1B,EAAEirC,QAIX,GAHA2yB,GAAO7oC,EACP8oC,GAAO7oC,EACPopC,EAAM,IACFnD,EAAGx6D,OAAS,GAAmC,MAA9Bw6D,EAAGA,EAAGx6D,OAAS,GAAGy6D,QACnC,IAAK,IAAIqD,EAAMtD,EAAGx6D,OAAS,EAAG89D,GAAO,EAAGA,IACpC,GAAwB,MAApBtD,EAAGsD,GAAKrD,QAAiB,CACzB0C,EAAM3C,EAAGsD,GAAK7kB,OAAO,GAAK3kB,EAC1B8oC,EAAM5C,EAAGsD,GAAK7kB,OAAO,GAAK1kB,EAC1B,MAIZ0kB,EAAOv1C,KAAKy5D,EAAKC,GACjBt/D,EAAI,IACJ,MACJ,IAAK,IACDq/D,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjBt/D,EAAI,IACJ,MACJ,IAAK,IACDq/D,GAAO59D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDD,EAAM59D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDA,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDA,EAAM79D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDnkB,EAAOv1C,KAAKnE,EAAEirC,QAASjrC,EAAEirC,QAASjrC,EAAEirC,QAASjrC,EAAEirC,SAC/C2yB,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRyO,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDnkB,EAAOv1C,KAAKy5D,EAAM59D,EAAEirC,QAAS4yB,EAAM79D,EAAEirC,QAAS2yB,EAAM59D,EAAEirC,QAAS4yB,EAAM79D,EAAEirC,SACvE2yB,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDK,EAASN,EACTO,EAASN,EACTI,EAAUhD,EAAGA,EAAGx6D,OAAS,GACD,MAApBw9D,EAAQ/C,UACRgD,EAASN,GAAOA,EAAMK,EAAQvkB,OAAO,IACrCykB,EAASN,GAAOA,EAAMI,EAAQvkB,OAAO,KAEzCA,EAAOv1C,KAAK+5D,EAAQC,EAAQn+D,EAAEirC,QAASjrC,EAAEirC,SACzC2yB,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDK,EAASN,EACTO,EAASN,EACTI,EAAUhD,EAAGA,EAAGx6D,OAAS,GACD,MAApBw9D,EAAQ/C,UACRgD,EAASN,GAAOA,EAAMK,EAAQvkB,OAAO,IACrCykB,EAASN,GAAOA,EAAMI,EAAQvkB,OAAO,KAEzCA,EAAOv1C,KAAK+5D,EAAQC,EAAQP,EAAM59D,EAAEirC,QAAS4yB,EAAM79D,EAAEirC,SACrD2yB,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDnkB,EAAOv1C,KAAKnE,EAAEirC,QAASjrC,EAAEirC,SACzB2yB,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRyO,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDnkB,EAAOv1C,KAAKy5D,EAAM59D,EAAEirC,QAAS4yB,EAAM79D,EAAEirC,SACrC2yB,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAKy5D,EAAKC,GACjB,MACJ,IAAK,IACDK,EAASN,EACTO,EAASN,EACTI,EAAUhD,EAAGA,EAAGx6D,OAAS,GACD,MAApBw9D,EAAQ/C,UACRgD,EAASN,GAAOA,EAAMK,EAAQvkB,OAAO,IACrCykB,EAASN,GAAOA,EAAMI,EAAQvkB,OAAO,KAEzCkkB,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAOv1C,KAAK+5D,EAAQC,EAAQP,EAAKC,GACjC,MACJ,IAAK,IACDK,EAASN,EACTO,EAASN,EACTI,EAAUhD,EAAGA,EAAGx6D,OAAS,GACD,MAApBw9D,EAAQ/C,UACRgD,EAASN,GAAOA,EAAMK,EAAQvkB,OAAO,IACrCykB,EAASN,GAAOA,EAAMI,EAAQvkB,OAAO,KAEzCkkB,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAOv1C,KAAK+5D,EAAQC,EAAQP,EAAKC,GACjC,MACJ,IAAK,IACD13D,EAAKnG,EAAEirC,QACPowB,EAAKr7D,EAAEirC,QACPswB,EAAMv7D,EAAEirC,QACR2uB,EAAK55D,EAAEirC,QACPuwB,EAAKx7D,EAAEirC,QACPpH,EAAK+5B,EACL95B,EAAK+5B,EACLD,EAAM59D,EAAEirC,QACR4yB,EAAM79D,EAAEirC,QACRmzB,EAAM,IACN1kB,EAAS77C,KAAK2gE,wCAAwC36B,EAAIC,EAAI85B,EAAKC,EAAKjE,EAAI4B,EAAIr1D,EAAIk1D,EAAIE,GACxF,MACJ,IAAK,IACDp1D,EAAKnG,EAAEirC,QACPowB,EAAKr7D,EAAEirC,QACPswB,EAAMv7D,EAAEirC,QACR2uB,EAAK55D,EAAEirC,QACPuwB,EAAKx7D,EAAEirC,QACPpH,EAAK+5B,EACL95B,EAAK+5B,EACLD,GAAO59D,EAAEirC,QACT4yB,GAAO79D,EAAEirC,QACTmzB,EAAM,IACN1kB,EAAS77C,KAAK2gE,wCAAwC36B,EAAIC,EAAI85B,EAAKC,EAAKjE,EAAI4B,EAAIr1D,EAAIk1D,EAAIE,GACxF,MAERN,EAAG92D,KAAK,CACJ+2D,QAASkD,GAAO7/D,EAChBm7C,OAAQA,EACRpnC,MAAO,CACH2V,EAAGo2C,EACHjqC,EAAGkqC,GAEPvD,WAAYl9D,KAAK4gE,WAAWJ,EAAQC,EAAQF,GAAO7/D,EAAGm7C,KAGpD,MAANn7C,GAAmB,MAANA,GACb08D,EAAG92D,KAAK,CACJ+2D,QAAS,IACTxhB,OAAQ,GACRpnC,WAAO5R,EACPq6D,WAAY,IAIxB,OAAOE,EAEX,kBAAkBhzC,EAAGmM,EAAGgqC,EAAK1kB,GACzB,IAAIv6B,EAAKulB,EAAIC,EAAIvlC,EACb2Y,EAAO,GACX,OAAQqmD,GACJ,IAAK,IACD,OAAOrmD,EAAKykD,cAAcv0C,EAAGmM,EAAGslB,EAAO,GAAIA,EAAO,IACtD,IAAK,IAGD,IAFAv6B,EAAM,EACNulB,EAAK3sB,EAAK4jD,sBAAsB,EAAG1zC,EAAGmM,EAAGslB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAClGt6C,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACxBulC,EAAK5sB,EAAK4jD,sBAAsBv8D,EAAG6oB,EAAGmM,EAAGslB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACvGv6B,GAAOpH,EAAKykD,cAAc93B,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,GAC/CsQ,EAAKC,EAET,OAAOxlB,EACX,IAAK,IAGD,IAFAA,EAAM,EACNulB,EAAK3sB,EAAK+jD,0BAA0B,EAAG7zC,EAAGmM,EAAGslB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IAChFt6C,EAAI,IAAMA,GAAK,EAAGA,GAAK,IACxBulC,EAAK5sB,EAAK+jD,0BAA0B18D,EAAG6oB,EAAGmM,EAAGslB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,IACrFv6B,GAAOpH,EAAKykD,cAAc93B,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,GAC/CsQ,EAAKC,EAET,OAAOxlB,EACX,IAAK,IACDA,EAAM,EACN,IAAI7M,EAAQonC,EAAO,GACf4hB,EAAS5hB,EAAO,GAChBnnC,EAAMmnC,EAAO,GAAK4hB,EAClBG,EAAMp3D,KAAKukB,GAAK,IAKpB,GAJIvkB,KAAK0tC,IAAIz/B,EAAQC,GAAOkpD,IACxBA,EAAMp3D,KAAK0tC,IAAIz/B,EAAQC,IAE3BmyB,EAAK3sB,EAAK2jD,wBAAwBhiB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIpnC,EAAO,GACjFgpD,EAAS,EACT,IAAKl8D,EAAIkT,EAAQmpD,EAAKr8D,EAAImT,EAAKnT,GAAKq8D,EAChC92B,EAAK5sB,EAAK2jD,wBAAwBhiB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIt6C,EAAG,GACjF+f,GAAOpH,EAAKykD,cAAc93B,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,GAC/CsQ,EAAKC,OAIT,IAAKvlC,EAAIkT,EAAQmpD,EAAKr8D,EAAImT,EAAKnT,GAAKq8D,EAChC92B,EAAK5sB,EAAK2jD,wBAAwBhiB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIt6C,EAAG,GACjF+f,GAAOpH,EAAKykD,cAAc93B,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,GAC/CsQ,EAAKC,EAKb,OAFAA,EAAK5sB,EAAK2jD,wBAAwBhiB,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAIA,EAAO,GAAInnC,EAAK,GACnF4M,GAAOpH,EAAKykD,cAAc93B,EAAGzc,EAAGyc,EAAGtQ,EAAGuQ,EAAG1c,EAAG0c,EAAGvQ,GACxCjV,EAEf,OAAO,EAEX,+CAA+C0kB,EAAIC,EAAIC,EAAIC,EAAI41B,EAAI4B,EAAIr1D,EAAIk1D,EAAIqD,GAC3E,IAAInD,EAAMmD,GAAUr6D,KAAKukB,GAAK,KAC1B+1C,EAAMt6D,KAAKmwB,IAAI+mC,IAAQ13B,EAAKE,GAAO,EAAO1/B,KAAKowB,IAAI8mC,IAAQz3B,EAAKE,GAAO,EACvE46B,GAAO,EAAIv6D,KAAKowB,IAAI8mC,IAAQ13B,EAAKE,GAAO,EACvC1/B,KAAKmwB,IAAI+mC,IAAQz3B,EAAKE,GAAO,EAC9B66B,EAAUF,EAAKA,GAAOx4D,EAAKA,GAAOy4D,EAAKA,GAAOvD,EAAKA,GACnDwD,EAAS,IACT14D,GAAM9B,KAAKwxB,KAAKgpC,GAChBxD,GAAMh3D,KAAKwxB,KAAKgpC,IAEpB,IAAI/8D,EAAIuC,KAAKwxB,MAAM1vB,EAAKA,GAAMk1D,EAAKA,GAAMl1D,EAAKA,GAAMy4D,EAAKA,GAAMvD,EAAKA,GAAMsD,EAAKA,KAC1Ex4D,EAAKA,GAAMy4D,EAAKA,GAAMvD,EAAKA,GAAMsD,EAAKA,KACvC/E,IAAO4B,IACP15D,IAAM,GAENwhB,MAAMxhB,KACNA,EAAI,GAER,IAAIg9D,EAAOh9D,EAAIqE,EAAKy4D,EAAMvD,EACtB0D,EAAOj9D,GAAKu5D,EAAKsD,EAAMx4D,EACvBg1D,GAAMt3B,EAAKE,GAAM,EAAM1/B,KAAKmwB,IAAI+mC,GAAOuD,EAAMz6D,KAAKowB,IAAI8mC,GAAOwD,EAC7D3D,GAAMt3B,EAAKE,GAAM,EAAM3/B,KAAKowB,IAAI8mC,GAAOuD,EAAMz6D,KAAKmwB,IAAI+mC,GAAOwD,EAC7DC,EAAO,SAAUC,GACjB,OAAO56D,KAAKwxB,KAAKopC,EAAE,GAAKA,EAAE,GAAKA,EAAE,GAAKA,EAAE,KAExCC,EAAS,SAAU76B,EAAG46B,GACtB,OAAQ56B,EAAE,GAAK46B,EAAE,GAAK56B,EAAE,GAAK46B,EAAE,KAAOD,EAAK36B,GAAK26B,EAAKC,KAErDE,EAAS,SAAU96B,EAAG46B,GACtB,OAAQ56B,EAAE,GAAK46B,EAAE,GAAK56B,EAAE,GAAK46B,EAAE,IAAM,EAAI,GAAK56D,KAAKyxB,KAAKopC,EAAO76B,EAAG46B,KAElE/gB,EAAQihB,EAAO,CAAC,EAAG,GAAI,EAAER,EAAKG,GAAO34D,GAAKy4D,EAAKG,GAAO1D,IACtDh3B,EAAI,EAAEs6B,EAAKG,GAAO34D,GAAKy4D,EAAKG,GAAO1D,GACnC4D,EAAI,GAAG,EAAIN,EAAKG,GAAO34D,IAAM,EAAIy4D,EAAKG,GAAO1D,GAC7CC,EAAS6D,EAAO96B,EAAG46B,GAavB,OAZIC,EAAO76B,EAAG46B,KAAO,IACjB3D,EAASj3D,KAAKukB,IAEds2C,EAAO76B,EAAG46B,IAAM,IAChB3D,EAAS,GAEF,IAAPE,GAAYF,EAAS,IACrBA,GAAkB,EAAIj3D,KAAKukB,IAEpB,IAAP4yC,GAAYF,EAAS,IACrBA,GAAkB,EAAIj3D,KAAKukB,IAExB,CAACuyC,EAAIC,EAAIj1D,EAAIk1D,EAAInd,EAAOod,EAAQC,EAAKC,IAGpD,GAAK17D,UAAU4+C,UAAY,OAC3B,GAAK5+C,UAAUsjD,oBAAsB,CAAC,QACtC,eAAc,IACd5b,GAAQuM,gBAAgB,GAAM,QC7mBvB,MAAM,WAAc,GACvB,WAAWmZ,GACPlZ,MAAMorB,WAAWlS,GACjB,IAAImS,EAAgB,EAAVh7D,KAAKukB,GACX8wB,EAAS77C,KAAK67C,SACd4gB,EAAK5gB,EACL4lB,EAAiC,IAAnBzhE,KAAKs8D,WAAmBzgB,EAAOj5C,OAAS,EACtD6+D,IACAhF,EAAKz8D,KAAK28D,oBAEd,IAEIzlC,EAAIC,EAFJv0B,EAAS5C,KAAK0hE,gBACd5/D,EAAI+5C,EAAOj5C,OAEf,GAAI6+D,EAAa,CACb,MAAME,EAAK,CACPlF,EAAGA,EAAG75D,OAAS,GACf65D,EAAGA,EAAG75D,OAAS,GACf65D,EAAGA,EAAG75D,OAAS,GACf65D,EAAGA,EAAG75D,OAAS,GACfi5C,EAAO/5C,EAAI,GACX+5C,EAAO/5C,EAAI,IAETyF,EAAa,GAAKq5D,WAAWnE,EAAGA,EAAG75D,OAAS,GAAI65D,EAAGA,EAAG75D,OAAS,GAAI,IAAK++D,GACxEhrD,EAAW,GAAKsnD,0BAA0Bz3D,KAAKD,IAAI,EAAG,EAAI3D,EAAS2E,GAAao6D,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,GAAIA,EAAG,IAC5HzqC,EAAK2kB,EAAO/5C,EAAI,GAAK6U,EAASyT,EAC9B+M,EAAK0kB,EAAO/5C,EAAI,GAAK6U,EAAS4f,OAG9BW,EAAK2kB,EAAO/5C,EAAI,GAAK+5C,EAAO/5C,EAAI,GAChCq1B,EAAK0kB,EAAO/5C,EAAI,GAAK+5C,EAAO/5C,EAAI,GAEpC,IAAI8jC,GAAWp/B,KAAKo7D,MAAMzqC,EAAID,GAAMsqC,GAAOA,EACvCv8B,EAAQjlC,KAAK6hE,eACb7hE,KAAK8hE,oBACLzS,EAAI7e,OACJ6e,EAAI3gB,YACJ2gB,EAAIte,UAAU8K,EAAO/5C,EAAI,GAAI+5C,EAAO/5C,EAAI,IACxCutD,EAAI9e,OAAO3K,GACXypB,EAAInf,OAAO,EAAG,GACdmf,EAAIpf,QAAQrtC,EAAQqiC,EAAQ,GAC5BoqB,EAAIpf,QAAQrtC,GAASqiC,EAAQ,GAC7BoqB,EAAIxgB,YACJwgB,EAAI/e,UACJtwC,KAAK+hE,aAAa1S,IAElBrvD,KAAKgiE,uBACL3S,EAAI7e,OACJ6e,EAAI3gB,YACJ2gB,EAAIte,UAAU8K,EAAO,GAAIA,EAAO,IAC5B4lB,GACAvqC,GAAMulC,EAAG,GAAKA,EAAG,IAAM,EAAI5gB,EAAO,GAClC1kB,GAAMslC,EAAG,GAAKA,EAAG,IAAM,EAAI5gB,EAAO,KAGlC3kB,EAAK2kB,EAAO,GAAKA,EAAO,GACxB1kB,EAAK0kB,EAAO,GAAKA,EAAO,IAE5BwT,EAAI9e,QAAQ/pC,KAAKo7D,OAAOzqC,GAAKD,GAAMsqC,GAAOA,GAC1CnS,EAAInf,OAAO,EAAG,GACdmf,EAAIpf,QAAQrtC,EAAQqiC,EAAQ,GAC5BoqB,EAAIpf,QAAQrtC,GAASqiC,EAAQ,GAC7BoqB,EAAIxgB,YACJwgB,EAAI/e,UACJtwC,KAAK+hE,aAAa1S,IAG1B,aAAaA,GACT,IAAI4S,EAAgBjiE,KAAKkzC,cACrB+uB,IACAjiE,KAAKmqC,MAAM+I,aAAc,EACzBmc,EAAI3e,YAAY,KAEpB2e,EAAI4L,gBAAgBj7D,MAChBiiE,IACAjiE,KAAKmqC,MAAM+I,aAAc,GAGjC,cACI,MAAMgvB,EAAW/rB,MAAMqb,cACjB1d,EAAS9zC,KAAK6hE,eAAiB,EACrC,MAAO,CACHz3C,EAAG83C,EAAS93C,EAAI0pB,EAChBvd,EAAG2rC,EAAS3rC,EAAIud,EAChB7O,MAAOi9B,EAASj9B,MAAiB,EAAT6O,EACxB5O,OAAQg9B,EAASh9B,OAAkB,EAAT4O,IAItC,GAAM7xC,UAAU4+C,UAAY,QAC5B,eAAc,IACdlX,GAAQuM,gBAAgB,GAAO,gBAAiB,GAAI7N,KACpDsB,GAAQuM,gBAAgB,GAAO,eAAgB,GAAI7N,KACnDsB,GAAQuM,gBAAgB,GAAO,sBAAsB,GACrDvM,GAAQuM,gBAAgB,GAAO,mBAAmB,GC9F3C,MAAM,WAAe,GACxB,WAAWtB,GACPA,EAAQlG,YACRkG,EAAQpG,IAAI,EAAG,EAAGxuC,KAAKmqC,MAAMg4B,QAAU,EAAG,EAAa,EAAV37D,KAAKukB,IAAQ,GAC1D6pB,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAAuB,EAAhBA,KAAKmiE,SAEhB,YACI,OAAuB,EAAhBniE,KAAKmiE,SAEhB,SAASl9B,GACDjlC,KAAKmiE,WAAal9B,EAAQ,GAC1BjlC,KAAKmiE,OAAOl9B,EAAQ,GAG5B,UAAUC,GACFllC,KAAKmiE,WAAaj9B,EAAS,GAC3BllC,KAAKmiE,OAAOj9B,EAAS,IAIjC,GAAOjjC,UAAUsvD,WAAY,EAC7B,GAAOtvD,UAAU4+C,UAAY,SAC7B,GAAO5+C,UAAUsjD,oBAAsB,CAAC,UACxC,eAAc,IACd5b,GAAQuM,gBAAgB,GAAQ,SAAU,EAAG7N,KC5BtC,MAAM,WAAgB,GACzB,WAAWuM,GACP,IAAItsC,EAAKtI,KAAKoiE,UAAW5E,EAAKx9D,KAAKqiE,UACnCztB,EAAQlG,YACRkG,EAAQpE,OACJloC,IAAOk1D,GACP5oB,EAAQnE,MAAM,EAAG+sB,EAAKl1D,GAE1BssC,EAAQpG,IAAI,EAAG,EAAGlmC,EAAI,EAAa,EAAV9B,KAAKukB,IAAQ,GACtC6pB,EAAQtE,UACRsE,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAAwB,EAAjBA,KAAKoiE,UAEhB,YACI,OAAwB,EAAjBpiE,KAAKqiE,UAEhB,SAASp9B,GACLjlC,KAAKoiE,QAAQn9B,EAAQ,GAEzB,UAAUC,GACNllC,KAAKqiE,QAAQn9B,EAAS,IAG9B,GAAQjjC,UAAU4+C,UAAY,UAC9B,GAAQ5+C,UAAUsvD,WAAY,EAC9B,GAAQtvD,UAAUsjD,oBAAsB,CAAC,UAAW,WACpD,eAAc,IACd5b,GAAQ6b,0BAA0B,GAAS,SAAU,CAAC,IAAK,MAC3D7b,GAAQuM,gBAAgB,GAAS,UAAW,EAAG7N,KAC/CsB,GAAQuM,gBAAgB,GAAS,UAAW,EAAG7N,KC/BxC,MAAM,WAAc,GACvB,YAAY8B,GACRgM,MAAMhM,GACNnqC,KAAKo6C,GAAG,oBAAqB,KACzBp6C,KAAKsiE,kBAETtiE,KAAKsiE,gBAET,gBACI,MAAMC,EAAQviE,KAAKuiE,QACfA,GAASA,EAAMC,UAGfD,GAA8B,IAArBA,EAAMxjD,YAGfwjD,GAASA,EAAM,qBACfA,EAAM,oBAAoB,OAAQ,KAC9BviE,KAAKw6C,iBAIjB,mBACI,OAAOrE,MAAMkc,kBAAiB,GAElC,WAAWzd,GACP,MAAM3P,EAAQjlC,KAAK0tC,WACbxI,EAASllC,KAAK2tC,YACd40B,EAAQviE,KAAKmqC,MAAMo4B,MACzB,IAAI3I,EACJ,GAAI2I,EAAO,CACP,MAAME,EAAYziE,KAAKmqC,MAAMs4B,UACvBC,EAAa1iE,KAAKmqC,MAAMu4B,WAE1B9I,EADA6I,GAAaC,EACJ,CACLH,EACAviE,KAAK2iE,QACL3iE,KAAK4iE,QACLH,EACAC,EACA,EACA,EACAz9B,EACAC,GAIK,CAACq9B,EAAO,EAAG,EAAGt9B,EAAOC,IAGlCllC,KAAKmxD,WAAanxD,KAAK4sC,eACvBgI,EAAQlG,YACRkG,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GAC1B0P,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,OAExBuiE,GACA3tB,EAAQvF,UAAUrsC,MAAM4xC,EAASglB,GAGzC,SAAShlB,GACL,IAAI3P,EAAQjlC,KAAKilC,QAASC,EAASllC,KAAKklC,SACxC0P,EAAQlG,YACRkG,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GAC1B0P,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,IAAIwzC,EAAIC,EACR,OAAmC,QAA3BD,EAAKxzC,KAAKmqC,MAAMlF,aAA0B,IAAPuO,EAAgBA,EAA6B,QAAvBC,EAAKzzC,KAAKuiE,eAA4B,IAAP9uB,OAAgB,EAASA,EAAGxO,MAEhI,YACI,IAAIuO,EAAIC,EACR,OAAoC,QAA5BD,EAAKxzC,KAAKmqC,MAAMjF,cAA2B,IAAPsO,EAAgBA,EAA6B,QAAvBC,EAAKzzC,KAAKuiE,eAA4B,IAAP9uB,OAAgB,EAASA,EAAGvO,OAEjI,eAAe9B,EAAKJ,EAAU6/B,EAAU,MACpC,IAAIngB,EAAMxqB,EAAKoL,qBACfof,EAAInf,OAAS,WACT,IAAIg/B,EAAQ,IAAI,GAAM,CAClBA,MAAO7f,IAEX1f,EAASu/B,IAEb7f,EAAIogB,QAAUD,EACdngB,EAAIqgB,YAAc,YAClBrgB,EAAI/mC,IAAMynB,GAGlB,GAAMnhC,UAAU4+C,UAAY,QAC5B,eAAc,IACdlX,GAAQuM,gBAAgB,GAAO,SAC/BvM,GAAQ6b,0BAA0B,GAAO,OAAQ,CAAC,IAAK,IAAK,QAAS,WACrE7b,GAAQuM,gBAAgB,GAAO,QAAS,EAAG7N,KAC3CsB,GAAQuM,gBAAgB,GAAO,QAAS,EAAG7N,KAC3CsB,GAAQuM,gBAAgB,GAAO,YAAa,EAAG7N,KAC/CsB,GAAQuM,gBAAgB,GAAO,aAAc,EAAG7N,KC/FhD,IAAI26B,GAAmB,CACnB,aACA,WACA,YACA,UACA,aACA,OACA,QACA,UACDC,GAAe,eAAgBC,GAAO,OAAQC,GAAK,KAAMC,GAAQ,QAASC,GAAO,OAAQC,GAAO,OAAQC,GAAoBP,GAAiBpgE,OACzI,MAAM,WAAc,GACvB,YAAYuyC,GACRgB,MAAMhB,GACNn1C,KAAKo6C,GAAG,aAAa,SAAUxS,GAC3B5nC,KAAKy4D,cAAc7wB,EAAIgX,OACvB5+C,KAAKwjE,WAGb,UACI,OAAOxjE,KAAKopB,KAAK,QAAQ,GAE7B,SACI,OAAOppB,KAAKopB,KAAK,OAAO,GAE5B,cAAcwmB,GACV,IAAiB9tC,EAAba,EAAO3C,KACP6lC,EAAO,WACPljC,EAAK6gE,SAET,IAAK1hE,EAAI,EAAGA,EAAIyhE,GAAmBzhE,IAC/B8tC,EAAKwK,GAAG4oB,GAAiBlhE,GAAKmhE,GAAcp9B,GAGpD,WACI,OAAO7lC,KAAKyjE,UAAUx+B,QAE1B,YACI,OAAOjlC,KAAKyjE,UAAUv+B,SAE1B,QACI,IAAgDD,EAAOC,EAAQw+B,EAAkB7B,EAAcz3C,EAAGmM,EAAGotC,EAAjG/zB,EAAO5vC,KAAKyjE,UAAW7/C,EAAM5jB,KAAK4jE,SACtC,GAAIh0B,GAAQhsB,EAAK,CAQb,OAPAqhB,EAAQ2K,EAAK3K,QACbC,EAAS0K,EAAK1K,SACdw+B,EAAmB9/C,EAAI8/C,mBACvB7B,EAAej+C,EAAIi+C,eACnB8B,EAAgB//C,EAAI+/C,gBACpBv5C,EAAI,EACJmM,EAAI,EACImtC,GACJ,KAAKP,GACD/4C,EAAI6a,EAAQ,EACZ1O,GAAK,EAAIotC,EACT,MACJ,KAAKP,GACDh5C,EAAI6a,EAAQ48B,EACZtrC,EAAI2O,EAAS,EACb,MACJ,KAAKm+B,GACDj5C,EAAI6a,EAAQ,EACZ1O,EAAI2O,EAASy+B,EACb,MACJ,KAAKL,GACDl5C,GAAK,EAAIy3C,EACTtrC,EAAI2O,EAAS,EACb,MAERthB,EAAIg2B,SAAS,CACTxvB,GAAI,EAAIA,EACRmM,GAAI,EAAIA,EACR0O,MAAOA,EACPC,OAAQA,IAEZ0K,EAAKgK,SAAS,CACVxvB,GAAI,EAAIA,EACRmM,GAAI,EAAIA,MAKxB,GAAMt0B,UAAU4+C,UAAY,QAC5B,eAAc,IACP,MAAM,WAAY,GACrB,WAAWjM,GACP,IAAI3P,EAAQjlC,KAAKilC,QAASC,EAASllC,KAAKklC,SAAUw+B,EAAmB1jE,KAAK0jE,mBAAoB7B,EAAe7hE,KAAK6hE,eAAgB8B,EAAgB3jE,KAAK2jE,gBAAiBE,EAAe7jE,KAAK6jE,eAC5L,IAAIC,EAAU,EACVC,EAAW,EACXC,EAAa,EACbC,EAAc,EACU,kBAAjBJ,EACPC,EAAUC,EAAWC,EAAaC,EAAcz9D,KAAKD,IAAIs9D,EAAc5+B,EAAQ,EAAGC,EAAS,IAG3F4+B,EAAUt9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GAC7D6+B,EAAWv9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GAC9D++B,EAAcz9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GACjE8+B,EAAax9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,IAEpE0P,EAAQlG,YACRkG,EAAQ1E,OAAO4zB,EAAS,GACpBJ,IAAqBP,KACrBvuB,EAAQ3E,QAAQhL,EAAQ48B,GAAgB,EAAG,GAC3CjtB,EAAQ3E,OAAOhL,EAAQ,GAAI,EAAI0+B,GAC/B/uB,EAAQ3E,QAAQhL,EAAQ48B,GAAgB,EAAG,IAE/CjtB,EAAQ3E,OAAOhL,EAAQ8+B,EAAU,GACjCnvB,EAAQpG,IAAIvJ,EAAQ8+B,EAAUA,EAAUA,EAAqB,EAAVv9D,KAAKukB,GAAU,EAAG,GAAG,GACpE24C,IAAqBN,KACrBxuB,EAAQ3E,OAAOhL,GAAQC,EAASy+B,GAAiB,GACjD/uB,EAAQ3E,OAAOhL,EAAQ48B,EAAc38B,EAAS,GAC9C0P,EAAQ3E,OAAOhL,GAAQC,EAASy+B,GAAiB,IAErD/uB,EAAQ3E,OAAOhL,EAAOC,EAAS++B,GAC/BrvB,EAAQpG,IAAIvJ,EAAQg/B,EAAa/+B,EAAS++B,EAAaA,EAAa,EAAGz9D,KAAKukB,GAAK,GAAG,GAChF24C,IAAqBL,KACrBzuB,EAAQ3E,QAAQhL,EAAQ48B,GAAgB,EAAG38B,GAC3C0P,EAAQ3E,OAAOhL,EAAQ,EAAGC,EAASy+B,GACnC/uB,EAAQ3E,QAAQhL,EAAQ48B,GAAgB,EAAG38B,IAE/C0P,EAAQ3E,OAAO+zB,EAAY9+B,GAC3B0P,EAAQpG,IAAIw1B,EAAY9+B,EAAS8+B,EAAYA,EAAYx9D,KAAKukB,GAAK,EAAGvkB,KAAKukB,IAAI,GAC3E24C,IAAqBJ,KACrB1uB,EAAQ3E,OAAO,GAAI/K,EAASy+B,GAAiB,GAC7C/uB,EAAQ3E,QAAQ,EAAI4xB,EAAc38B,EAAS,GAC3C0P,EAAQ3E,OAAO,GAAI/K,EAASy+B,GAAiB,IAEjD/uB,EAAQ3E,OAAO,EAAG6zB,GAClBlvB,EAAQpG,IAAIs1B,EAASA,EAASA,EAASt9D,KAAKukB,GAAe,EAAVvkB,KAAKukB,GAAU,GAAG,GACnE6pB,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,cACI,IAAIoqB,EAAI,EAAGmM,EAAI,EAAGsrC,EAAe7hE,KAAK6hE,eAAgB8B,EAAgB3jE,KAAK2jE,gBAAiBO,EAAYlkE,KAAK0jE,mBAAoBz+B,EAAQjlC,KAAKilC,QAASC,EAASllC,KAAKklC,SAerK,OAdIg/B,IAAcf,IACd5sC,GAAKotC,EACLz+B,GAAUy+B,GAELO,IAAcb,GACnBn+B,GAAUy+B,EAELO,IAAcZ,IACnBl5C,GAAoB,IAAfy3C,EACL58B,GAAS48B,GAEJqC,IAAcd,KACnBn+B,GAAwB,IAAf48B,GAEN,CACHz3C,EAAGA,EACHmM,EAAGA,EACH0O,MAAOA,EACPC,OAAQA,IAIpB,GAAIjjC,UAAU4+C,UAAY,MAC1B,eAAc,IACdlX,GAAQuM,gBAAgB,GAAK,mBAAoBgtB,IACjDv5B,GAAQuM,gBAAgB,GAAK,eAAgB,EAAG7N,KAChDsB,GAAQuM,gBAAgB,GAAK,gBAAiB,EAAG7N,KACjDsB,GAAQuM,gBAAgB,GAAK,eAAgB,EAAG1N,EAAmC,ICjK5E,MAAM,WAAa,GACtB,WAAWoM,GACP,IAAIivB,EAAe7jE,KAAK6jE,eAAgB5+B,EAAQjlC,KAAKilC,QAASC,EAASllC,KAAKklC,SAE5E,GADA0P,EAAQlG,YACHm1B,EAGA,CACD,IAAIC,EAAU,EACVC,EAAW,EACXC,EAAa,EACbC,EAAc,EACU,kBAAjBJ,EACPC,EAAUC,EAAWC,EAAaC,EAAcz9D,KAAKD,IAAIs9D,EAAc5+B,EAAQ,EAAGC,EAAS,IAG3F4+B,EAAUt9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GAC7D6+B,EAAWv9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GAC9D++B,EAAcz9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,GACjE8+B,EAAax9D,KAAKD,IAAIs9D,EAAa,IAAM,EAAG5+B,EAAQ,EAAGC,EAAS,IAEpE0P,EAAQ1E,OAAO4zB,EAAS,GACxBlvB,EAAQ3E,OAAOhL,EAAQ8+B,EAAU,GACjCnvB,EAAQpG,IAAIvJ,EAAQ8+B,EAAUA,EAAUA,EAAqB,EAAVv9D,KAAKukB,GAAU,EAAG,GAAG,GACxE6pB,EAAQ3E,OAAOhL,EAAOC,EAAS++B,GAC/BrvB,EAAQpG,IAAIvJ,EAAQg/B,EAAa/+B,EAAS++B,EAAaA,EAAa,EAAGz9D,KAAKukB,GAAK,GAAG,GACpF6pB,EAAQ3E,OAAO+zB,EAAY9+B,GAC3B0P,EAAQpG,IAAIw1B,EAAY9+B,EAAS8+B,EAAYA,EAAYx9D,KAAKukB,GAAK,EAAGvkB,KAAKukB,IAAI,GAC/E6pB,EAAQ3E,OAAO,EAAG6zB,GAClBlvB,EAAQpG,IAAIs1B,EAASA,EAASA,EAASt9D,KAAKukB,GAAe,EAAVvkB,KAAKukB,GAAU,GAAG,QAxBnE6pB,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GA0B9B0P,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,OAGhC,GAAKiC,UAAU4+C,UAAY,OAC3B,eAAc,IACdlX,GAAQuM,gBAAgB,GAAM,eAAgB,EAAG1N,EAAmC,ICrC7E,MAAM,WAAuB,GAChC,WAAWoM,GACP,MAAMiH,EAAS77C,KAAKmkE,aACpBvvB,EAAQlG,YACRkG,EAAQ1E,OAAO2L,EAAO,GAAGzxB,EAAGyxB,EAAO,GAAGtlB,GACtC,IAAK,IAAIz0B,EAAI,EAAGA,EAAI+5C,EAAOj5C,OAAQd,IAC/B8yC,EAAQ3E,OAAO4L,EAAO/5C,GAAGsoB,EAAGyxB,EAAO/5C,GAAGy0B,GAE1Cqe,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,aACI,MAAMokE,EAAQpkE,KAAKmqC,MAAMi6B,MACnBjC,EAASniE,KAAKmqC,MAAMg4B,QAAU,EAC9BtmB,EAAS,GACf,IAAK,IAAI/5C,EAAI,EAAGA,EAAIsiE,EAAOtiE,IACvB+5C,EAAOv1C,KAAK,CACR8jB,EAAG+3C,EAAS37D,KAAKowB,IAAS,EAAJ90B,EAAQ0E,KAAKukB,GAAMq5C,GACzC7tC,GAAI,EAAI4rC,EAAS37D,KAAKmwB,IAAS,EAAJ70B,EAAQ0E,KAAKukB,GAAMq5C,KAGtD,OAAOvoB,EAEX,cACI,MAAMA,EAAS77C,KAAKmkE,aACpB,IAAI1oB,EAAOI,EAAO,GAAGzxB,EACjBuxB,EAAOE,EAAO,GAAGtlB,EACjBmlB,EAAOG,EAAO,GAAGzxB,EACjBwxB,EAAOC,EAAO,GAAGtlB,EAOrB,OANAslB,EAAOzyC,QAAS4I,IACZypC,EAAOj1C,KAAKD,IAAIk1C,EAAMzpC,EAAMoY,GAC5BuxB,EAAOn1C,KAAK6F,IAAIsvC,EAAM3pC,EAAMoY,GAC5BsxB,EAAOl1C,KAAKD,IAAIm1C,EAAM1pC,EAAMukB,GAC5BqlB,EAAOp1C,KAAK6F,IAAIuvC,EAAM5pC,EAAMukB,KAEzB,CACHnM,EAAGqxB,EACHllB,EAAGmlB,EACHzW,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,GAGvB,WACI,OAAuB,EAAhB17C,KAAKmiE,SAEhB,YACI,OAAuB,EAAhBniE,KAAKmiE,SAEhB,SAASl9B,GACLjlC,KAAKmiE,OAAOl9B,EAAQ,GAExB,UAAUC,GACNllC,KAAKmiE,OAAOj9B,EAAS,IAG7B,GAAejjC,UAAU4+C,UAAY,iBACrC,GAAe5+C,UAAUsvD,WAAY,EACrC,GAAetvD,UAAUsjD,oBAAsB,CAAC,UAChD,eAAc,IACd5b,GAAQuM,gBAAgB,GAAgB,SAAU,EAAG7N,KACrDsB,GAAQuM,gBAAgB,GAAgB,QAAS,EAAG7N,KC5DpD,IAAIg8B,GAAiB,EAAV79D,KAAKukB,GACT,MAAM,WAAa,GACtB,WAAW6pB,GACPA,EAAQlG,YACRkG,EAAQpG,IAAI,EAAG,EAAGxuC,KAAKg7D,cAAe,EAAGqJ,IAAM,GAC/CzvB,EAAQ1E,OAAOlwC,KAAK+6D,cAAe,GACnCnmB,EAAQpG,IAAI,EAAG,EAAGxuC,KAAK+6D,cAAesJ,GAAM,GAAG,GAC/CzvB,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAA4B,EAArBA,KAAK+6D,cAEhB,YACI,OAA4B,EAArB/6D,KAAK+6D,cAEhB,SAAS91B,GACLjlC,KAAK+6D,YAAY91B,EAAQ,GAE7B,UAAUC,GACNllC,KAAK+6D,YAAY71B,EAAS,IAGlC,GAAKjjC,UAAU4+C,UAAY,OAC3B,GAAK5+C,UAAUsvD,WAAY,EAC3B,GAAKtvD,UAAUsjD,oBAAsB,CAAC,cAAe,eACrD,eAAc,IACd5b,GAAQuM,gBAAgB,GAAM,cAAe,EAAG7N,KAChDsB,GAAQuM,gBAAgB,GAAM,cAAe,EAAG7N,KC3BzC,MAAM,WAAe,GACxB,YAAY8M,GACRgB,MAAMhB,GACNn1C,KAAKskE,UAAW,EAChBtkE,KAAK81D,KAAO,IAAI,GAAU,KACtB,IAAIyO,EAAUvkE,KAAKskE,SAEnB,OADAtkE,KAAKskE,UAAW,EACTC,IAEXvkE,KAAKo6C,GAAG,yBAAyB,WAC7Bp6C,KAAKwkE,WAAW,MAEpBxkE,KAAKo6C,GAAG,0BAA0B,WAC9Bp6C,KAAKskE,UAAW,KAEpBtkE,KAAKo6C,GAAG,yBAAyB,WACxBp6C,KAAK81D,KAAK2O,cAGfC,cAAc1kE,KAAK2kE,UACnB3kE,KAAK4kE,mBAGb,WAAWhwB,GACP,IAAIkhB,EAAO91D,KAAK6kE,YAAa58D,EAAQjI,KAAKwkE,aAAcM,EAAc,EAAR78D,EAAW8G,EAAM/O,KAAK21D,aAAaG,GAAOiP,EAAU/kE,KAAKglE,eAAgB56C,EAAIrb,EAAI+1D,EAAM,GAAIvuC,EAAIxnB,EAAI+1D,EAAM,GAAI7/B,EAAQl2B,EAAI+1D,EAAM,GAAI5/B,EAASn2B,EAAI+1D,EAAM,GAAIvC,EAAQviE,KAAKuiE,QAOrO,IANIviE,KAAKmxD,WAAanxD,KAAK4sC,eACvBgI,EAAQlG,YACRkG,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GAC1B0P,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,OAExBuiE,EACA,GAAIwC,EAAS,CACT,IAAIjxB,EAASixB,EAAQjP,GAAOmP,EAAc,EAARh9D,EAClC2sC,EAAQvF,UAAUkzB,EAAOn4C,EAAGmM,EAAG0O,EAAOC,EAAQ4O,EAAOmxB,EAAM,GAAInxB,EAAOmxB,EAAM,GAAIhgC,EAAOC,QAGvF0P,EAAQvF,UAAUkzB,EAAOn4C,EAAGmM,EAAG0O,EAAOC,EAAQ,EAAG,EAAGD,EAAOC,GAIvE,SAAS0P,GACL,IAAIkhB,EAAO91D,KAAK6kE,YAAa58D,EAAQjI,KAAKwkE,aAAcM,EAAc,EAAR78D,EAAW8G,EAAM/O,KAAK21D,aAAaG,GAAOiP,EAAU/kE,KAAKglE,eAAgB//B,EAAQl2B,EAAI+1D,EAAM,GAAI5/B,EAASn2B,EAAI+1D,EAAM,GAEhL,GADAlwB,EAAQlG,YACJq2B,EAAS,CACT,IAAIjxB,EAASixB,EAAQjP,GACjBmP,EAAc,EAARh9D,EACV2sC,EAAQzE,KAAK2D,EAAOmxB,EAAM,GAAInxB,EAAOmxB,EAAM,GAAIhgC,EAAOC,QAGtD0P,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GAE9B0P,EAAQ/F,YACR+F,EAAQ5H,UAAUhtC,MAEtB,mBACI,OAAOm2C,MAAMkc,kBAAiB,GAElC,eACI,IAAI1vD,EAAO3C,KACXA,KAAK2kE,SAAWO,aAAY,WACxBviE,EAAKwiE,iBACN,IAAOnlE,KAAKw1D,aAEnB,QACI,IAAIx1D,KAAKykE,YAAT,CAGA,IAAInmB,EAAQt+C,KAAKw3C,WACjBx3C,KAAK81D,KAAKL,UAAUnX,GACpBt+C,KAAK4kE,eACL5kE,KAAK81D,KAAKrhD,SAEd,OACIzU,KAAK81D,KAAK5pD,OACVw4D,cAAc1kE,KAAK2kE,UAEvB,YACI,OAAO3kE,KAAK81D,KAAK2O,YAErB,eACI,IAAIx8D,EAAQjI,KAAKwkE,aAAcK,EAAY7kE,KAAK6kE,YAAalP,EAAa31D,KAAK21D,aAAcG,EAAOH,EAAWkP,GAAYvjD,EAAMw0C,EAAKlzD,OAAS,EAC3IqF,EAAQqZ,EAAM,EACdthB,KAAKwkE,WAAWv8D,EAAQ,GAGxBjI,KAAKwkE,WAAW,IAI5B,GAAOviE,UAAU4+C,UAAY,SAC7B,eAAc,IACdlX,GAAQuM,gBAAgB,GAAQ,aAChCvM,GAAQuM,gBAAgB,GAAQ,cAChCvM,GAAQuM,gBAAgB,GAAQ,gBAChCvM,GAAQuM,gBAAgB,GAAQ,SAChCvM,GAAQuM,gBAAgB,GAAQ,aAAc,EAAG7N,KACjDsB,GAAQuM,gBAAgB,GAAQ,YAAa,GAAI7N,KACjDsB,GAAQ8b,WAAW,GAAQ,CACvBx9C,MAAO,aACPm9D,SAAU,gBACVC,SAAU,kBCtGP,MAAM,WAAa,GACtB,WAAWzwB,GACP,IAAIomB,EAAch7D,KAAKg7D,cAAeD,EAAc/6D,KAAK+6D,cAAeuK,EAAYtlE,KAAKslE,YACzF1wB,EAAQlG,YACRkG,EAAQ1E,OAAO,EAAG,EAAI6qB,GACtB,IAAK,IAAIj5D,EAAI,EAAGA,EAAgB,EAAZwjE,EAAexjE,IAAK,CACpC,IAAIqgE,EAASrgE,EAAI,IAAM,EAAIi5D,EAAcC,EACrC5wC,EAAI+3C,EAAS37D,KAAKowB,IAAK90B,EAAI0E,KAAKukB,GAAMu6C,GACtC/uC,GAAK,EAAI4rC,EAAS37D,KAAKmwB,IAAK70B,EAAI0E,KAAKukB,GAAMu6C,GAC/C1wB,EAAQ3E,OAAO7lB,EAAGmM,GAEtBqe,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAA4B,EAArBA,KAAK+6D,cAEhB,YACI,OAA4B,EAArB/6D,KAAK+6D,cAEhB,SAAS91B,GACLjlC,KAAK+6D,YAAY91B,EAAQ,GAE7B,UAAUC,GACNllC,KAAK+6D,YAAY71B,EAAS,ICvB3B,SAASqgC,GAAcp+D,GAC1B,OAAOiD,MAAMC,KAAKlD,GDyBtB,GAAKlF,UAAU4+C,UAAY,OAC3B,GAAK5+C,UAAUsvD,WAAY,EAC3B,GAAKtvD,UAAUsjD,oBAAsB,CAAC,cAAe,eACrD,eAAc,IACd5b,GAAQuM,gBAAgB,GAAM,YAAa,EAAG7N,KAC9CsB,GAAQuM,gBAAgB,GAAM,cAAe,EAAG7N,KAChDsB,GAAQuM,gBAAgB,GAAM,cAAe,EAAG7N,KC7BhD,IA8BI,GA9BAm9B,GAAO,OAAQC,GAAS,SAAUC,GAAU,UAAW,GAAe,eAAgBC,GAAa,KAAMC,GAAO,IAAK,GAAO,OAAQC,GAAO,OAAQC,GAAa,OAAQC,GAAM,MAAOC,GAAS,SAAUC,GAAS,SAAUC,GAAS,SAAUC,GAAW,MAAO,GAAQ,IAAK,GAAQ,QAASC,GAAO,OAAQC,GAAO,OAAQ,GAAO,OAAQC,GAAW,IAAK,GAAmB,CAC9W,aACA,WACA,YACA,cACA,UACA,QACA,gBACA,aACA,OACA,QACA,SACA,OACA,WACA,iBACD,GAAoB,GAAiB1jE,OACxC,SAAS2jE,GAAoBC,GACzB,OAAOA,EACFx/D,MAAM,KACNiiB,IAAKk3B,IACNA,EAASA,EAAOxrC,OAChB,MAAM8xD,EAAWtmB,EAAOzyC,QAAQ,MAAQ,EAClCg5D,EAAYvmB,EAAOzyC,QAAQ,MAAQ,GAAKyyC,EAAOzyC,QAAQ,MAAQ,EAIrE,OAHI+4D,IAAaC,IACbvmB,EAAS,IAAIA,MAEVA,IAEN9qC,KAAK,MAGd,SAAS,KACL,OAAI,KAGJ,GAAe6iB,EAAKyc,sBAAsBrI,WAAWq5B,IAC9C,IAEX,SAAS,GAAU/wB,GACfA,EAAQ9E,SAAS9vC,KAAK2mE,aAAc3mE,KAAK4mE,cAAe5mE,KAAK6mE,eAEjE,SAAS,GAAYjyB,GACjBA,EAAQ/D,WAAW7wC,KAAK2mE,aAAc3mE,KAAK4mE,cAAe5mE,KAAK6mE,eAEnE,SAASC,GAAiB3xB,GAOtB,OANAA,EAASA,GAAU,GACdA,EAAO8a,8BACP9a,EAAOkb,8BACPlb,EAAOia,mBACRja,EAAO1F,KAAO0F,EAAO1F,MAAQ,SAE1B0F,EAEJ,MAAM,WAAa,GACtB,YAAYA,GACRgB,MAAM2wB,GAAiB3xB,IACvBn1C,KAAK4mE,cAAgB,EACrB5mE,KAAK6mE,cAAgB,EACrB,IAAK,IAAI/kE,EAAI,EAAGA,EAAI,GAAmBA,IACnC9B,KAAKo6C,GAAG,GAAiBt4C,GAAK,GAAc9B,KAAK+mE,cAErD/mE,KAAK+mE,eAET,WAAWnyB,GACP,IAAIoyB,EAAUhnE,KAAKgnE,QAASC,EAAaD,EAAQpkE,OACjD,GAAK5C,KAAK4vC,OAAV,CAGA,IAAgb9tC,EAA5awzC,EAAUt1C,KAAKs1C,UAAW4xB,EAAWlnE,KAAKknE,WAAYC,EAAennE,KAAKonE,aAAeF,EAAUG,EAAgBrnE,KAAKqnE,gBAAiBC,EAAS,EAAGC,EAAQvnE,KAAKunE,QAASC,EAAaxnE,KAAK0tC,WAAY+5B,EAAgBznE,KAAKynE,gBAAiBh4B,EAAOzvC,KAAKyvC,OAAQi4B,EAAiB1nE,KAAK0nE,iBAAkBC,GAA2D,IAAzCD,EAAeh6D,QAAQ,aAAqBk6D,GAAgE,IAA5CF,EAAeh6D,QAAQ,gBACpZm6D,EAAa,EAEbC,GADAD,EAAaV,EAAe,EACX,GACjBY,EAAiB,EAWrB,IAVAnzB,EAAQ9G,QAAQ,OAAQ9tC,KAAKgoE,mBAC7BpzB,EAAQ9G,QAAQ,eAAgBm4B,IAChCrxB,EAAQ9G,QAAQ,YAAa,IACzBu5B,IAAkBpB,GAClBqB,GAAUtnE,KAAK2tC,YAAcs5B,EAAaE,EAAyB,EAAV7xB,GAAe,EAEnE+xB,IAAkBrB,KACvBsB,EAAStnE,KAAK2tC,YAAcs5B,EAAaE,EAAyB,EAAV7xB,GAE5DV,EAAQ7D,UAAUuE,EAASgyB,EAAShyB,GAC/BxzC,EAAI,EAAGA,EAAImlE,EAAYnlE,IAAK,CACzBgmE,EAAiB,EACjBC,EAAiB,EADrB,IAE0FE,EAAcC,EAASC,EAA7GnyC,EAAMgxC,EAAQllE,GAAI8tC,EAAO5Z,EAAI4Z,KAAM3K,EAAQjP,EAAIiP,MAAOmjC,EAAWpyC,EAAIqyC,gBAwCzE,GAvCAzzB,EAAQpE,OACJ+2B,IAAU,GACVO,GAAkBN,EAAaviC,EAAkB,EAAVqQ,EAElCiyB,IAAU9B,KACfqC,IAAmBN,EAAaviC,EAAkB,EAAVqQ,GAAe,GAEvDqyB,IACA/yB,EAAQpE,OACRoE,EAAQlG,YACRkG,EAAQ1E,OAAO43B,EAAgBD,EAAaE,EAAiBvhE,KAAKq+B,MAAMqiC,EAAW,IACnFe,EAAer4B,EAAK5oC,MAAM,KAAKpE,OAAS,EACxCslE,EAA2B,IAAjBD,EACVE,EACIZ,IAAU7B,IAAW0C,IAAaF,EAC5BV,EAAuB,EAAVlyB,EACbrQ,EACV2P,EAAQ3E,OAAO63B,EAAiBthE,KAAKq+B,MAAMsjC,GAAYN,EAAaE,EAAiBvhE,KAAKq+B,MAAMqiC,EAAW,IAC3GtyB,EAAQuzB,UAAYjB,EAAW,GAC/BtyB,EAAQ0zB,YAAc74B,EACtBmF,EAAQhE,SACRgE,EAAQtE,WAERs3B,IACAhzB,EAAQpE,OACRoE,EAAQlG,YACRkG,EAAQ1E,OAAO43B,EAAgBD,EAAaE,GAC5CE,EAAer4B,EAAK5oC,MAAM,KAAKpE,OAAS,EACxCslE,EAA2B,IAAjBD,EACVE,EACIZ,IAAU7B,IAAW0C,IAAaF,EAC5BV,EAAuB,EAAVlyB,EACbrQ,EACV2P,EAAQ3E,OAAO63B,EAAiBthE,KAAKq+B,MAAMsjC,GAAYN,EAAaE,GACpEnzB,EAAQuzB,UAAYjB,EAAW,GAC/BtyB,EAAQ0zB,YAAc74B,EACtBmF,EAAQhE,SACRgE,EAAQtE,WAEU,IAAlBm3B,GAAuBF,IAAU7B,GAAS,CAC1CuC,EAAer4B,EAAK5oC,MAAM,KAAKpE,OAAS,EAExC,IADA,IAAIoI,EAAQu6D,GAAc31B,GACjB24B,EAAK,EAAGA,EAAKv9D,EAAMpI,OAAQ2lE,IAAM,CACtC,IAAIC,EAASx9D,EAAMu9D,GACJ,MAAXC,GAAmBJ,GAAYb,IAAU7B,KACzCoC,IAAmBN,EAAuB,EAAVlyB,EAAcrQ,GAASgjC,GAE3DjoE,KAAK4mE,cAAgBkB,EACrB9nE,KAAK6mE,cAAgBgB,EAAaE,EAClC/nE,KAAK2mE,aAAe6B,EACpB5zB,EAAQqmB,gBAAgBj7D,MACxB8nE,GAAkB9nE,KAAKyoE,YAAYD,GAAQvjC,MAAQwiC,QAIvDznE,KAAK4mE,cAAgBkB,EACrB9nE,KAAK6mE,cAAgBgB,EAAaE,EAClC/nE,KAAK2mE,aAAe/2B,EACpBgF,EAAQqmB,gBAAgBj7D,MAE5B40C,EAAQtE,UACJ22B,EAAa,IACbY,GAAcV,KAI1B,SAASvyB,GACL,IAAI3P,EAAQjlC,KAAK0tC,WAAYxI,EAASllC,KAAK2tC,YAC3CiH,EAAQlG,YACRkG,EAAQzE,KAAK,EAAG,EAAGlL,EAAOC,GAC1B0P,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,QAAQ4vC,GACJ,IAAI5vB,EAAMkY,EAAKgQ,UAAU0H,GACnBA,EACS,OAATA,QAA0B/sC,IAAT+sC,EACb,GACAA,EAAO,GAEjB,OADA5vC,KAAKqqC,SAASw7B,GAAM7lD,GACbhgB,KAEX,WACI,IAAI6oC,EAAS7oC,KAAKmqC,MAAMlF,QAAUugC,SAA6B3iE,IAArB7C,KAAKmqC,MAAMlF,MACrD,OAAO4D,EAAS7oC,KAAK0oE,eAAkC,EAAjB1oE,KAAKs1C,UAAgBt1C,KAAKmqC,MAAMlF,MAE1E,YACI,IAAI4D,EAAS7oC,KAAKmqC,MAAMjF,SAAWsgC,SAA8B3iE,IAAtB7C,KAAKmqC,MAAMjF,OACtD,OAAO2D,EACD7oC,KAAKknE,WAAalnE,KAAKgnE,QAAQpkE,OAAS5C,KAAKonE,aAC1B,EAAjBpnE,KAAKs1C,UACPt1C,KAAKmqC,MAAMjF,OAErB,eACI,OAAOllC,KAAK2oE,UAEhB,gBAEI,OADAzwC,EAAKuN,KAAK,6HACHzlC,KAAK4oE,WAEhB,YAAYh5B,GACR,IAA8Di5B,EAA1Dz8B,EAAW,KAAmB86B,EAAWlnE,KAAKknE,WAKlD,OAJA96B,EAASoE,OACTpE,EAAS08B,KAAO9oE,KAAKgoE,kBACrBa,EAAUz8B,EAAS2D,YAAYH,GAC/BxD,EAASkE,UACF,CACHrL,MAAO4jC,EAAQ5jC,MACfC,OAAQgiC,GAGhB,kBACI,OAAQlnE,KAAK+oE,YACT,GACA/oE,KAAKgpE,cACL,IACChpE,KAAKknE,WAAaf,IACnBI,GAAoBvmE,KAAKwmE,cAEjC,aAAajoD,GACLve,KAAKunE,UAAY7B,KACjBnnD,EAAOA,EAAK5J,QAEhB,IAAIswB,EAAQjlC,KAAKipE,cAAc1qD,GAC/B,OAAOve,KAAKgnE,QAAQ1gE,KAAK,CACrBspC,KAAMrxB,EACN0mB,MAAOA,EACPojC,iBAAiB,IAGzB,cAAcz4B,GACV,IAAI63B,EAAgBznE,KAAKynE,gBACrB7kE,EAASgtC,EAAKhtC,OAClB,OAAQ,KAAkBmtC,YAAYH,GAAM3K,OACvCriC,EAAS6kE,GAAiB7kE,EAAS,GAAK,GAEjD,eACI,IAAIsmE,EAAQlpE,KAAK4vC,OAAO5oC,MAAM,MAAOkgE,GAAYlnE,KAAKknE,WAAYyB,EAAY,EAAGxB,EAAennE,KAAKonE,aAAeF,EAAUjiC,EAAQjlC,KAAKmqC,MAAMlF,MAAOC,EAASllC,KAAKmqC,MAAMjF,OAAQikC,EAAalkC,IAAUugC,SAAkB3iE,IAAVoiC,EAAqBmkC,EAAclkC,IAAWsgC,SAAmB3iE,IAAXqiC,EAAsBoQ,EAAUt1C,KAAKs1C,UAAWzF,EAAW5K,EAAkB,EAAVqQ,EAAa+zB,EAAcnkC,EAAmB,EAAVoQ,EAAag0B,EAAkB,EAAG3lD,EAAO3jB,KAAK2jB,OAAQ4lD,EAAa5lD,IAAS,GAAM6lD,EAAa7lD,IAAS0iD,IAAQkD,EAAYE,EAAoBzpE,KAAK0pE,WACrgB1pE,KAAKgnE,QAAU,GACf,KAAkB8B,KAAO9oE,KAAKgoE,kBAE9B,IADA,IAAI2B,EAAkBF,EAAoBzpE,KAAKipE,cAAc3C,IAAY,EAChEjmE,EAAI,EAAGgM,EAAM68D,EAAMtmE,OAAQvC,EAAIgM,IAAOhM,EAAG,CAC9C,IAAIke,EAAO2qD,EAAM7oE,GACb8nE,EAAYnoE,KAAKipE,cAAc1qD,GACnC,GAAI4qD,GAAchB,EAAYt4B,EAC1B,MAAOtxB,EAAK3b,OAAS,EAAG,CACpB,IAAIgnE,EAAM,EAAGC,EAAOtrD,EAAK3b,OAAQyE,EAAQ,GAAIyiE,EAAa,EAC1D,MAAOF,EAAMC,EAAM,CACf,IAAIE,EAAOH,EAAMC,IAAU,EAAG9lC,EAASxlB,EAAK9Z,MAAM,EAAGslE,EAAM,GAAIC,EAAchqE,KAAKipE,cAAcllC,GAAU4lC,EACtGK,GAAen6B,GACf+5B,EAAMG,EAAM,EACZ1iE,EAAQ08B,EACR+lC,EAAaE,GAGbH,EAAOE,EAGf,IAAI1iE,EAmDA,MAlDA,GAAImiE,EAAY,CACZ,IAAIS,EACAC,EAAW3rD,EAAKlX,EAAMzE,QACtBunE,EAAoBD,IAAa,IAASA,IAAatE,GAEvDqE,EADAE,GAAqBL,GAAcj6B,EACvBxoC,EAAMzE,OAId4D,KAAK6F,IAAIhF,EAAM+iE,YAAY,IAAQ/iE,EAAM+iE,YAAYxE,KACjD,EAERqE,EAAY,IACZL,EAAMK,EACN5iE,EAAQA,EAAM5C,MAAM,EAAGmlE,GACvBE,EAAa9pE,KAAKipE,cAAc5hE,IAOxC,GAJAA,EAAQA,EAAMgjE,YACdrqE,KAAKsqE,aAAajjE,GAClBshE,EAAYniE,KAAK6F,IAAIs8D,EAAWmB,GAChCR,GAAmBnC,GACdoC,GACAH,GAAeE,EAAkBnC,EAAekC,EAAc,CAC/D,IAAIjB,EAAWpoE,KAAKgnE,QAAQhnE,KAAKgnE,QAAQpkE,OAAS,GAClD,GAAIwlE,GACIqB,EAAmB,CACnB,IAAIc,EAAYvqE,KAAKipE,cAAcb,EAASx4B,KAAO02B,IAAYz2B,EAC1D06B,IACDnC,EAASx4B,KAAOw4B,EAASx4B,KAAKnrC,MAAM,EAAG2jE,EAASx4B,KAAKhtC,OAAS,IAElE5C,KAAKgnE,QAAQrpB,OAAO39C,KAAKgnE,QAAQpkE,OAAS,EAAG,GAC7C5C,KAAKsqE,aAAalC,EAASx4B,KAAO02B,IAG1C,MAIJ,GAFA/nD,EAAOA,EAAK9Z,MAAMmlE,GAClBrrD,EAAOA,EAAKisD,WACRjsD,EAAK3b,OAAS,IACdulE,EAAYnoE,KAAKipE,cAAc1qD,GAC3B4pD,GAAat4B,GAAU,CACvB7vC,KAAKsqE,aAAa/rD,GAClB+qD,GAAmBnC,EACnBwB,EAAYniE,KAAK6F,IAAIs8D,EAAWR,GAChC,YAUhBnoE,KAAKsqE,aAAa/rD,GAClB+qD,GAAmBnC,EACnBwB,EAAYniE,KAAK6F,IAAIs8D,EAAWR,GAEpC,GAAIiB,GAAeE,EAAkBnC,EAAekC,EAChD,MAEArpE,KAAKgnE,QAAQhnE,KAAKgnE,QAAQpkE,OAAS,KACnC5C,KAAKgnE,QAAQhnE,KAAKgnE,QAAQpkE,OAAS,GAAGylE,iBAAkB,GAGhEroE,KAAK4oE,WAAa1B,EAClBlnE,KAAK2oE,UAAYA,EAErB,wBACI,OAAO,GAGf,GAAK1mE,UAAUuvC,UAAY,GAC3B,GAAKvvC,UAAUsxC,YAAc,GAC7B,GAAKtxC,UAAU4+C,UAAYilB,GAC3B,GAAK7jE,UAAUsjD,oBAAsB,CACjC,OACA,WACA,UACA,OACA,aACA,iBAEJ,eAAc,IACd5b,GAAQS,gBAAgB,GAAM,QAASxB,KACvCe,GAAQS,gBAAgB,GAAM,SAAUxB,KACxCe,GAAQuM,gBAAgB,GAAM,aAAc,SAC5CvM,GAAQuM,gBAAgB,GAAM,WAAY,GAAI7N,KAC9CsB,GAAQuM,gBAAgB,GAAM,YAAagwB,IAC3Cv8B,GAAQuM,gBAAgB,GAAM,cAAegwB,IAC7Cv8B,GAAQuM,gBAAgB,GAAM,UAAW,EAAG7N,KAC5CsB,GAAQuM,gBAAgB,GAAM,QAAS,IACvCvM,GAAQuM,gBAAgB,GAAM,gBAAiB6vB,IAC/Cp8B,GAAQuM,gBAAgB,GAAM,aAAc,EAAG7N,KAC/CsB,GAAQuM,gBAAgB,GAAM,OAAQkwB,IACtCz8B,GAAQuM,gBAAgB,GAAM,YAAY,EAAO7M,KACjDM,GAAQuM,gBAAgB,GAAM,gBAAiB,EAAG7N,KAClDsB,GAAQuM,gBAAgB,GAAM,OAAQ,GAAIpN,KAC1Ca,GAAQuM,gBAAgB,GAAM,iBAAkB,IC1VhD,IAAI,GAAe,GAAI,GAAS,SAChC,SAAS,GAAUtB,GACfA,EAAQ9E,SAAS9vC,KAAKyqE,YAAa,EAAG,GAE1C,SAAS,GAAY71B,GACjBA,EAAQ/D,WAAW7wC,KAAKyqE,YAAa,EAAG,GAErC,MAAM,WAAiB,GAC1B,YAAYt1B,GACRgB,MAAMhB,GACNn1C,KAAK0qE,YAAcxyC,EAAKyc,sBACxB30C,KAAKi9D,UAAY,GACjBj9D,KAAKi9D,UAAY,GAAKE,cAAcn9D,KAAKmqC,MAAMr6B,MAC/C9P,KAAKo6C,GAAG,oBAAoB,WACxBp6C,KAAKi9D,UAAY,GAAKE,cAAcn9D,KAAKmqC,MAAMr6B,MAC/C9P,KAAK+mE,kBAET/mE,KAAKo6C,GAAG,mIAAoIp6C,KAAK+mE,cACjJ/mE,KAAK+mE,eAET,WAAWnyB,GACPA,EAAQ9G,QAAQ,OAAQ9tC,KAAKgoE,mBAC7BpzB,EAAQ9G,QAAQ,eAAgB9tC,KAAK2qE,gBACrC/1B,EAAQ9G,QAAQ,YAAa,QAC7B8G,EAAQpE,OACR,IAAIk3B,EAAiB1nE,KAAK0nE,iBACtBj4B,EAAOzvC,KAAKyvC,OACZy3B,EAAWlnE,KAAKknE,WAChB0D,EAAY5qE,KAAK4qE,UACE,cAAnBlD,GACA9yB,EAAQlG,YAEZ,IAAK,IAAIruC,EAAI,EAAGA,EAAIuqE,EAAUhoE,OAAQvC,IAAK,CACvCu0C,EAAQpE,OACR,IAAIq6B,EAAKD,EAAUvqE,GAAGwqE,GACtBj2B,EAAQ7D,UAAU85B,EAAGzgD,EAAGygD,EAAGt0C,GAC3Bqe,EAAQrE,OAAOq6B,EAAUvqE,GAAGs3B,UAC5B33B,KAAKyqE,YAAcG,EAAUvqE,GAAGuvC,KAChCgF,EAAQqmB,gBAAgBj7D,MACD,cAAnB0nE,IACU,IAANrnE,GACAu0C,EAAQ1E,OAAO,EAAGg3B,EAAW,EAAI,GAErCtyB,EAAQ3E,OAAOi3B,EAAUA,EAAW,EAAI,IAE5CtyB,EAAQtE,UAEW,cAAnBo3B,IACA9yB,EAAQ0zB,YAAc74B,EACtBmF,EAAQuzB,UAAYjB,EAAW,GAC/BtyB,EAAQhE,UAEZgE,EAAQtE,UAEZ,SAASsE,GACLA,EAAQlG,YACR,IAAIk8B,EAAY5qE,KAAK4qE,UACrB,GAAIA,EAAUhoE,QAAU,EAAG,CACvB,IAAIioE,EAAKD,EAAU,GAAGC,GACtBj2B,EAAQ1E,OAAO26B,EAAGzgD,EAAGygD,EAAGt0C,GAE5B,IAAK,IAAIl2B,EAAI,EAAGA,EAAIuqE,EAAUhoE,OAAQvC,IAAK,CACvC,IAAIwmC,EAAK+jC,EAAUvqE,GAAGwmC,GACtB+N,EAAQ3E,OAAOpJ,EAAGzc,EAAGyc,EAAGtQ,GAE5Bqe,EAAQ9G,QAAQ,YAAa9tC,KAAKknE,YAClCtyB,EAAQ9G,QAAQ,cAAe9tC,KAAKo0C,UACpCQ,EAAQhE,SAEZ,eACI,OAAO5wC,KAAK2oE,UAEhB,gBAEI,OADAzwC,EAAKuN,KAAK,6HACHzlC,KAAK4oE,WAEhB,QAAQh5B,GACJ,OAAO,GAAK3tC,UAAU6oE,QAAQtqE,KAAKR,KAAM4vC,GAE7C,kBACI,OAAO,GAAK3tC,UAAU+lE,gBAAgBxnE,KAAKR,MAE/C,aAAa4vC,GACT,IAAI86B,EAAc1qE,KAAK0qE,YACnBt+B,EAAWs+B,EAAYp+B,WAAW,MACtCF,EAASoE,OACTpE,EAAS08B,KAAO9oE,KAAKgoE,kBACrB,IAAIa,EAAUz8B,EAAS2D,YAAYH,GAEnC,OADAxD,EAASkE,UACF,CACHrL,MAAO4jC,EAAQ5jC,MACfC,OAAQ9e,SAASpmB,KAAKmqC,MAAM+8B,SAAU,KAG9C,eACI,IAAIvkE,EAAO3C,KACP6V,EAAO7V,KAAK+qE,aAAa/qE,KAAKmqC,MAAMyF,MACpC63B,EAAgBznE,KAAKynE,gBACrBF,EAAQvnE,KAAKunE,QACbyD,EAAchrE,KAAKgrE,cACvBhrE,KAAK2oE,UAAY9yD,EAAKovB,MACtBjlC,KAAK4oE,WAAa/yD,EAAKqvB,OACvB,IAAI+lC,EAAgBzkE,KAAK6F,IAAIrM,KAAK2oE,YAAc3oE,KAAKmqC,MAAMyF,MAAQ,IAAIhtC,OAAS,GAAK6kE,EAAe,GACpGznE,KAAK4qE,UAAY,GAEjB,IADA,IAAIM,EAAgB,EACX5qE,EAAI,EAAGA,EAAIqC,EAAKs6D,UAAUr6D,OAAQtC,IACnCqC,EAAKs6D,UAAU38D,GAAG48D,WAAa,IAC/BgO,GAAiBvoE,EAAKs6D,UAAU38D,GAAG48D,YAG3C,IAAIppB,EAAS,EACC,WAAVyzB,IACAzzB,EAASttC,KAAK6F,IAAI,EAAG6+D,EAAgB,EAAID,EAAgB,IAE/C,UAAV1D,IACAzzB,EAASttC,KAAK6F,IAAI,EAAG6+D,EAAgBD,IA+HzC,IA7HA,IAEIJ,EAAIhkC,EAAIskC,EAFRC,EAAU7F,GAAcvlE,KAAK4vC,QAC7Bq4B,EAAejoE,KAAK4vC,OAAO5oC,MAAM,KAAKpE,OAAS,EAE/CyoE,GAAU,EACVC,EAAW,EACXC,EAAqB,WACrBD,EAAW,EAEX,IADA,IAAIE,EAAW7oE,EAAKs6D,UACX1nD,EAAI81D,EAAS,EAAG91D,EAAIi2D,EAAS5oE,OAAQ2S,IAAK,CAC/C,GAAIi2D,EAASj2D,GAAG2nD,WAAa,EAEzB,OADAmO,EAAS91D,EACFi2D,EAASj2D,GAEa,MAAxBi2D,EAASj2D,GAAG8nD,UACjBwN,EAAK,CACDzgD,EAAGohD,EAASj2D,GAAGsmC,OAAO,GACtBtlB,EAAGi1C,EAASj2D,GAAGsmC,OAAO,KAIlC,MAAO,IAEP4vB,EAA4B,SAAU/qE,GACtC,IAAIgrE,EAAa/oE,EAAKooE,aAAarqE,GAAGukC,MAAQwiC,EACpC,MAAN/mE,GAAuB,YAAV6mE,IACbmE,IAAeR,EAAgBD,GAAiBhD,GAEpD,IAAI0D,EAAU,EACVC,EAAW,EACf/kC,OAAKhkC,EACL,MAAO2D,KAAK0tC,IAAIw3B,EAAaC,GAAWD,EAAa,KACjDE,EAAW,GAAI,CACfA,IACA,IAAIC,EAAuBF,EAC3B,WAAmB9oE,IAAZsoE,EACHA,EAAUI,IACNJ,GACAU,EAAuBV,EAAQjO,WAAawO,IAC5CG,GAAwBV,EAAQjO,WAChCiO,OAAUtoE,GAGlB,GAAIsoE,IAAY,SAAatoE,IAAPgoE,EAClB,OAEJ,IAAIiB,GAAiB,EACrB,OAAQX,EAAQ9N,SACZ,IAAK,IACG,GAAKsB,cAAckM,EAAGzgD,EAAGygD,EAAGt0C,EAAG40C,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,IAAM6vB,EACvE7kC,EAAK,GAAKm3B,eAAe0N,EAAYb,EAAGzgD,EAAGygD,EAAGt0C,EAAG40C,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIgvB,EAAGzgD,EAAGygD,EAAGt0C,GAGhG40C,OAAUtoE,EAEd,MACJ,IAAK,IACD,IAAI4R,EAAQ02D,EAAQtvB,OAAO,GACvB4hB,EAAS0N,EAAQtvB,OAAO,GACxBnnC,EAAMy2D,EAAQtvB,OAAO,GAAK4hB,EACb,IAAb6N,EACAA,EAAW72D,EAAQ,KAEdi3D,EAAaC,EAClBL,GAAc9kE,KAAKukB,GAAK,IAAS0yC,EAAUj3D,KAAK0tC,IAAIupB,GAGpD6N,GAAc9kE,KAAKukB,GAAK,IAAS0yC,EAAUj3D,KAAK0tC,IAAIupB,IAEnDA,EAAS,GAAK6N,EAAW52D,GACzB+oD,GAAU,GAAK6N,EAAW52D,KAC3B42D,EAAW52D,EACXo3D,GAAiB,GAErBjlC,EAAK,GAAKg3B,wBAAwBsN,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIyvB,EAAUH,EAAQtvB,OAAO,IACvI,MACJ,IAAK,IACgB,IAAbyvB,EAEIA,EADAI,EAAaP,EAAQjO,WACV,KAGAwO,EAAaP,EAAQjO,WAG/BwO,EAAaC,EAClBL,IAAaI,EAAaC,GAAWR,EAAQjO,WAAa,EAG1DoO,EAAW9kE,KAAK6F,IAAIi/D,GAAYK,EAAUD,GAAcP,EAAQjO,WAAa,EAAG,GAEhFoO,EAAW,IACXA,EAAW,EACXQ,GAAiB,GAErBjlC,EAAK,GAAKi3B,sBAAsBwN,EAAUH,EAAQ12D,MAAM2V,EAAG+gD,EAAQ12D,MAAM8hB,EAAG40C,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,IAC1L,MACJ,IAAK,IACgB,IAAbyvB,EACAA,EAAWI,EAAaP,EAAQjO,WAE3BwO,EAAaC,EAClBL,IAAaI,EAAaC,GAAWR,EAAQjO,WAG7CoO,IAAaK,EAAUD,GAAcP,EAAQjO,WAE7CoO,EAAW,IACXA,EAAW,EACXQ,GAAiB,GAErBjlC,EAAK,GAAKo3B,0BAA0BqN,EAAUH,EAAQ12D,MAAM2V,EAAG+gD,EAAQ12D,MAAM8hB,EAAG40C,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,GAAIsvB,EAAQtvB,OAAO,IACxJ,WAEGh5C,IAAPgkC,IACA8kC,EAAU,GAAKhN,cAAckM,EAAGzgD,EAAGygD,EAAGt0C,EAAGsQ,EAAGzc,EAAGyc,EAAGtQ,IAElDu1C,IACAA,GAAiB,EACjBX,OAAUtoE,KAIlBkpE,EAAW,IACXL,EAAa/oE,EAAKooE,aAAagB,GAAU9mC,MAAQwiC,EACjDuE,EAAkBl4B,EAAS43B,EAAa,EACnCrqD,EAAI,EAAGA,EAAI2qD,EAAiB3qD,IAAK,CAEtC,GADAoqD,EAA0BM,QACflpE,IAAPgoE,QAA2BhoE,IAAPgkC,EACpB,MAEJgkC,EAAKhkC,EAET,IAAK,IAAIxmC,EAAI,EAAGA,EAAI+qE,EAAQxoE,OAAQvC,IAAK,CAErC,GADAorE,EAA0BL,EAAQ/qE,SACvBwC,IAAPgoE,QAA2BhoE,IAAPgkC,EACpB,MAEJ,IAAI5B,EAAQ,GAAK05B,cAAckM,EAAGzgD,EAAGygD,EAAGt0C,EAAGsQ,EAAGzc,EAAGyc,EAAGtQ,GAChD01C,EAAO,EACX,GAAIjB,EACA,IACIiB,EAAOjB,EAAYI,EAAQ/qE,EAAI,GAAI+qE,EAAQ/qE,IAAML,KAAKknE,WAE1D,MAAOv+D,GACHsjE,EAAO,EAGfpB,EAAGzgD,GAAK6hD,EACRplC,EAAGzc,GAAK6hD,EACRjsE,KAAK2oE,WAAasD,EAClB,IAAIC,EAAW,GAAKlO,eAAeiO,EAAOhnC,EAAQ,EAAK4lC,EAAGzgD,EAAGygD,EAAGt0C,EAAGsQ,EAAGzc,EAAGyc,EAAGtQ,GACxEoB,EAAWnxB,KAAKo7D,MAAM/6B,EAAGtQ,EAAIs0C,EAAGt0C,EAAGsQ,EAAGzc,EAAIygD,EAAGzgD,GACjDpqB,KAAK4qE,UAAUtkE,KAAK,CAChB6lE,WAAYD,EAAS9hD,EACrBgiD,WAAYF,EAAS31C,EACrBqZ,KAAMw7B,EAAQ/qE,GACds3B,SAAUA,EACVkzC,GAAIA,EACJhkC,GAAIA,IAERgkC,EAAKhkC,GAGb,cACI,IAAK7mC,KAAK4qE,UAAUhoE,OAChB,MAAO,CACHwnB,EAAG,EACHmM,EAAG,EACH0O,MAAO,EACPC,OAAQ,GAGhB,IAAI2W,EAAS,GACb77C,KAAK4qE,UAAUxhE,SAAQ,SAAUijE,GAC7BxwB,EAAOv1C,KAAK+lE,EAAKxB,GAAGzgD,GACpByxB,EAAOv1C,KAAK+lE,EAAKxB,GAAGt0C,GACpBslB,EAAOv1C,KAAK+lE,EAAKxlC,GAAGzc,GACpByxB,EAAOv1C,KAAK+lE,EAAKxlC,GAAGtQ,MAOxB,IALA,IAIInM,EAAGmM,EAJHklB,EAAOI,EAAO,IAAM,EACpBF,EAAOE,EAAO,IAAM,EACpBH,EAAOG,EAAO,IAAM,EACpBD,EAAOC,EAAO,IAAM,EAEfx7C,EAAI,EAAGA,EAAIw7C,EAAOj5C,OAAS,EAAGvC,IACnC+pB,EAAIyxB,EAAW,EAAJx7C,GACXk2B,EAAIslB,EAAW,EAAJx7C,EAAQ,GACnBo7C,EAAOj1C,KAAKD,IAAIk1C,EAAMrxB,GACtBuxB,EAAOn1C,KAAK6F,IAAIsvC,EAAMvxB,GACtBsxB,EAAOl1C,KAAKD,IAAIm1C,EAAMnlB,GACtBqlB,EAAOp1C,KAAK6F,IAAIuvC,EAAMrlB,GAE1B,IAAI2wC,EAAWlnE,KAAKknE,WACpB,MAAO,CACH98C,EAAGqxB,EAAOyrB,EAAW,EACrB3wC,EAAGmlB,EAAOwrB,EAAW,EACrBjiC,MAAO0W,EAAOF,EAAOyrB,EACrBhiC,OAAQ0W,EAAOF,EAAOwrB,IAIlC,GAASjlE,UAAUuvC,UAAY,GAC/B,GAASvvC,UAAUsxC,YAAc,GACjC,GAAStxC,UAAUoyC,aAAe,GAClC,GAASpyC,UAAUuyC,eAAiB,GACpC,GAASvyC,UAAU4+C,UAAY,WAC/B,GAAS5+C,UAAUsjD,oBAAsB,CAAC,OAAQ,WAAY,QAC9D,eAAc,IACd5b,GAAQuM,gBAAgB,GAAU,QAClCvM,GAAQuM,gBAAgB,GAAU,aAAc,SAChDvM,GAAQuM,gBAAgB,GAAU,WAAY,GAAI7N,KAClDsB,GAAQuM,gBAAgB,GAAU,YAAa,IAC/CvM,GAAQuM,gBAAgB,GAAU,QAAS,QAC3CvM,GAAQuM,gBAAgB,GAAU,gBAAiB,EAAG7N,KACtDsB,GAAQuM,gBAAgB,GAAU,eAAgB,UAClDvM,GAAQuM,gBAAgB,GAAU,cAAe,IACjDvM,GAAQuM,gBAAgB,GAAU,OAAQ,IAC1CvM,GAAQuM,gBAAgB,GAAU,iBAAkB,MACpDvM,GAAQuM,gBAAgB,GAAU,cAAe,MC7UjD,IAAIo2B,GAAc,WACd,GAAmB,CACnB,sBACA,2BACA,sBACA,uBACA,mBACA,sBACA,qBACA,0BACA,mBACA,qBACA,0BACA,mBACA,2BACA,sBAECrjD,IAAKtgB,GAAMA,EAAI,IAAI2jE,IACnBj3D,KAAK,KACNk3D,GAAa,YACb,GAAuB,CACvB,cACA,eACA,eACA,eACA,cACA,cACA,iBACA,gBACA,gBACA,0BACA,qBAEAC,GAAS,CACT,YAAa,GACb,aAAc,EACd,YAAa,GACb,gBAAiB,GACjB,cAAe,GACf,eAAgB,IAChB,gBAAiB,IACjB,eAAgB,KAEpB,MAAMC,GAAe,iBAAkB,OAAMrhD,QAC7C,SAASshD,GAAUC,EAAYj2C,GAC3B,GAAmB,YAAfi2C,EACA,MAAO,YAEXj2C,GAAOwB,EAAKwN,SAAS8mC,GAAOG,IAAe,GAC3C,IAAIlhD,GAAUyM,EAAKyN,SAASjP,GAAO,IAAO,KAAO,IACjD,OAAIwB,EAAK00C,SAASnhD,EAAO,MAAY,MAAQyM,EAAK00C,SAASnhD,EAAO,EAAG,MAC1D,YAEFyM,EAAK00C,SAASnhD,EAAO,KAAW,MAC9B,cAEFyM,EAAK00C,SAASnhD,EAAO,KAAW,OAC9B,YAEFyM,EAAK00C,SAASnhD,EAAO,MAAY,OAC/B,cAEFyM,EAAK00C,SAASnhD,EAAO,MAAY,OAC/B,YAEFyM,EAAK00C,SAASnhD,EAAO,MAAY,OAC/B,cAEFyM,EAAK00C,SAASnhD,EAAO,MAAY,OAC/B,YAEFyM,EAAK00C,SAASnhD,EAAO,MAAY,OAC/B,eAGPyM,EAAK1zB,MAAM,uDAAyDinB,GAC7D,WAGf,IAAIohD,GAAgB,CAChB,WACA,aACA,YACA,eACA,cACA,cACA,gBACA,gBAEA/rD,GAAmB,IACvB,SAASgsD,GAAUrgC,GACf,MAAO,CACHriB,EAAGqiB,EAAMriB,EACJqiB,EAAMxH,MAAQ,EAAKz+B,KAAKmwB,IAAI8V,EAAM9U,UAClC8U,EAAMvH,OAAS,EAAK1+B,KAAKowB,KAAK6V,EAAM9U,UACzCpB,EAAGkW,EAAMlW,EACJkW,EAAMvH,OAAS,EAAK1+B,KAAKmwB,IAAI8V,EAAM9U,UACnC8U,EAAMxH,MAAQ,EAAKz+B,KAAKowB,IAAI6V,EAAM9U,WAG/C,SAASo1C,GAAkBtgC,EAAOugC,EAAUh7D,GACxC,MAAMoY,EAAIpY,EAAMoY,GACXqiB,EAAMriB,EAAIpY,EAAMoY,GAAK5jB,KAAKmwB,IAAIq2C,IAC9BvgC,EAAMlW,EAAIvkB,EAAMukB,GAAK/vB,KAAKowB,IAAIo2C,GAC7Bz2C,EAAIvkB,EAAMukB,GACXkW,EAAMriB,EAAIpY,EAAMoY,GAAK5jB,KAAKowB,IAAIo2C,IAC9BvgC,EAAMlW,EAAIvkB,EAAMukB,GAAK/vB,KAAKmwB,IAAIq2C,GACnC,OAAOjsE,OAAOiU,OAAOjU,OAAOiU,OAAO,GAAIy3B,GAAQ,CAAE9U,SAAU8U,EAAM9U,SAAWq1C,EAAU5iD,IAClFmM,MAER,SAAS02C,GAAmBxgC,EAAOygC,GAC/B,MAAMC,EAASL,GAAUrgC,GACzB,OAAOsgC,GAAkBtgC,EAAOygC,EAAUC,GAE9C,SAASC,GAAQC,EAAOC,EAAgBC,GACpC,IAAIC,EAAUF,EACd,IAAK,IAAIjtE,EAAI,EAAGA,EAAIgtE,EAAMzqE,OAAQvC,IAAK,CACnC,MAAMorB,EAAQ,OAAM22B,SAASirB,EAAMhtE,IAC7BotE,EAAUjnE,KAAK0tC,IAAIzoB,EAAQ6hD,IAA6B,EAAV9mE,KAAKukB,IACnD2iD,EAAMlnE,KAAKD,IAAIknE,EAAmB,EAAVjnE,KAAKukB,GAAS0iD,GACxCC,EAAMH,IACNC,EAAU/hD,GAGlB,OAAO+hD,EAEJ,MAAM,WAAoB,GAC7B,YAAYr4B,GACRgB,MAAMhB,GACNn1C,KAAK2tE,eAAgB,EACrB3tE,KAAK4tE,kBACL5tE,KAAK6tE,iBAAmB7tE,KAAK6tE,iBAAiBhsE,KAAK7B,MACnDA,KAAK8tE,eAAiB9tE,KAAK8tE,eAAejsE,KAAK7B,MAC/CA,KAAK83D,OAAS93D,KAAK83D,OAAOj2D,KAAK7B,MAC/BA,KAAKo6C,GAAG,GAAkBp6C,KAAK83D,QAC3B93D,KAAK+tE,WACL/tE,KAAK83D,SAGb,SAAS1wC,GAEL,OADApnB,KAAKguE,QAAQ5mD,GACNpnB,KAEX,QAAQonB,GAEJ,OADA8Q,EAAKuN,KAAK,6HACHzlC,KAAKiuE,SAAS,CAAC7mD,IAE1B,UACI,OAAOpnB,KAAKkuE,QAAUluE,KAAKkuE,OAAO,GAEtC,qBACI,OAAO5B,GAActsE,KAAKi5C,IAE9B,SAAS0F,EAAQ,IACT3+C,KAAKkuE,QAAUluE,KAAKkuE,OAAOtrE,QAC3B5C,KAAKmuE,SAETnuE,KAAKkuE,OAASvvB,EACO,IAAjBA,EAAM/7C,QAAgB5C,KAAKouE,wBAC3BpuE,KAAK23B,SAASgnB,EAAM,GAAG0vB,uBAGvBruE,KAAK23B,SAAS,GAElB33B,KAAKkuE,OAAO9kE,QAASge,IACjB,MAAMknD,EAAW,KACe,IAAxBtuE,KAAK2+C,QAAQ/7C,QAAgB5C,KAAKouE,yBAClCpuE,KAAK23B,SAAS33B,KAAK2+C,QAAQ,GAAG0vB,uBAElCruE,KAAKuuE,uBACAvuE,KAAK2tE,eAAkB3tE,KAAK8sB,cAC7B9sB,KAAK83D,UAGP0W,EAAmBpnD,EAAKm+B,oBACzBt8B,IAAKmoB,GAASA,EAAO,UAAYpxC,KAAKyuE,sBACtCp5D,KAAK,KACV+R,EAAKgzB,GAAGo0B,EAAkBF,GAC1BlnD,EAAKgzB,GAAG,GAAqBnxB,IAAKtgB,GAAMA,EAAI,IAAI3I,KAAKyuE,sBAAwBp5D,KAAK,KAAMi5D,GACxFlnD,EAAKgzB,GAAG,2BAA2Bp6C,KAAKyuE,qBAAwBH,GAChEtuE,KAAK0uE,WAAWtnD,KAEpBpnB,KAAKuuE,uBACL,IAAII,IAAoB3uE,KAAKomD,QAAQ,aAIrC,OAHIuoB,GACA3uE,KAAK83D,SAEF93D,KAEX,WAAWonB,GACP,IAAIwnD,EACJxnD,EAAKgzB,GAAG,aAAap6C,KAAKyuE,qBAAyB9lE,IAC/CimE,EAAUxnD,EAAK08B,sBACV9jD,KAAK8sB,cAAgB1F,IAASpnB,KAAKomD,QAAQ,UAC5CpmD,KAAKo3C,UAAUzuC,GAAG,KAG1Bye,EAAKgzB,GAAG,YAAYp6C,KAAKyuE,qBAAyB9lE,IAC9C,IAAKimE,EACD,OAEJ,MAAM16B,EAAM9sB,EAAK08B,sBACX5sB,EAAKgd,EAAI9pB,EAAIwkD,EAAQxkD,EACrB+M,EAAK+c,EAAI3d,EAAIq4C,EAAQr4C,EAC3Bv2B,KAAK2+C,QAAQv1C,QAASylE,IAClB,GAAIA,IAAcznD,EACd,OAEJ,GAAIynD,EAAU/hD,aACV,OAEJ,MAAMgiD,EAAWD,EAAU/qB,sBAC3B+qB,EAAUvqB,oBAAoB,CAC1Bl6B,EAAG0kD,EAAS1kD,EAAI8M,EAChBX,EAAGu4C,EAASv4C,EAAIY,IAEpB03C,EAAUz3B,UAAUzuC,KAExBimE,EAAU,OAGlB,WACI,OAAO5uE,KAAKkuE,QAAU,GAE1B,kBACI,OAAOluE,KAAK+uE,kBAEhB,SACQ/uE,KAAKkuE,QACLluE,KAAKkuE,OAAO9kE,QAASge,IACjBA,EAAK81B,IAAI,IAAMl9C,KAAKyuE,wBAG5BzuE,KAAKkuE,OAAS,GACdluE,KAAKuuE,uBAET,uBACIvuE,KAAKq6C,YAAYkyB,IACjBvsE,KAAKq6C,YAAY,aACjBr6C,KAAKu6C,6BAA6B,qBAEtC,eACI,OAAOv6C,KAAKs6C,UAAUiyB,GAAYvsE,KAAKgvE,eAE3C,eAAe5nD,EAAM6nD,EAAMjvE,KAAK23B,WAAYu3C,GACxC,IAAI/+B,EAAO/oB,EAAKqzB,cAAc,CAC1BC,eAAe,EACfgN,YAAY,EACZC,WAAY3nD,KAAKmvE,iBAEjBC,EAAWhoD,EAAK4sB,iBAAiBk7B,GACjCG,EAASjoD,EAAK08B,oBAAoBorB,GAClCh4C,EAAKiZ,EAAK/lB,EAAIglD,EAAShlD,EAAIhD,EAAK04B,UAAYsvB,EAAShlD,EACrD+M,EAAKgZ,EAAK5Z,EAAI64C,EAAS74C,EAAInP,EAAK24B,UAAYqvB,EAAS74C,EACzD,MAAMoB,GAAY,OAAMyqB,SAASh7B,EAAKinD,uBAAmC,EAAV7nE,KAAKukB,KACrD,EAAVvkB,KAAKukB,IACJw3B,EAAM,CACRn4B,EAAGilD,EAAOjlD,EAAI8M,EAAK1wB,KAAKmwB,IAAIgB,GAAYR,EAAK3wB,KAAKowB,KAAKe,GACvDpB,EAAG84C,EAAO94C,EAAIY,EAAK3wB,KAAKmwB,IAAIgB,GAAYT,EAAK1wB,KAAKowB,IAAIe,GACtDsN,MAAOkL,EAAKlL,MAAQmqC,EAAShlD,EAC7B8a,OAAQiL,EAAKjL,OAASkqC,EAAS74C,EAC/BoB,SAAUA,GAEd,OAAOo1C,GAAkBxqB,GAAM,OAAMH,SAAS6sB,GAAM,CAChD7kD,EAAG,EACHmM,EAAG,IAGX,gBACI,IAAInP,EAAOpnB,KAAK+tE,UAChB,IAAK3mD,EACD,MAAO,CACHgD,GAAItJ,GACJyV,GAAIzV,GACJmkB,MAAO,EACPC,OAAQ,EACRvN,SAAU,GAGlB,MAAM23C,EAAc,GACpBtvE,KAAK2+C,QAAQ11B,IAAK7B,IACd,MAAMm7B,EAAMn7B,EAAKqzB,cAAc,CAC3BC,eAAe,EACfgN,YAAY,EACZC,WAAY3nD,KAAKmvE,iBAErB,IAAItzB,EAAS,CACT,CAAEzxB,EAAGm4B,EAAIn4B,EAAGmM,EAAGgsB,EAAIhsB,GACnB,CAAEnM,EAAGm4B,EAAIn4B,EAAIm4B,EAAItd,MAAO1O,EAAGgsB,EAAIhsB,GAC/B,CAAEnM,EAAGm4B,EAAIn4B,EAAIm4B,EAAItd,MAAO1O,EAAGgsB,EAAIhsB,EAAIgsB,EAAIrd,QACvC,CAAE9a,EAAGm4B,EAAIn4B,EAAGmM,EAAGgsB,EAAIhsB,EAAIgsB,EAAIrd,SAE3B4W,EAAQ10B,EAAK20B,uBACjBF,EAAOzyC,SAAQ,SAAU4I,GACrB,IAAIgqC,EAAcF,EAAM9pC,MAAMA,GAC9Bs9D,EAAYhpE,KAAK01C,QAGzB,MAAM1lB,EAAK,IAAIF,EAEf,IAAIqlB,EAAMC,EAAMC,EAAMC,EADtBtlB,EAAGia,QAAQ,OAAM6R,SAASpiD,KAAK23B,aAE/B23C,EAAYlmE,SAAQ,SAAU4I,GAC1B,IAAIgqC,EAAc1lB,EAAGtkB,MAAMA,QACdnP,IAAT44C,IACAA,EAAOE,EAAOK,EAAY5xB,EAC1BsxB,EAAOE,EAAOI,EAAYzlB,GAE9BklB,EAAOj1C,KAAKD,IAAIk1C,EAAMO,EAAY5xB,GAClCsxB,EAAOl1C,KAAKD,IAAIm1C,EAAMM,EAAYzlB,GAClColB,EAAOn1C,KAAK6F,IAAIsvC,EAAMK,EAAY5xB,GAClCwxB,EAAOp1C,KAAK6F,IAAIuvC,EAAMI,EAAYzlB,MAEtCD,EAAG4oB,SACH,MAAM/8C,EAAIm0B,EAAGtkB,MAAM,CAAEoY,EAAGqxB,EAAMllB,EAAGmlB,IACjC,MAAO,CACHtxB,EAAGjoB,EAAEioB,EACLmM,EAAGp0B,EAAEo0B,EACL0O,MAAO0W,EAAOF,EACdvW,OAAQ0W,EAAOF,EACf/jB,SAAU,OAAMyqB,SAASpiD,KAAK23B,aAGtC,OACI,OAAO33B,KAAKuvE,eAAenlD,EAE/B,OACI,OAAOpqB,KAAKuvE,eAAeh5C,EAE/B,WACI,OAAOv2B,KAAKuvE,eAAetqC,MAE/B,YACI,OAAOjlC,KAAKuvE,eAAerqC,OAE/B,kBACIllC,KAAKwvE,cACL3C,GAAczjE,QAAQ,SAAUxI,GAC5BZ,KAAKyvE,cAAc7uE,IACrBiB,KAAK7B,OACPA,KAAKyvE,cAAc,WAEvB,cAAc7uE,GACV,IAAI8uE,EAAS,IAAI,GAAK,CAClB9+B,OAAQ,mBACRnB,KAAM,QACN2D,YAAa,EACbxyC,KAAMA,EAAO,WACb+rB,aAAc,EACd43B,WAAW,EACXhQ,eAAgBk4B,GAAe,GAAK,SAEpC1sE,EAAOC,KACX0vE,EAAOt1B,GAAG,wBAAwB,SAAUzxC,GACxC5I,EAAK4vE,iBAAiBhnE,MAE1B+mE,EAAOt1B,GAAG,YAAczxC,IACpB+mE,EAAOnyB,WACP50C,EAAE26C,cAAe,IAErBosB,EAAOt1B,GAAG,UAAYzxC,IAClBA,EAAE26C,cAAe,IAErBosB,EAAOt1B,GAAG,aAAc,KACpB,IAAI1jB,EAAM,OAAM0rB,SAASpiD,KAAK23B,YAC1Bi4C,EAASlD,GAAU9rE,EAAM81B,GAC7Bg5C,EAAO54B,WAAW/7B,UACb20D,EAAO54B,WAAW/7B,QAAQU,MAAMm0D,OAASA,GAC9C5vE,KAAK6vE,eAAgB,IAEzBH,EAAOt1B,GAAG,WAAY,KAClBs1B,EAAO54B,WAAW/7B,UACb20D,EAAO54B,WAAW/7B,QAAQU,MAAMm0D,OAAS,IAC9C5vE,KAAK6vE,eAAgB,IAEzB7vE,KAAKiX,IAAIy4D,GAEb,cACI,IAAII,EAAO,IAAI,GAAM,CACjBlvE,KAAM,OACNqkC,MAAO,EACPC,OAAQ,EACRqf,WAAW,EACX,UAAU8K,GACN,IAAI/4B,EAAKt2B,KAAK46C,YACVtF,EAAUhf,EAAGgf,UACjB+Z,EAAI3gB,YACJ2gB,EAAIlf,MAAMmF,GAAUA,EAASt1C,KAAKilC,QAAoB,EAAVqQ,EAAat1C,KAAKklC,SAAqB,EAAVoQ,GACzE+Z,EAAInf,OAAOlwC,KAAKilC,QAAU,GAAIqQ,GAC1Bhf,EAAGy5C,iBACH1gB,EAAIpf,OAAOjwC,KAAKilC,QAAU,GAAI3O,EAAG05C,qBAAuB93C,EAAK+3C,MAAMjwE,KAAKklC,UAAYoQ,GAExF+Z,EAAI4L,gBAAgBj7D,OAExB2uD,QAAS,CAACU,EAAK5iB,KACX,GAAKzsC,KAAKkwE,0BAAV,CAGA,IAAI56B,EAAUt1C,KAAKs1C,UACnB+Z,EAAI3gB,YACJ2gB,EAAIlf,MAAMmF,GAAUA,EAAS7I,EAAMxH,QAAoB,EAAVqQ,EAAa7I,EAAMvH,SAAqB,EAAVoQ,GAC3E+Z,EAAI4L,gBAAgBxuB,OAG5BzsC,KAAKiX,IAAI64D,GACT9vE,KAAK0uE,WAAWoB,GAChBA,EAAK11B,GAAG,YAAczxC,IAClBA,EAAE26C,cAAe,IAErBwsB,EAAK11B,GAAG,WAAazxC,IACjBA,EAAE26C,cAAe,IAErBwsB,EAAK11B,GAAG,UAAYzxC,IAChBA,EAAE26C,cAAe,IAErBtjD,KAAKo6C,GAAG,WAAazxC,IACjB3I,KAAK83D,WAGb,iBAAiBnvD,GACb3I,KAAK+uE,kBAAoBpmE,EAAEnF,OAAO5C,OAAOoG,MAAM,KAAK,GACpD,IAAImjC,EAAQnqC,KAAKuvE,eACbtqC,EAAQkF,EAAMlF,MACdC,EAASiF,EAAMjF,OACfirC,EAAa3pE,KAAKwxB,KAAKxxB,KAAKszD,IAAI70B,EAAO,GAAKz+B,KAAKszD,IAAI50B,EAAQ,IACjEllC,KAAK42B,IAAMpwB,KAAK0tC,IAAIhP,EAASirC,GAC7BnwE,KAAK22B,IAAMnwB,KAAK0tC,IAAIjP,EAAQkrC,GACN,qBAAX/rE,SACPA,OAAOsM,iBAAiB,YAAa1Q,KAAK6tE,kBAC1CzpE,OAAOsM,iBAAiB,YAAa1Q,KAAK6tE,kBAC1CzpE,OAAOsM,iBAAiB,UAAW1Q,KAAK8tE,gBAAgB,GACxD1pE,OAAOsM,iBAAiB,WAAY1Q,KAAK8tE,gBAAgB,IAE7D9tE,KAAK2tE,eAAgB,EACrB,IAAI9pB,EAAKl7C,EAAEnF,OAAOsgD,sBACdruC,EAAM9M,EAAEnF,OAAOszC,WAAWkI,qBAC9Bh/C,KAAKowE,kBAAoB,CACrBhmD,EAAG3U,EAAI2U,EAAIy5B,EAAGz5B,EACdmM,EAAG9gB,EAAI8gB,EAAIstB,EAAGttB,GAElBv2B,KAAK0hD,MAAM,iBAAkB,CAAE9Z,IAAKj/B,EAAEi/B,IAAKpkC,OAAQxD,KAAK+tE,YACxD/tE,KAAKkuE,OAAO9kE,QAAS5F,IACjBA,EAAOk+C,MAAM,iBAAkB,CAAE9Z,IAAKj/B,EAAEi/B,IAAKpkC,aAGrD,iBAAiBmF,GACb,IAAIyhB,EAAGmM,EAAG85C,EACNC,EAAatwE,KAAKomD,QAAQ,IAAMpmD,KAAK+uE,mBACrCl4B,EAAQy5B,EAAWx5B,WACvBD,EAAME,qBAAqBpuC,GAC3B,MAAM4nE,EAAK15B,EAAMmI,qBACjB,IAAIkF,EAAa,CACb95B,EAAGmmD,EAAGnmD,EAAIpqB,KAAKowE,kBAAkBhmD,EACjCmM,EAAGg6C,EAAGh6C,EAAIv2B,KAAKowE,kBAAkB75C,GAErC,MAAMi6C,EAASF,EAAWxsB,sBACtB9jD,KAAKywE,wBACLvsB,EAAalkD,KAAKywE,qBAALzwE,CAA2BwwE,EAAQtsB,EAAYv7C,IAEhE2nE,EAAWhsB,oBAAoBJ,GAC/B,MAAMwsB,EAASJ,EAAWxsB,sBAC1B,GAAI0sB,EAAOpmD,IAAMsmD,EAAOtmD,GAAKomD,EAAOj6C,IAAMm6C,EAAOn6C,EAGjD,GAA+B,YAA3Bv2B,KAAK+uE,kBAAT,CAiBA,IAAI4B,EAAiB3wE,KAAK4wE,aAAejoE,EAAEkoE,SACvCC,EAAkB9wE,KAAK8wE,mBAAqBnoE,EAAEooE,OAClD,GAA+B,aAA3B/wE,KAAK+uE,mBACL,GAAI4B,EAAgB,CAChB,IAAIK,EAAeF,EACb,CACE1mD,EAAGpqB,KAAKilC,QAAU,EAClB1O,EAAGv2B,KAAKklC,SAAW,GAErB,CACE9a,EAAGpqB,KAAKomD,QAAQ,iBAAiBh8B,IACjCmM,EAAGv2B,KAAKomD,QAAQ,iBAAiB7vB,KAEzC85C,EAAgB7pE,KAAKwxB,KAAKxxB,KAAKszD,IAAIkX,EAAa5mD,EAAIkmD,EAAWlmD,IAAK,GAChE5jB,KAAKszD,IAAIkX,EAAaz6C,EAAI+5C,EAAW/5C,IAAK,IAC9C,IAAI06C,EAAWjxE,KAAKomD,QAAQ,aAAah8B,IAAM4mD,EAAa5mD,GAAK,EAAI,EACjE8mD,EAAWlxE,KAAKomD,QAAQ,aAAa7vB,IAAMy6C,EAAaz6C,GAAK,EAAI,EACrEnM,EAAIimD,EAAgBrwE,KAAK22B,IAAMs6C,EAC/B16C,EAAI85C,EAAgBrwE,KAAK42B,IAAMs6C,EAC/BlxE,KAAKomD,QAAQ,aAAah8B,EAAE4mD,EAAa5mD,EAAIA,GAC7CpqB,KAAKomD,QAAQ,aAAa7vB,EAAEy6C,EAAaz6C,EAAIA,SAGhD,GAA+B,eAA3Bv2B,KAAK+uE,kBACV/uE,KAAKomD,QAAQ,aAAa7vB,EAAE+5C,EAAW/5C,UAEtC,GAA+B,cAA3Bv2B,KAAK+uE,kBAAmC,CAC7C,GAAI4B,EAAgB,CACZK,EAAeF,EACb,CACE1mD,EAAGpqB,KAAKilC,QAAU,EAClB1O,EAAGv2B,KAAKklC,SAAW,GAErB,CACE9a,EAAGpqB,KAAKomD,QAAQ,gBAAgBh8B,IAChCmM,EAAGv2B,KAAKomD,QAAQ,gBAAgB7vB,KAExC85C,EAAgB7pE,KAAKwxB,KAAKxxB,KAAKszD,IAAIwW,EAAWlmD,IAAM4mD,EAAa5mD,EAAG,GAChE5jB,KAAKszD,IAAIkX,EAAaz6C,EAAI+5C,EAAW/5C,IAAK,IAC1C06C,EAAWjxE,KAAKomD,QAAQ,cAAch8B,IAAM4mD,EAAa5mD,GAAK,EAAI,EAClE8mD,EAAWlxE,KAAKomD,QAAQ,cAAc7vB,IAAMy6C,EAAaz6C,GAAK,EAAI,EACtEnM,EAAIimD,EAAgBrwE,KAAK22B,IAAMs6C,EAC/B16C,EAAI85C,EAAgBrwE,KAAK42B,IAAMs6C,EAC/BlxE,KAAKomD,QAAQ,cAAch8B,EAAE4mD,EAAa5mD,EAAIA,GAC9CpqB,KAAKomD,QAAQ,cAAc7vB,EAAEy6C,EAAaz6C,EAAIA,GAElD,IAAI9gB,EAAM66D,EAAW16D,WACrB5V,KAAKomD,QAAQ,aAAa7vB,EAAE9gB,EAAI8gB,GAChCv2B,KAAKomD,QAAQ,iBAAiBh8B,EAAE3U,EAAI2U,QAEnC,GAA+B,gBAA3BpqB,KAAK+uE,kBACV/uE,KAAKomD,QAAQ,aAAah8B,EAAEkmD,EAAWlmD,UAEtC,GAA+B,iBAA3BpqB,KAAK+uE,kBACV/uE,KAAKomD,QAAQ,iBAAiBh8B,EAAEkmD,EAAWlmD,UAE1C,GAA+B,gBAA3BpqB,KAAK+uE,kBAAqC,CAC/C,GAAI4B,EAAgB,CACZK,EAAeF,EACb,CACE1mD,EAAGpqB,KAAKilC,QAAU,EAClB1O,EAAGv2B,KAAKklC,SAAW,GAErB,CACE9a,EAAGpqB,KAAKomD,QAAQ,cAAch8B,IAC9BmM,EAAGv2B,KAAKomD,QAAQ,cAAc7vB,KAEtC85C,EAAgB7pE,KAAKwxB,KAAKxxB,KAAKszD,IAAIkX,EAAa5mD,EAAIkmD,EAAWlmD,IAAK,GAChE5jB,KAAKszD,IAAIwW,EAAW/5C,IAAMy6C,EAAaz6C,EAAG,IAC1C06C,EAAWD,EAAa5mD,EAAIkmD,EAAWlmD,KAAO,EAAI,EAClD8mD,EAAWZ,EAAW/5C,IAAMy6C,EAAaz6C,GAAK,EAAI,EACtDnM,EAAIimD,EAAgBrwE,KAAK22B,IAAMs6C,EAC/B16C,EAAI85C,EAAgBrwE,KAAK42B,IAAMs6C,EAC/BZ,EAAWlmD,EAAE4mD,EAAa5mD,EAAIA,GAC9BkmD,EAAW/5C,EAAEy6C,EAAaz6C,EAAIA,GAElC9gB,EAAM66D,EAAW16D,WACjB5V,KAAKomD,QAAQ,aAAah8B,EAAE3U,EAAI2U,GAChCpqB,KAAKomD,QAAQ,iBAAiB7vB,EAAE9gB,EAAI8gB,QAEnC,GAA+B,kBAA3Bv2B,KAAK+uE,kBACV/uE,KAAKomD,QAAQ,iBAAiB7vB,EAAE+5C,EAAW/5C,UAE1C,GAA+B,iBAA3Bv2B,KAAK+uE,mBACV,GAAI4B,EAAgB,CACZK,EAAeF,EACb,CACE1mD,EAAGpqB,KAAKilC,QAAU,EAClB1O,EAAGv2B,KAAKklC,SAAW,GAErB,CACE9a,EAAGpqB,KAAKomD,QAAQ,aAAah8B,IAC7BmM,EAAGv2B,KAAKomD,QAAQ,aAAa7vB,KAErC85C,EAAgB7pE,KAAKwxB,KAAKxxB,KAAKszD,IAAIwW,EAAWlmD,IAAM4mD,EAAa5mD,EAAG,GAChE5jB,KAAKszD,IAAIwW,EAAW/5C,IAAMy6C,EAAaz6C,EAAG,IAC1C06C,EAAWjxE,KAAKomD,QAAQ,iBAAiBh8B,IAAM4mD,EAAa5mD,GAAK,EAAI,EACrE8mD,EAAWlxE,KAAKomD,QAAQ,iBAAiB7vB,IAAMy6C,EAAaz6C,GAAK,EAAI,EACzEnM,EAAIimD,EAAgBrwE,KAAK22B,IAAMs6C,EAC/B16C,EAAI85C,EAAgBrwE,KAAK42B,IAAMs6C,EAC/BlxE,KAAKomD,QAAQ,iBAAiBh8B,EAAE4mD,EAAa5mD,EAAIA,GACjDpqB,KAAKomD,QAAQ,iBAAiB7vB,EAAEy6C,EAAaz6C,EAAIA,SAIrDlkB,QAAQ7N,MAAM,IAAIqZ,MAAM,iDACpB7d,KAAK+uE,oBAET+B,EAAkB9wE,KAAK8wE,mBAAqBnoE,EAAEooE,OAClD,GAAID,EAAiB,CACjB,IAAIhN,EAAU9jE,KAAKomD,QAAQ,aACvB6d,EAAcjkE,KAAKomD,QAAQ,iBAC3B+qB,EAAarN,EAAQ15C,IACrBgnD,EAAatN,EAAQvtC,IACrB86C,EAAgBrxE,KAAK0tC,WAAau2B,EAAY75C,IAC9CknD,EAAgBtxE,KAAK2tC,YAAcs2B,EAAY1tC,IACnD0tC,EAAYsN,KAAK,CACbnnD,GAAI+mD,EACJ56C,GAAI66C,IAERtN,EAAQyN,KAAK,CACTnnD,EAAGinD,EACH96C,EAAG+6C,IAGX,IAAIjC,EAASrvE,KAAKomD,QAAQ,aAAatC,sBACvC15B,EAAIilD,EAAOjlD,EACXmM,EAAI84C,EAAO94C,EACX,IAAI0O,EAAQjlC,KAAKomD,QAAQ,iBAAiBh8B,IAAMpqB,KAAKomD,QAAQ,aAAah8B,IACtE8a,EAASllC,KAAKomD,QAAQ,iBAAiB7vB,IAAMv2B,KAAKomD,QAAQ,aAAa7vB,IAC3Ev2B,KAAKwxE,cAAc,CACfpnD,EAAGA,EACHmM,EAAGA,EACH0O,MAAOA,EACPC,OAAQA,EACRvN,SAAU,OAAMyqB,SAASpiD,KAAK23B,aAC/BhvB,OAzJH,CACI,IAAIwhC,EAAQnqC,KAAKuvE,eACjBnlD,EAAIkmD,EAAWlmD,IAAM+f,EAAMlF,MAAQ,EACnC1O,GAAK+5C,EAAW/5C,IAAM4T,EAAMjF,OAAS,EACrC,IAAIxN,EAAQlxB,KAAKo7D,OAAOrrC,EAAGnM,GAAK5jB,KAAKukB,GAAK,EACtCof,EAAMjF,OAAS,IACfxN,GAASlxB,KAAKukB,IAElB,IAAI0mD,EAAc,OAAMrvB,SAASpiD,KAAK23B,YACtC,MAAM+5C,EAAcD,EAAc/5C,EAC5B61C,EAAM,OAAMnrB,SAASpiD,KAAK2xE,yBAC1BC,EAAaxE,GAAQptE,KAAK6xE,gBAAiBH,EAAanE,GACxDzU,EAAO8Y,EAAaznC,EAAMxS,SAC1B8U,EAAQwgC,GAAmB9iC,EAAO2uB,GACxC94D,KAAKwxE,cAAc/kC,EAAO9jC,IA6IlC,eAAeA,GACX3I,KAAK8xE,cAAcnpE,GAEvB,uBACI,OAAO3I,KAAK+hD,eAEhB,cAAcp5C,GACV,GAAI3I,KAAK2tE,cAAe,CACpB3tE,KAAK2tE,eAAgB,EACC,qBAAXvpE,SACPA,OAAO2tE,oBAAoB,YAAa/xE,KAAK6tE,kBAC7CzpE,OAAO2tE,oBAAoB,YAAa/xE,KAAK6tE,kBAC7CzpE,OAAO2tE,oBAAoB,UAAW/xE,KAAK8tE,gBAAgB,GAC3D1pE,OAAO2tE,oBAAoB,WAAY/xE,KAAK8tE,gBAAgB,IAEhE,IAAI1mD,EAAOpnB,KAAK+tE,UAChB/tE,KAAK0hD,MAAM,eAAgB,CAAE9Z,IAAKj/B,EAAGnF,OAAQ4jB,IACzCA,GACApnB,KAAKkuE,OAAO9kE,QAAS5F,IACjBA,EAAOk+C,MAAM,eAAgB,CAAE9Z,IAAKj/B,EAAGnF,aAG/CxD,KAAK+uE,kBAAoB,MAGjC,cAAciD,EAAUpqC,GACpB,IAAIqqC,EAAWjyE,KAAKuvE,eACpB,MAAM2C,EAAU,EAChB,GAAIh6C,EAAK00C,SAASoF,EAAS/sC,MAAyB,GAAjBjlC,KAAKs1C,UAAgB48B,EAASA,GAE7D,YADAlyE,KAAK83D,SAGT,GAAI5/B,EAAK00C,SAASoF,EAAS9sC,OAA0B,GAAjBllC,KAAKs1C,UAAgB48B,EAASA,GAE9D,YADAlyE,KAAK83D,SAGT,MAAMqa,EAAqBnyE,KAAKoyE,cAChC,IAAI7wE,EAAI,IAAI60B,EAEZ,GADA70B,EAAEgvC,OAAO,OAAM6R,SAASpiD,KAAK23B,aACzB33B,KAAK+uE,mBACLiD,EAAS/sC,MAAQ,GACjBjlC,KAAK+uE,kBAAkBrhE,QAAQ,SAAW,EAAG,CAC7C,MAAMomC,EAASvyC,EAAEyQ,MAAM,CACnBoY,EAAqB,GAAjBpqB,KAAKs1C,UACT/e,EAAG,IAQP,GANAy7C,EAAS5nD,GAAK0pB,EAAO1pB,EACrB4nD,EAASz7C,GAAKud,EAAOvd,EACrBy7C,EAAS/sC,OAA0B,EAAjBjlC,KAAKs1C,UACvBt1C,KAAK+uE,kBAAoB/uE,KAAK+uE,kBAAkBv6D,QAAQ,OAAQ,SAChExU,KAAKowE,kBAAkBhmD,GAAK0pB,EAAO1pB,EACnCpqB,KAAKowE,kBAAkB75C,GAAKud,EAAOvd,GAC9B47C,EAED,YADAnyE,KAAK83D,cAIR,GAAI93D,KAAK+uE,mBACViD,EAAS/sC,MAAQ,GACjBjlC,KAAK+uE,kBAAkBrhE,QAAQ,UAAY,EAAG,CAC9C,MAAMomC,EAASvyC,EAAEyQ,MAAM,CACnBoY,EAAoB,EAAjBpqB,KAAKs1C,UACR/e,EAAG,IAMP,GAJAv2B,KAAK+uE,kBAAoB/uE,KAAK+uE,kBAAkBv6D,QAAQ,QAAS,QACjExU,KAAKowE,kBAAkBhmD,GAAK0pB,EAAO1pB,EACnCpqB,KAAKowE,kBAAkB75C,GAAKud,EAAOvd,EACnCy7C,EAAS/sC,OAA0B,EAAjBjlC,KAAKs1C,WAClB68B,EAED,YADAnyE,KAAK83D,SAIb,GAAI93D,KAAK+uE,mBACLiD,EAAS9sC,OAAS,GAClBllC,KAAK+uE,kBAAkBrhE,QAAQ,QAAU,EAAG,CAC5C,MAAMomC,EAASvyC,EAAEyQ,MAAM,CACnBoY,EAAG,EACHmM,EAAqB,GAAjBv2B,KAAKs1C,YAQb,GANA08B,EAAS5nD,GAAK0pB,EAAO1pB,EACrB4nD,EAASz7C,GAAKud,EAAOvd,EACrBv2B,KAAK+uE,kBAAoB/uE,KAAK+uE,kBAAkBv6D,QAAQ,MAAO,UAC/DxU,KAAKowE,kBAAkBhmD,GAAK0pB,EAAO1pB,EACnCpqB,KAAKowE,kBAAkB75C,GAAKud,EAAOvd,EACnCy7C,EAAS9sC,QAA2B,EAAjBllC,KAAKs1C,WACnB68B,EAED,YADAnyE,KAAK83D,cAIR,GAAI93D,KAAK+uE,mBACViD,EAAS9sC,OAAS,GAClBllC,KAAK+uE,kBAAkBrhE,QAAQ,WAAa,EAAG,CAC/C,MAAMomC,EAASvyC,EAAEyQ,MAAM,CACnBoY,EAAG,EACHmM,EAAoB,EAAjBv2B,KAAKs1C,YAMZ,GAJAt1C,KAAK+uE,kBAAoB/uE,KAAK+uE,kBAAkBv6D,QAAQ,SAAU,OAClExU,KAAKowE,kBAAkBhmD,GAAK0pB,EAAO1pB,EACnCpqB,KAAKowE,kBAAkB75C,GAAKud,EAAOvd,EACnCy7C,EAAS9sC,QAA2B,EAAjBllC,KAAKs1C,WACnB68B,EAED,YADAnyE,KAAK83D,SAIb,GAAI93D,KAAKqyE,eAAgB,CACrB,MAAMhuB,EAAUrkD,KAAKqyE,cAALryE,CAAoBiyE,EAAUD,GAC1C3tB,EACA2tB,EAAW3tB,EAGXnsB,EAAKuN,KAAK,0EAGlB,MAAM6sC,EAAW,IACXC,EAAQ,IAAIn8C,EAClBm8C,EAAMxhC,UAAUkhC,EAAS7nD,EAAG6nD,EAAS17C,GACrCg8C,EAAMhiC,OAAO0hC,EAASt6C,UACtB46C,EAAM9hC,MAAMwhC,EAAShtC,MAAQqtC,EAAUL,EAAS/sC,OAASotC,GACzD,MAAME,EAAQ,IAAIp8C,EAClBo8C,EAAMzhC,UAAUihC,EAAS5nD,EAAG4nD,EAASz7C,GACrCi8C,EAAMjiC,OAAOyhC,EAASr6C,UACtB66C,EAAM/hC,MAAMuhC,EAAS/sC,MAAQqtC,EAAUN,EAAS9sC,OAASotC,GACzD,MAAM56C,EAAQ86C,EAAM1wB,SAASywB,EAAMrzB,UACnCl/C,KAAKkuE,OAAO9kE,QAASge,IACjB,IAAIosB,EACJ,MAAMi/B,EAAkBrrD,EAAKwzB,YAAYmB,uBACnC22B,EAAiBtrD,EAAK26B,eAAe9C,OAC3CyzB,EAAe3hC,UAAU3pB,EAAK04B,UAAW14B,EAAK24B,WAC9C,MAAM4yB,EAAoB,IAAIv8C,EAC9Bu8C,EACK7wB,SAAS2wB,EAAgBxzB,OAAOC,UAChC4C,SAASpqB,GACToqB,SAAS2wB,GACT3wB,SAAS4wB,GACd,MAAMvoC,EAAQwoC,EAAkBzwB,YAChC96B,EAAKwyB,SAASzP,GACdnqC,KAAK0hD,MAAM,YAAa,CAAE9Z,IAAKA,EAAKpkC,OAAQ4jB,IAC5CA,EAAKs6B,MAAM,YAAa,CAAE9Z,IAAKA,EAAKpkC,OAAQ4jB,IACjB,QAA1BosB,EAAKpsB,EAAKowB,kBAA+B,IAAPhE,GAAyBA,EAAGiE,cAEnEz3C,KAAK23B,SAASO,EAAKC,aAAa65C,EAASr6C,WACzC33B,KAAKuuE,uBACLvuE,KAAK83D,SACL93D,KAAKw3C,WAAWC,YAEpB,cACIz3C,KAAKuuE,uBACLvuE,KAAK83D,SAET,kBAAkBl1B,EAAUuH,GACxB,MAAMulC,EAAS1vE,KAAKomD,QAAQxjB,GAC5B8sC,EAAO91B,SAASzP,GAEpB,SACI,IAAIqJ,EACArJ,EAAQnqC,KAAKuvE,eACjBvvE,KAAK23B,SAASO,EAAKC,aAAagS,EAAMxS,WACtC,IAAIsN,EAAQkF,EAAMlF,MACdC,EAASiF,EAAMjF,OACf0tC,EAAiB5yE,KAAK4yE,iBACtBC,EAAgB7yE,KAAK6yE,gBACrBv9B,EAAUt1C,KAAKs1C,UACfw9B,EAAa9yE,KAAK8yE,aACtB9yE,KAAKopB,KAAK,YAAYhgB,QAASge,IAC3BA,EAAKwyB,SAAS,CACV3U,MAAO6tC,EACP5tC,OAAQ4tC,EACRhzB,QAASgzB,EAAa,EACtB/yB,QAAS+yB,EAAa,EACtBliC,OAAQ5wC,KAAK+yE,eACb3/B,YAAapzC,KAAKgzE,oBAClBvjC,KAAMzvC,KAAKizE,aACXpP,aAAc7jE,KAAKkzE,yBAG3BlzE,KAAKmzE,kBAAkB,YAAa,CAChC/oD,EAAG,EACHmM,EAAG,EACHupB,QAASgzB,EAAa,EAAIx9B,EAC1ByK,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,aAAe,IAEpE1N,KAAKmzE,kBAAkB,cAAe,CAClC/oD,EAAG6a,EAAQ,EACX1O,EAAG,EACHwpB,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,eAAiB,IAEtE1N,KAAKmzE,kBAAkB,aAAc,CACjC/oD,EAAG6a,EACH1O,EAAG,EACHupB,QAASgzB,EAAa,EAAIx9B,EAC1ByK,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,cAAgB,IAErE1N,KAAKmzE,kBAAkB,eAAgB,CACnC/oD,EAAG,EACHmM,EAAG2O,EAAS,EACZ4a,QAASgzB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,gBAAkB,IAEvE1N,KAAKmzE,kBAAkB,gBAAiB,CACpC/oD,EAAG6a,EACH1O,EAAG2O,EAAS,EACZ4a,QAASgzB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,iBAAmB,IAExE1N,KAAKmzE,kBAAkB,eAAgB,CACnC/oD,EAAG,EACHmM,EAAG2O,EACH4a,QAASgzB,EAAa,EAAIx9B,EAC1ByK,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,gBAAkB,IAEvE1N,KAAKmzE,kBAAkB,iBAAkB,CACrC/oD,EAAG6a,EAAQ,EACX1O,EAAG2O,EACH6a,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,kBAAoB,IAEzE1N,KAAKmzE,kBAAkB,gBAAiB,CACpC/oD,EAAG6a,EACH1O,EAAG2O,EACH4a,QAASgzB,EAAa,EAAIx9B,EAC1ByK,QAAS+yB,EAAa,EAAIx9B,EAC1B8I,QAASy0B,GAAiBD,EAAellE,QAAQ,iBAAmB,IAExE1N,KAAKmzE,kBAAkB,WAAY,CAC/B/oD,EAAG6a,EAAQ,EACX1O,GAAIv2B,KAAKgwE,qBAAuB93C,EAAK+3C,MAAM/qC,GAAUoQ,EACrD8I,QAASp+C,KAAK+vE,kBAElB/vE,KAAKmzE,kBAAkB,QAAS,CAC5BluC,MAAOA,EACPC,OAAQA,EACRkZ,QAASp+C,KAAKozE,gBACdxiC,OAAQ5wC,KAAKqzE,eACbjgC,YAAapzC,KAAKszE,oBAClBxgC,KAAM9yC,KAAKuzE,aACXnpD,EAAG,EACHmM,EAAG,IAEoB,QAA1Bid,EAAKxzC,KAAKw3C,kBAA+B,IAAPhE,GAAyBA,EAAGiE,YAEnE,iBACI,OAAOz3C,KAAK2tE,cAEhB,gBACI,GAAI3tE,KAAK2tE,cAAe,CACpB3tE,KAAK8xE,gBACL,IAAIxB,EAAatwE,KAAKomD,QAAQ,IAAMpmD,KAAK+uE,mBACrCuB,GACAA,EAAW/yB,YAIvB,UAOI,OANIv9C,KAAK82C,YAAc92C,KAAK6vE,eACxB7vE,KAAK82C,WAAW/7B,UAAY/a,KAAK82C,WAAW/7B,QAAQU,MAAMm0D,OAAS,IAEvE,GAAM3tE,UAAU8jD,QAAQvlD,KAAKR,MAC7BA,KAAKmuE,SACLnuE,KAAK8xE,gBACE9xE,KAEX,WACI,OAAO,GAAKiC,UAAUmB,SAAS5C,KAAKR,OAG5C,SAASwzE,GAAgB9pD,GAcrB,OAbMA,aAAetf,OACjB8tB,EAAKuN,KAAK,2CAEV/b,aAAetf,OACfsf,EAAItgB,SAAQ,SAAUxI,IACmB,IAAjCisE,GAAcn/D,QAAQ9M,IACtBs3B,EAAKuN,KAAK,wBACN7kC,EACA,0BACAisE,GAAcx3D,KAAK,UAI5BqU,GAAO,GAElB,GAAYznB,UAAU4+C,UAAY,cAClC,eAAc,IACdlX,GAAQuM,gBAAgB,GAAa,iBAAkB22B,GAAe2G,IACtE7pC,GAAQuM,gBAAgB,GAAa,eAAe,EAAM7M,KAC1DM,GAAQuM,gBAAgB,GAAa,iBAAiB,GACtDvM,GAAQuM,gBAAgB,GAAa,aAAc,GAAI7N,KACvDsB,GAAQuM,gBAAgB,GAAa,iBAAiB,GACtDvM,GAAQuM,gBAAgB,GAAa,gBAAiB,IACtDvM,GAAQuM,gBAAgB,GAAa,qBAAsB,GAAI7N,KAC/DsB,GAAQuM,gBAAgB,GAAa,wBAAyB,EAAG7N,KACjEsB,GAAQuM,gBAAgB,GAAa,iBAAiB,GACtDvM,GAAQuM,gBAAgB,GAAa,eAAgB,oBACrDvM,GAAQuM,gBAAgB,GAAa,oBAAqB,EAAG7N,KAC7DsB,GAAQuM,gBAAgB,GAAa,aAAc,SACnDvM,GAAQuM,gBAAgB,GAAa,qBAAsB,EAAG7N,KAC9DsB,GAAQuM,gBAAgB,GAAa,eAAgB,oBACrDvM,GAAQuM,gBAAgB,GAAa,oBAAqB,EAAG7N,KAC7DsB,GAAQuM,gBAAgB,GAAa,cACrCvM,GAAQuM,gBAAgB,GAAa,aAAa,GAClDvM,GAAQuM,gBAAgB,GAAa,mBAAmB,GACxDvM,GAAQuM,gBAAgB,GAAa,gBAAgB,GACrDvM,GAAQuM,gBAAgB,GAAa,UAAW,EAAG7N,KACnDsB,GAAQuM,gBAAgB,GAAa,QACrCvM,GAAQuM,gBAAgB,GAAa,SACrCvM,GAAQuM,gBAAgB,GAAa,gBACrCvM,GAAQuM,gBAAgB,GAAa,uBACrCvM,GAAQuM,gBAAgB,GAAa,2BAA2B,GAChEvM,GAAQuM,gBAAgB,GAAa,yBAAyB,GAC9DvM,GAAQ8b,WAAW,GAAa,CAC5BguB,YAAa,gBACbC,oBAAqB,qBACrBC,gBAAiB,mBC76Bd,MAAM,WAAc,GACvB,WAAW/+B,GACPA,EAAQlG,YACRkG,EAAQpG,IAAI,EAAG,EAAGxuC,KAAKmiE,SAAU,EAAG,OAAM/f,SAASpiD,KAAKyrB,SAAUzrB,KAAK86D,aACvElmB,EAAQ3E,OAAO,EAAG,GAClB2E,EAAQ/F,YACR+F,EAAQqmB,gBAAgBj7D,MAE5B,WACI,OAAuB,EAAhBA,KAAKmiE,SAEhB,YACI,OAAuB,EAAhBniE,KAAKmiE,SAEhB,SAASl9B,GACLjlC,KAAKmiE,OAAOl9B,EAAQ,GAExB,UAAUC,GACNllC,KAAKmiE,OAAOj9B,EAAS,ICpB7B,SAAS0uC,KACL5zE,KAAKmB,EAAI,EACTnB,KAAKgqB,EAAI,EACThqB,KAAK+C,EAAI,EACT/C,KAAK8C,EAAI,EACT9C,KAAKmK,KAAO,KDkBhB,GAAMlI,UAAU4+C,UAAY,QAC5B,GAAM5+C,UAAUsvD,WAAY,EAC5B,GAAMtvD,UAAUsjD,oBAAsB,CAAC,UACvC,eAAc,IACd5b,GAAQuM,gBAAgB,GAAO,SAAU,EAAG7N,KAC5CsB,GAAQuM,gBAAgB,GAAO,QAAS,EAAG7N,KAC3CsB,GAAQuM,gBAAgB,GAAO,aAAa,GAC5CvM,GAAQ8b,WAAW,GAAO,CACtB/5B,SAAU,QACVmoD,YAAa,WACbC,YAAa,aC1BjB,IAAIC,GAAY,CACZ,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,KAEAC,GAAY,CACZ,EACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,GACA,IAEJ,SAASC,GAAoB13B,EAAW4lB,GACpC,IACI/3C,EAA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","file":"index.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"vue\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"index\"] = factory(require(\"vue\"));\n\telse\n\t\troot[\"index\"] = factory(root[\"Vue\"]);\n})((typeof self !== 'undefined' ? self : this), function(__WEBPACK_EXTERNAL_MODULE__8bbf__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","var aFunction = require('../internals/a-function');\n\n// optional / simple context binding\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 0: return function () {\n      return fn.call(that);\n    };\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar flattenIntoArray = require('../internals/flatten-into-array');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar toInteger = require('../internals/to-integer');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\n// `Array.prototype.flat` method\n// https://tc39.es/ecma262/#sec-array.prototype.flat\n$({ target: 'Array', proto: true }, {\n  flat: function flat(/* depthArg = 1 */) {\n    var depthArg = arguments.length ? arguments[0] : undefined;\n    var O = toObject(this);\n    var sourceLen = toLength(O.length);\n    var A = arraySpeciesCreate(O, 0);\n    A.length = flattenIntoArray(A, O, O, sourceLen, 0, depthArg === undefined ? 1 : toInteger(depthArg));\n    return A;\n  }\n});\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyNames = require('../internals/object-get-own-property-names').f;\n\nvar toString = {}.toString;\n\nvar windowNames = typeof window == 'object' && window && Object.getOwnPropertyNames\n  ? Object.getOwnPropertyNames(window) : [];\n\nvar getWindowNames = function (it) {\n  try {\n    return nativeGetOwnPropertyNames(it);\n  } catch (error) {\n    return windowNames.slice();\n  }\n};\n\n// fallback for IE11 buggy Object.getOwnPropertyNames with iframe and window\nmodule.exports.f = function getOwnPropertyNames(it) {\n  return windowNames && toString.call(it) == '[object Window]'\n    ? getWindowNames(it)\n    : nativeGetOwnPropertyNames(toIndexedObject(it));\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar has = require('../internals/has');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\n\nvar nativeGetOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\nexports.f = DESCRIPTORS ? nativeGetOwnPropertyDescriptor : function getOwnPropertyDescriptor(O, P) {\n  O = toIndexedObject(O);\n  P = toPrimitive(P, true);\n  if (IE8_DOM_DEFINE) try {\n    return nativeGetOwnPropertyDescriptor(O, P);\n  } catch (error) { /* empty */ }\n  if (has(O, P)) return createPropertyDescriptor(!propertyIsEnumerableModule.f.call(O, P), O[P]);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar createElement = require('../internals/document-create-element');\n\n// Thank's IE8 for his funny defineProperty\nmodule.exports = !DESCRIPTORS && !fails(function () {\n  return Object.defineProperty(createElement('div'), 'a', {\n    get: function () { return 7; }\n  }).a != 7;\n});\n","var redefine = require('../internals/redefine');\n\nvar DatePrototype = Date.prototype;\nvar INVALID_DATE = 'Invalid Date';\nvar TO_STRING = 'toString';\nvar nativeDateToString = DatePrototype[TO_STRING];\nvar getTime = DatePrototype.getTime;\n\n// `Date.prototype.toString` method\n// https://tc39.es/ecma262/#sec-date.prototype.tostring\nif (new Date(NaN) + '' != INVALID_DATE) {\n  redefine(DatePrototype, TO_STRING, function toString() {\n    var value = getTime.call(this);\n    // eslint-disable-next-line no-self-compare -- NaN check\n    return value === value ? nativeDateToString.call(this) : INVALID_DATE;\n  });\n}\n","'use strict';\nvar fixRegExpWellKnownSymbolLogic = require('../internals/fix-regexp-well-known-symbol-logic');\nvar isRegExp = require('../internals/is-regexp');\nvar anObject = require('../internals/an-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar speciesConstructor = require('../internals/species-constructor');\nvar advanceStringIndex = require('../internals/advance-string-index');\nvar toLength = require('../internals/to-length');\nvar callRegExpExec = require('../internals/regexp-exec-abstract');\nvar regexpExec = require('../internals/regexp-exec');\nvar fails = require('../internals/fails');\n\nvar arrayPush = [].push;\nvar min = Math.min;\nvar MAX_UINT32 = 0xFFFFFFFF;\n\n// babel-minify transpiles RegExp('x', 'y') -> /x/y and it causes SyntaxError\nvar SUPPORTS_Y = !fails(function () { return !RegExp(MAX_UINT32, 'y'); });\n\n// @@split logic\nfixRegExpWellKnownSymbolLogic('split', 2, function (SPLIT, nativeSplit, maybeCallNative) {\n  var internalSplit;\n  if (\n    'abbc'.split(/(b)*/)[1] == 'c' ||\n    // eslint-disable-next-line regexp/no-empty-group -- required for testing\n    'test'.split(/(?:)/, -1).length != 4 ||\n    'ab'.split(/(?:ab)*/).length != 2 ||\n    '.'.split(/(.?)(.?)/).length != 4 ||\n    // eslint-disable-next-line regexp/no-assertion-capturing-group, regexp/no-empty-group -- required for testing\n    '.'.split(/()()/).length > 1 ||\n    ''.split(/.?/).length\n  ) {\n    // based on es5-shim implementation, need to rework it\n    internalSplit = function (separator, limit) {\n      var string = String(requireObjectCoercible(this));\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (separator === undefined) return [string];\n      // If `separator` is not a regex, use native split\n      if (!isRegExp(separator)) {\n        return nativeSplit.call(string, separator, lim);\n      }\n      var output = [];\n      var flags = (separator.ignoreCase ? 'i' : '') +\n                  (separator.multiline ? 'm' : '') +\n                  (separator.unicode ? 'u' : '') +\n                  (separator.sticky ? 'y' : '');\n      var lastLastIndex = 0;\n      // Make `global` and avoid `lastIndex` issues by working with a copy\n      var separatorCopy = new RegExp(separator.source, flags + 'g');\n      var match, lastIndex, lastLength;\n      while (match = regexpExec.call(separatorCopy, string)) {\n        lastIndex = separatorCopy.lastIndex;\n        if (lastIndex > lastLastIndex) {\n          output.push(string.slice(lastLastIndex, match.index));\n          if (match.length > 1 && match.index < string.length) arrayPush.apply(output, match.slice(1));\n          lastLength = match[0].length;\n          lastLastIndex = lastIndex;\n          if (output.length >= lim) break;\n        }\n        if (separatorCopy.lastIndex === match.index) separatorCopy.lastIndex++; // Avoid an infinite loop\n      }\n      if (lastLastIndex === string.length) {\n        if (lastLength || !separatorCopy.test('')) output.push('');\n      } else output.push(string.slice(lastLastIndex));\n      return output.length > lim ? output.slice(0, lim) : output;\n    };\n  // Chakra, V8\n  } else if ('0'.split(undefined, 0).length) {\n    internalSplit = function (separator, limit) {\n      return separator === undefined && limit === 0 ? [] : nativeSplit.call(this, separator, limit);\n    };\n  } else internalSplit = nativeSplit;\n\n  return [\n    // `String.prototype.split` method\n    // https://tc39.es/ecma262/#sec-string.prototype.split\n    function split(separator, limit) {\n      var O = requireObjectCoercible(this);\n      var splitter = separator == undefined ? undefined : separator[SPLIT];\n      return splitter !== undefined\n        ? splitter.call(separator, O, limit)\n        : internalSplit.call(String(O), separator, limit);\n    },\n    // `RegExp.prototype[@@split]` method\n    // https://tc39.es/ecma262/#sec-regexp.prototype-@@split\n    //\n    // NOTE: This cannot be properly polyfilled in engines that don't support\n    // the 'y' flag.\n    function (regexp, limit) {\n      var res = maybeCallNative(internalSplit, regexp, this, limit, internalSplit !== nativeSplit);\n      if (res.done) return res.value;\n\n      var rx = anObject(regexp);\n      var S = String(this);\n      var C = speciesConstructor(rx, RegExp);\n\n      var unicodeMatching = rx.unicode;\n      var flags = (rx.ignoreCase ? 'i' : '') +\n                  (rx.multiline ? 'm' : '') +\n                  (rx.unicode ? 'u' : '') +\n                  (SUPPORTS_Y ? 'y' : 'g');\n\n      // ^(? + rx + ) is needed, in combination with some S slicing, to\n      // simulate the 'y' flag.\n      var splitter = new C(SUPPORTS_Y ? rx : '^(?:' + rx.source + ')', flags);\n      var lim = limit === undefined ? MAX_UINT32 : limit >>> 0;\n      if (lim === 0) return [];\n      if (S.length === 0) return callRegExpExec(splitter, S) === null ? [S] : [];\n      var p = 0;\n      var q = 0;\n      var A = [];\n      while (q < S.length) {\n        splitter.lastIndex = SUPPORTS_Y ? q : 0;\n        var z = callRegExpExec(splitter, SUPPORTS_Y ? S : S.slice(q));\n        var e;\n        if (\n          z === null ||\n          (e = min(toLength(splitter.lastIndex + (SUPPORTS_Y ? 0 : q)), S.length)) === p\n        ) {\n          q = advanceStringIndex(S, q, unicodeMatching);\n        } else {\n          A.push(S.slice(p, q));\n          if (A.length === lim) return A;\n          for (var i = 1; i <= z.length - 1; i++) {\n            A.push(z[i]);\n            if (A.length === lim) return A;\n          }\n          q = p = e;\n        }\n      }\n      A.push(S.slice(p));\n      return A;\n    }\n  ];\n}, !SUPPORTS_Y);\n","var classof = require('./classof-raw');\nvar regexpExec = require('./regexp-exec');\n\n// `RegExpExec` abstract operation\n// https://tc39.es/ecma262/#sec-regexpexec\nmodule.exports = function (R, S) {\n  var exec = R.exec;\n  if (typeof exec === 'function') {\n    var result = exec.call(R, S);\n    if (typeof result !== 'object') {\n      throw TypeError('RegExp exec method returned something other than an Object or null');\n    }\n    return result;\n  }\n\n  if (classof(R) !== 'RegExp') {\n    throw TypeError('RegExp#exec called on incompatible receiver');\n  }\n\n  return regexpExec.call(R, S);\n};\n\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar forEach = require('../internals/array-for-each');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  // some Chrome versions have non-configurable methods on DOMTokenList\n  if (CollectionPrototype && CollectionPrototype.forEach !== forEach) try {\n    createNonEnumerableProperty(CollectionPrototype, 'forEach', forEach);\n  } catch (error) {\n    CollectionPrototype.forEach = forEach;\n  }\n}\n","'use strict';\nvar $forEach = require('../internals/array-iteration').forEach;\nvar arrayMethodIsStrict = require('../internals/array-method-is-strict');\n\nvar STRICT_METHOD = arrayMethodIsStrict('forEach');\n\n// `Array.prototype.forEach` method implementation\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\nmodule.exports = !STRICT_METHOD ? function forEach(callbackfn /* , thisArg */) {\n  return $forEach(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n} : [].forEach;\n","module.exports = function (it, Constructor, name) {\n  if (!(it instanceof Constructor)) {\n    throw TypeError('Incorrect ' + (name ? name + ' ' : '') + 'invocation');\n  } return it;\n};\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('document', 'documentElement');\n","module.exports = function (it) {\n  if (typeof it != 'function') {\n    throw TypeError(String(it) + ' is not a function');\n  } return it;\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar SAFE_CLOSING = false;\n\ntry {\n  var called = 0;\n  var iteratorWithReturn = {\n    next: function () {\n      return { done: !!called++ };\n    },\n    'return': function () {\n      SAFE_CLOSING = true;\n    }\n  };\n  iteratorWithReturn[ITERATOR] = function () {\n    return this;\n  };\n  // eslint-disable-next-line no-throw-literal -- required for testing\n  Array.from(iteratorWithReturn, function () { throw 2; });\n} catch (error) { /* empty */ }\n\nmodule.exports = function (exec, SKIP_CLOSING) {\n  if (!SKIP_CLOSING && !SAFE_CLOSING) return false;\n  var ITERATION_SUPPORT = false;\n  try {\n    var object = {};\n    object[ITERATOR] = function () {\n      return {\n        next: function () {\n          return { done: ITERATION_SUPPORT = true };\n        }\n      };\n    };\n    exec(object);\n  } catch (error) { /* empty */ }\n  return ITERATION_SUPPORT;\n};\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /(iphone|ipod|ipad).*applewebkit/i.test(userAgent);\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar defineProperties = require('../internals/object-define-properties');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\n$({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperties: defineProperties\n});\n","// `RequireObjectCoercible` abstract operation\n// https://tc39.es/ecma262/#sec-requireobjectcoercible\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on \" + it);\n  return it;\n};\n","var fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (METHOD_NAME) {\n  // We can't use this feature detection in V8 since it causes\n  // deoptimization and serious performance degradation\n  // https://github.com/zloirock/core-js/issues/677\n  return V8_VERSION >= 51 || !fails(function () {\n    var array = [];\n    var constructor = array.constructor = {};\n    constructor[SPECIES] = function () {\n      return { foo: 1 };\n    };\n    return array[METHOD_NAME](Boolean).foo !== 1;\n  });\n};\n","var anObject = require('../internals/an-object');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\nvar getIteratorMethod = require('../internals/get-iterator-method');\nvar iteratorClose = require('../internals/iterator-close');\n\nvar Result = function (stopped, result) {\n  this.stopped = stopped;\n  this.result = result;\n};\n\nmodule.exports = function (iterable, unboundFunction, options) {\n  var that = options && options.that;\n  var AS_ENTRIES = !!(options && options.AS_ENTRIES);\n  var IS_ITERATOR = !!(options && options.IS_ITERATOR);\n  var INTERRUPTED = !!(options && options.INTERRUPTED);\n  var fn = bind(unboundFunction, that, 1 + AS_ENTRIES + INTERRUPTED);\n  var iterator, iterFn, index, length, result, next, step;\n\n  var stop = function (condition) {\n    if (iterator) iteratorClose(iterator);\n    return new Result(true, condition);\n  };\n\n  var callFn = function (value) {\n    if (AS_ENTRIES) {\n      anObject(value);\n      return INTERRUPTED ? fn(value[0], value[1], stop) : fn(value[0], value[1]);\n    } return INTERRUPTED ? fn(value, stop) : fn(value);\n  };\n\n  if (IS_ITERATOR) {\n    iterator = iterable;\n  } else {\n    iterFn = getIteratorMethod(iterable);\n    if (typeof iterFn != 'function') throw TypeError('Target is not iterable');\n    // optimisation for array iterators\n    if (isArrayIteratorMethod(iterFn)) {\n      for (index = 0, length = toLength(iterable.length); length > index; index++) {\n        result = callFn(iterable[index]);\n        if (result && result instanceof Result) return result;\n      } return new Result(false);\n    }\n    iterator = iterFn.call(iterable);\n  }\n\n  next = iterator.next;\n  while (!(step = next.call(iterator)).done) {\n    try {\n      result = callFn(step.value);\n    } catch (error) {\n      iteratorClose(iterator);\n      throw error;\n    }\n    if (typeof result == 'object' && result && result instanceof Result) return result;\n  } return new Result(false);\n};\n","var toInteger = require('../internals/to-integer');\n\nvar max = Math.max;\nvar min = Math.min;\n\n// Helper for a popular repeating case of the spec:\n// Let integer be ? ToInteger(index).\n// If integer < 0, let result be max((length + integer), 0); else let result be min(integer, length).\nmodule.exports = function (index, length) {\n  var integer = toInteger(index);\n  return integer < 0 ? max(integer + length, 0) : min(integer, length);\n};\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar setGlobal = require('../internals/set-global');\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\nvar isForced = require('../internals/is-forced');\n\n/*\n  options.target      - name of the target object\n  options.global      - target is the global object\n  options.stat        - export as static methods of target\n  options.proto       - export as prototype methods of target\n  options.real        - real prototype method for the `pure` version\n  options.forced      - export even if the native feature is available\n  options.bind        - bind methods to the target, required for the `pure` version\n  options.wrap        - wrap constructors to preventing global pollution, required for the `pure` version\n  options.unsafe      - use the simple assignment of property instead of delete + defineProperty\n  options.sham        - add a flag to not completely full polyfills\n  options.enumerable  - export as enumerable property\n  options.noTargetGet - prevent calling a getter on target\n*/\nmodule.exports = function (options, source) {\n  var TARGET = options.target;\n  var GLOBAL = options.global;\n  var STATIC = options.stat;\n  var FORCED, target, key, targetProperty, sourceProperty, descriptor;\n  if (GLOBAL) {\n    target = global;\n  } else if (STATIC) {\n    target = global[TARGET] || setGlobal(TARGET, {});\n  } else {\n    target = (global[TARGET] || {}).prototype;\n  }\n  if (target) for (key in source) {\n    sourceProperty = source[key];\n    if (options.noTargetGet) {\n      descriptor = getOwnPropertyDescriptor(target, key);\n      targetProperty = descriptor && descriptor.value;\n    } else targetProperty = target[key];\n    FORCED = isForced(GLOBAL ? key : TARGET + (STATIC ? '.' : '#') + key, options.forced);\n    // contained in target\n    if (!FORCED && targetProperty !== undefined) {\n      if (typeof sourceProperty === typeof targetProperty) continue;\n      copyConstructorProperties(sourceProperty, targetProperty);\n    }\n    // add a flag to not completely full polyfills\n    if (options.sham || (targetProperty && targetProperty.sham)) {\n      createNonEnumerableProperty(sourceProperty, 'sham', true);\n    }\n    // extend global\n    redefine(target, key, sourceProperty, options);\n  }\n};\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\nvar hiddenKeys = enumBugKeys.concat('length', 'prototype');\n\n// `Object.getOwnPropertyNames` method\n// https://tc39.es/ecma262/#sec-object.getownpropertynames\nexports.f = Object.getOwnPropertyNames || function getOwnPropertyNames(O) {\n  return internalObjectKeys(O, hiddenKeys);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.es/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar redefine = require('../internals/redefine');\nvar anObject = require('../internals/an-object');\nvar fails = require('../internals/fails');\nvar flags = require('../internals/regexp-flags');\n\nvar TO_STRING = 'toString';\nvar RegExpPrototype = RegExp.prototype;\nvar nativeToString = RegExpPrototype[TO_STRING];\n\nvar NOT_GENERIC = fails(function () { return nativeToString.call({ source: 'a', flags: 'b' }) != '/a/b'; });\n// FF44- RegExp#toString has a wrong name\nvar INCORRECT_NAME = nativeToString.name != TO_STRING;\n\n// `RegExp.prototype.toString` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.tostring\nif (NOT_GENERIC || INCORRECT_NAME) {\n  redefine(RegExp.prototype, TO_STRING, function toString() {\n    var R = anObject(this);\n    var p = String(R.source);\n    var rf = R.flags;\n    var f = String(rf === undefined && R instanceof RegExp && !('flags' in RegExpPrototype) ? flags.call(R) : rf);\n    return '/' + p + '/' + f;\n  }, { unsafe: true });\n}\n","'use strict';\nvar getBuiltIn = require('../internals/get-built-in');\nvar definePropertyModule = require('../internals/object-define-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar SPECIES = wellKnownSymbol('species');\n\nmodule.exports = function (CONSTRUCTOR_NAME) {\n  var Constructor = getBuiltIn(CONSTRUCTOR_NAME);\n  var defineProperty = definePropertyModule.f;\n\n  if (DESCRIPTORS && Constructor && !Constructor[SPECIES]) {\n    defineProperty(Constructor, SPECIES, {\n      configurable: true,\n      get: function () { return this; }\n    });\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\nvar nativeReverse = [].reverse;\nvar test = [1, 2];\n\n// `Array.prototype.reverse` method\n// https://tc39.es/ecma262/#sec-array.prototype.reverse\n// fix for Safari 12.0 bug\n// https://bugs.webkit.org/show_bug.cgi?id=188794\n$({ target: 'Array', proto: true, forced: String(test) === String(test.reverse()) }, {\n  reverse: function reverse() {\n    // eslint-disable-next-line no-self-assign -- dirty hack\n    if (isArray(this)) this.length = this.length;\n    return nativeReverse.call(this);\n  }\n});\n","var $ = require('../internals/export');\nvar isArray = require('../internals/is-array');\n\n// `Array.isArray` method\n// https://tc39.es/ecma262/#sec-array.isarray\n$({ target: 'Array', stat: true }, {\n  isArray: isArray\n});\n","var anObject = require('../internals/an-object');\n\nmodule.exports = function (iterator) {\n  var returnMethod = iterator['return'];\n  if (returnMethod !== undefined) {\n    return anObject(returnMethod.call(iterator)).value;\n  }\n};\n","var global = require('../internals/global');\nvar fails = require('../internals/fails');\nvar bind = require('../internals/function-bind-context');\nvar html = require('../internals/html');\nvar createElement = require('../internals/document-create-element');\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar location = global.location;\nvar set = global.setImmediate;\nvar clear = global.clearImmediate;\nvar process = global.process;\nvar MessageChannel = global.MessageChannel;\nvar Dispatch = global.Dispatch;\nvar counter = 0;\nvar queue = {};\nvar ONREADYSTATECHANGE = 'onreadystatechange';\nvar defer, channel, port;\n\nvar run = function (id) {\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  if (queue.hasOwnProperty(id)) {\n    var fn = queue[id];\n    delete queue[id];\n    fn();\n  }\n};\n\nvar runner = function (id) {\n  return function () {\n    run(id);\n  };\n};\n\nvar listener = function (event) {\n  run(event.data);\n};\n\nvar post = function (id) {\n  // old engines have not location.origin\n  global.postMessage(id + '', location.protocol + '//' + location.host);\n};\n\n// Node.js 0.9+ & IE10+ has setImmediate, otherwise:\nif (!set || !clear) {\n  set = function setImmediate(fn) {\n    var args = [];\n    var i = 1;\n    while (arguments.length > i) args.push(arguments[i++]);\n    queue[++counter] = function () {\n      // eslint-disable-next-line no-new-func -- spec requirement\n      (typeof fn == 'function' ? fn : Function(fn)).apply(undefined, args);\n    };\n    defer(counter);\n    return counter;\n  };\n  clear = function clearImmediate(id) {\n    delete queue[id];\n  };\n  // Node.js 0.8-\n  if (IS_NODE) {\n    defer = function (id) {\n      process.nextTick(runner(id));\n    };\n  // Sphere (JS game engine) Dispatch API\n  } else if (Dispatch && Dispatch.now) {\n    defer = function (id) {\n      Dispatch.now(runner(id));\n    };\n  // Browsers with MessageChannel, includes WebWorkers\n  // except iOS - https://github.com/zloirock/core-js/issues/624\n  } else if (MessageChannel && !IS_IOS) {\n    channel = new MessageChannel();\n    port = channel.port2;\n    channel.port1.onmessage = listener;\n    defer = bind(port.postMessage, port, 1);\n  // Browsers with postMessage, skip WebWorkers\n  // IE8 has postMessage, but it's sync & typeof its postMessage is 'object'\n  } else if (\n    global.addEventListener &&\n    typeof postMessage == 'function' &&\n    !global.importScripts &&\n    location && location.protocol !== 'file:' &&\n    !fails(post)\n  ) {\n    defer = post;\n    global.addEventListener('message', listener, false);\n  // IE8-\n  } else if (ONREADYSTATECHANGE in createElement('script')) {\n    defer = function (id) {\n      html.appendChild(createElement('script'))[ONREADYSTATECHANGE] = function () {\n        html.removeChild(this);\n        run(id);\n      };\n    };\n  // Rest old browsers\n  } else {\n    defer = function (id) {\n      setTimeout(runner(id), 0);\n    };\n  }\n}\n\nmodule.exports = {\n  set: set,\n  clear: clear\n};\n","var global = require('../internals/global');\nvar userAgent = require('../internals/engine-user-agent');\n\nvar process = global.process;\nvar versions = process && process.versions;\nvar v8 = versions && versions.v8;\nvar match, version;\n\nif (v8) {\n  match = v8.split('.');\n  version = match[0] + match[1];\n} else if (userAgent) {\n  match = userAgent.match(/Edge\\/(\\d+)/);\n  if (!match || match[1] >= 74) {\n    match = userAgent.match(/Chrome\\/(\\d+)/);\n    if (match) version = match[1];\n  }\n}\n\nmodule.exports = version && +version;\n","var getBuiltIn = require('../internals/get-built-in');\n\nmodule.exports = getBuiltIn('navigator', 'userAgent') || '';\n","var classof = require('../internals/classof');\nvar Iterators = require('../internals/iterators');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\n\nmodule.exports = function (it) {\n  if (it != undefined) return it[ITERATOR]\n    || it['@@iterator']\n    || Iterators[classof(it)];\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar anObject = require('../internals/an-object');\nvar objectKeys = require('../internals/object-keys');\n\n// `Object.defineProperties` method\n// https://tc39.es/ecma262/#sec-object.defineproperties\nmodule.exports = DESCRIPTORS ? Object.defineProperties : function defineProperties(O, Properties) {\n  anObject(O);\n  var keys = objectKeys(Properties);\n  var length = keys.length;\n  var index = 0;\n  var key;\n  while (length > index) definePropertyModule.f(O, key = keys[index++], Properties[key]);\n  return O;\n};\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it) && it !== null) {\n    throw TypeError(\"Can't set \" + String(it) + ' as a prototype');\n  } return it;\n};\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar STRING_ITERATOR = 'String Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(STRING_ITERATOR);\n\n// `String.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-string.prototype-@@iterator\ndefineIterator(String, 'String', function (iterated) {\n  setInternalState(this, {\n    type: STRING_ITERATOR,\n    string: String(iterated),\n    index: 0\n  });\n// `%StringIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%stringiteratorprototype%.next\n}, function next() {\n  var state = getInternalState(this);\n  var string = state.string;\n  var index = state.index;\n  var point;\n  if (index >= string.length) return { value: undefined, done: true };\n  point = charAt(string, index);\n  state.index += point.length;\n  return { value: point, done: false };\n});\n","module.exports = {};\n","'use strict';\nvar $ = require('../internals/export');\nvar forEach = require('../internals/array-for-each');\n\n// `Array.prototype.forEach` method\n// https://tc39.es/ecma262/#sec-array.prototype.foreach\n$({ target: 'Array', proto: true, forced: [].forEach != forEach }, {\n  forEach: forEach\n});\n","var global = require('../internals/global');\n\nmodule.exports = global;\n","var fails = require('../internals/fails');\nvar classof = require('../internals/classof-raw');\n\nvar split = ''.split;\n\n// fallback for non-array-like ES3 and non-enumerable old V8 strings\nmodule.exports = fails(function () {\n  // throws an error in rhino, see https://github.com/mozilla/rhino/issues/346\n  // eslint-disable-next-line no-prototype-builtins -- safe\n  return !Object('z').propertyIsEnumerable(0);\n}) ? function (it) {\n  return classof(it) == 'String' ? split.call(it, '') : Object(it);\n} : Object;\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar create = require('../internals/object-create');\nvar definePropertyModule = require('../internals/object-define-property');\n\nvar UNSCOPABLES = wellKnownSymbol('unscopables');\nvar ArrayPrototype = Array.prototype;\n\n// Array.prototype[@@unscopables]\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\nif (ArrayPrototype[UNSCOPABLES] == undefined) {\n  definePropertyModule.f(ArrayPrototype, UNSCOPABLES, {\n    configurable: true,\n    value: create(null)\n  });\n}\n\n// add a key to Array.prototype[@@unscopables]\nmodule.exports = function (key) {\n  ArrayPrototype[UNSCOPABLES][key] = true;\n};\n","var global = require('../internals/global');\n\nmodule.exports = function (a, b) {\n  var console = global.console;\n  if (console && console.error) {\n    arguments.length === 1 ? console.error(a) : console.error(a, b);\n  }\n};\n","var isObject = require('../internals/is-object');\nvar classof = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\n// `IsRegExp` abstract operation\n// https://tc39.es/ecma262/#sec-isregexp\nmodule.exports = function (it) {\n  var isRegExp;\n  return isObject(it) && ((isRegExp = it[MATCH]) !== undefined ? !!isRegExp : classof(it) == 'RegExp');\n};\n","var anObject = require('../internals/an-object');\nvar aFunction = require('../internals/a-function');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `SpeciesConstructor` abstract operation\n// https://tc39.es/ecma262/#sec-speciesconstructor\nmodule.exports = function (O, defaultConstructor) {\n  var C = anObject(O).constructor;\n  var S;\n  return C === undefined || (S = anObject(C)[SPECIES]) == undefined ? defaultConstructor : aFunction(S);\n};\n","var IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\nvar fails = require('../internals/fails');\n\nmodule.exports = !!Object.getOwnPropertySymbols && !fails(function () {\n  /* global Symbol -- required for testing */\n  return !Symbol.sham &&\n    // Chrome 38 Symbol has incorrect toString conversion\n    // Chrome 38-40 symbols are not inherited from DOM collections prototypes to instances\n    (IS_NODE ? V8_VERSION === 38 : V8_VERSION > 37 && V8_VERSION < 41);\n});\n","var toIndexedObject = require('../internals/to-indexed-object');\nvar toLength = require('../internals/to-length');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\n\n// `Array.prototype.{ indexOf, includes }` methods implementation\nvar createMethod = function (IS_INCLUDES) {\n  return function ($this, el, fromIndex) {\n    var O = toIndexedObject($this);\n    var length = toLength(O.length);\n    var index = toAbsoluteIndex(fromIndex, length);\n    var value;\n    // Array#includes uses SameValueZero equality algorithm\n    // eslint-disable-next-line no-self-compare -- NaN check\n    if (IS_INCLUDES && el != el) while (length > index) {\n      value = O[index++];\n      // eslint-disable-next-line no-self-compare -- NaN check\n      if (value != value) return true;\n    // Array#indexOf ignores holes, Array#includes - not\n    } else for (;length > index; index++) {\n      if ((IS_INCLUDES || index in O) && O[index] === el) return IS_INCLUDES || index || 0;\n    } return !IS_INCLUDES && -1;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.includes` method\n  // https://tc39.es/ecma262/#sec-array.prototype.includes\n  includes: createMethod(true),\n  // `Array.prototype.indexOf` method\n  // https://tc39.es/ecma262/#sec-array.prototype.indexof\n  indexOf: createMethod(false)\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $filter = require('../internals/array-iteration').filter;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('filter');\n\n// `Array.prototype.filter` method\n// https://tc39.es/ecma262/#sec-array.prototype.filter\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  filter: function filter(callbackfn /* , thisArg */) {\n    return $filter(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","'use strict';\nvar bind = require('../internals/function-bind-context');\nvar toObject = require('../internals/to-object');\nvar callWithSafeIterationClosing = require('../internals/call-with-safe-iteration-closing');\nvar isArrayIteratorMethod = require('../internals/is-array-iterator-method');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar getIteratorMethod = require('../internals/get-iterator-method');\n\n// `Array.from` method implementation\n// https://tc39.es/ecma262/#sec-array.from\nmodule.exports = function from(arrayLike /* , mapfn = undefined, thisArg = undefined */) {\n  var O = toObject(arrayLike);\n  var C = typeof this == 'function' ? this : Array;\n  var argumentsLength = arguments.length;\n  var mapfn = argumentsLength > 1 ? arguments[1] : undefined;\n  var mapping = mapfn !== undefined;\n  var iteratorMethod = getIteratorMethod(O);\n  var index = 0;\n  var length, result, step, iterator, next, value;\n  if (mapping) mapfn = bind(mapfn, argumentsLength > 2 ? arguments[2] : undefined, 2);\n  // if the target is not iterable or it's an array with the default iterator - use a simple case\n  if (iteratorMethod != undefined && !(C == Array && isArrayIteratorMethod(iteratorMethod))) {\n    iterator = iteratorMethod.call(O);\n    next = iterator.next;\n    result = new C();\n    for (;!(step = next.call(iterator)).done; index++) {\n      value = mapping ? callWithSafeIterationClosing(iterator, mapfn, [step.value, index], true) : step.value;\n      createProperty(result, index, value);\n    }\n  } else {\n    length = toLength(O.length);\n    result = new C(length);\n    for (;length > index; index++) {\n      value = mapping ? mapfn(O[index], index) : O[index];\n      createProperty(result, index, value);\n    }\n  }\n  result.length = index;\n  return result;\n};\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Map` constructor\n// https://tc39.es/ecma262/#sec-map-objects\nmodule.exports = collection('Map', function (init) {\n  return function Map() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","var toInteger = require('../internals/to-integer');\n\nvar min = Math.min;\n\n// `ToLength` abstract operation\n// https://tc39.es/ecma262/#sec-tolength\nmodule.exports = function (argument) {\n  return argument > 0 ? min(toInteger(argument), 0x1FFFFFFFFFFFFF) : 0; // 2 ** 53 - 1 == 9007199254740991\n};\n","var hasOwnProperty = {}.hasOwnProperty;\n\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var IS_PURE = require('../internals/is-pure');\nvar store = require('../internals/shared-store');\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: '3.9.1',\n  mode: IS_PURE ? 'pure' : 'global',\n  copyright: '© 2021 Denis Pushkarev (zloirock.ru)'\n});\n","var getBuiltIn = require('../internals/get-built-in');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar anObject = require('../internals/an-object');\n\n// all object keys, includes non-enumerable and symbols\nmodule.exports = getBuiltIn('Reflect', 'ownKeys') || function ownKeys(it) {\n  var keys = getOwnPropertyNamesModule.f(anObject(it));\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  return getOwnPropertySymbols ? keys.concat(getOwnPropertySymbols(it)) : keys;\n};\n","// a string of all valid unicode whitespaces\nmodule.exports = '\\u0009\\u000A\\u000B\\u000C\\u000D\\u0020\\u00A0\\u1680\\u2000\\u2001\\u2002' +\n  '\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF';\n","var requireObjectCoercible = require('../internals/require-object-coercible');\nvar whitespaces = require('../internals/whitespaces');\n\nvar whitespace = '[' + whitespaces + ']';\nvar ltrim = RegExp('^' + whitespace + whitespace + '*');\nvar rtrim = RegExp(whitespace + whitespace + '*$');\n\n// `String.prototype.{ trim, trimStart, trimEnd, trimLeft, trimRight }` methods implementation\nvar createMethod = function (TYPE) {\n  return function ($this) {\n    var string = String(requireObjectCoercible($this));\n    if (TYPE & 1) string = string.replace(ltrim, '');\n    if (TYPE & 2) string = string.replace(rtrim, '');\n    return string;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.{ trimLeft, trimStart }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimstart\n  start: createMethod(1),\n  // `String.prototype.{ trimRight, trimEnd }` methods\n  // https://tc39.es/ecma262/#sec-string.prototype.trimend\n  end: createMethod(2),\n  // `String.prototype.trim` method\n  // https://tc39.es/ecma262/#sec-string.prototype.trim\n  trim: createMethod(3)\n};\n","var isRegExp = require('../internals/is-regexp');\n\nmodule.exports = function (it) {\n  if (isRegExp(it)) {\n    throw TypeError(\"The method doesn't accept regular expressions\");\n  } return it;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var classof = require('../internals/classof-raw');\nvar global = require('../internals/global');\n\nmodule.exports = classof(global.process) == 'process';\n","'use strict';\nvar collection = require('../internals/collection');\nvar collectionStrong = require('../internals/collection-strong');\n\n// `Set` constructor\n// https://tc39.es/ecma262/#sec-set-objects\nmodule.exports = collection('Set', function (init) {\n  return function Set() { return init(this, arguments.length ? arguments[0] : undefined); };\n}, collectionStrong);\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fails = require('../internals/fails');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar toObject = require('../internals/to-object');\nvar IndexedObject = require('../internals/indexed-object');\n\nvar nativeAssign = Object.assign;\nvar defineProperty = Object.defineProperty;\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\nmodule.exports = !nativeAssign || fails(function () {\n  // should have correct order of operations (Edge bug)\n  if (DESCRIPTORS && nativeAssign({ b: 1 }, nativeAssign(defineProperty({}, 'a', {\n    enumerable: true,\n    get: function () {\n      defineProperty(this, 'b', {\n        value: 3,\n        enumerable: false\n      });\n    }\n  }), { b: 2 })).b !== 1) return true;\n  // should work with symbols and should have deterministic property order (V8 bug)\n  var A = {};\n  var B = {};\n  /* global Symbol -- required for testing */\n  var symbol = Symbol();\n  var alphabet = 'abcdefghijklmnopqrst';\n  A[symbol] = 7;\n  alphabet.split('').forEach(function (chr) { B[chr] = chr; });\n  return nativeAssign({}, A)[symbol] != 7 || objectKeys(nativeAssign({}, B)).join('') != alphabet;\n}) ? function assign(target, source) { // eslint-disable-line no-unused-vars -- required for `.length`\n  var T = toObject(target);\n  var argumentsLength = arguments.length;\n  var index = 1;\n  var getOwnPropertySymbols = getOwnPropertySymbolsModule.f;\n  var propertyIsEnumerable = propertyIsEnumerableModule.f;\n  while (argumentsLength > index) {\n    var S = IndexedObject(arguments[index++]);\n    var keys = getOwnPropertySymbols ? objectKeys(S).concat(getOwnPropertySymbols(S)) : objectKeys(S);\n    var length = keys.length;\n    var j = 0;\n    var key;\n    while (length > j) {\n      key = keys[j++];\n      if (!DESCRIPTORS || propertyIsEnumerable.call(S, key)) T[key] = S[key];\n    }\n  } return T;\n} : nativeAssign;\n","var toInteger = require('../internals/to-integer');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `String.prototype.{ codePointAt, at }` methods implementation\nvar createMethod = function (CONVERT_TO_STRING) {\n  return function ($this, pos) {\n    var S = String(requireObjectCoercible($this));\n    var position = toInteger(pos);\n    var size = S.length;\n    var first, second;\n    if (position < 0 || position >= size) return CONVERT_TO_STRING ? '' : undefined;\n    first = S.charCodeAt(position);\n    return first < 0xD800 || first > 0xDBFF || position + 1 === size\n      || (second = S.charCodeAt(position + 1)) < 0xDC00 || second > 0xDFFF\n        ? CONVERT_TO_STRING ? S.charAt(position) : first\n        : CONVERT_TO_STRING ? S.slice(position, position + 2) : (first - 0xD800 << 10) + (second - 0xDC00) + 0x10000;\n  };\n};\n\nmodule.exports = {\n  // `String.prototype.codePointAt` method\n  // https://tc39.es/ecma262/#sec-string.prototype.codepointat\n  codeAt: createMethod(false),\n  // `String.prototype.at` method\n  // https://github.com/mathiasbynens/String.prototype.at\n  charAt: createMethod(true)\n};\n","'use strict';\nvar defineProperty = require('../internals/object-define-property').f;\nvar create = require('../internals/object-create');\nvar redefineAll = require('../internals/redefine-all');\nvar bind = require('../internals/function-bind-context');\nvar anInstance = require('../internals/an-instance');\nvar iterate = require('../internals/iterate');\nvar defineIterator = require('../internals/define-iterator');\nvar setSpecies = require('../internals/set-species');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar fastKey = require('../internals/internal-metadata').fastKey;\nvar InternalStateModule = require('../internals/internal-state');\n\nvar setInternalState = InternalStateModule.set;\nvar internalStateGetterFor = InternalStateModule.getterFor;\n\nmodule.exports = {\n  getConstructor: function (wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER) {\n    var C = wrapper(function (that, iterable) {\n      anInstance(that, C, CONSTRUCTOR_NAME);\n      setInternalState(that, {\n        type: CONSTRUCTOR_NAME,\n        index: create(null),\n        first: undefined,\n        last: undefined,\n        size: 0\n      });\n      if (!DESCRIPTORS) that.size = 0;\n      if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n    });\n\n    var getInternalState = internalStateGetterFor(CONSTRUCTOR_NAME);\n\n    var define = function (that, key, value) {\n      var state = getInternalState(that);\n      var entry = getEntry(that, key);\n      var previous, index;\n      // change existing entry\n      if (entry) {\n        entry.value = value;\n      // create new entry\n      } else {\n        state.last = entry = {\n          index: index = fastKey(key, true),\n          key: key,\n          value: value,\n          previous: previous = state.last,\n          next: undefined,\n          removed: false\n        };\n        if (!state.first) state.first = entry;\n        if (previous) previous.next = entry;\n        if (DESCRIPTORS) state.size++;\n        else that.size++;\n        // add to index\n        if (index !== 'F') state.index[index] = entry;\n      } return that;\n    };\n\n    var getEntry = function (that, key) {\n      var state = getInternalState(that);\n      // fast case\n      var index = fastKey(key);\n      var entry;\n      if (index !== 'F') return state.index[index];\n      // frozen object case\n      for (entry = state.first; entry; entry = entry.next) {\n        if (entry.key == key) return entry;\n      }\n    };\n\n    redefineAll(C.prototype, {\n      // 23.1.3.1 Map.prototype.clear()\n      // 23.2.3.2 Set.prototype.clear()\n      clear: function clear() {\n        var that = this;\n        var state = getInternalState(that);\n        var data = state.index;\n        var entry = state.first;\n        while (entry) {\n          entry.removed = true;\n          if (entry.previous) entry.previous = entry.previous.next = undefined;\n          delete data[entry.index];\n          entry = entry.next;\n        }\n        state.first = state.last = undefined;\n        if (DESCRIPTORS) state.size = 0;\n        else that.size = 0;\n      },\n      // 23.1.3.3 Map.prototype.delete(key)\n      // 23.2.3.4 Set.prototype.delete(value)\n      'delete': function (key) {\n        var that = this;\n        var state = getInternalState(that);\n        var entry = getEntry(that, key);\n        if (entry) {\n          var next = entry.next;\n          var prev = entry.previous;\n          delete state.index[entry.index];\n          entry.removed = true;\n          if (prev) prev.next = next;\n          if (next) next.previous = prev;\n          if (state.first == entry) state.first = next;\n          if (state.last == entry) state.last = prev;\n          if (DESCRIPTORS) state.size--;\n          else that.size--;\n        } return !!entry;\n      },\n      // 23.2.3.6 Set.prototype.forEach(callbackfn, thisArg = undefined)\n      // 23.1.3.5 Map.prototype.forEach(callbackfn, thisArg = undefined)\n      forEach: function forEach(callbackfn /* , that = undefined */) {\n        var state = getInternalState(this);\n        var boundFunction = bind(callbackfn, arguments.length > 1 ? arguments[1] : undefined, 3);\n        var entry;\n        while (entry = entry ? entry.next : state.first) {\n          boundFunction(entry.value, entry.key, this);\n          // revert to the last existing entry\n          while (entry && entry.removed) entry = entry.previous;\n        }\n      },\n      // 23.1.3.7 Map.prototype.has(key)\n      // 23.2.3.7 Set.prototype.has(value)\n      has: function has(key) {\n        return !!getEntry(this, key);\n      }\n    });\n\n    redefineAll(C.prototype, IS_MAP ? {\n      // 23.1.3.6 Map.prototype.get(key)\n      get: function get(key) {\n        var entry = getEntry(this, key);\n        return entry && entry.value;\n      },\n      // 23.1.3.9 Map.prototype.set(key, value)\n      set: function set(key, value) {\n        return define(this, key === 0 ? 0 : key, value);\n      }\n    } : {\n      // 23.2.3.1 Set.prototype.add(value)\n      add: function add(value) {\n        return define(this, value = value === 0 ? 0 : value, value);\n      }\n    });\n    if (DESCRIPTORS) defineProperty(C.prototype, 'size', {\n      get: function () {\n        return getInternalState(this).size;\n      }\n    });\n    return C;\n  },\n  setStrong: function (C, CONSTRUCTOR_NAME, IS_MAP) {\n    var ITERATOR_NAME = CONSTRUCTOR_NAME + ' Iterator';\n    var getInternalCollectionState = internalStateGetterFor(CONSTRUCTOR_NAME);\n    var getInternalIteratorState = internalStateGetterFor(ITERATOR_NAME);\n    // add .keys, .values, .entries, [@@iterator]\n    // 23.1.3.4, 23.1.3.8, 23.1.3.11, 23.1.3.12, 23.2.3.5, 23.2.3.8, 23.2.3.10, 23.2.3.11\n    defineIterator(C, CONSTRUCTOR_NAME, function (iterated, kind) {\n      setInternalState(this, {\n        type: ITERATOR_NAME,\n        target: iterated,\n        state: getInternalCollectionState(iterated),\n        kind: kind,\n        last: undefined\n      });\n    }, function () {\n      var state = getInternalIteratorState(this);\n      var kind = state.kind;\n      var entry = state.last;\n      // revert to the last existing entry\n      while (entry && entry.removed) entry = entry.previous;\n      // get next entry\n      if (!state.target || !(state.last = entry = entry ? entry.next : state.state.first)) {\n        // or finish the iteration\n        state.target = undefined;\n        return { value: undefined, done: true };\n      }\n      // return step by kind\n      if (kind == 'keys') return { value: entry.key, done: false };\n      if (kind == 'values') return { value: entry.value, done: false };\n      return { value: [entry.key, entry.value], done: false };\n    }, IS_MAP ? 'entries' : 'values', !IS_MAP, true);\n\n    // add [@@species], 23.1.2.2, 23.2.2.2\n    setSpecies(CONSTRUCTOR_NAME);\n  }\n};\n","var isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar SPECIES = wellKnownSymbol('species');\n\n// `ArraySpeciesCreate` abstract operation\n// https://tc39.es/ecma262/#sec-arrayspeciescreate\nmodule.exports = function (originalArray, length) {\n  var C;\n  if (isArray(originalArray)) {\n    C = originalArray.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    else if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return new (C === undefined ? Array : C)(length === 0 ? 0 : length);\n};\n","var NATIVE_WEAK_MAP = require('../internals/native-weak-map');\nvar global = require('../internals/global');\nvar isObject = require('../internals/is-object');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar objectHas = require('../internals/has');\nvar shared = require('../internals/shared-store');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\n\nvar WeakMap = global.WeakMap;\nvar set, get, has;\n\nvar enforce = function (it) {\n  return has(it) ? get(it) : set(it, {});\n};\n\nvar getterFor = function (TYPE) {\n  return function (it) {\n    var state;\n    if (!isObject(it) || (state = get(it)).type !== TYPE) {\n      throw TypeError('Incompatible receiver, ' + TYPE + ' required');\n    } return state;\n  };\n};\n\nif (NATIVE_WEAK_MAP) {\n  var store = shared.state || (shared.state = new WeakMap());\n  var wmget = store.get;\n  var wmhas = store.has;\n  var wmset = store.set;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    wmset.call(store, it, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return wmget.call(store, it) || {};\n  };\n  has = function (it) {\n    return wmhas.call(store, it);\n  };\n} else {\n  var STATE = sharedKey('state');\n  hiddenKeys[STATE] = true;\n  set = function (it, metadata) {\n    metadata.facade = it;\n    createNonEnumerableProperty(it, STATE, metadata);\n    return metadata;\n  };\n  get = function (it) {\n    return objectHas(it, STATE) ? it[STATE] : {};\n  };\n  has = function (it) {\n    return objectHas(it, STATE);\n  };\n}\n\nmodule.exports = {\n  set: set,\n  get: get,\n  has: has,\n  enforce: enforce,\n  getterFor: getterFor\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar InternalMetadataModule = require('../internals/internal-metadata');\nvar iterate = require('../internals/iterate');\nvar anInstance = require('../internals/an-instance');\nvar isObject = require('../internals/is-object');\nvar fails = require('../internals/fails');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar inheritIfRequired = require('../internals/inherit-if-required');\n\nmodule.exports = function (CONSTRUCTOR_NAME, wrapper, common) {\n  var IS_MAP = CONSTRUCTOR_NAME.indexOf('Map') !== -1;\n  var IS_WEAK = CONSTRUCTOR_NAME.indexOf('Weak') !== -1;\n  var ADDER = IS_MAP ? 'set' : 'add';\n  var NativeConstructor = global[CONSTRUCTOR_NAME];\n  var NativePrototype = NativeConstructor && NativeConstructor.prototype;\n  var Constructor = NativeConstructor;\n  var exported = {};\n\n  var fixMethod = function (KEY) {\n    var nativeMethod = NativePrototype[KEY];\n    redefine(NativePrototype, KEY,\n      KEY == 'add' ? function add(value) {\n        nativeMethod.call(this, value === 0 ? 0 : value);\n        return this;\n      } : KEY == 'delete' ? function (key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'get' ? function get(key) {\n        return IS_WEAK && !isObject(key) ? undefined : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : KEY == 'has' ? function has(key) {\n        return IS_WEAK && !isObject(key) ? false : nativeMethod.call(this, key === 0 ? 0 : key);\n      } : function set(key, value) {\n        nativeMethod.call(this, key === 0 ? 0 : key, value);\n        return this;\n      }\n    );\n  };\n\n  var REPLACE = isForced(\n    CONSTRUCTOR_NAME,\n    typeof NativeConstructor != 'function' || !(IS_WEAK || NativePrototype.forEach && !fails(function () {\n      new NativeConstructor().entries().next();\n    }))\n  );\n\n  if (REPLACE) {\n    // create collection constructor\n    Constructor = common.getConstructor(wrapper, CONSTRUCTOR_NAME, IS_MAP, ADDER);\n    InternalMetadataModule.REQUIRED = true;\n  } else if (isForced(CONSTRUCTOR_NAME, true)) {\n    var instance = new Constructor();\n    // early implementations not supports chaining\n    var HASNT_CHAINING = instance[ADDER](IS_WEAK ? {} : -0, 1) != instance;\n    // V8 ~ Chromium 40- weak-collections throws on primitives, but should return false\n    var THROWS_ON_PRIMITIVES = fails(function () { instance.has(1); });\n    // most early implementations doesn't supports iterables, most modern - not close it correctly\n    // eslint-disable-next-line no-new -- required for testing\n    var ACCEPT_ITERABLES = checkCorrectnessOfIteration(function (iterable) { new NativeConstructor(iterable); });\n    // for early implementations -0 and +0 not the same\n    var BUGGY_ZERO = !IS_WEAK && fails(function () {\n      // V8 ~ Chromium 42- fails only with 5+ elements\n      var $instance = new NativeConstructor();\n      var index = 5;\n      while (index--) $instance[ADDER](index, index);\n      return !$instance.has(-0);\n    });\n\n    if (!ACCEPT_ITERABLES) {\n      Constructor = wrapper(function (dummy, iterable) {\n        anInstance(dummy, Constructor, CONSTRUCTOR_NAME);\n        var that = inheritIfRequired(new NativeConstructor(), dummy, Constructor);\n        if (iterable != undefined) iterate(iterable, that[ADDER], { that: that, AS_ENTRIES: IS_MAP });\n        return that;\n      });\n      Constructor.prototype = NativePrototype;\n      NativePrototype.constructor = Constructor;\n    }\n\n    if (THROWS_ON_PRIMITIVES || BUGGY_ZERO) {\n      fixMethod('delete');\n      fixMethod('has');\n      IS_MAP && fixMethod('get');\n    }\n\n    if (BUGGY_ZERO || HASNT_CHAINING) fixMethod(ADDER);\n\n    // weak collections should not contains .clear method\n    if (IS_WEAK && NativePrototype.clear) delete NativePrototype.clear;\n  }\n\n  exported[CONSTRUCTOR_NAME] = Constructor;\n  $({ global: true, forced: Constructor != NativeConstructor }, exported);\n\n  setToStringTag(Constructor, CONSTRUCTOR_NAME);\n\n  if (!IS_WEAK) common.setStrong(Constructor, CONSTRUCTOR_NAME, IS_MAP);\n\n  return Constructor;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar setGlobal = require('../internals/set-global');\nvar inspectSource = require('../internals/inspect-source');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar getInternalState = InternalStateModule.get;\nvar enforceInternalState = InternalStateModule.enforce;\nvar TEMPLATE = String(String).split('String');\n\n(module.exports = function (O, key, value, options) {\n  var unsafe = options ? !!options.unsafe : false;\n  var simple = options ? !!options.enumerable : false;\n  var noTargetGet = options ? !!options.noTargetGet : false;\n  var state;\n  if (typeof value == 'function') {\n    if (typeof key == 'string' && !has(value, 'name')) {\n      createNonEnumerableProperty(value, 'name', key);\n    }\n    state = enforceInternalState(value);\n    if (!state.source) {\n      state.source = TEMPLATE.join(typeof key == 'string' ? key : '');\n    }\n  }\n  if (O === global) {\n    if (simple) O[key] = value;\n    else setGlobal(key, value);\n    return;\n  } else if (!unsafe) {\n    delete O[key];\n  } else if (!noTargetGet && O[key]) {\n    simple = true;\n  }\n  if (simple) O[key] = value;\n  else createNonEnumerableProperty(O, key, value);\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, 'toString', function toString() {\n  return typeof this == 'function' && getInternalState(this).source || inspectSource(this);\n});\n","var isObject = require('../internals/is-object');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\n\n// makes subclassing work correct for wrapped built-ins\nmodule.exports = function ($this, dummy, Wrapper) {\n  var NewTarget, NewTargetPrototype;\n  if (\n    // it can work only with native `setPrototypeOf`\n    setPrototypeOf &&\n    // we haven't completely correct pre-ES6 way for getting `new.target`, so use this\n    typeof (NewTarget = dummy.constructor) == 'function' &&\n    NewTarget !== Wrapper &&\n    isObject(NewTargetPrototype = NewTarget.prototype) &&\n    NewTargetPrototype !== Wrapper.prototype\n  ) setPrototypeOf($this, NewTargetPrototype);\n  return $this;\n};\n","exports.f = Object.getOwnPropertySymbols;\n","var path = require('../internals/path');\nvar has = require('../internals/has');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineProperty = require('../internals/object-define-property').f;\n\nmodule.exports = function (NAME) {\n  var Symbol = path.Symbol || (path.Symbol = {});\n  if (!has(Symbol, NAME)) defineProperty(Symbol, NAME, {\n    value: wrappedWellKnownSymbolModule.f(NAME)\n  });\n};\n","// IE8- don't enum bug keys\nmodule.exports = [\n  'constructor',\n  'hasOwnProperty',\n  'isPrototypeOf',\n  'propertyIsEnumerable',\n  'toLocaleString',\n  'toString',\n  'valueOf'\n];\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar objectDefinePropertyModile = require('../internals/object-define-property');\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\n$({ target: 'Object', stat: true, forced: !DESCRIPTORS, sham: !DESCRIPTORS }, {\n  defineProperty: objectDefinePropertyModile.f\n});\n","var requireObjectCoercible = require('../internals/require-object-coercible');\n\n// `ToObject` abstract operation\n// https://tc39.es/ecma262/#sec-toobject\nmodule.exports = function (argument) {\n  return Object(requireObjectCoercible(argument));\n};\n","var anObject = require('../internals/an-object');\nvar defineProperties = require('../internals/object-define-properties');\nvar enumBugKeys = require('../internals/enum-bug-keys');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar html = require('../internals/html');\nvar documentCreateElement = require('../internals/document-create-element');\nvar sharedKey = require('../internals/shared-key');\n\nvar GT = '>';\nvar LT = '<';\nvar PROTOTYPE = 'prototype';\nvar SCRIPT = 'script';\nvar IE_PROTO = sharedKey('IE_PROTO');\n\nvar EmptyConstructor = function () { /* empty */ };\n\nvar scriptTag = function (content) {\n  return LT + SCRIPT + GT + content + LT + '/' + SCRIPT + GT;\n};\n\n// Create object with fake `null` prototype: use ActiveX Object with cleared prototype\nvar NullProtoObjectViaActiveX = function (activeXDocument) {\n  activeXDocument.write(scriptTag(''));\n  activeXDocument.close();\n  var temp = activeXDocument.parentWindow.Object;\n  activeXDocument = null; // avoid memory leak\n  return temp;\n};\n\n// Create object with fake `null` prototype: use iframe Object with cleared prototype\nvar NullProtoObjectViaIFrame = function () {\n  // Thrash, waste and sodomy: IE GC bug\n  var iframe = documentCreateElement('iframe');\n  var JS = 'java' + SCRIPT + ':';\n  var iframeDocument;\n  iframe.style.display = 'none';\n  html.appendChild(iframe);\n  // https://github.com/zloirock/core-js/issues/475\n  iframe.src = String(JS);\n  iframeDocument = iframe.contentWindow.document;\n  iframeDocument.open();\n  iframeDocument.write(scriptTag('document.F=Object'));\n  iframeDocument.close();\n  return iframeDocument.F;\n};\n\n// Check for document.domain and active x support\n// No need to use active x approach when document.domain is not set\n// see https://github.com/es-shims/es5-shim/issues/150\n// variation of https://github.com/kitcambridge/es5-shim/commit/4f738ac066346\n// avoid IE GC bug\nvar activeXDocument;\nvar NullProtoObject = function () {\n  try {\n    /* global ActiveXObject -- old IE */\n    activeXDocument = document.domain && new ActiveXObject('htmlfile');\n  } catch (error) { /* ignore */ }\n  NullProtoObject = activeXDocument ? NullProtoObjectViaActiveX(activeXDocument) : NullProtoObjectViaIFrame();\n  var length = enumBugKeys.length;\n  while (length--) delete NullProtoObject[PROTOTYPE][enumBugKeys[length]];\n  return NullProtoObject();\n};\n\nhiddenKeys[IE_PROTO] = true;\n\n// `Object.create` method\n// https://tc39.es/ecma262/#sec-object.create\nmodule.exports = Object.create || function create(O, Properties) {\n  var result;\n  if (O !== null) {\n    EmptyConstructor[PROTOTYPE] = anObject(O);\n    result = new EmptyConstructor();\n    EmptyConstructor[PROTOTYPE] = null;\n    // add \"__proto__\" for Object.getPrototypeOf polyfill\n    result[IE_PROTO] = O;\n  } else result = NullProtoObject();\n  return Properties === undefined ? result : defineProperties(result, Properties);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar createIteratorConstructor = require('../internals/create-iterator-constructor');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\nvar Iterators = require('../internals/iterators');\nvar IteratorsCore = require('../internals/iterators-core');\n\nvar IteratorPrototype = IteratorsCore.IteratorPrototype;\nvar BUGGY_SAFARI_ITERATORS = IteratorsCore.BUGGY_SAFARI_ITERATORS;\nvar ITERATOR = wellKnownSymbol('iterator');\nvar KEYS = 'keys';\nvar VALUES = 'values';\nvar ENTRIES = 'entries';\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (Iterable, NAME, IteratorConstructor, next, DEFAULT, IS_SET, FORCED) {\n  createIteratorConstructor(IteratorConstructor, NAME, next);\n\n  var getIterationMethod = function (KIND) {\n    if (KIND === DEFAULT && defaultIterator) return defaultIterator;\n    if (!BUGGY_SAFARI_ITERATORS && KIND in IterablePrototype) return IterablePrototype[KIND];\n    switch (KIND) {\n      case KEYS: return function keys() { return new IteratorConstructor(this, KIND); };\n      case VALUES: return function values() { return new IteratorConstructor(this, KIND); };\n      case ENTRIES: return function entries() { return new IteratorConstructor(this, KIND); };\n    } return function () { return new IteratorConstructor(this); };\n  };\n\n  var TO_STRING_TAG = NAME + ' Iterator';\n  var INCORRECT_VALUES_NAME = false;\n  var IterablePrototype = Iterable.prototype;\n  var nativeIterator = IterablePrototype[ITERATOR]\n    || IterablePrototype['@@iterator']\n    || DEFAULT && IterablePrototype[DEFAULT];\n  var defaultIterator = !BUGGY_SAFARI_ITERATORS && nativeIterator || getIterationMethod(DEFAULT);\n  var anyNativeIterator = NAME == 'Array' ? IterablePrototype.entries || nativeIterator : nativeIterator;\n  var CurrentIteratorPrototype, methods, KEY;\n\n  // fix native\n  if (anyNativeIterator) {\n    CurrentIteratorPrototype = getPrototypeOf(anyNativeIterator.call(new Iterable()));\n    if (IteratorPrototype !== Object.prototype && CurrentIteratorPrototype.next) {\n      if (!IS_PURE && getPrototypeOf(CurrentIteratorPrototype) !== IteratorPrototype) {\n        if (setPrototypeOf) {\n          setPrototypeOf(CurrentIteratorPrototype, IteratorPrototype);\n        } else if (typeof CurrentIteratorPrototype[ITERATOR] != 'function') {\n          createNonEnumerableProperty(CurrentIteratorPrototype, ITERATOR, returnThis);\n        }\n      }\n      // Set @@toStringTag to native iterators\n      setToStringTag(CurrentIteratorPrototype, TO_STRING_TAG, true, true);\n      if (IS_PURE) Iterators[TO_STRING_TAG] = returnThis;\n    }\n  }\n\n  // fix Array#{values, @@iterator}.name in V8 / FF\n  if (DEFAULT == VALUES && nativeIterator && nativeIterator.name !== VALUES) {\n    INCORRECT_VALUES_NAME = true;\n    defaultIterator = function values() { return nativeIterator.call(this); };\n  }\n\n  // define iterator\n  if ((!IS_PURE || FORCED) && IterablePrototype[ITERATOR] !== defaultIterator) {\n    createNonEnumerableProperty(IterablePrototype, ITERATOR, defaultIterator);\n  }\n  Iterators[NAME] = defaultIterator;\n\n  // export additional methods\n  if (DEFAULT) {\n    methods = {\n      values: getIterationMethod(VALUES),\n      keys: IS_SET ? defaultIterator : getIterationMethod(KEYS),\n      entries: getIterationMethod(ENTRIES)\n    };\n    if (FORCED) for (KEY in methods) {\n      if (BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME || !(KEY in IterablePrototype)) {\n        redefine(IterablePrototype, KEY, methods[KEY]);\n      }\n    } else $({ target: NAME, proto: true, forced: BUGGY_SAFARI_ITERATORS || INCORRECT_VALUES_NAME }, methods);\n  }\n\n  return methods;\n};\n","var global = require('../internals/global');\nvar inspectSource = require('../internals/inspect-source');\n\nvar WeakMap = global.WeakMap;\n\nmodule.exports = typeof WeakMap === 'function' && /native code/.test(inspectSource(WeakMap));\n","var isObject = require('../internals/is-object');\n\nmodule.exports = function (it) {\n  if (!isObject(it)) {\n    throw TypeError(String(it) + ' is not an object');\n  } return it;\n};\n","var fails = require('../internals/fails');\n\n// Detect IE8's incomplete defineProperty implementation\nmodule.exports = !fails(function () {\n  return Object.defineProperty({}, 1, { get: function () { return 7; } })[1] != 7;\n});\n","'use strict';\nvar toPrimitive = require('../internals/to-primitive');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = function (object, key, value) {\n  var propertyKey = toPrimitive(key);\n  if (propertyKey in object) definePropertyModule.f(object, propertyKey, createPropertyDescriptor(0, value));\n  else object[propertyKey] = value;\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","// addapted from the document.currentScript polyfill by Adam Miller\n// MIT license\n// source: https://github.com/amiller-gh/currentScript-polyfill\n\n// added support for Firefox https://bugzilla.mozilla.org/show_bug.cgi?id=1620505\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof module === 'object' && module.exports) {\n    module.exports = factory();\n  } else {\n    root.getCurrentScript = factory();\n  }\n}(typeof self !== 'undefined' ? self : this, function () {\n  function getCurrentScript () {\n    var descriptor = Object.getOwnPropertyDescriptor(document, 'currentScript')\n    // for chrome\n    if (!descriptor && 'currentScript' in document && document.currentScript) {\n      return document.currentScript\n    }\n\n    // for other browsers with native support for currentScript\n    if (descriptor && descriptor.get !== getCurrentScript && document.currentScript) {\n      return document.currentScript\n    }\n  \n    // IE 8-10 support script readyState\n    // IE 11+ & Firefox support stack trace\n    try {\n      throw new Error();\n    }\n    catch (err) {\n      // Find the second match for the \"at\" string to get file src url from stack.\n      var ieStackRegExp = /.*at [^(]*\\((.*):(.+):(.+)\\)$/ig,\n        ffStackRegExp = /@([^@]*):(\\d+):(\\d+)\\s*$/ig,\n        stackDetails = ieStackRegExp.exec(err.stack) || ffStackRegExp.exec(err.stack),\n        scriptLocation = (stackDetails && stackDetails[1]) || false,\n        line = (stackDetails && stackDetails[2]) || false,\n        currentLocation = document.location.href.replace(document.location.hash, ''),\n        pageSource,\n        inlineScriptSourceRegExp,\n        inlineScriptSource,\n        scripts = document.getElementsByTagName('script'); // Live NodeList collection\n  \n      if (scriptLocation === currentLocation) {\n        pageSource = document.documentElement.outerHTML;\n        inlineScriptSourceRegExp = new RegExp('(?:[^\\\\n]+?\\\\n){0,' + (line - 2) + '}[^<]*<script>([\\\\d\\\\D]*?)<\\\\/script>[\\\\d\\\\D]*', 'i');\n        inlineScriptSource = pageSource.replace(inlineScriptSourceRegExp, '$1').trim();\n      }\n  \n      for (var i = 0; i < scripts.length; i++) {\n        // If ready state is interactive, return the script tag\n        if (scripts[i].readyState === 'interactive') {\n          return scripts[i];\n        }\n  \n        // If src matches, return the script tag\n        if (scripts[i].src === scriptLocation) {\n          return scripts[i];\n        }\n  \n        // If inline source matches, return the script tag\n        if (\n          scriptLocation === currentLocation &&\n          scripts[i].innerHTML &&\n          scripts[i].innerHTML.trim() === inlineScriptSource\n        ) {\n          return scripts[i];\n        }\n      }\n  \n      // If no match, return null\n      return null;\n    }\n  };\n\n  return getCurrentScript\n}));\n","var store = require('../internals/shared-store');\n\nvar functionToString = Function.toString;\n\n// this helper broken in `3.4.1-3.4.4`, so we can't use `shared` helper\nif (typeof store.inspectSource != 'function') {\n  store.inspectSource = function (it) {\n    return functionToString.call(it);\n  };\n}\n\nmodule.exports = store.inspectSource;\n","'use strict';\nvar charAt = require('../internals/string-multibyte').charAt;\n\n// `AdvanceStringIndex` abstract operation\n// https://tc39.es/ecma262/#sec-advancestringindex\nmodule.exports = function (S, index, unicode) {\n  return index + (unicode ? charAt(S, index).length : 1);\n};\n","module.exports = __WEBPACK_EXTERNAL_MODULE__8bbf__;","var id = 0;\nvar postfix = Math.random();\n\nmodule.exports = function (key) {\n  return 'Symbol(' + String(key === undefined ? '' : key) + ')_' + (++id + postfix).toString(36);\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar definePropertyModule = require('../internals/object-define-property');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\n\nmodule.exports = DESCRIPTORS ? function (object, key, value) {\n  return definePropertyModule.f(object, key, createPropertyDescriptor(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","'use strict';\nvar regexpFlags = require('./regexp-flags');\nvar stickyHelpers = require('./regexp-sticky-helpers');\n\nvar nativeExec = RegExp.prototype.exec;\n// This always refers to the native implementation, because the\n// String#replace polyfill uses ./fix-regexp-well-known-symbol-logic.js,\n// which loads this file before patching the method.\nvar nativeReplace = String.prototype.replace;\n\nvar patchedExec = nativeExec;\n\nvar UPDATES_LAST_INDEX_WRONG = (function () {\n  var re1 = /a/;\n  var re2 = /b*/g;\n  nativeExec.call(re1, 'a');\n  nativeExec.call(re2, 'a');\n  return re1.lastIndex !== 0 || re2.lastIndex !== 0;\n})();\n\nvar UNSUPPORTED_Y = stickyHelpers.UNSUPPORTED_Y || stickyHelpers.BROKEN_CARET;\n\n// nonparticipating capturing group, copied from es5-shim's String#split patch.\n// eslint-disable-next-line regexp/no-assertion-capturing-group, regexp/no-empty-group -- required for testing\nvar NPCG_INCLUDED = /()??/.exec('')[1] !== undefined;\n\nvar PATCH = UPDATES_LAST_INDEX_WRONG || NPCG_INCLUDED || UNSUPPORTED_Y;\n\nif (PATCH) {\n  patchedExec = function exec(str) {\n    var re = this;\n    var lastIndex, reCopy, match, i;\n    var sticky = UNSUPPORTED_Y && re.sticky;\n    var flags = regexpFlags.call(re);\n    var source = re.source;\n    var charsAdded = 0;\n    var strCopy = str;\n\n    if (sticky) {\n      flags = flags.replace('y', '');\n      if (flags.indexOf('g') === -1) {\n        flags += 'g';\n      }\n\n      strCopy = String(str).slice(re.lastIndex);\n      // Support anchored sticky behavior.\n      if (re.lastIndex > 0 && (!re.multiline || re.multiline && str[re.lastIndex - 1] !== '\\n')) {\n        source = '(?: ' + source + ')';\n        strCopy = ' ' + strCopy;\n        charsAdded++;\n      }\n      // ^(? + rx + ) is needed, in combination with some str slicing, to\n      // simulate the 'y' flag.\n      reCopy = new RegExp('^(?:' + source + ')', flags);\n    }\n\n    if (NPCG_INCLUDED) {\n      reCopy = new RegExp('^' + source + '$(?!\\\\s)', flags);\n    }\n    if (UPDATES_LAST_INDEX_WRONG) lastIndex = re.lastIndex;\n\n    match = nativeExec.call(sticky ? reCopy : re, strCopy);\n\n    if (sticky) {\n      if (match) {\n        match.input = match.input.slice(charsAdded);\n        match[0] = match[0].slice(charsAdded);\n        match.index = re.lastIndex;\n        re.lastIndex += match[0].length;\n      } else re.lastIndex = 0;\n    } else if (UPDATES_LAST_INDEX_WRONG && match) {\n      re.lastIndex = re.global ? match.index + match[0].length : lastIndex;\n    }\n    if (NPCG_INCLUDED && match && match.length > 1) {\n      // Fix browsers whose `exec` methods don't consistently return `undefined`\n      // for NPCG, like IE8. NOTE: This doesn' work for /(.?)?/\n      nativeReplace.call(match[0], reCopy, function () {\n        for (i = 1; i < arguments.length - 2; i++) {\n          if (arguments[i] === undefined) match[i] = undefined;\n        }\n      });\n    }\n\n    return match;\n  };\n}\n\nmodule.exports = patchedExec;\n","var fails = require('../internals/fails');\n\nvar replacement = /#|\\.prototype\\./;\n\nvar isForced = function (feature, detection) {\n  var value = data[normalize(feature)];\n  return value == POLYFILL ? true\n    : value == NATIVE ? false\n    : typeof detection == 'function' ? fails(detection)\n    : !!detection;\n};\n\nvar normalize = isForced.normalize = function (string) {\n  return String(string).replace(replacement, '.').toLowerCase();\n};\n\nvar data = isForced.data = {};\nvar NATIVE = isForced.NATIVE = 'N';\nvar POLYFILL = isForced.POLYFILL = 'P';\n\nmodule.exports = isForced;\n","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = toLength(E.length);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","var anObject = require('../internals/an-object');\nvar iteratorClose = require('../internals/iterator-close');\n\n// call something on iterator step with safe closing on error\nmodule.exports = function (iterator, fn, value, ENTRIES) {\n  try {\n    return ENTRIES ? fn(anObject(value)[0], value[1]) : fn(value);\n  // 7.4.6 IteratorClose(iterator, completion)\n  } catch (error) {\n    iteratorClose(iterator);\n    throw error;\n  }\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar IE8_DOM_DEFINE = require('../internals/ie8-dom-define');\nvar anObject = require('../internals/an-object');\nvar toPrimitive = require('../internals/to-primitive');\n\nvar nativeDefineProperty = Object.defineProperty;\n\n// `Object.defineProperty` method\n// https://tc39.es/ecma262/#sec-object.defineproperty\nexports.f = DESCRIPTORS ? nativeDefineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return nativeDefineProperty(O, P, Attributes);\n  } catch (error) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","'use strict';\nvar IteratorPrototype = require('../internals/iterators-core').IteratorPrototype;\nvar create = require('../internals/object-create');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar Iterators = require('../internals/iterators');\n\nvar returnThis = function () { return this; };\n\nmodule.exports = function (IteratorConstructor, NAME, next) {\n  var TO_STRING_TAG = NAME + ' Iterator';\n  IteratorConstructor.prototype = create(IteratorPrototype, { next: createPropertyDescriptor(1, next) });\n  setToStringTag(IteratorConstructor, TO_STRING_TAG, false, true);\n  Iterators[TO_STRING_TAG] = returnThis;\n  return IteratorConstructor;\n};\n","'use strict';\n\nvar fails = require('./fails');\n\n// babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError,\n// so we use an intermediate function.\nfunction RE(s, f) {\n  return RegExp(s, f);\n}\n\nexports.UNSUPPORTED_Y = fails(function () {\n  // babel-minify transpiles RegExp('a', 'y') -> /a/y and it causes SyntaxError\n  var re = RE('a', 'y');\n  re.lastIndex = 2;\n  return re.exec('abcd') != null;\n});\n\nexports.BROKEN_CARET = fails(function () {\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=773687\n  var re = RE('^r', 'gy');\n  re.lastIndex = 2;\n  return re.exec('str') != null;\n});\n","'use strict';\nvar isArray = require('../internals/is-array');\nvar toLength = require('../internals/to-length');\nvar bind = require('../internals/function-bind-context');\n\n// `FlattenIntoArray` abstract operation\n// https://tc39.github.io/proposal-flatMap/#sec-FlattenIntoArray\nvar flattenIntoArray = function (target, original, source, sourceLen, start, depth, mapper, thisArg) {\n  var targetIndex = start;\n  var sourceIndex = 0;\n  var mapFn = mapper ? bind(mapper, thisArg, 3) : false;\n  var element;\n\n  while (sourceIndex < sourceLen) {\n    if (sourceIndex in source) {\n      element = mapFn ? mapFn(source[sourceIndex], sourceIndex, original) : source[sourceIndex];\n\n      if (depth > 0 && isArray(element)) {\n        targetIndex = flattenIntoArray(target, original, element, toLength(element.length), targetIndex, depth - 1) - 1;\n      } else {\n        if (targetIndex >= 0x1FFFFFFFFFFFFF) throw TypeError('Exceed the acceptable array length');\n        target[targetIndex] = element;\n      }\n\n      targetIndex++;\n    }\n    sourceIndex++;\n  }\n  return targetIndex;\n};\n\nmodule.exports = flattenIntoArray;\n","var userAgent = require('../internals/engine-user-agent');\n\nmodule.exports = /web0s(?!.*chrome)/i.test(userAgent);\n","'use strict';\nvar $ = require('../internals/export');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar IS_PURE = require('../internals/is-pure');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\nvar fails = require('../internals/fails');\nvar has = require('../internals/has');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar anObject = require('../internals/an-object');\nvar toObject = require('../internals/to-object');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar toPrimitive = require('../internals/to-primitive');\nvar createPropertyDescriptor = require('../internals/create-property-descriptor');\nvar nativeObjectCreate = require('../internals/object-create');\nvar objectKeys = require('../internals/object-keys');\nvar getOwnPropertyNamesModule = require('../internals/object-get-own-property-names');\nvar getOwnPropertyNamesExternal = require('../internals/object-get-own-property-names-external');\nvar getOwnPropertySymbolsModule = require('../internals/object-get-own-property-symbols');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\nvar propertyIsEnumerableModule = require('../internals/object-property-is-enumerable');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar redefine = require('../internals/redefine');\nvar shared = require('../internals/shared');\nvar sharedKey = require('../internals/shared-key');\nvar hiddenKeys = require('../internals/hidden-keys');\nvar uid = require('../internals/uid');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar wrappedWellKnownSymbolModule = require('../internals/well-known-symbol-wrapped');\nvar defineWellKnownSymbol = require('../internals/define-well-known-symbol');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar InternalStateModule = require('../internals/internal-state');\nvar $forEach = require('../internals/array-iteration').forEach;\n\nvar HIDDEN = sharedKey('hidden');\nvar SYMBOL = 'Symbol';\nvar PROTOTYPE = 'prototype';\nvar TO_PRIMITIVE = wellKnownSymbol('toPrimitive');\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(SYMBOL);\nvar ObjectPrototype = Object[PROTOTYPE];\nvar $Symbol = global.Symbol;\nvar $stringify = getBuiltIn('JSON', 'stringify');\nvar nativeGetOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\nvar nativeDefineProperty = definePropertyModule.f;\nvar nativeGetOwnPropertyNames = getOwnPropertyNamesExternal.f;\nvar nativePropertyIsEnumerable = propertyIsEnumerableModule.f;\nvar AllSymbols = shared('symbols');\nvar ObjectPrototypeSymbols = shared('op-symbols');\nvar StringToSymbolRegistry = shared('string-to-symbol-registry');\nvar SymbolToStringRegistry = shared('symbol-to-string-registry');\nvar WellKnownSymbolsStore = shared('wks');\nvar QObject = global.QObject;\n// Don't use setters in Qt Script, https://github.com/zloirock/core-js/issues/173\nvar USE_SETTER = !QObject || !QObject[PROTOTYPE] || !QObject[PROTOTYPE].findChild;\n\n// fallback for old Android, https://code.google.com/p/v8/issues/detail?id=687\nvar setSymbolDescriptor = DESCRIPTORS && fails(function () {\n  return nativeObjectCreate(nativeDefineProperty({}, 'a', {\n    get: function () { return nativeDefineProperty(this, 'a', { value: 7 }).a; }\n  })).a != 7;\n}) ? function (O, P, Attributes) {\n  var ObjectPrototypeDescriptor = nativeGetOwnPropertyDescriptor(ObjectPrototype, P);\n  if (ObjectPrototypeDescriptor) delete ObjectPrototype[P];\n  nativeDefineProperty(O, P, Attributes);\n  if (ObjectPrototypeDescriptor && O !== ObjectPrototype) {\n    nativeDefineProperty(ObjectPrototype, P, ObjectPrototypeDescriptor);\n  }\n} : nativeDefineProperty;\n\nvar wrap = function (tag, description) {\n  var symbol = AllSymbols[tag] = nativeObjectCreate($Symbol[PROTOTYPE]);\n  setInternalState(symbol, {\n    type: SYMBOL,\n    tag: tag,\n    description: description\n  });\n  if (!DESCRIPTORS) symbol.description = description;\n  return symbol;\n};\n\nvar isSymbol = USE_SYMBOL_AS_UID ? function (it) {\n  return typeof it == 'symbol';\n} : function (it) {\n  return Object(it) instanceof $Symbol;\n};\n\nvar $defineProperty = function defineProperty(O, P, Attributes) {\n  if (O === ObjectPrototype) $defineProperty(ObjectPrototypeSymbols, P, Attributes);\n  anObject(O);\n  var key = toPrimitive(P, true);\n  anObject(Attributes);\n  if (has(AllSymbols, key)) {\n    if (!Attributes.enumerable) {\n      if (!has(O, HIDDEN)) nativeDefineProperty(O, HIDDEN, createPropertyDescriptor(1, {}));\n      O[HIDDEN][key] = true;\n    } else {\n      if (has(O, HIDDEN) && O[HIDDEN][key]) O[HIDDEN][key] = false;\n      Attributes = nativeObjectCreate(Attributes, { enumerable: createPropertyDescriptor(0, false) });\n    } return setSymbolDescriptor(O, key, Attributes);\n  } return nativeDefineProperty(O, key, Attributes);\n};\n\nvar $defineProperties = function defineProperties(O, Properties) {\n  anObject(O);\n  var properties = toIndexedObject(Properties);\n  var keys = objectKeys(properties).concat($getOwnPropertySymbols(properties));\n  $forEach(keys, function (key) {\n    if (!DESCRIPTORS || $propertyIsEnumerable.call(properties, key)) $defineProperty(O, key, properties[key]);\n  });\n  return O;\n};\n\nvar $create = function create(O, Properties) {\n  return Properties === undefined ? nativeObjectCreate(O) : $defineProperties(nativeObjectCreate(O), Properties);\n};\n\nvar $propertyIsEnumerable = function propertyIsEnumerable(V) {\n  var P = toPrimitive(V, true);\n  var enumerable = nativePropertyIsEnumerable.call(this, P);\n  if (this === ObjectPrototype && has(AllSymbols, P) && !has(ObjectPrototypeSymbols, P)) return false;\n  return enumerable || !has(this, P) || !has(AllSymbols, P) || has(this, HIDDEN) && this[HIDDEN][P] ? enumerable : true;\n};\n\nvar $getOwnPropertyDescriptor = function getOwnPropertyDescriptor(O, P) {\n  var it = toIndexedObject(O);\n  var key = toPrimitive(P, true);\n  if (it === ObjectPrototype && has(AllSymbols, key) && !has(ObjectPrototypeSymbols, key)) return;\n  var descriptor = nativeGetOwnPropertyDescriptor(it, key);\n  if (descriptor && has(AllSymbols, key) && !(has(it, HIDDEN) && it[HIDDEN][key])) {\n    descriptor.enumerable = true;\n  }\n  return descriptor;\n};\n\nvar $getOwnPropertyNames = function getOwnPropertyNames(O) {\n  var names = nativeGetOwnPropertyNames(toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (!has(AllSymbols, key) && !has(hiddenKeys, key)) result.push(key);\n  });\n  return result;\n};\n\nvar $getOwnPropertySymbols = function getOwnPropertySymbols(O) {\n  var IS_OBJECT_PROTOTYPE = O === ObjectPrototype;\n  var names = nativeGetOwnPropertyNames(IS_OBJECT_PROTOTYPE ? ObjectPrototypeSymbols : toIndexedObject(O));\n  var result = [];\n  $forEach(names, function (key) {\n    if (has(AllSymbols, key) && (!IS_OBJECT_PROTOTYPE || has(ObjectPrototype, key))) {\n      result.push(AllSymbols[key]);\n    }\n  });\n  return result;\n};\n\n// `Symbol` constructor\n// https://tc39.es/ecma262/#sec-symbol-constructor\nif (!NATIVE_SYMBOL) {\n  $Symbol = function Symbol() {\n    if (this instanceof $Symbol) throw TypeError('Symbol is not a constructor');\n    var description = !arguments.length || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var tag = uid(description);\n    var setter = function (value) {\n      if (this === ObjectPrototype) setter.call(ObjectPrototypeSymbols, value);\n      if (has(this, HIDDEN) && has(this[HIDDEN], tag)) this[HIDDEN][tag] = false;\n      setSymbolDescriptor(this, tag, createPropertyDescriptor(1, value));\n    };\n    if (DESCRIPTORS && USE_SETTER) setSymbolDescriptor(ObjectPrototype, tag, { configurable: true, set: setter });\n    return wrap(tag, description);\n  };\n\n  redefine($Symbol[PROTOTYPE], 'toString', function toString() {\n    return getInternalState(this).tag;\n  });\n\n  redefine($Symbol, 'withoutSetter', function (description) {\n    return wrap(uid(description), description);\n  });\n\n  propertyIsEnumerableModule.f = $propertyIsEnumerable;\n  definePropertyModule.f = $defineProperty;\n  getOwnPropertyDescriptorModule.f = $getOwnPropertyDescriptor;\n  getOwnPropertyNamesModule.f = getOwnPropertyNamesExternal.f = $getOwnPropertyNames;\n  getOwnPropertySymbolsModule.f = $getOwnPropertySymbols;\n\n  wrappedWellKnownSymbolModule.f = function (name) {\n    return wrap(wellKnownSymbol(name), name);\n  };\n\n  if (DESCRIPTORS) {\n    // https://github.com/tc39/proposal-Symbol-description\n    nativeDefineProperty($Symbol[PROTOTYPE], 'description', {\n      configurable: true,\n      get: function description() {\n        return getInternalState(this).description;\n      }\n    });\n    if (!IS_PURE) {\n      redefine(ObjectPrototype, 'propertyIsEnumerable', $propertyIsEnumerable, { unsafe: true });\n    }\n  }\n}\n\n$({ global: true, wrap: true, forced: !NATIVE_SYMBOL, sham: !NATIVE_SYMBOL }, {\n  Symbol: $Symbol\n});\n\n$forEach(objectKeys(WellKnownSymbolsStore), function (name) {\n  defineWellKnownSymbol(name);\n});\n\n$({ target: SYMBOL, stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Symbol.for` method\n  // https://tc39.es/ecma262/#sec-symbol.for\n  'for': function (key) {\n    var string = String(key);\n    if (has(StringToSymbolRegistry, string)) return StringToSymbolRegistry[string];\n    var symbol = $Symbol(string);\n    StringToSymbolRegistry[string] = symbol;\n    SymbolToStringRegistry[symbol] = string;\n    return symbol;\n  },\n  // `Symbol.keyFor` method\n  // https://tc39.es/ecma262/#sec-symbol.keyfor\n  keyFor: function keyFor(sym) {\n    if (!isSymbol(sym)) throw TypeError(sym + ' is not a symbol');\n    if (has(SymbolToStringRegistry, sym)) return SymbolToStringRegistry[sym];\n  },\n  useSetter: function () { USE_SETTER = true; },\n  useSimple: function () { USE_SETTER = false; }\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL, sham: !DESCRIPTORS }, {\n  // `Object.create` method\n  // https://tc39.es/ecma262/#sec-object.create\n  create: $create,\n  // `Object.defineProperty` method\n  // https://tc39.es/ecma262/#sec-object.defineproperty\n  defineProperty: $defineProperty,\n  // `Object.defineProperties` method\n  // https://tc39.es/ecma262/#sec-object.defineproperties\n  defineProperties: $defineProperties,\n  // `Object.getOwnPropertyDescriptor` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n  getOwnPropertyDescriptor: $getOwnPropertyDescriptor\n});\n\n$({ target: 'Object', stat: true, forced: !NATIVE_SYMBOL }, {\n  // `Object.getOwnPropertyNames` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertynames\n  getOwnPropertyNames: $getOwnPropertyNames,\n  // `Object.getOwnPropertySymbols` method\n  // https://tc39.es/ecma262/#sec-object.getownpropertysymbols\n  getOwnPropertySymbols: $getOwnPropertySymbols\n});\n\n// Chrome 38 and 39 `Object.getOwnPropertySymbols` fails on primitives\n// https://bugs.chromium.org/p/v8/issues/detail?id=3443\n$({ target: 'Object', stat: true, forced: fails(function () { getOwnPropertySymbolsModule.f(1); }) }, {\n  getOwnPropertySymbols: function getOwnPropertySymbols(it) {\n    return getOwnPropertySymbolsModule.f(toObject(it));\n  }\n});\n\n// `JSON.stringify` method behavior with symbols\n// https://tc39.es/ecma262/#sec-json.stringify\nif ($stringify) {\n  var FORCED_JSON_STRINGIFY = !NATIVE_SYMBOL || fails(function () {\n    var symbol = $Symbol();\n    // MS Edge converts symbol values to JSON as {}\n    return $stringify([symbol]) != '[null]'\n      // WebKit converts symbol values to JSON as null\n      || $stringify({ a: symbol }) != '{}'\n      // V8 throws on boxed symbols\n      || $stringify(Object(symbol)) != '{}';\n  });\n\n  $({ target: 'JSON', stat: true, forced: FORCED_JSON_STRINGIFY }, {\n    // eslint-disable-next-line no-unused-vars -- required for `.length`\n    stringify: function stringify(it, replacer, space) {\n      var args = [it];\n      var index = 1;\n      var $replacer;\n      while (arguments.length > index) args.push(arguments[index++]);\n      $replacer = replacer;\n      if (!isObject(replacer) && it === undefined || isSymbol(it)) return; // IE8 returns string on undefined\n      if (!isArray(replacer)) replacer = function (key, value) {\n        if (typeof $replacer == 'function') value = $replacer.call(this, key, value);\n        if (!isSymbol(value)) return value;\n      };\n      args[1] = replacer;\n      return $stringify.apply(null, args);\n    }\n  });\n}\n\n// `Symbol.prototype[@@toPrimitive]` method\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@toprimitive\nif (!$Symbol[PROTOTYPE][TO_PRIMITIVE]) {\n  createNonEnumerableProperty($Symbol[PROTOTYPE], TO_PRIMITIVE, $Symbol[PROTOTYPE].valueOf);\n}\n// `Symbol.prototype[@@toStringTag]` property\n// https://tc39.es/ecma262/#sec-symbol.prototype-@@tostringtag\nsetToStringTag($Symbol, SYMBOL);\n\nhiddenKeys[HIDDEN] = true;\n","var $ = require('../internals/export');\nvar from = require('../internals/array-from');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\n\nvar INCORRECT_ITERATION = !checkCorrectnessOfIteration(function (iterable) {\n  Array.from(iterable);\n});\n\n// `Array.from` method\n// https://tc39.es/ecma262/#sec-array.from\n$({ target: 'Array', stat: true, forced: INCORRECT_ITERATION }, {\n  from: from\n});\n","'use strict';\nvar fails = require('../internals/fails');\n\nmodule.exports = function (METHOD_NAME, argument) {\n  var method = [][METHOD_NAME];\n  return !!method && fails(function () {\n    // eslint-disable-next-line no-useless-call,no-throw-literal -- required for testing\n    method.call(null, argument || function () { throw 1; }, 1);\n  });\n};\n","var ceil = Math.ceil;\nvar floor = Math.floor;\n\n// `ToInteger` abstract operation\n// https://tc39.es/ecma262/#sec-tointeger\nmodule.exports = function (argument) {\n  return isNaN(argument = +argument) ? 0 : (argument > 0 ? floor : ceil)(argument);\n};\n","'use strict';\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isForced = require('../internals/is-forced');\nvar redefine = require('../internals/redefine');\nvar has = require('../internals/has');\nvar classof = require('../internals/classof-raw');\nvar inheritIfRequired = require('../internals/inherit-if-required');\nvar toPrimitive = require('../internals/to-primitive');\nvar fails = require('../internals/fails');\nvar create = require('../internals/object-create');\nvar getOwnPropertyNames = require('../internals/object-get-own-property-names').f;\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar defineProperty = require('../internals/object-define-property').f;\nvar trim = require('../internals/string-trim').trim;\n\nvar NUMBER = 'Number';\nvar NativeNumber = global[NUMBER];\nvar NumberPrototype = NativeNumber.prototype;\n\n// Opera ~12 has broken Object#toString\nvar BROKEN_CLASSOF = classof(create(NumberPrototype)) == NUMBER;\n\n// `ToNumber` abstract operation\n// https://tc39.es/ecma262/#sec-tonumber\nvar toNumber = function (argument) {\n  var it = toPrimitive(argument, false);\n  var first, third, radix, maxCode, digits, length, index, code;\n  if (typeof it == 'string' && it.length > 2) {\n    it = trim(it);\n    first = it.charCodeAt(0);\n    if (first === 43 || first === 45) {\n      third = it.charCodeAt(2);\n      if (third === 88 || third === 120) return NaN; // Number('+0x1') should be NaN, old V8 fix\n    } else if (first === 48) {\n      switch (it.charCodeAt(1)) {\n        case 66: case 98: radix = 2; maxCode = 49; break; // fast equal of /^0b[01]+$/i\n        case 79: case 111: radix = 8; maxCode = 55; break; // fast equal of /^0o[0-7]+$/i\n        default: return +it;\n      }\n      digits = it.slice(2);\n      length = digits.length;\n      for (index = 0; index < length; index++) {\n        code = digits.charCodeAt(index);\n        // parseInt parses a string to a first unavailable symbol\n        // but ToNumber should return NaN if a string contains unavailable symbols\n        if (code < 48 || code > maxCode) return NaN;\n      } return parseInt(digits, radix);\n    }\n  } return +it;\n};\n\n// `Number` constructor\n// https://tc39.es/ecma262/#sec-number-constructor\nif (isForced(NUMBER, !NativeNumber(' 0o1') || !NativeNumber('0b1') || NativeNumber('+0x1'))) {\n  var NumberWrapper = function Number(value) {\n    var it = arguments.length < 1 ? 0 : value;\n    var dummy = this;\n    return dummy instanceof NumberWrapper\n      // check on 1..constructor(foo) case\n      && (BROKEN_CLASSOF ? fails(function () { NumberPrototype.valueOf.call(dummy); }) : classof(dummy) != NUMBER)\n        ? inheritIfRequired(new NativeNumber(toNumber(it)), dummy, NumberWrapper) : toNumber(it);\n  };\n  for (var keys = DESCRIPTORS ? getOwnPropertyNames(NativeNumber) : (\n    // ES3:\n    'MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,' +\n    // ES2015 (in case, if modules with ES2015 Number statics required before):\n    'EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,' +\n    'MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,' +\n    // ESNext\n    'fromString,range'\n  ).split(','), j = 0, key; keys.length > j; j++) {\n    if (has(NativeNumber, key = keys[j]) && !has(NumberWrapper, key)) {\n      defineProperty(NumberWrapper, key, getOwnPropertyDescriptor(NativeNumber, key));\n    }\n  }\n  NumberWrapper.prototype = NumberPrototype;\n  NumberPrototype.constructor = NumberWrapper;\n  redefine(global, NUMBER, NumberWrapper);\n}\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar MATCH = wellKnownSymbol('match');\n\nmodule.exports = function (METHOD_NAME) {\n  var regexp = /./;\n  try {\n    '/./'[METHOD_NAME](regexp);\n  } catch (error1) {\n    try {\n      regexp[MATCH] = false;\n      return '/./'[METHOD_NAME](regexp);\n    } catch (error2) { /* empty */ }\n  } return false;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar exec = require('../internals/regexp-exec');\n\n// `RegExp.prototype.exec` method\n// https://tc39.es/ecma262/#sec-regexp.prototype.exec\n$({ target: 'RegExp', proto: true, forced: /./.exec !== exec }, {\n  exec: exec\n});\n","'use strict';\nvar anObject = require('../internals/an-object');\n\n// `RegExp.prototype.flags` getter implementation\n// https://tc39.es/ecma262/#sec-get-regexp.prototype.flags\nmodule.exports = function () {\n  var that = anObject(this);\n  var result = '';\n  if (that.global) result += 'g';\n  if (that.ignoreCase) result += 'i';\n  if (that.multiline) result += 'm';\n  if (that.dotAll) result += 's';\n  if (that.unicode) result += 'u';\n  if (that.sticky) result += 'y';\n  return result;\n};\n","'use strict';\nvar fails = require('../internals/fails');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_PURE = require('../internals/is-pure');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar BUGGY_SAFARI_ITERATORS = false;\n\nvar returnThis = function () { return this; };\n\n// `%IteratorPrototype%` object\n// https://tc39.es/ecma262/#sec-%iteratorprototype%-object\nvar IteratorPrototype, PrototypeOfArrayIteratorPrototype, arrayIterator;\n\nif ([].keys) {\n  arrayIterator = [].keys();\n  // Safari 8 has buggy iterators w/o `next`\n  if (!('next' in arrayIterator)) BUGGY_SAFARI_ITERATORS = true;\n  else {\n    PrototypeOfArrayIteratorPrototype = getPrototypeOf(getPrototypeOf(arrayIterator));\n    if (PrototypeOfArrayIteratorPrototype !== Object.prototype) IteratorPrototype = PrototypeOfArrayIteratorPrototype;\n  }\n}\n\nvar NEW_ITERATOR_PROTOTYPE = IteratorPrototype == undefined || fails(function () {\n  var test = {};\n  // FF44- legacy iterators case\n  return IteratorPrototype[ITERATOR].call(test) !== test;\n});\n\nif (NEW_ITERATOR_PROTOTYPE) IteratorPrototype = {};\n\n// 25.1.2.1.1 %IteratorPrototype%[@@iterator]()\nif ((!IS_PURE || NEW_ITERATOR_PROTOTYPE) && !has(IteratorPrototype, ITERATOR)) {\n  createNonEnumerableProperty(IteratorPrototype, ITERATOR, returnThis);\n}\n\nmodule.exports = {\n  IteratorPrototype: IteratorPrototype,\n  BUGGY_SAFARI_ITERATORS: BUGGY_SAFARI_ITERATORS\n};\n","'use strict';\nvar TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classof = require('../internals/classof');\n\n// `Object.prototype.toString` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nmodule.exports = TO_STRING_TAG_SUPPORT ? {}.toString : function toString() {\n  return '[object ' + classof(this) + ']';\n};\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.es/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","var global = require('../internals/global');\nvar getOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar macrotask = require('../internals/task').set;\nvar IS_IOS = require('../internals/engine-is-ios');\nvar IS_WEBOS_WEBKIT = require('../internals/engine-is-webos-webkit');\nvar IS_NODE = require('../internals/engine-is-node');\n\nvar MutationObserver = global.MutationObserver || global.WebKitMutationObserver;\nvar document = global.document;\nvar process = global.process;\nvar Promise = global.Promise;\n// Node.js 11 shows ExperimentalWarning on getting `queueMicrotask`\nvar queueMicrotaskDescriptor = getOwnPropertyDescriptor(global, 'queueMicrotask');\nvar queueMicrotask = queueMicrotaskDescriptor && queueMicrotaskDescriptor.value;\n\nvar flush, head, last, notify, toggle, node, promise, then;\n\n// modern engines have queueMicrotask method\nif (!queueMicrotask) {\n  flush = function () {\n    var parent, fn;\n    if (IS_NODE && (parent = process.domain)) parent.exit();\n    while (head) {\n      fn = head.fn;\n      head = head.next;\n      try {\n        fn();\n      } catch (error) {\n        if (head) notify();\n        else last = undefined;\n        throw error;\n      }\n    } last = undefined;\n    if (parent) parent.enter();\n  };\n\n  // browsers with MutationObserver, except iOS - https://github.com/zloirock/core-js/issues/339\n  // also except WebOS Webkit https://github.com/zloirock/core-js/issues/898\n  if (!IS_IOS && !IS_NODE && !IS_WEBOS_WEBKIT && MutationObserver && document) {\n    toggle = true;\n    node = document.createTextNode('');\n    new MutationObserver(flush).observe(node, { characterData: true });\n    notify = function () {\n      node.data = toggle = !toggle;\n    };\n  // environments with maybe non-completely correct, but existent Promise\n  } else if (Promise && Promise.resolve) {\n    // Promise.resolve without an argument throws an error in LG WebOS 2\n    promise = Promise.resolve(undefined);\n    then = promise.then;\n    notify = function () {\n      then.call(promise, flush);\n    };\n  // Node.js without promises\n  } else if (IS_NODE) {\n    notify = function () {\n      process.nextTick(flush);\n    };\n  // for other environments - macrotask based on:\n  // - setImmediate\n  // - MessageChannel\n  // - window.postMessag\n  // - onreadystatechange\n  // - setTimeout\n  } else {\n    notify = function () {\n      // strange IE + webpack dev server bug - use .call(global)\n      macrotask.call(global, flush);\n    };\n  }\n}\n\nmodule.exports = queueMicrotask || function (fn) {\n  var task = { fn: fn, next: undefined };\n  if (last) last.next = task;\n  if (!head) {\n    head = task;\n    notify();\n  } last = task;\n};\n","var global = require('../internals/global');\nvar shared = require('../internals/shared');\nvar has = require('../internals/has');\nvar uid = require('../internals/uid');\nvar NATIVE_SYMBOL = require('../internals/native-symbol');\nvar USE_SYMBOL_AS_UID = require('../internals/use-symbol-as-uid');\n\nvar WellKnownSymbolsStore = shared('wks');\nvar Symbol = global.Symbol;\nvar createWellKnownSymbol = USE_SYMBOL_AS_UID ? Symbol : Symbol && Symbol.withoutSetter || uid;\n\nmodule.exports = function (name) {\n  if (!has(WellKnownSymbolsStore, name) || !(NATIVE_SYMBOL || typeof WellKnownSymbolsStore[name] == 'string')) {\n    if (NATIVE_SYMBOL && has(Symbol, name)) {\n      WellKnownSymbolsStore[name] = Symbol[name];\n    } else {\n      WellKnownSymbolsStore[name] = createWellKnownSymbol('Symbol.' + name);\n    }\n  } return WellKnownSymbolsStore[name];\n};\n","var $ = require('../internals/export');\nvar toObject = require('../internals/to-object');\nvar nativeKeys = require('../internals/object-keys');\nvar fails = require('../internals/fails');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeKeys(1); });\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\n$({ target: 'Object', stat: true, forced: FAILS_ON_PRIMITIVES }, {\n  keys: function keys(it) {\n    return nativeKeys(toObject(it));\n  }\n});\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar toLength = require('../internals/to-length');\nvar arraySpeciesCreate = require('../internals/array-species-create');\n\nvar push = [].push;\n\n// `Array.prototype.{ forEach, map, filter, some, every, find, findIndex, filterOut }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var IS_FILTER_OUT = TYPE == 7;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  return function ($this, callbackfn, that, specificCreate) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var create = specificCreate || arraySpeciesCreate;\n    var target = IS_MAP ? create($this, length) : IS_FILTER || IS_FILTER_OUT ? create($this, 0) : undefined;\n    var value, result;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (TYPE) {\n        if (IS_MAP) target[index] = result; // map\n        else if (result) switch (TYPE) {\n          case 3: return true;              // some\n          case 5: return value;             // find\n          case 6: return index;             // findIndex\n          case 2: push.call(target, value); // filter\n        } else switch (TYPE) {\n          case 4: return false;             // every\n          case 7: push.call(target, value); // filterOut\n        }\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : target;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.forEach` method\n  // https://tc39.es/ecma262/#sec-array.prototype.foreach\n  forEach: createMethod(0),\n  // `Array.prototype.map` method\n  // https://tc39.es/ecma262/#sec-array.prototype.map\n  map: createMethod(1),\n  // `Array.prototype.filter` method\n  // https://tc39.es/ecma262/#sec-array.prototype.filter\n  filter: createMethod(2),\n  // `Array.prototype.some` method\n  // https://tc39.es/ecma262/#sec-array.prototype.some\n  some: createMethod(3),\n  // `Array.prototype.every` method\n  // https://tc39.es/ecma262/#sec-array.prototype.every\n  every: createMethod(4),\n  // `Array.prototype.find` method\n  // https://tc39.es/ecma262/#sec-array.prototype.find\n  find: createMethod(5),\n  // `Array.prototype.findIndex` method\n  // https://tc39.es/ecma262/#sec-array.prototype.findIndex\n  findIndex: createMethod(6),\n  // `Array.prototype.filterOut` method\n  // https://github.com/tc39/proposal-array-filtering\n  filterOut: createMethod(7)\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  return Object.isExtensible(Object.preventExtensions({}));\n});\n","var isObject = require('../internals/is-object');\n\n// `ToPrimitive` abstract operation\n// https://tc39.es/ecma262/#sec-toprimitive\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (input, PREFERRED_STRING) {\n  if (!isObject(input)) return input;\n  var fn, val;\n  if (PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (typeof (fn = input.valueOf) == 'function' && !isObject(val = fn.call(input))) return val;\n  if (!PREFERRED_STRING && typeof (fn = input.toString) == 'function' && !isObject(val = fn.call(input))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./interModel.vue?vue&type=style&index=0&id=033b4203&scoped=true&lang=scss\"","module.exports = false;\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var global = require('../internals/global');\nvar setGlobal = require('../internals/set-global');\n\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || setGlobal(SHARED, {});\n\nmodule.exports = store;\n","'use strict';\nvar $ = require('../internals/export');\nvar $findIndex = require('../internals/array-iteration').findIndex;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\nvar FIND_INDEX = 'findIndex';\nvar SKIPS_HOLES = true;\n\n// Shouldn't skip holes\nif (FIND_INDEX in []) Array(1)[FIND_INDEX](function () { SKIPS_HOLES = false; });\n\n// `Array.prototype.findIndex` method\n// https://tc39.es/ecma262/#sec-array.prototype.findindex\n$({ target: 'Array', proto: true, forced: SKIPS_HOLES }, {\n  findIndex: function findIndex(callbackfn /* , that = undefined */) {\n    return $findIndex(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables(FIND_INDEX);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","var has = require('../internals/has');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar indexOf = require('../internals/array-includes').indexOf;\nvar hiddenKeys = require('../internals/hidden-keys');\n\nmodule.exports = function (object, names) {\n  var O = toIndexedObject(object);\n  var i = 0;\n  var result = [];\n  var key;\n  for (key in O) !has(hiddenKeys, key) && has(O, key) && result.push(key);\n  // Don't enum bug & hidden keys\n  while (names.length > i) if (has(O, key = names[i++])) {\n    ~indexOf(result, key) || result.push(key);\n  }\n  return result;\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\n\n// `Array.prototype.includes` method\n// https://tc39.es/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","var global = require('../internals/global');\nvar isObject = require('../internals/is-object');\n\nvar document = global.document;\n// typeof document.createElement is 'object' in old IE\nvar EXISTS = isObject(document) && isObject(document.createElement);\n\nmodule.exports = function (it) {\n  return EXISTS ? document.createElement(it) : {};\n};\n","var $ = require('../internals/export');\nvar assign = require('../internals/object-assign');\n\n// `Object.assign` method\n// https://tc39.es/ecma262/#sec-object.assign\n$({ target: 'Object', stat: true, forced: Object.assign !== assign }, {\n  assign: assign\n});\n","var anObject = require('../internals/an-object');\nvar isObject = require('../internals/is-object');\nvar newPromiseCapability = require('../internals/new-promise-capability');\n\nmodule.exports = function (C, x) {\n  anObject(C);\n  if (isObject(x) && x.constructor === C) return x;\n  var promiseCapability = newPromiseCapability.f(C);\n  var resolve = promiseCapability.resolve;\n  resolve(x);\n  return promiseCapability.promise;\n};\n","var global = require('../internals/global');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nmodule.exports = function (key, value) {\n  try {\n    createNonEnumerableProperty(global, key, value);\n  } catch (error) {\n    global[key] = value;\n  } return value;\n};\n","module.exports = {};\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (error) {\n    return true;\n  }\n};\n","var path = require('../internals/path');\nvar global = require('../internals/global');\n\nvar aFunction = function (variable) {\n  return typeof variable == 'function' ? variable : undefined;\n};\n\nmodule.exports = function (namespace, method) {\n  return arguments.length < 2 ? aFunction(path[namespace]) || aFunction(global[namespace])\n    : path[namespace] && path[namespace][method] || global[namespace] && global[namespace][method];\n};\n","'use strict';\nvar nativePropertyIsEnumerable = {}.propertyIsEnumerable;\nvar getOwnPropertyDescriptor = Object.getOwnPropertyDescriptor;\n\n// Nashorn ~ JDK8 bug\nvar NASHORN_BUG = getOwnPropertyDescriptor && !nativePropertyIsEnumerable.call({ 1: 2 }, 1);\n\n// `Object.prototype.propertyIsEnumerable` method implementation\n// https://tc39.es/ecma262/#sec-object.prototype.propertyisenumerable\nexports.f = NASHORN_BUG ? function propertyIsEnumerable(V) {\n  var descriptor = getOwnPropertyDescriptor(this, V);\n  return !!descriptor && descriptor.enumerable;\n} : nativePropertyIsEnumerable;\n","var defineWellKnownSymbol = require('../internals/define-well-known-symbol');\n\n// `Symbol.iterator` well-known symbol\n// https://tc39.es/ecma262/#sec-symbol.iterator\ndefineWellKnownSymbol('iterator');\n","/* eslint-disable no-proto -- safe */\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    setter = Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set;\n    setter.call(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter.call(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar redefine = require('../internals/redefine');\nvar toString = require('../internals/object-to-string');\n\n// `Object.prototype.toString` method\n// https://tc39.es/ecma262/#sec-object.prototype.tostring\nif (!TO_STRING_TAG_SUPPORT) {\n  redefine(Object.prototype, 'toString', toString, { unsafe: true });\n}\n","var defineProperty = require('../internals/object-define-property').f;\nvar has = require('../internals/has');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n\nmodule.exports = function (it, TAG, STATIC) {\n  if (it && !has(it = STATIC ? it : it.prototype, TO_STRING_TAG)) {\n    defineProperty(it, TO_STRING_TAG, { configurable: true, value: TAG });\n  }\n};\n","var PI_OVER_180 = Math.PI / 180;\nfunction detectBrowser() {\n    return (typeof window !== 'undefined' &&\n        ({}.toString.call(window) === '[object Window]' ||\n            {}.toString.call(window) === '[object global]'));\n}\nexport const glob = typeof global !== 'undefined'\n    ? global\n    : typeof window !== 'undefined'\n        ? window\n        : typeof WorkerGlobalScope !== 'undefined'\n            ? self\n            : {};\nexport const Konva = {\n    _global: glob,\n    version: '8.3.8',\n    isBrowser: detectBrowser(),\n    isUnminified: /param/.test(function (param) { }.toString()),\n    dblClickWindow: 400,\n    getAngle(angle) {\n        return Konva.angleDeg ? angle * PI_OVER_180 : angle;\n    },\n    enableTrace: false,\n    pointerEventsEnabled: true,\n    autoDrawEnabled: true,\n    hitOnDragEnabled: false,\n    capturePointerEventsEnabled: false,\n    _mouseListenClick: false,\n    _touchListenClick: false,\n    _pointerListenClick: false,\n    _mouseInDblClickWindow: false,\n    _touchInDblClickWindow: false,\n    _pointerInDblClickWindow: false,\n    _mouseDblClickPointerId: null,\n    _touchDblClickPointerId: null,\n    _pointerDblClickPointerId: null,\n    pixelRatio: (typeof window !== 'undefined' && window.devicePixelRatio) || 1,\n    dragDistance: 3,\n    angleDeg: true,\n    showWarnings: true,\n    dragButtons: [0, 1],\n    isDragging() {\n        return Konva['DD'].isDragging;\n    },\n    isDragReady() {\n        return !!Konva['DD'].node;\n    },\n    document: glob.document,\n    _injectGlobal(Konva) {\n        glob.Konva = Konva;\n    },\n};\nexport const _registerNode = (NodeClass) => {\n    Konva[NodeClass.prototype.getClassName()] = NodeClass;\n};\nKonva._injectGlobal(Konva);\n","'use strict';\n// TODO: Remove from `core-js@4` since it's moved to entry points\nrequire('../modules/es.regexp.exec');\nvar redefine = require('../internals/redefine');\nvar fails = require('../internals/fails');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar regexpExec = require('../internals/regexp-exec');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\n\nvar SPECIES = wellKnownSymbol('species');\n\nvar REPLACE_SUPPORTS_NAMED_GROUPS = !fails(function () {\n  // #replace needs built-in support for named groups.\n  // #match works fine because it just return the exec results, even if it has\n  // a \"grops\" property.\n  var re = /./;\n  re.exec = function () {\n    var result = [];\n    result.groups = { a: '7' };\n    return result;\n  };\n  return ''.replace(re, '$<a>') !== '7';\n});\n\n// IE <= 11 replaces $0 with the whole match, as if it was $&\n// https://stackoverflow.com/questions/6024666/getting-ie-to-replace-a-regex-with-the-literal-string-0\nvar REPLACE_KEEPS_$0 = (function () {\n  return 'a'.replace(/./, '$0') === '$0';\n})();\n\nvar REPLACE = wellKnownSymbol('replace');\n// Safari <= 13.0.3(?) substitutes nth capture where n>m with an empty string\nvar REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE = (function () {\n  if (/./[REPLACE]) {\n    return /./[REPLACE]('a', '$0') === '';\n  }\n  return false;\n})();\n\n// Chrome 51 has a buggy \"split\" implementation when RegExp#exec !== nativeExec\n// Weex JS has frozen built-in prototypes, so use try / catch wrapper\nvar SPLIT_WORKS_WITH_OVERWRITTEN_EXEC = !fails(function () {\n  // eslint-disable-next-line regexp/no-empty-group -- required for testing\n  var re = /(?:)/;\n  var originalExec = re.exec;\n  re.exec = function () { return originalExec.apply(this, arguments); };\n  var result = 'ab'.split(re);\n  return result.length !== 2 || result[0] !== 'a' || result[1] !== 'b';\n});\n\nmodule.exports = function (KEY, length, exec, sham) {\n  var SYMBOL = wellKnownSymbol(KEY);\n\n  var DELEGATES_TO_SYMBOL = !fails(function () {\n    // String methods call symbol-named RegEp methods\n    var O = {};\n    O[SYMBOL] = function () { return 7; };\n    return ''[KEY](O) != 7;\n  });\n\n  var DELEGATES_TO_EXEC = DELEGATES_TO_SYMBOL && !fails(function () {\n    // Symbol-named RegExp methods call .exec\n    var execCalled = false;\n    var re = /a/;\n\n    if (KEY === 'split') {\n      // We can't use real regex here since it causes deoptimization\n      // and serious performance degradation in V8\n      // https://github.com/zloirock/core-js/issues/306\n      re = {};\n      // RegExp[@@split] doesn't call the regex's exec method, but first creates\n      // a new one. We need to return the patched regex when creating the new one.\n      re.constructor = {};\n      re.constructor[SPECIES] = function () { return re; };\n      re.flags = '';\n      re[SYMBOL] = /./[SYMBOL];\n    }\n\n    re.exec = function () { execCalled = true; return null; };\n\n    re[SYMBOL]('');\n    return !execCalled;\n  });\n\n  if (\n    !DELEGATES_TO_SYMBOL ||\n    !DELEGATES_TO_EXEC ||\n    (KEY === 'replace' && !(\n      REPLACE_SUPPORTS_NAMED_GROUPS &&\n      REPLACE_KEEPS_$0 &&\n      !REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    )) ||\n    (KEY === 'split' && !SPLIT_WORKS_WITH_OVERWRITTEN_EXEC)\n  ) {\n    var nativeRegExpMethod = /./[SYMBOL];\n    var methods = exec(SYMBOL, ''[KEY], function (nativeMethod, regexp, str, arg2, forceStringMethod) {\n      if (regexp.exec === regexpExec) {\n        if (DELEGATES_TO_SYMBOL && !forceStringMethod) {\n          // The native String method already delegates to @@method (this\n          // polyfilled function), leasing to infinite recursion.\n          // We avoid it by directly calling the native @@method method.\n          return { done: true, value: nativeRegExpMethod.call(regexp, str, arg2) };\n        }\n        return { done: true, value: nativeMethod.call(str, regexp, arg2) };\n      }\n      return { done: false };\n    }, {\n      REPLACE_KEEPS_$0: REPLACE_KEEPS_$0,\n      REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE: REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE\n    });\n    var stringMethod = methods[0];\n    var regexMethod = methods[1];\n\n    redefine(String.prototype, KEY, stringMethod);\n    redefine(RegExp.prototype, SYMBOL, length == 2\n      // 21.2.5.8 RegExp.prototype[@@replace](string, replaceValue)\n      // 21.2.5.11 RegExp.prototype[@@split](string, limit)\n      ? function (string, arg) { return regexMethod.call(string, this, arg); }\n      // 21.2.5.6 RegExp.prototype[@@match](string)\n      // 21.2.5.9 RegExp.prototype[@@search](string)\n      : function (string) { return regexMethod.call(string, this); }\n    );\n  }\n\n  if (sham) createNonEnumerableProperty(RegExp.prototype[SYMBOL], 'sham', true);\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var check = function (it) {\n  return it && it.Math == Math && it;\n};\n\n// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nmodule.exports =\n  /* global globalThis -- safe */\n  check(typeof globalThis == 'object' && globalThis) ||\n  check(typeof window == 'object' && window) ||\n  check(typeof self == 'object' && self) ||\n  check(typeof global == 'object' && global) ||\n  // eslint-disable-next-line no-new-func -- fallback\n  (function () { return this; })() || Function('return this')();\n","var $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar ownKeys = require('../internals/own-keys');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar createProperty = require('../internals/create-property');\n\n// `Object.getOwnPropertyDescriptors` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptors\n$({ target: 'Object', stat: true, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptors: function getOwnPropertyDescriptors(object) {\n    var O = toIndexedObject(object);\n    var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n    var keys = ownKeys(O);\n    var result = {};\n    var index = 0;\n    var key, descriptor;\n    while (keys.length > index) {\n      descriptor = getOwnPropertyDescriptor(O, key = keys[index++]);\n      if (descriptor !== undefined) createProperty(result, key, descriptor);\n    }\n    return result;\n  }\n});\n","var global = require('../internals/global');\nvar DOMIterables = require('../internals/dom-iterables');\nvar ArrayIteratorMethods = require('../modules/es.array.iterator');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar ArrayValues = ArrayIteratorMethods.values;\n\nfor (var COLLECTION_NAME in DOMIterables) {\n  var Collection = global[COLLECTION_NAME];\n  var CollectionPrototype = Collection && Collection.prototype;\n  if (CollectionPrototype) {\n    // some Chrome versions have non-configurable methods on DOMTokenList\n    if (CollectionPrototype[ITERATOR] !== ArrayValues) try {\n      createNonEnumerableProperty(CollectionPrototype, ITERATOR, ArrayValues);\n    } catch (error) {\n      CollectionPrototype[ITERATOR] = ArrayValues;\n    }\n    if (!CollectionPrototype[TO_STRING_TAG]) {\n      createNonEnumerableProperty(CollectionPrototype, TO_STRING_TAG, COLLECTION_NAME);\n    }\n    if (DOMIterables[COLLECTION_NAME]) for (var METHOD_NAME in ArrayIteratorMethods) {\n      // some Chrome versions have non-configurable methods on DOMTokenList\n      if (CollectionPrototype[METHOD_NAME] !== ArrayIteratorMethods[METHOD_NAME]) try {\n        createNonEnumerableProperty(CollectionPrototype, METHOD_NAME, ArrayIteratorMethods[METHOD_NAME]);\n      } catch (error) {\n        CollectionPrototype[METHOD_NAME] = ArrayIteratorMethods[METHOD_NAME];\n      }\n    }\n  }\n}\n","var internalObjectKeys = require('../internals/object-keys-internal');\nvar enumBugKeys = require('../internals/enum-bug-keys');\n\n// `Object.keys` method\n// https://tc39.es/ecma262/#sec-object.keys\nmodule.exports = Object.keys || function keys(O) {\n  return internalObjectKeys(O, enumBugKeys);\n};\n","// `Symbol.prototype.description` getter\n// https://tc39.es/ecma262/#sec-symbol.prototype.description\n'use strict';\nvar $ = require('../internals/export');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar has = require('../internals/has');\nvar isObject = require('../internals/is-object');\nvar defineProperty = require('../internals/object-define-property').f;\nvar copyConstructorProperties = require('../internals/copy-constructor-properties');\n\nvar NativeSymbol = global.Symbol;\n\nif (DESCRIPTORS && typeof NativeSymbol == 'function' && (!('description' in NativeSymbol.prototype) ||\n  // Safari 12 bug\n  NativeSymbol().description !== undefined\n)) {\n  var EmptyStringDescriptionStore = {};\n  // wrap Symbol constructor for correct work with undefined description\n  var SymbolWrapper = function Symbol() {\n    var description = arguments.length < 1 || arguments[0] === undefined ? undefined : String(arguments[0]);\n    var result = this instanceof SymbolWrapper\n      ? new NativeSymbol(description)\n      // in Edge 13, String(Symbol(undefined)) === 'Symbol(undefined)'\n      : description === undefined ? NativeSymbol() : NativeSymbol(description);\n    if (description === '') EmptyStringDescriptionStore[result] = true;\n    return result;\n  };\n  copyConstructorProperties(SymbolWrapper, NativeSymbol);\n  var symbolPrototype = SymbolWrapper.prototype = NativeSymbol.prototype;\n  symbolPrototype.constructor = SymbolWrapper;\n\n  var symbolToString = symbolPrototype.toString;\n  var native = String(NativeSymbol('test')) == 'Symbol(test)';\n  var regexp = /^Symbol\\((.*)\\)[^)]+$/;\n  defineProperty(symbolPrototype, 'description', {\n    configurable: true,\n    get: function description() {\n      var symbol = isObject(this) ? this.valueOf() : this;\n      var string = symbolToString.call(symbol);\n      if (has(EmptyStringDescriptionStore, symbol)) return '';\n      var desc = native ? string.slice(7, -1) : string.replace(regexp, '$1');\n      return desc === '' ? undefined : desc;\n    }\n  });\n\n  $({ global: true, forced: true }, {\n    Symbol: SymbolWrapper\n  });\n}\n","var has = require('../internals/has');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar ObjectPrototype = Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? Object.getPrototypeOf : function (O) {\n  O = toObject(O);\n  if (has(O, IE_PROTO)) return O[IE_PROTO];\n  if (typeof O.constructor == 'function' && O instanceof O.constructor) {\n    return O.constructor.prototype;\n  } return O instanceof Object ? ObjectPrototype : null;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","'use strict';\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar Iterators = require('../internals/iterators');\nvar InternalStateModule = require('../internals/internal-state');\nvar defineIterator = require('../internals/define-iterator');\n\nvar ARRAY_ITERATOR = 'Array Iterator';\nvar setInternalState = InternalStateModule.set;\nvar getInternalState = InternalStateModule.getterFor(ARRAY_ITERATOR);\n\n// `Array.prototype.entries` method\n// https://tc39.es/ecma262/#sec-array.prototype.entries\n// `Array.prototype.keys` method\n// https://tc39.es/ecma262/#sec-array.prototype.keys\n// `Array.prototype.values` method\n// https://tc39.es/ecma262/#sec-array.prototype.values\n// `Array.prototype[@@iterator]` method\n// https://tc39.es/ecma262/#sec-array.prototype-@@iterator\n// `CreateArrayIterator` internal method\n// https://tc39.es/ecma262/#sec-createarrayiterator\nmodule.exports = defineIterator(Array, 'Array', function (iterated, kind) {\n  setInternalState(this, {\n    type: ARRAY_ITERATOR,\n    target: toIndexedObject(iterated), // target\n    index: 0,                          // next index\n    kind: kind                         // kind\n  });\n// `%ArrayIteratorPrototype%.next` method\n// https://tc39.es/ecma262/#sec-%arrayiteratorprototype%.next\n}, function () {\n  var state = getInternalState(this);\n  var target = state.target;\n  var kind = state.kind;\n  var index = state.index++;\n  if (!target || index >= target.length) {\n    state.target = undefined;\n    return { value: undefined, done: true };\n  }\n  if (kind == 'keys') return { value: index, done: false };\n  if (kind == 'values') return { value: target[index], done: false };\n  return { value: [index, target[index]], done: false };\n}, 'values');\n\n// argumentsList[@@iterator] is %ArrayProto_values%\n// https://tc39.es/ecma262/#sec-createunmappedargumentsobject\n// https://tc39.es/ecma262/#sec-createmappedargumentsobject\nIterators.Arguments = Iterators.Array;\n\n// https://tc39.es/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('keys');\naddToUnscopables('values');\naddToUnscopables('entries');\n","var redefine = require('../internals/redefine');\n\nmodule.exports = function (target, src, options) {\n  for (var key in src) redefine(target, key, src[key], options);\n  return target;\n};\n","var $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar nativeGetOwnPropertyDescriptor = require('../internals/object-get-own-property-descriptor').f;\nvar DESCRIPTORS = require('../internals/descriptors');\n\nvar FAILS_ON_PRIMITIVES = fails(function () { nativeGetOwnPropertyDescriptor(1); });\nvar FORCED = !DESCRIPTORS || FAILS_ON_PRIMITIVES;\n\n// `Object.getOwnPropertyDescriptor` method\n// https://tc39.es/ecma262/#sec-object.getownpropertydescriptor\n$({ target: 'Object', stat: true, forced: FORCED, sham: !DESCRIPTORS }, {\n  getOwnPropertyDescriptor: function getOwnPropertyDescriptor(it, key) {\n    return nativeGetOwnPropertyDescriptor(toIndexedObject(it), key);\n  }\n});\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nexports.f = wellKnownSymbol;\n","module.exports = function (exec) {\n  try {\n    return { error: false, value: exec() };\n  } catch (error) {\n    return { error: true, value: error };\n  }\n};\n","'use strict';\nvar $ = require('../internals/export');\nvar IS_PURE = require('../internals/is-pure');\nvar global = require('../internals/global');\nvar getBuiltIn = require('../internals/get-built-in');\nvar NativePromise = require('../internals/native-promise-constructor');\nvar redefine = require('../internals/redefine');\nvar redefineAll = require('../internals/redefine-all');\nvar setToStringTag = require('../internals/set-to-string-tag');\nvar setSpecies = require('../internals/set-species');\nvar isObject = require('../internals/is-object');\nvar aFunction = require('../internals/a-function');\nvar anInstance = require('../internals/an-instance');\nvar inspectSource = require('../internals/inspect-source');\nvar iterate = require('../internals/iterate');\nvar checkCorrectnessOfIteration = require('../internals/check-correctness-of-iteration');\nvar speciesConstructor = require('../internals/species-constructor');\nvar task = require('../internals/task').set;\nvar microtask = require('../internals/microtask');\nvar promiseResolve = require('../internals/promise-resolve');\nvar hostReportErrors = require('../internals/host-report-errors');\nvar newPromiseCapabilityModule = require('../internals/new-promise-capability');\nvar perform = require('../internals/perform');\nvar InternalStateModule = require('../internals/internal-state');\nvar isForced = require('../internals/is-forced');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar IS_NODE = require('../internals/engine-is-node');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar SPECIES = wellKnownSymbol('species');\nvar PROMISE = 'Promise';\nvar getInternalState = InternalStateModule.get;\nvar setInternalState = InternalStateModule.set;\nvar getInternalPromiseState = InternalStateModule.getterFor(PROMISE);\nvar PromiseConstructor = NativePromise;\nvar TypeError = global.TypeError;\nvar document = global.document;\nvar process = global.process;\nvar $fetch = getBuiltIn('fetch');\nvar newPromiseCapability = newPromiseCapabilityModule.f;\nvar newGenericPromiseCapability = newPromiseCapability;\nvar DISPATCH_EVENT = !!(document && document.createEvent && global.dispatchEvent);\nvar NATIVE_REJECTION_EVENT = typeof PromiseRejectionEvent == 'function';\nvar UNHANDLED_REJECTION = 'unhandledrejection';\nvar REJECTION_HANDLED = 'rejectionhandled';\nvar PENDING = 0;\nvar FULFILLED = 1;\nvar REJECTED = 2;\nvar HANDLED = 1;\nvar UNHANDLED = 2;\nvar Internal, OwnPromiseCapability, PromiseWrapper, nativeThen;\n\nvar FORCED = isForced(PROMISE, function () {\n  var GLOBAL_CORE_JS_PROMISE = inspectSource(PromiseConstructor) !== String(PromiseConstructor);\n  if (!GLOBAL_CORE_JS_PROMISE) {\n    // V8 6.6 (Node 10 and Chrome 66) have a bug with resolving custom thenables\n    // https://bugs.chromium.org/p/chromium/issues/detail?id=830565\n    // We can't detect it synchronously, so just check versions\n    if (V8_VERSION === 66) return true;\n    // Unhandled rejections tracking support, NodeJS Promise without it fails @@species test\n    if (!IS_NODE && !NATIVE_REJECTION_EVENT) return true;\n  }\n  // We need Promise#finally in the pure version for preventing prototype pollution\n  if (IS_PURE && !PromiseConstructor.prototype['finally']) return true;\n  // We can't use @@species feature detection in V8 since it causes\n  // deoptimization and performance degradation\n  // https://github.com/zloirock/core-js/issues/679\n  if (V8_VERSION >= 51 && /native code/.test(PromiseConstructor)) return false;\n  // Detect correctness of subclassing with @@species support\n  var promise = PromiseConstructor.resolve(1);\n  var FakePromise = function (exec) {\n    exec(function () { /* empty */ }, function () { /* empty */ });\n  };\n  var constructor = promise.constructor = {};\n  constructor[SPECIES] = FakePromise;\n  return !(promise.then(function () { /* empty */ }) instanceof FakePromise);\n});\n\nvar INCORRECT_ITERATION = FORCED || !checkCorrectnessOfIteration(function (iterable) {\n  PromiseConstructor.all(iterable)['catch'](function () { /* empty */ });\n});\n\n// helpers\nvar isThenable = function (it) {\n  var then;\n  return isObject(it) && typeof (then = it.then) == 'function' ? then : false;\n};\n\nvar notify = function (state, isReject) {\n  if (state.notified) return;\n  state.notified = true;\n  var chain = state.reactions;\n  microtask(function () {\n    var value = state.value;\n    var ok = state.state == FULFILLED;\n    var index = 0;\n    // variable length - can't use forEach\n    while (chain.length > index) {\n      var reaction = chain[index++];\n      var handler = ok ? reaction.ok : reaction.fail;\n      var resolve = reaction.resolve;\n      var reject = reaction.reject;\n      var domain = reaction.domain;\n      var result, then, exited;\n      try {\n        if (handler) {\n          if (!ok) {\n            if (state.rejection === UNHANDLED) onHandleUnhandled(state);\n            state.rejection = HANDLED;\n          }\n          if (handler === true) result = value;\n          else {\n            if (domain) domain.enter();\n            result = handler(value); // can throw\n            if (domain) {\n              domain.exit();\n              exited = true;\n            }\n          }\n          if (result === reaction.promise) {\n            reject(TypeError('Promise-chain cycle'));\n          } else if (then = isThenable(result)) {\n            then.call(result, resolve, reject);\n          } else resolve(result);\n        } else reject(value);\n      } catch (error) {\n        if (domain && !exited) domain.exit();\n        reject(error);\n      }\n    }\n    state.reactions = [];\n    state.notified = false;\n    if (isReject && !state.rejection) onUnhandled(state);\n  });\n};\n\nvar dispatchEvent = function (name, promise, reason) {\n  var event, handler;\n  if (DISPATCH_EVENT) {\n    event = document.createEvent('Event');\n    event.promise = promise;\n    event.reason = reason;\n    event.initEvent(name, false, true);\n    global.dispatchEvent(event);\n  } else event = { promise: promise, reason: reason };\n  if (!NATIVE_REJECTION_EVENT && (handler = global['on' + name])) handler(event);\n  else if (name === UNHANDLED_REJECTION) hostReportErrors('Unhandled promise rejection', reason);\n};\n\nvar onUnhandled = function (state) {\n  task.call(global, function () {\n    var promise = state.facade;\n    var value = state.value;\n    var IS_UNHANDLED = isUnhandled(state);\n    var result;\n    if (IS_UNHANDLED) {\n      result = perform(function () {\n        if (IS_NODE) {\n          process.emit('unhandledRejection', value, promise);\n        } else dispatchEvent(UNHANDLED_REJECTION, promise, value);\n      });\n      // Browsers should not trigger `rejectionHandled` event if it was handled here, NodeJS - should\n      state.rejection = IS_NODE || isUnhandled(state) ? UNHANDLED : HANDLED;\n      if (result.error) throw result.value;\n    }\n  });\n};\n\nvar isUnhandled = function (state) {\n  return state.rejection !== HANDLED && !state.parent;\n};\n\nvar onHandleUnhandled = function (state) {\n  task.call(global, function () {\n    var promise = state.facade;\n    if (IS_NODE) {\n      process.emit('rejectionHandled', promise);\n    } else dispatchEvent(REJECTION_HANDLED, promise, state.value);\n  });\n};\n\nvar bind = function (fn, state, unwrap) {\n  return function (value) {\n    fn(state, value, unwrap);\n  };\n};\n\nvar internalReject = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  state.value = value;\n  state.state = REJECTED;\n  notify(state, true);\n};\n\nvar internalResolve = function (state, value, unwrap) {\n  if (state.done) return;\n  state.done = true;\n  if (unwrap) state = unwrap;\n  try {\n    if (state.facade === value) throw TypeError(\"Promise can't be resolved itself\");\n    var then = isThenable(value);\n    if (then) {\n      microtask(function () {\n        var wrapper = { done: false };\n        try {\n          then.call(value,\n            bind(internalResolve, wrapper, state),\n            bind(internalReject, wrapper, state)\n          );\n        } catch (error) {\n          internalReject(wrapper, error, state);\n        }\n      });\n    } else {\n      state.value = value;\n      state.state = FULFILLED;\n      notify(state, false);\n    }\n  } catch (error) {\n    internalReject({ done: false }, error, state);\n  }\n};\n\n// constructor polyfill\nif (FORCED) {\n  // 25.4.3.1 Promise(executor)\n  PromiseConstructor = function Promise(executor) {\n    anInstance(this, PromiseConstructor, PROMISE);\n    aFunction(executor);\n    Internal.call(this);\n    var state = getInternalState(this);\n    try {\n      executor(bind(internalResolve, state), bind(internalReject, state));\n    } catch (error) {\n      internalReject(state, error);\n    }\n  };\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  Internal = function Promise(executor) {\n    setInternalState(this, {\n      type: PROMISE,\n      done: false,\n      notified: false,\n      parent: false,\n      reactions: [],\n      rejection: false,\n      state: PENDING,\n      value: undefined\n    });\n  };\n  Internal.prototype = redefineAll(PromiseConstructor.prototype, {\n    // `Promise.prototype.then` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.then\n    then: function then(onFulfilled, onRejected) {\n      var state = getInternalPromiseState(this);\n      var reaction = newPromiseCapability(speciesConstructor(this, PromiseConstructor));\n      reaction.ok = typeof onFulfilled == 'function' ? onFulfilled : true;\n      reaction.fail = typeof onRejected == 'function' && onRejected;\n      reaction.domain = IS_NODE ? process.domain : undefined;\n      state.parent = true;\n      state.reactions.push(reaction);\n      if (state.state != PENDING) notify(state, false);\n      return reaction.promise;\n    },\n    // `Promise.prototype.catch` method\n    // https://tc39.es/ecma262/#sec-promise.prototype.catch\n    'catch': function (onRejected) {\n      return this.then(undefined, onRejected);\n    }\n  });\n  OwnPromiseCapability = function () {\n    var promise = new Internal();\n    var state = getInternalState(promise);\n    this.promise = promise;\n    this.resolve = bind(internalResolve, state);\n    this.reject = bind(internalReject, state);\n  };\n  newPromiseCapabilityModule.f = newPromiseCapability = function (C) {\n    return C === PromiseConstructor || C === PromiseWrapper\n      ? new OwnPromiseCapability(C)\n      : newGenericPromiseCapability(C);\n  };\n\n  if (!IS_PURE && typeof NativePromise == 'function') {\n    nativeThen = NativePromise.prototype.then;\n\n    // wrap native Promise#then for native async functions\n    redefine(NativePromise.prototype, 'then', function then(onFulfilled, onRejected) {\n      var that = this;\n      return new PromiseConstructor(function (resolve, reject) {\n        nativeThen.call(that, resolve, reject);\n      }).then(onFulfilled, onRejected);\n    // https://github.com/zloirock/core-js/issues/640\n    }, { unsafe: true });\n\n    // wrap fetch result\n    if (typeof $fetch == 'function') $({ global: true, enumerable: true, forced: true }, {\n      // eslint-disable-next-line no-unused-vars -- required for `.length`\n      fetch: function fetch(input /* , init */) {\n        return promiseResolve(PromiseConstructor, $fetch.apply(global, arguments));\n      }\n    });\n  }\n}\n\n$({ global: true, wrap: true, forced: FORCED }, {\n  Promise: PromiseConstructor\n});\n\nsetToStringTag(PromiseConstructor, PROMISE, false, true);\nsetSpecies(PROMISE);\n\nPromiseWrapper = getBuiltIn(PROMISE);\n\n// statics\n$({ target: PROMISE, stat: true, forced: FORCED }, {\n  // `Promise.reject` method\n  // https://tc39.es/ecma262/#sec-promise.reject\n  reject: function reject(r) {\n    var capability = newPromiseCapability(this);\n    capability.reject.call(undefined, r);\n    return capability.promise;\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: IS_PURE || FORCED }, {\n  // `Promise.resolve` method\n  // https://tc39.es/ecma262/#sec-promise.resolve\n  resolve: function resolve(x) {\n    return promiseResolve(IS_PURE && this === PromiseWrapper ? PromiseConstructor : this, x);\n  }\n});\n\n$({ target: PROMISE, stat: true, forced: INCORRECT_ITERATION }, {\n  // `Promise.all` method\n  // https://tc39.es/ecma262/#sec-promise.all\n  all: function all(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var resolve = capability.resolve;\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      var values = [];\n      var counter = 0;\n      var remaining = 1;\n      iterate(iterable, function (promise) {\n        var index = counter++;\n        var alreadyCalled = false;\n        values.push(undefined);\n        remaining++;\n        $promiseResolve.call(C, promise).then(function (value) {\n          if (alreadyCalled) return;\n          alreadyCalled = true;\n          values[index] = value;\n          --remaining || resolve(values);\n        }, reject);\n      });\n      --remaining || resolve(values);\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  },\n  // `Promise.race` method\n  // https://tc39.es/ecma262/#sec-promise.race\n  race: function race(iterable) {\n    var C = this;\n    var capability = newPromiseCapability(C);\n    var reject = capability.reject;\n    var result = perform(function () {\n      var $promiseResolve = aFunction(C.resolve);\n      iterate(iterable, function (promise) {\n        $promiseResolve.call(C, promise).then(capability.resolve, reject);\n      });\n    });\n    if (result.error) reject(result.value);\n    return capability.promise;\n  }\n});\n","var has = require('../internals/has');\nvar ownKeys = require('../internals/own-keys');\nvar getOwnPropertyDescriptorModule = require('../internals/object-get-own-property-descriptor');\nvar definePropertyModule = require('../internals/object-define-property');\n\nmodule.exports = function (target, source) {\n  var keys = ownKeys(source);\n  var defineProperty = definePropertyModule.f;\n  var getOwnPropertyDescriptor = getOwnPropertyDescriptorModule.f;\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    if (!has(target, key)) defineProperty(target, key, getOwnPropertyDescriptor(source, key));\n  }\n};\n","var classof = require('../internals/classof-raw');\n\n// `IsArray` abstract operation\n// https://tc39.es/ecma262/#sec-isarray\nmodule.exports = Array.isArray || function isArray(arg) {\n  return classof(arg) == 'Array';\n};\n","var wellKnownSymbol = require('../internals/well-known-symbol');\nvar Iterators = require('../internals/iterators');\n\nvar ITERATOR = wellKnownSymbol('iterator');\nvar ArrayPrototype = Array.prototype;\n\n// check on default Array iterator\nmodule.exports = function (it) {\n  return it !== undefined && (Iterators.Array === it || ArrayPrototype[ITERATOR] === it);\n};\n","'use strict';\nvar aFunction = require('../internals/a-function');\n\nvar PromiseCapability = function (C) {\n  var resolve, reject;\n  this.promise = new C(function ($$resolve, $$reject) {\n    if (resolve !== undefined || reject !== undefined) throw TypeError('Bad Promise constructor');\n    resolve = $$resolve;\n    reject = $$reject;\n  });\n  this.resolve = aFunction(resolve);\n  this.reject = aFunction(reject);\n};\n\n// 25.4.1.5 NewPromiseCapability(C)\nmodule.exports.f = function (C) {\n  return new PromiseCapability(C);\n};\n","var hiddenKeys = require('../internals/hidden-keys');\nvar isObject = require('../internals/is-object');\nvar has = require('../internals/has');\nvar defineProperty = require('../internals/object-define-property').f;\nvar uid = require('../internals/uid');\nvar FREEZING = require('../internals/freezing');\n\nvar METADATA = uid('meta');\nvar id = 0;\n\nvar isExtensible = Object.isExtensible || function () {\n  return true;\n};\n\nvar setMetadata = function (it) {\n  defineProperty(it, METADATA, { value: {\n    objectID: 'O' + ++id, // object ID\n    weakData: {}          // weak collections IDs\n  } });\n};\n\nvar fastKey = function (it, create) {\n  // return a primitive with prefix\n  if (!isObject(it)) return typeof it == 'symbol' ? it : (typeof it == 'string' ? 'S' : 'P') + it;\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return 'F';\n    // not necessary to add metadata\n    if (!create) return 'E';\n    // add missing metadata\n    setMetadata(it);\n  // return object ID\n  } return it[METADATA].objectID;\n};\n\nvar getWeakData = function (it, create) {\n  if (!has(it, METADATA)) {\n    // can't set metadata to uncaught frozen object\n    if (!isExtensible(it)) return true;\n    // not necessary to add metadata\n    if (!create) return false;\n    // add missing metadata\n    setMetadata(it);\n  // return the store of weak collections IDs\n  } return it[METADATA].weakData;\n};\n\n// add metadata on freeze-family methods calling\nvar onFreeze = function (it) {\n  if (FREEZING && meta.REQUIRED && isExtensible(it) && !has(it, METADATA)) setMetadata(it);\n  return it;\n};\n\nvar meta = module.exports = {\n  REQUIRED: false,\n  fastKey: fastKey,\n  getWeakData: getWeakData,\n  onFreeze: onFreeze\n};\n\nhiddenKeys[METADATA] = true;\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && typeof O.callee == 'function' ? 'Arguments' : result;\n};\n","var shared = require('../internals/shared');\nvar uid = require('../internals/uid');\n\nvar keys = shared('keys');\n\nmodule.exports = function (key) {\n  return keys[key] || (keys[key] = uid(key));\n};\n","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  var currentScript = window.document.currentScript\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    var getCurrentScript = require('@soda/get-current-script')\n    currentScript = getCurrentScript()\n\n    // for backward compatibility, because previously we directly included the polyfill\n    if (!('currentScript' in document)) {\n      Object.defineProperty(document, 'currentScript', { get: getCurrentScript })\n    }\n  }\n\n  var src = currentScript && currentScript.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/)\n  if (src) {\n    __webpack_public_path__ = src[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","<template>\r\n  <div class=\"sc-tf-inter-model\"\r\n       ref=\"tfInterModel\">\r\n    <!-- 路口模型 -->\r\n    <div class=\"sc-tf-inter-box\"\r\n         ref=\"scTfInterBox\"></div>\r\n    <!-- 实时相位 -->\r\n    <div class=\"overflow-box\"\r\n         v-show=\"drawOption.drawPhase\"\r\n         :style=\"{ width: phaseWidth + 'px' }\">\r\n      <div class=\"sc-tf-phase-box\"\r\n           ref=\"scTfPhaseBox\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n \r\n<script lang=\"ts\">\r\nimport Konva from \"konva\";\r\nimport { defineComponent, reactive, toRefs, ref } from \"vue\";\r\nimport {\r\n  getDrawFlowData,\r\n  getLaneFlowPoint,\r\n  getRealPhasePoint,\r\n  getInterPhaseflowData,\r\n  getFootLightData,\r\n  getDirectionLightData,\r\n} from \"./js/flowPoint\";\r\nimport { CrossInfo, Util, CrossConst } from \"./js/interModel\";\r\nimport { phaseMap } from \"./js/common\";\r\nimport { adjacentIcon, bikeIcon } from \"./assets/iconBase64\";\r\nexport default defineComponent({\r\n  name: \"tf-inter-model\",\r\n  props: {\r\n    // 绘制配置参数\r\n    option: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n    let modelStage: any = null,\r\n      baseLayer: any = null,\r\n      realLayer: any = null,\r\n      phaseStage: any = null,\r\n      phaseLayer: any = null,\r\n      cross: any = null,\r\n      clientWidth: number = 0,\r\n      clientHeight: number = 0,\r\n      baseLayerWidth: number = 0,\r\n      phaseWidth: number = 0,\r\n      hoverBack: any = null,\r\n      hoverText: any = null,\r\n      ctrlWay: any = null,\r\n      nearImg: any = null,\r\n      bikeImg: any = null;\r\n    const tfInterModel = ref();\r\n    const scTfInterBox = ref();\r\n    const scTfPhaseBox = ref();\r\n    const state = reactive({\r\n      phaseWidth: 100,\r\n      drawOption: {\r\n        centerLineMode: false, // 是否道路中线对齐\r\n        drawPhase: true, // 是否绘制左侧相位\r\n        showRoadAsideLine: true, // 显示道路边线\r\n        showLaneDashedLine: true, // 显示道路虚线\r\n        showManRoadLine: true, // 显示斑马线\r\n        showStopLine: true, // 显示停车线\r\n        showManRoad: true, // 显示行人车道\r\n        showLaneFlow: true, // 显示车道流向\r\n        showRoadName: true, // 显示路口名称\r\n        laneFlowOffetStopLine: 0, // 车道流向离停车线的距离 车道宽度的倍数\r\n\r\n        routeNameColor: \"#000000\", // 默认路口名称颜色\r\n        defaultFlowColor: \"#008aaf\", // 默认流向颜色\r\n        HighLightFlowColor: \"#00ec00\", // 高亮流向颜色\r\n        saturationFlowColor: \"#ffffff\", // 饱和度流向颜色\r\n        phaseBackColor: \"#ffffff\", // 相位背景颜色\r\n        laneBackColor: \"#283349\", // 车道背景颜色\r\n        phaseNumColor: \"#446a86\", // 相位号颜色\r\n        redColor: \"#FF0000\", // 红色\r\n        greenColor: \"#00EC00\", // 绿色\r\n        yellowColor: \"#E1E100\", // 黄色\r\n        greyColor: \"#cccccc\", // 灰色\r\n      },\r\n      interType: 0, // 0：普通路口  1：父子路口 2：匝道路口\r\n    });\r\n    const methods = {\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-03 09:48:24\r\n       * @introduction 初始化配置参数\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 参数说明\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getDrawOption() {\r\n        state.drawOption = Object.assign(\r\n          {\r\n            centerLineMode: false, // 是否道路中线对齐\r\n            drawPhase: true, // 是否绘制左侧相位\r\n            showRoadAsideLine: true, // 显示道路边线\r\n            showLaneDashedLine: true, // 显示道路虚线\r\n            showManRoadLine: true, // 显示斑马线\r\n            showStopLine: true, // 显示停车线\r\n            showManRoad: true, // 显示行人车道\r\n            showLaneFlow: true, // 显示车道流向\r\n            showRoadName: true, // 显示路口名称\r\n            laneFlowOffetStopLine: 0, // 车道流向离停车线的距离 车道宽度的倍数\r\n\r\n            routeNameColor: \"#000000\", // 默认路口名称颜色\r\n            defaultFlowColor: \"#008aaf\", // 默认流向颜色\r\n            HighLightFlowColor: \"#00ec00\", // 高亮流向颜色\r\n            saturationFlowColor: \"#ffffff\", // 饱和度流向颜色\r\n            phaseBackColor: \"#ffffff\", // 相位背景颜色\r\n            laneBackColor: \"#283349\", // 车道背景颜色\r\n            phaseNumColor: \"#446a86\", // 相位号颜色\r\n            redColor: \"#FF0000\", // 红色\r\n            greenColor: \"#00EC00\", // 绿色\r\n            yellowColor: \"#E1E100\", // 黄色\r\n            greyColor: \"#cccccc\", // 灰色\r\n          },\r\n          props.option\r\n        );\r\n      },\r\n\r\n      clearHandler() {\r\n        modelStage && modelStage.destroy();\r\n        // 基础\r\n        baseLayer && baseLayer.destroy();\r\n        // 实时信息\r\n        realLayer && realLayer.destroy();\r\n        phaseStage && phaseStage.destroy();\r\n        phaseLayer && phaseLayer.destroy();\r\n        // 相邻路口\r\n        // this.adjacentLayrt && this.adjacentLayrt.destroy()\r\n        modelStage = null;\r\n        baseLayer = null;\r\n        realLayer = null;\r\n        phaseStage = null;\r\n        phaseLayer = null;\r\n        // 路口数据\r\n        cross = null;\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-07-21 19:37:23\r\n       * @introduction 绘制路口模型\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 参数说明\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      init(interData: any) {\r\n        if (modelStage) {\r\n          this.clearHandler();\r\n        }\r\n        state.interType = interData.is_have_son;\r\n        methods.getDrawOption();\r\n        console.log();\r\n        clientWidth = tfInterModel.value.clientWidth;\r\n        clientHeight = tfInterModel.value.clientHeight;\r\n        baseLayerWidth = Math.min(clientWidth, clientHeight);\r\n        // 1、初始化canvas场景：Stage\r\n        modelStage = new Konva.Stage({\r\n          // scale: { x: 1, y: -1 },\r\n          // container: this.$el,\r\n          container: scTfInterBox.value,\r\n          width: clientWidth,\r\n          height: clientHeight,\r\n        });\r\n        // 1.1 保障路口基础图层是正方形，居中\r\n        let width, height;\r\n        let x = 0;\r\n        let y = 0;\r\n        // eslint-disable-next-line prefer-const\r\n        width = height = baseLayerWidth;\r\n        if (clientWidth > clientHeight) {\r\n          x = (clientWidth - clientHeight) / 2;\r\n        } else {\r\n          y = -(clientWidth - clientHeight) / 2;\r\n        }\r\n        baseLayer = new Konva.Layer({\r\n          x: state.drawOption.drawPhase\r\n            ? x + width / 2 + width / 12\r\n            : x + width / 2,\r\n          y: y + height / 2,\r\n        });\r\n        baseLayer.height = height;\r\n        baseLayer.width = height;\r\n        modelStage.add(baseLayer);\r\n        methods.drawInter(interData);\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-07-26 13:21:03\r\n       * @introduction 简述\r\n       * @description 详细描述\r\n       * @param {参数类型} interData 路口模型数据\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      drawInter(interData: any) {\r\n        const me = this;\r\n        const drawInterData = this.resetInterData(interData);\r\n        cross = new CrossInfo(drawInterData);\r\n        // console.log(this.cross)\r\n        // 根据数据绘画\r\n        const roadPolygonShape = new Konva.Shape({\r\n          stroke: \"#23324b\",\r\n          strokeWidth: 5,\r\n          fill: state.drawOption.laneBackColor,\r\n          // a Konva.Canvas renderer is passed into the sceneFunc function\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            const roadPolygon = cross.entranceArray\r\n              .map((info: any) => {\r\n                return info.polygonData.RoadPolygon;\r\n              })\r\n              .flat();\r\n            roadPolygon.forEach((element: any, index: number) => {\r\n              if (index === 0) {\r\n                context.moveTo(element[0], -element[1]);\r\n              } else {\r\n                context.lineTo(element[0], -element[1]);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(roadPolygonShape);\r\n\r\n        // 过滤匝道\r\n        if (state.interType === 3) {\r\n          drawMethods.drawRoundabout();\r\n        }\r\n\r\n        cross.entranceArray.map((info: any, index: number) => {\r\n          // 1、白色划线部分：人行道、车道线、虚线\r\n          const whitePolygonShape = new Konva.Shape({\r\n            stroke: \"#ffffff\",\r\n            fill: \"#ffffff\",\r\n            strokeWidth: 1,\r\n            opacity: 1,\r\n            sceneFunc(context: any, shape: any) {\r\n              context.beginPath();\r\n              // 人行道\r\n              if (state.drawOption.showManRoadLine) {\r\n                info.lineData.manRoadLine.forEach((info: any) => {\r\n                  info.forEach((element: any, index: number) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 车道边线\r\n              if (state.drawOption.showRoadAsideLine) {\r\n                info.lineData.carRoadLine0.forEach((info: any, i: number) => {\r\n                  info.forEach((element: any, index: number) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 车道停车线\r\n              if (state.drawOption.showStopLine) {\r\n                info.lineData.carRoadLine1.forEach((info: any, i: number) => {\r\n                  info.forEach((element: any, index: any) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 虚线\r\n              if (\r\n                state.drawOption.showLaneDashedLine &&\r\n                state.interType !== 2\r\n              ) {\r\n                info.lineData.carRoadLine2.forEach((info: any) => {\r\n                  info.forEach((element: any, index: any) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              context.closePath();\r\n              context.fillStrokeShape(shape);\r\n            },\r\n          });\r\n          baseLayer.add(whitePolygonShape);\r\n\r\n          // 普通路口-父子路口\r\n          if (state.interType !== 2) {\r\n            // 显示道路虚线\r\n            if (state.drawOption.showLaneDashedLine) {\r\n              // 绘制公交专用车道/潮汐车道\r\n              const yellowPolygonShape = new Konva.Shape({\r\n                stroke: state.drawOption.yellowColor,\r\n                fill: state.drawOption.yellowColor,\r\n                strokeWidth: 1,\r\n                opacity: 1,\r\n                sceneFunc(context: any, shape: any) {\r\n                  context.beginPath();\r\n                  info.lineData.carRoadLine4.forEach((info: any) => {\r\n                    info.forEach((element: any, index: any) => {\r\n                      if (index === 0) {\r\n                        context.moveTo(element[0], -element[1]);\r\n                      } else {\r\n                        context.lineTo(element[0], -element[1]);\r\n                      }\r\n                    });\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                },\r\n              });\r\n              baseLayer.add(yellowPolygonShape);\r\n\r\n              // 进口绘制辅道分割线\r\n              const option = {\r\n                stroke: state.drawOption.greenColor,\r\n                strokeWidth: 2,\r\n              };\r\n              drawMethods.drawLine(info.lineData.fdsplitLine, option);\r\n\r\n              // 待驶区\r\n              info.correctPoint.pointWaitArea.forEach((it: any) => {\r\n                const lineData: any = [];\r\n                it.forEach((itt: any) => {\r\n                  lineData.push(itt.x);\r\n                  lineData.push(-itt.y);\r\n                });\r\n                let greenLine = new Konva.Line({\r\n                  points: lineData,\r\n                  stroke: \"#ffffff\",\r\n                  strokeWidth: 1,\r\n                  lineJoin: \"round\",\r\n                  dash: [3, 5],\r\n                  lineCap: \"round\",\r\n                  // tension: 0.5\r\n                });\r\n                baseLayer.add(greenLine);\r\n              });\r\n            }\r\n\r\n            // 绘制人行道\r\n            if (state.drawOption.showManRoad) {\r\n              const manRoadPolygonShape = new Konva.Shape({\r\n                fill: \"black\",\r\n                sceneFunc(context: any, shape: any) {\r\n                  context.beginPath();\r\n                  const data = [\r\n                    info.polygonData.walkwayPolygonR,\r\n                    cross.entranceArray[\r\n                      index === 0 ? cross.entranceArray.length - 1 : index - 1\r\n                    ].polygonData.walkwayPolygonL,\r\n                  ].flat();\r\n                  data.forEach((element, index) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                },\r\n              });\r\n              baseLayer.add(manRoadPolygonShape);\r\n            }\r\n          } else {\r\n            // 匝道\r\n            if (state.drawOption.showLaneDashedLine) {\r\n              info.lineData.carRoadLine2.forEach((info: any) => {\r\n                var dash = new Konva.Line({\r\n                  points: [info[0][0], -info[0][1], info[1][0], -info[1][1]],\r\n                  stroke: \"#ffffff\",\r\n                  strokeWidth: 1,\r\n                  lineJoin: \"round\",\r\n                  dash: [8, 8],\r\n                });\r\n                baseLayer.add(dash);\r\n              });\r\n            }\r\n          }\r\n\r\n          // 车道分割线部分：单黄线/双黄线/绿化带\r\n          if (info.road_center_mode === \"greenArea\") {\r\n            drawMethods.drawPolygon(info.lineData.carRoadLine3[0], {\r\n              fill: state.drawOption.greenColor,\r\n              stroke: state.drawOption.greenColor,\r\n            });\r\n          } else {\r\n            drawMethods.drawLine(info.lineData.carRoadLine3, {\r\n              stroke: state.drawOption.yellowColor,\r\n            });\r\n          }\r\n\r\n          // 4、车道名称\r\n          if (state.drawOption.showRoadName) {\r\n            var roadText = new Konva.Text({\r\n              x: info.correctPoint.roadName.x,\r\n              y: -info.correctPoint.roadName.y,\r\n              text: info.name,\r\n              fontSize: 12,\r\n              fontFamily: \"Calibri\",\r\n              fill: state.drawOption.routeNameColor,\r\n              rotation: drawMethods.getTextRotationByDegree(info.degree),\r\n            });\r\n            drawMethods.offsetText(roadText, info.degree);\r\n            baseLayer.add(roadText);\r\n          }\r\n          // 绘制车道流向\r\n          if (state.drawOption.showLaneFlow) {\r\n            // 车道流向\r\n            const laneFlowPolygonShape = new Konva.Shape({\r\n              stroke: \"white\",\r\n              strokeWidth: 1.5,\r\n              sceneFunc(context: any, shape: any) {\r\n                const data = info.polygonData.laneFlowPolygon;\r\n                data.forEach((it: any, i: any) => {\r\n                  context.beginPath();\r\n                  it.forEach((itt: any, j: any) => {\r\n                    if (j === 0) {\r\n                      context.moveTo(itt[0], -itt[1]);\r\n                    } else {\r\n                      context.lineTo(itt[0], -itt[1]);\r\n                    }\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                });\r\n              },\r\n            });\r\n            baseLayer.add(laneFlowPolygonShape);\r\n          }\r\n        });\r\n        cross.entranceArray.map((info: any, index: any) => {\r\n          // 绘制右转渠化\r\n          if (info.canalization && state.interType !== 2) {\r\n            drawMethods.drawCanalization(info.en_id);\r\n            // 添加非机动车标志\r\n            drawMethods.drawBikeLogo(info);\r\n          }\r\n        });\r\n        baseLayer.draw();\r\n      },\r\n\r\n      // 重置路口数据\r\n      resetInterData(interData: any) {\r\n        // 判断是否有右转渠化\r\n        const newData = JSON.parse(\r\n          JSON.stringify({\r\n            ...interData,\r\n            drawOption: state.drawOption,\r\n            baseWidth: baseLayerWidth,\r\n            clientWidth: clientWidth,\r\n            clientHeight: clientHeight,\r\n            expandManRadian: false,\r\n            centerLineMode: state.drawOption.centerLineMode,\r\n          })\r\n        );\r\n        if (state.interType === 3) {\r\n          newData.expandManRadian = true;\r\n        }\r\n        newData.entrances.forEach((it: any, i: any) => {\r\n          if (it.canalization && it.canalization !== 0) {\r\n            newData.expandManRadian = true;\r\n            // 有单独出口的要添加右出口的出口车道\r\n            if (it.canalization === 2 || it.canalization === 4) {\r\n              const entrance =\r\n                newData.entrances[i > 0 ? i - 1 : newData.entrances.length - 1];\r\n              entrance.exit_lanes.push({\r\n                id: entrance.exit_lanes.length + 1,\r\n                lane_flow: 2,\r\n              });\r\n            }\r\n          }\r\n        });\r\n        return newData;\r\n      },\r\n    };\r\n    //---------------------------------------------drawMixins---------------------------------------------\r\n    const drawMethods = {\r\n      initLayer() {\r\n        realLayer && realLayer.destroy();\r\n        let width, height;\r\n        let x = 0;\r\n        let y = 0;\r\n        width = height = baseLayerWidth;\r\n        if (clientWidth > clientHeight) {\r\n          x = (clientWidth - clientHeight) / 2;\r\n        } else {\r\n          y = -(clientWidth - clientHeight) / 2;\r\n        }\r\n        realLayer = new Konva.Layer({\r\n          x: state.drawOption.drawPhase\r\n            ? x + width / 2 + width / 12\r\n            : x + width / 2,\r\n          y: y + height / 2,\r\n        });\r\n        realLayer.height = height;\r\n        realLayer.width = height;\r\n        modelStage.add(realLayer);\r\n      },\r\n      // 绘制进口流向\r\n      drawRoadFlow(movements: any, cb: any) {\r\n        const sortMovement = this.getSortMovement(movements);\r\n        sortMovement.forEach((it: any) => {\r\n          // 主道流向\r\n          it.flowList.forEach((itt: any, j: any) => {\r\n            if (itt.if_control) {\r\n              const entrance = cross.entranceArray[it.en_id - 1];\r\n              const startPoint = this.getStartPoint(\r\n                itt.movements_type,\r\n                j,\r\n                it,\r\n                \"main\"\r\n              );\r\n              const flowData = getDrawFlowData(\r\n                startPoint,\r\n                CrossConst.roadWidth,\r\n                itt.movements_type,\r\n                entrance\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              this.drawRoadFlowWithData(rotateFlowData, itt, cb);\r\n            }\r\n          });\r\n          // 辅道流向\r\n          it.fdflowList.forEach((itt: any, j: any) => {\r\n            if (itt.if_control) {\r\n              const entrance = cross.entranceArray[it.en_id - 1];\r\n              const startPoint = this.getStartPoint(\r\n                itt.movements_type,\r\n                j,\r\n                it,\r\n                \"fd\"\r\n              );\r\n              const flowData = getDrawFlowData(\r\n                startPoint,\r\n                CrossConst.roadWidth,\r\n                itt.movements_type,\r\n                entrance,\r\n                \"fd\"\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              this.drawRoadFlowWithData(rotateFlowData, itt, cb);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 绘制进口流向\r\n      drawRoadFlowWithData(rotateFlowData: any, itt: any, cb: any) {\r\n        let roadFlowPolygonShape = new Konva.Shape({\r\n          stroke: itt.if_release\r\n            ? state.drawOption.HighLightFlowColor\r\n            : state.drawOption.defaultFlowColor,\r\n          fill: itt.if_release\r\n            ? state.drawOption.HighLightFlowColor\r\n            : state.drawOption.defaultFlowColor,\r\n          strokeWidth: 1,\r\n          info: itt,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((itt: any, j: any) => {\r\n              if (j === 0) {\r\n                context.moveTo(itt.x, -itt.y);\r\n              } else {\r\n                context.lineTo(itt.x, -itt.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        if (cb) {\r\n          roadFlowPolygonShape.on(\"click\", function (e: any) {\r\n            cb(e.target.attrs.info);\r\n          });\r\n        }\r\n        baseLayer.add(roadFlowPolygonShape);\r\n      },\r\n\r\n      // 获取旋转后点位\r\n      getRotateData(flowData: any, angle: any) {\r\n        let rotatePoins: any = [];\r\n        if (Array.isArray(flowData)) {\r\n          rotatePoins = [];\r\n          flowData.forEach((info, index) => {\r\n            if (Array.isArray(info)) {\r\n              rotatePoins[index] = [];\r\n              info.map((it) => {\r\n                rotatePoins[index].push(\r\n                  Util.pointRotateAngel(it, -angle, [0, 0])\r\n                );\r\n              });\r\n            } else {\r\n              rotatePoins.push(Util.pointRotateAngel(info, -angle, [0, 0]));\r\n            }\r\n          });\r\n        } else {\r\n          rotatePoins = Util.pointRotateAngel(flowData, -angle, [0, 0]);\r\n        }\r\n        return rotatePoins;\r\n      },\r\n\r\n      // 获取进口主道数量以及辅道数量\r\n      getEntranceLaneNum(enterInfo: any) {\r\n        let mainIn = enterInfo.in;\r\n        let fdIn = 0;\r\n        const index = enterInfo.motor_lanes.findIndex(\r\n          (it: any) => it.lane_type === 4\r\n        );\r\n        if (index > -1) {\r\n          fdIn = mainIn - index - 1;\r\n          mainIn = index + 1;\r\n        }\r\n        return { mainIn, fdIn };\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-24 17:15:03\r\n       * @introduction 获取绘制路口流向起始点位 左下角点位\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 en_id 进口id  movementsType 流向类型 j第几个流向  laneFlowTotal车道流向数量 ,type:主道'main'辅道'fd'\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getStartPoint(movementsType: any, j: any, it: any, type: any) {\r\n        const { en_id, laneFlowTotal, fdlaneFlowTotal } = it;\r\n        let enterInfo = cross.entranceArray[en_id - 1];\r\n        const { mainIn } = this.getEntranceLaneNum(enterInfo);\r\n        // 绘制的顶点\r\n        const { x: x1, y: y1 } = enterInfo.point.H0[enterInfo.in];\r\n        const { y: y2 } = enterInfo.point.H0[enterInfo.in - 1];\r\n        const roadWidth = CrossConst.roadWidth;\r\n        let laneOffset = y2 - y1;\r\n        let offsetX = 0;\r\n        let offsetY = -2 * roadWidth;\r\n        let startPoint = [0, 0];\r\n        if (\r\n          movementsType === 4 ||\r\n          movementsType === 10 ||\r\n          movementsType === 11\r\n        ) {\r\n          // 人行流向\r\n          offsetX = 0;\r\n          offsetY +=\r\n            CrossConst.manCarInterval +\r\n            CrossConst.manRoadLength / 2 +\r\n            2 * roadWidth;\r\n        } else if (\r\n          movementsType === 12 ||\r\n          movementsType === 13 ||\r\n          movementsType === 14\r\n        ) {\r\n          if (fdlaneFlowTotal) {\r\n            // 存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal + fdlaneFlowTotal) {\r\n              offsetX =\r\n                (laneFlowTotal + fdlaneFlowTotal) * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * (laneFlowTotal + fdlaneFlowTotal) +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            } else {\r\n              offsetX =\r\n                enterInfo.in * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * enterInfo.in +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            }\r\n          } else {\r\n            // 不存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal) {\r\n              offsetX =\r\n                laneFlowTotal * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * laneFlowTotal +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            } else {\r\n              offsetX =\r\n                enterInfo.in * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * enterInfo.in +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            }\r\n          }\r\n        } else {\r\n          if (fdlaneFlowTotal) {\r\n            // 存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal + fdlaneFlowTotal) {\r\n              if (type === \"main\") {\r\n                offsetX += CrossConst.roadWidth * j;\r\n                offsetY += laneOffset * j;\r\n              } else if (type === \"fd\") {\r\n                offsetX += CrossConst.roadWidth * (j + laneFlowTotal);\r\n                offsetY += laneOffset * (j + laneFlowTotal);\r\n              }\r\n            } else {\r\n              // 只有一个流向的话，根据流向确定位置\r\n              if (type === \"main\") {\r\n                if (laneFlowTotal === 1) {\r\n                  // 流向直\r\n                  if (movementsType === 2 || movementsType === 7) {\r\n                    offsetX += (CrossConst.roadWidth * (mainIn - 1)) / 2;\r\n                    offsetY +=\r\n                      laneOffset * ((CrossConst.roadWidth * (mainIn - 1)) / 2);\r\n                  }\r\n                  // 流向带右边\r\n                  if (movementsType === 3 || movementsType === 6) {\r\n                    offsetX += CrossConst.roadWidth * (mainIn - 1);\r\n                    offsetY += laneOffset * (mainIn - 1);\r\n                  }\r\n                }\r\n                if (laneFlowTotal > 1) {\r\n                  offsetX +=\r\n                    ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                      (laneFlowTotal - 1)) *\r\n                    j;\r\n                  offsetY +=\r\n                    ((laneOffset * (enterInfo.in - 1)) / (laneFlowTotal - 1)) *\r\n                    j;\r\n                }\r\n              } else if (type === \"fd\") {\r\n                offsetX +=\r\n                  ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal + fdlaneFlowTotal - 1)) *\r\n                  (j + laneFlowTotal);\r\n                offsetY +=\r\n                  ((laneOffset * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal + fdlaneFlowTotal - 1)) *\r\n                  (j + laneFlowTotal);\r\n              }\r\n            }\r\n          } else {\r\n            // 不存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal) {\r\n              offsetX += CrossConst.roadWidth * j;\r\n              offsetY += laneOffset * j;\r\n            } else {\r\n              // 只有一个流向的话，根据流向确定位置\r\n              if (laneFlowTotal === 1) {\r\n                // 流向直\r\n                if (movementsType === 2 || movementsType === 7) {\r\n                  offsetX += (CrossConst.roadWidth * (enterInfo.in - 1)) / 2;\r\n                  offsetY +=\r\n                    laneOffset *\r\n                    ((CrossConst.roadWidth * (enterInfo.in - 1)) / 2);\r\n                }\r\n                // 流向带右边\r\n                if (movementsType === 3 || movementsType === 6) {\r\n                  offsetX += CrossConst.roadWidth * (enterInfo.in - 1);\r\n                  offsetY += laneOffset * (enterInfo.in - 1);\r\n                }\r\n              }\r\n              if (laneFlowTotal > 1) {\r\n                offsetX +=\r\n                  ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal - 1)) *\r\n                  j;\r\n                offsetY +=\r\n                  ((laneOffset * (enterInfo.in - 1)) / (laneFlowTotal - 1)) * j;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        startPoint = [x1 + offsetX, y1 + offsetY];\r\n        return startPoint;\r\n      },\r\n\r\n      // 流向按照进口-左至右绘制顺序排序 enter_port_direction\r\n      getSortMovement(movements: any) {\r\n        let sortMovement: any = [];\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const enterMove = movements.filter((itt: any) => {\r\n            return itt.enter_port_direction === it.en_id && itt.if_control;\r\n          });\r\n          // 流向带左\r\n          const leftArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 1 ||\r\n                itt.movements_type === 5 ||\r\n                itt.movements_type === 8 ||\r\n                itt.movements_type === 9) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向左边\r\n          const leftFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 1 ||\r\n                itt.movements_type === 5 ||\r\n                itt.movements_type === 8 ||\r\n                itt.movements_type === 9) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向直\r\n          const centerArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 2 || itt.movements_type === 7) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向直\r\n          const centerFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 2 || itt.movements_type === 7) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向带右\r\n          const rightArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 3 || itt.movements_type === 6) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向带右\r\n          const rightFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 3 || itt.movements_type === 6) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向人行\r\n          const manArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 4 ||\r\n                itt.movements_type === 10 ||\r\n                itt.movements_type === 11) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 非机动车左  直  左直\r\n          const nonArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 12 ||\r\n                itt.movements_type === 13 ||\r\n                itt.movements_type === 14) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          sortMovement.push({\r\n            en_id: it.en_id,\r\n            laneFlowTotal:\r\n              leftArray.length + centerArray.length + rightArray.length,\r\n            flowList: [\r\n              ...leftArray,\r\n              ...centerArray,\r\n              ...rightArray,\r\n              ...nonArray,\r\n              ...manArray,\r\n            ],\r\n            fdlaneFlowTotal:\r\n              leftFdArray.length + centerFdArray.length + rightFdArray.length,\r\n            fdflowList: [...leftFdArray, ...centerFdArray, ...rightFdArray],\r\n          });\r\n        });\r\n        return sortMovement;\r\n      },\r\n\r\n      // 绘制流向饱和度\r\n      drawFlowSaturation(flowSaturation: any) {\r\n        flowSaturation.forEach((it: any, i: any) => {\r\n          const enterInfo = cross.entranceArray[it.enter_port_direction - 1];\r\n          const flowData =\r\n            enterInfo.polygonData.roadFlowPolygon[it.movements_type - 1];\r\n          // 绘制饱和度流向\r\n          const roadFlowPolygonShape = new Konva.Shape({\r\n            stroke: state.drawOption.saturationFlowColor,\r\n            fill: state.drawOption.saturationFlowColor,\r\n            strokeWidth: 1,\r\n            info: it,\r\n            sceneFunc(context: any, shape: any) {\r\n              context.beginPath();\r\n              flowData.forEach((itt: any, j: any) => {\r\n                if (j === 0) {\r\n                  context.moveTo(itt[0], -itt[1]);\r\n                } else {\r\n                  context.lineTo(itt[0], -itt[1]);\r\n                }\r\n              });\r\n              context.closePath();\r\n              context.fillStrokeShape(shape);\r\n            },\r\n          });\r\n          baseLayer.add(roadFlowPolygonShape);\r\n\r\n          const { x, y } =\r\n            enterInfo.correctPoint.pointRoadFlowText[it.movements_type - 1];\r\n          // 绘制饱和度\r\n          let saturationText = new Konva.Text({\r\n            x: x,\r\n            y: -y,\r\n            text: it.data,\r\n            fontSize: 12,\r\n            fontFamily: \"Calibri\",\r\n            fill: state.drawOption.saturationFlowColor,\r\n            rotation: this.getTextRotationByDegree(enterInfo.degree),\r\n          });\r\n          this.offsetText(saturationText, enterInfo.degree);\r\n          baseLayer.add(saturationText);\r\n        });\r\n      },\r\n      // 绘制车道或者进出口背景\r\n      fillEntranceOrLaneBack(fillData: any) {\r\n        fillData.forEach((it: any) => {\r\n          const enterInfo = cross.entranceArray[it.en_id - 1];\r\n          const inNum = enterInfo.in;\r\n          const outNum = enterInfo.out;\r\n          let index1 = 0;\r\n          let index2 = 0;\r\n          let polygonData = [];\r\n          // 1进口填充\r\n          if (it.fillType === 1) {\r\n            // 进口方向\r\n            if (it.fillDirection === 1) {\r\n              index1 = 0;\r\n              index2 = inNum;\r\n            } else if (it.fillDirection === 2) {\r\n              // 出口方向\r\n              index1 =\r\n                inNum + this.getOutLineOffset(enterInfo.road_center_mode);\r\n              index2 =\r\n                inNum +\r\n                outNum +\r\n                this.getOutLineOffset(enterInfo.road_center_mode);\r\n            }\r\n          } else if (it.fillType === 2) {\r\n            // 2车道填充\r\n            if (it.fillDirection === 1) {\r\n              index1 = inNum - it.laneNumber + 1;\r\n              index2 = inNum - it.laneNumber;\r\n            } else if (it.fillDirection === 2) {\r\n              // 出口方向\r\n              index1 =\r\n                inNum +\r\n                it.laneNumber +\r\n                this.getOutLineOffset(enterInfo.road_center_mode);\r\n              index2 =\r\n                inNum +\r\n                it.laneNumber +\r\n                this.getOutLineOffset(enterInfo.road_center_mode) -\r\n                1;\r\n            }\r\n          }\r\n          const H0 = enterInfo.point.H0;\r\n          const H2 = enterInfo.point.H2;\r\n          let point1 = Util.pointRotateAngel(H0[index1], -enterInfo.angle);\r\n          let point2 = Util.pointRotateAngel(H0[index2], -enterInfo.angle);\r\n          let point3 = Util.pointRotateAngel(H2[index2], -enterInfo.angle);\r\n          let point4 = Util.pointRotateAngel(H2[index1], -enterInfo.angle);\r\n          if (it.length) {\r\n            point3 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[index2].x,\r\n                y: H0[index2].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n            point4 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[index1].x,\r\n                y: H0[index1].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n          }\r\n          polygonData = [\r\n            [point1.x, point1.y],\r\n            [point2.x, point2.y],\r\n            [point3.x, point3.y],\r\n            [point4.x, point4.y],\r\n          ];\r\n          this.drawPolygon(polygonData, it.style);\r\n        });\r\n      },\r\n\r\n      getOutLineOffset(roadCenterMode: any) {\r\n        let offset = 0;\r\n        if (roadCenterMode && roadCenterMode !== \"singleYellowLine\") {\r\n          offset = 1;\r\n        }\r\n        return offset;\r\n      },\r\n\r\n      // 绘制进口高亮\r\n      drawEntranceHighLight(lightData: any) {\r\n        lightData.forEach((it: any) => {\r\n          const enterInfo = cross.entranceArray[it.en_id - 1];\r\n          const inNum = enterInfo.in;\r\n          let lineDatas = [];\r\n          const H0 = enterInfo.point.H0;\r\n          const H2 = enterInfo.point.H2;\r\n          let point1 = Util.pointRotateAngel(H0[0], -enterInfo.angle);\r\n          let point2 = Util.pointRotateAngel(H0[inNum], -enterInfo.angle);\r\n          let point3 = Util.pointRotateAngel(H2[inNum], -enterInfo.angle);\r\n          let point4 = Util.pointRotateAngel(H2[0], -enterInfo.angle);\r\n          if (it.length) {\r\n            point3 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[inNum].x,\r\n                y: H0[inNum].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n            point4 = Util.pointRotateAngel(\r\n              { x: H0[0].x, y: H0[0].y - CrossConst.roadWidth * it.length },\r\n              -enterInfo.angle\r\n            );\r\n          }\r\n          lineDatas = [\r\n            [\r\n              [point1.x, point1.y],\r\n              [point2.x, point2.y],\r\n            ],\r\n            [\r\n              [point2.x, point2.y],\r\n              [point3.x, point3.y],\r\n            ],\r\n            [\r\n              [point1.x, point1.y],\r\n              [point4.x, point4.y],\r\n            ],\r\n          ];\r\n          this.drawLine(lineDatas, it.style);\r\n        });\r\n      },\r\n\r\n      // 绘制相邻关系\r\n      drawAdjacentInfo(adjacentList: any, cb: any) {\r\n        const me = this;\r\n        const adjacentMap: any = {};\r\n        adjacentList.forEach((it: any) => {\r\n          adjacentMap[it.entrance_id] = it;\r\n        });\r\n        cross.entranceArray.forEach((info: any) => {\r\n          const adjacentInfo = adjacentMap[info.en_id];\r\n          if (adjacentInfo) {\r\n            const point = this.getNearPoint(info);\r\n            let img = new Konva.Image({\r\n              image: nearImg,\r\n              width: CrossConst.roadWidth * 1.5,\r\n              height: CrossConst.roadWidth * 1.5,\r\n              x: point.x,\r\n              y: -point.y,\r\n              info: adjacentInfo,\r\n              rotation: this.getImgRotationByDegree(info.degree, 2),\r\n            });\r\n            this.offsetImg(img, info.degree, 2);\r\n            if (cb) {\r\n              img.on(\"click\", function (e: any) {\r\n                const info = e.target.attrs.info;\r\n                cb(info);\r\n              });\r\n              img.on(\"mouseover\", function (e: any) {\r\n                const { x, y } = e.target.attrs;\r\n                me.drawHoverText(x, y, adjacentInfo.hoverText);\r\n              });\r\n              img.on(\"mouseout\", function (e: any) {\r\n                hoverText.remove();\r\n                hoverBack.remove();\r\n              });\r\n            }\r\n            baseLayer.add(img);\r\n          }\r\n        });\r\n      },\r\n      // 获取绘制相邻路口箭头的点位\r\n      getNearPoint(curEntrance: any) {\r\n        const { degree } = curEntrance;\r\n        const width =\r\n          (state.drawOption.drawPhase\r\n            ? (clientWidth * 5) / 12\r\n            : clientWidth / 2) -\r\n          2 * CrossConst.roadWidth;\r\n        const height = clientHeight / 2 - 2 * CrossConst.roadWidth;\r\n        let x = 0;\r\n        let y = 0;\r\n        if (degree >= 0 && degree < 45) {\r\n          x = width;\r\n          y = -width * Math.tan(Util.toRadian(degree));\r\n        } else if (degree >= 45 && degree < 90) {\r\n          const calDegree = 90 - degree;\r\n          x = height * Math.tan(Util.toRadian(calDegree));\r\n          y = -height;\r\n        } else if (degree >= 90 && degree < 135) {\r\n          const calDegree = degree - 90;\r\n          x = -height * Math.tan(Util.toRadian(calDegree));\r\n          y = -height;\r\n        } else if (degree >= 135 && degree < 180) {\r\n          const calDegree = 180 - degree;\r\n          x = -width;\r\n          y = -width * Math.tan(Util.toRadian(calDegree));\r\n        } else if (degree >= 180 && degree < 225) {\r\n          const calDegree = degree - 180;\r\n          x = -width;\r\n          y = width * Math.tan(Util.toRadian(calDegree));\r\n        } else if (degree >= 225 && degree < 270) {\r\n          const calDegree = 270 - degree;\r\n          x = -height * Math.tan(Util.toRadian(calDegree));\r\n          y = height;\r\n        } else if (degree >= 270 && degree < 315) {\r\n          const calDegree = degree - 270;\r\n          x = height * Math.tan(Util.toRadian(calDegree));\r\n          y = height;\r\n        } else if (degree >= 315 && degree <= 360) {\r\n          const calDegree = 360 - degree;\r\n          x = width;\r\n          y = width * Math.tan(Util.toRadian(calDegree));\r\n        }\r\n        return { x, y };\r\n      },\r\n\r\n      // 绘制非机动车标志\r\n      drawBikeLogo(info: any) {\r\n        const imageList = [\r\n          info.correctPoint.roadPole,\r\n          info.correctPoint.roadPoleL,\r\n        ];\r\n        imageList.forEach((it, i) => {\r\n          const { x, y } = it;\r\n          let img = new Konva.Image({\r\n            image: bikeImg,\r\n            width: 0.5 * CrossConst.roadWidth,\r\n            height: 0.5 * CrossConst.roadWidth,\r\n            x: x,\r\n            y: -y,\r\n            rotation: this.getImgRotationByDegree(info.degree, 2),\r\n          });\r\n          this.offsetImg(img, info.degree, 2);\r\n          baseLayer.add(img);\r\n        });\r\n      },\r\n\r\n      // 绘制车道图标\r\n      drawLaneImg(laneImgs: any, cb: any) {\r\n        this.loadImg(laneImgs, (res: any) => {\r\n          laneImgs.forEach((it: any, i: any) => {\r\n            const enterInfo = cross.entranceArray[it.en_id - 1];\r\n            if (enterInfo) {\r\n              const { x, y } = this.getStopLinePointByLaneNum(it, enterInfo);\r\n              let img = new Konva.Image({\r\n                image: res[i],\r\n                width: 1 * CrossConst.roadWidth,\r\n                height: 1 * CrossConst.roadWidth,\r\n                x: x,\r\n                y: -y,\r\n                info: it,\r\n                rotation: this.getImgRotationByDegree(\r\n                  enterInfo.degree,\r\n                  it.rotateType\r\n                ),\r\n              });\r\n              this.offsetImg(img, enterInfo.degree, it.rotateType);\r\n              if (cb) {\r\n                img.on(\"click\", function (e: any) {\r\n                  const info = e.target.attrs.info;\r\n                  cb(info);\r\n                });\r\n              }\r\n              baseLayer.add(img);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 提前加载图片\r\n      loadImg(imageList: any, cb: any) {\r\n        const loadImgs: any = [];\r\n        imageList.forEach((it: any) => {\r\n          const imgload = new window.Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onload = function () {\r\n              resolve(image);\r\n            };\r\n            image.src = it.imgUrl;\r\n          });\r\n          loadImgs.push(imgload);\r\n        });\r\n        window.Promise.all(loadImgs)\r\n          .then((res) => {\r\n            if (cb) {\r\n              cb(res);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-04 11:05:28\r\n       * @introduction 获取根据车道id获取车道中心跟停车线偏移一定距离的旋转后的点位\r\n       * @description 详细描述\r\n       * @param {参数类型} laneNumber：车道号\r\n       * @param {参数类型} inNumber：进口车道数\r\n       * @param {参数类型} offetStopLine：偏移量 车道宽度的倍数\r\n       * @param {参数类型} H0：停车线跟车道的交点数组\r\n       * @param {参数类型} angle：车道角度\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getStopLinePointByLaneNum(it: any, enterInfo: any) {\r\n        let index = enterInfo.in - it.laneNumber + 1;\r\n        if (it.laneDirection === 2) {\r\n          index =\r\n            enterInfo.in +\r\n            it.laneNumber +\r\n            this.getOutLineOffset(enterInfo.road_center_mode);\r\n        }\r\n        const { x, y } = enterInfo.point.H0[index];\r\n        const orgPoint = {\r\n          x: x + CrossConst.roadWidth / 2,\r\n          y: y - (it.offetStopLine + 0.5) * CrossConst.roadWidth,\r\n        };\r\n        const armPoint = Util.pointRotateAngel(orgPoint, -enterInfo.angle);\r\n        return armPoint;\r\n      },\r\n\r\n      // 获取图片旋转角度\r\n      getImgRotationByDegree(degree: any, rotateType = 1) {\r\n        if (rotateType === 2) {\r\n          return degree - 90;\r\n        }\r\n        let rotation = degree;\r\n        if (degree > 0 && degree <= 90) {\r\n          rotation = degree - 90;\r\n        } else if (degree > 90 && degree <= 180) {\r\n          rotation = degree - 180;\r\n        } else if (degree > 180 && degree <= 270) {\r\n          rotation = degree - 270;\r\n        }\r\n        return rotation;\r\n      },\r\n      // 添加图片偏移量\r\n      offsetImg(element: any, degree: any, rotateType = 1) {\r\n        if (rotateType === 1) {\r\n          if (degree > 0 && degree <= 90) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 90 && degree <= 180) {\r\n            element.offsetX(element.width());\r\n            element.offsetY(element.height() / 2);\r\n          } else if (degree > 180 && degree <= 270) {\r\n            element.offsetX(element.width() / 2);\r\n            element.offsetY(element.height());\r\n          } else {\r\n            element.offsetY(element.height() / 2);\r\n          }\r\n        } else if (rotateType === 2) {\r\n          if (degree >= 0 && degree <= 90) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 90 && degree <= 180) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 180 && degree <= 270) {\r\n            element.offsetX(element.width() / 2);\r\n          } else {\r\n            element.offsetX(element.width() / 2);\r\n          }\r\n        }\r\n      },\r\n\r\n      // 获取文字旋转角度\r\n      getTextRotationByDegree(degree: any) {\r\n        let rotation = degree;\r\n        if (degree > 90 && degree < 270) {\r\n          rotation = degree + 180;\r\n        }\r\n        return rotation;\r\n      },\r\n      // 添加字偏移量\r\n      offsetText(element: any, degree: any) {\r\n        if (degree > 90 && degree < 270) {\r\n          element.offsetX(element.width());\r\n          element.offsetY(element.height() / 2);\r\n        } else {\r\n          element.offsetY(element.height() / 2);\r\n        }\r\n      },\r\n      // 绘制可变车道-获取数据\r\n      drawVariableLane(variableLaneData: any, click = false, cb: any) {\r\n        variableLaneData.forEach((it: any, i: any) => {\r\n          const enterInfo = cross.entranceArray[it.entrance_id - 1];\r\n          if (enterInfo) {\r\n            const flowData = getLaneFlowPoint(\r\n              it.lane_id,\r\n              it.status,\r\n              CrossConst,\r\n              enterInfo,\r\n              null\r\n            );\r\n            const rotateFlowData = this.getRotateData(\r\n              flowData,\r\n              enterInfo.angle\r\n            );\r\n            this.drawVariableFlow(rotateFlowData);\r\n            if (click) {\r\n              const clickPoint = getLaneFlowPoint(\r\n                it.lane_id,\r\n                \"variableClick\",\r\n                CrossConst,\r\n                enterInfo,\r\n                null\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                clickPoint,\r\n                enterInfo.angle\r\n              );\r\n              this.drawVariableClickPoint(rotateFlowData[0], it, cb);\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 绘制可变车道 - 绘制\r\n      drawVariableFlow(rotateFlowData: any) {\r\n        // 车道流向\r\n        const laneFlowPolygonShape = new Konva.Shape({\r\n          stroke: state.drawOption.yellowColor,\r\n          strokeWidth: 2,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((it: any, i: any) => {\r\n              if (i === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(laneFlowPolygonShape);\r\n      },\r\n      // 绘制可变车道可以点击的点\r\n      drawVariableClickPoint(point: any, info: any, cb: any) {\r\n        let clickPoint = new Konva.Circle({\r\n          x: point.x,\r\n          y: -point.y,\r\n          radius: CrossConst.roadWidth / 4,\r\n          info: info,\r\n          fill: state.drawOption.yellowColor,\r\n        });\r\n        baseLayer.add(clickPoint);\r\n        if (cb) {\r\n          clickPoint.on(\"click\", function (e: any) {\r\n            const info = e.target.attrs.info;\r\n            cb(info);\r\n          });\r\n        }\r\n      },\r\n      // 绘制右转渠化 en_id 进口车道id 根据渠化类型，展示不通渠化\r\n      drawCanalization(en_id: any) {\r\n        let index = en_id - 1;\r\n        const len = cross.entranceArray.length;\r\n        const curEntrance = cross.entranceArray[index];\r\n        const rightEntrance =\r\n          cross.entranceArray[index > 0 ? index - 1 : len - 1];\r\n        let topPoint = curEntrance.point.AR;\r\n        if (curEntrance.canalization === 1 || curEntrance.canalization === 2) {\r\n          let bottomPoint = {\r\n            x: curEntrance.point.BRO.x,\r\n            y:\r\n              curEntrance.point.BRO.y +\r\n              CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              CrossConst.roadWidth,\r\n          };\r\n          let rightPoint = {\r\n            x: rightEntrance.point.BLO.x,\r\n            y:\r\n              rightEntrance.point.BLO.y +\r\n              CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              CrossConst.roadWidth,\r\n          };\r\n          if (curEntrance.canalization === 2) {\r\n            topPoint.y = topPoint.y + CrossConst.roadWidth;\r\n            rightPoint.x = rightPoint.x + CrossConst.roadWidth;\r\n            rightPoint.y = rightPoint.y - CrossConst.roadWidth;\r\n          }\r\n          const { x: x, y: y } = Util.pointRotateAngel(\r\n            topPoint,\r\n            -curEntrance.angle\r\n          );\r\n          const { x: x1, y: y1 } = Util.pointRotateAngel(\r\n            bottomPoint,\r\n            -curEntrance.angle\r\n          );\r\n          const { x: x3, y: y3 } = Util.pointRotateAngel(\r\n            rightPoint,\r\n            -rightEntrance.angle\r\n          );\r\n          let canalizationPoints = [[x, y]];\r\n          const circlePoint = Util.getArcPoint([x1, y1], [x3, y3]);\r\n          canalizationPoints = canalizationPoints.concat(circlePoint);\r\n          canalizationPoints.push([x, y]);\r\n\r\n          const quhuaArea = [];\r\n          quhuaArea.push(canalizationPoints);\r\n          const lineNum = 4;\r\n          const stepX3 = Math.floor(x3 - x) / lineNum;\r\n          const stepY3 = Math.floor(y3 - y) / lineNum;\r\n          const stepX1 = Math.floor(x1 - x) / lineNum;\r\n          const stepY1 = Math.floor(y1 - y) / lineNum;\r\n          for (let i = 1; i <= lineNum / 2; i++) {\r\n            const rowLine = [\r\n              [x + i * stepX3, y + i * stepY3],\r\n              [x + i * stepX1, y + i * stepY1],\r\n            ];\r\n            quhuaArea.push(rowLine);\r\n          }\r\n          this.drawLine(quhuaArea);\r\n        } else if (\r\n          curEntrance.canalization === 3 ||\r\n          curEntrance.canalization === 4\r\n        ) {\r\n          let offsetDistanceY = [\r\n            CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              1.5 * CrossConst.roadWidth,\r\n            CrossConst.manCarInterval,\r\n            -1 * CrossConst.roadWidth,\r\n            -3 * CrossConst.roadWidth,\r\n            -3 * CrossConst.roadWidth,\r\n          ];\r\n          let offsetDistanceX = [0, 0, 0, 0, CrossConst.walkwayWidth];\r\n          const { x: cx, y: cy } = curEntrance.point.BR;\r\n          const colPoints = offsetDistanceY.map((it, i) => {\r\n            const itX = offsetDistanceX[i];\r\n            const { x: x, y: y } = Util.pointRotateAngel(\r\n              { x: cx - 1 + itX, y: cy + it },\r\n              -curEntrance.angle\r\n            );\r\n            return [x, y];\r\n          });\r\n\r\n          let { x: rx, y: ry } = rightEntrance.point.BL;\r\n          // 固体岛有专门出口\r\n          if (curEntrance.canalization === 4) {\r\n            rx += CrossConst.roadWidth;\r\n            offsetDistanceY = [\r\n              CrossConst.manCarInterval +\r\n                CrossConst.manRoadLength +\r\n                0.5 * CrossConst.roadWidth,\r\n              CrossConst.manCarInterval,\r\n              -1 * CrossConst.roadWidth,\r\n              -1 * CrossConst.roadWidth,\r\n              -1 * CrossConst.roadWidth,\r\n            ];\r\n            offsetDistanceX = [\r\n              0,\r\n              0,\r\n              0,\r\n              CrossConst.roadWidth,\r\n              CrossConst.roadWidth + CrossConst.walkwayWidth,\r\n            ];\r\n          }\r\n          const rowPoints = offsetDistanceY.map((it, i) => {\r\n            const itX = offsetDistanceX[i];\r\n            const { x: x, y: y } = Util.pointRotateAngel(\r\n              { x: rx + 1 - itX, y: ry + it },\r\n              -rightEntrance.angle\r\n            );\r\n            return [x, y];\r\n          });\r\n          this.getGtdPolygonData(rowPoints, colPoints);\r\n          this.getGtdLineData(rowPoints, colPoints);\r\n        }\r\n      },\r\n      // 获取绘制固体岛的数据\r\n      getGtdLineData(rowPoints: any, colPoints: any) {\r\n        const quhuaArea = [];\r\n        let rangeArea: any = [];\r\n        const circlePoint0 = Util.getArcPoint(colPoints[0], rowPoints[0]);\r\n        const circlePoint1 = Util.getArcPoint(colPoints[2], rowPoints[2]);\r\n        rangeArea = rangeArea.concat(circlePoint1);\r\n        for (let i = circlePoint0.length - 1; i > 0; i--) {\r\n          rangeArea.push(circlePoint0[i]);\r\n        }\r\n        rangeArea = rangeArea.concat(circlePoint1);\r\n        quhuaArea.push(rangeArea);\r\n        const circlePoint2 = Util.getArcPoint(colPoints[3], rowPoints[3]);\r\n        quhuaArea.push(circlePoint2);\r\n        // 绘制渠化白色线条\r\n        this.drawLine(quhuaArea);\r\n      },\r\n      // 获取绘制固体岛区域的数据\r\n      getGtdPolygonData(rowPoints: any, colPoints: any) {\r\n        const circlePoint0 = Util.getArcPoint(colPoints[0], rowPoints[0]);\r\n        const circlePoint1 = Util.getArcPoint(colPoints[2], rowPoints[2]);\r\n        const circlePoint2 = Util.getArcPoint(colPoints[3], rowPoints[3]);\r\n        const circlePoint3 = Util.getArcPoint(colPoints[4], rowPoints[4]);\r\n        // 固体岛绿色区域\r\n        let gtdGreenPolygon = [];\r\n        for (let i = circlePoint0.length - 1; i > 0; i--) {\r\n          gtdGreenPolygon.push(circlePoint0[i]);\r\n        }\r\n        gtdGreenPolygon = gtdGreenPolygon.concat(circlePoint1);\r\n        this.drawPolygon(gtdGreenPolygon, { fill: \"green\" });\r\n\r\n        // 固体岛红色区域\r\n        // const gtdRedPolygon = []\r\n        // 固体岛道路区域\r\n        let gtdRoadPolygon = [];\r\n        for (let i = circlePoint1.length - 1; i > 0; i--) {\r\n          gtdRoadPolygon.push(circlePoint1[i]);\r\n        }\r\n        gtdRoadPolygon = gtdRoadPolygon.concat(circlePoint2);\r\n        this.drawPolygon(gtdRoadPolygon, { fill: \"#23324b\" });\r\n        // 固体岛非机动车区域\r\n        let gtdNonMotorPolygon = [];\r\n        for (let i = circlePoint3.length - 1; i > 0; i--) {\r\n          gtdNonMotorPolygon.push(circlePoint3[i]);\r\n        }\r\n        gtdNonMotorPolygon = gtdNonMotorPolygon.concat(circlePoint2);\r\n        this.drawPolygon(gtdNonMotorPolygon, { fill: \"#000000\" });\r\n      },\r\n      // 绘制线条 color = '#fff'\r\n      drawLine(lineDatas: any, option = {}) {\r\n        const param = {\r\n          stroke: \"green\",\r\n          strokeWidth: 1,\r\n          ...option,\r\n        };\r\n        lineDatas.forEach((it: any) => {\r\n          const points: any = [];\r\n          it.forEach((itt: any) => {\r\n            points.push(itt[0]);\r\n            points.push(-itt[1]);\r\n          });\r\n          const line = new Konva.Line({\r\n            points: points,\r\n            ...param,\r\n          });\r\n          baseLayer.add(line);\r\n        });\r\n      },\r\n      // 绘制区域\r\n      drawPolygon(polygonData: any, option: any) {\r\n        if (!polygonData) {\r\n          return;\r\n        }\r\n        const param = {\r\n          fill: \"#fff\",\r\n          strokeWidth: 1,\r\n          // stroke: '#fff',\r\n          ...option,\r\n        };\r\n        const polygonShape = new Konva.Shape({\r\n          // stroke: borderColor ? borderColor : '',\r\n          strokeWidth: 1,\r\n          // opacity: 1,\r\n          ...param,\r\n          // a Konva.Canvas renderer is passed into the sceneFunc function\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            polygonData.forEach((element: any, index: any) => {\r\n              if (index === 0) {\r\n                context.moveTo(element[0], -element[1]);\r\n              } else {\r\n                context.lineTo(element[0], -element[1]);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(polygonShape);\r\n      },\r\n\r\n      // 绘制hovertext\r\n      drawHoverText(x: any, y: any, text: any) {\r\n        hoverText = new Konva.Text({\r\n          x: x,\r\n          y: y,\r\n          text: text,\r\n          fontSize: 12,\r\n          fontFamily: \"Calibri\",\r\n          fill: \"#fff\",\r\n        });\r\n        let width = hoverText.width();\r\n        hoverBack = new Konva.Rect({\r\n          x: x,\r\n          y: y,\r\n          width: width + 10,\r\n          height: 20,\r\n          fill: \"#3b4859\",\r\n          shadowBlur: 10,\r\n          cornerRadius: 10,\r\n        });\r\n        if (x > 0) {\r\n          hoverText.offsetX(width);\r\n          hoverBack.offsetX(width + 5);\r\n        } else {\r\n          hoverBack.offsetX(5);\r\n        }\r\n        hoverBack.offsetY(4);\r\n        baseLayer.add(hoverBack);\r\n        baseLayer.add(hoverText);\r\n      },\r\n\r\n      // 绘制环岛\r\n      drawRoundabout() {\r\n        const { roadWidth, manRoadLength, manCarInterval } = CrossConst;\r\n        // 环岛半径\r\n        let circlrRadia = 5 * roadWidth;\r\n        // 进口环岛障碍物\r\n        cross.entranceArray.forEach((it: any) => {\r\n          let polygonData = [];\r\n          const { H0 } = it.point;\r\n          let { x, y } = H0[it.in];\r\n          y = y + manRoadLength + manCarInterval + 4;\r\n          const offsetY = Math.max((-y - 2 * roadWidth) / 3, 0);\r\n          circlrRadia = Math.min(circlrRadia, offsetY * 2);\r\n          const { x: x1, y: y1 } = Util.pointRotateAngel(\r\n            { x: x - roadWidth / 2, y: y + offsetY },\r\n            -it.angle\r\n          );\r\n          const { x: x2, y: y2 } = Util.pointRotateAngel({ x, y }, -it.angle);\r\n          const { x: x3, y: y3 } = Util.pointRotateAngel(\r\n            { x: x + roadWidth / 2, y: y + offsetY },\r\n            -it.angle\r\n          );\r\n          const circlePoint = Util.getArcPoint([x3, y3], [x1, y1]);\r\n          polygonData.push([x2, y2]);\r\n          polygonData = polygonData.concat(circlePoint);\r\n          this.drawPolygon(polygonData, { fill: \"#2e8348\", opacity: 0.8 });\r\n        });\r\n        // 环岛中心岛\r\n        let circle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: Math.max(circlrRadia, roadWidth),\r\n          fill: \"#2e8348\",\r\n        });\r\n        baseLayer.add(circle);\r\n\r\n        let dashCircle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: Math.max(circlrRadia, roadWidth) + roadWidth,\r\n          stroke: \"#fff\",\r\n          opacity: 0.5,\r\n          strokeWidth: 1,\r\n          dash: [6, 6],\r\n        });\r\n        baseLayer.add(dashCircle);\r\n      },\r\n    };\r\n    //---------------------------------------------drawRealMixins---------------------------------------------//\r\n    const drawRealMethods = {\r\n      // 绘制实时信息\r\n      drawRealInfo(realInfo: any, movements: any) {\r\n        drawMethods.initLayer();\r\n        // 设置实时信息基础信息\r\n        this.setRealBaseInfo(realInfo);\r\n        // 绘制左边相位\r\n        this.drawPhases(realInfo, movements);\r\n        // 绘制倒计时\r\n        this.drawPhaseRemainTime(realInfo.current_phase_remaining_time);\r\n        // 绘制行人灯\r\n        cross.is_have_son !== 2 && this.drawWalkMan(realInfo, movements);\r\n        // 绘制路口模型中间流向\r\n        this.drawInterPhase(realInfo, movements);\r\n        // 绘制红绿灯\r\n        this.drawGreenRedLight(realInfo, movements);\r\n      },\r\n      setRealBaseInfo(realInfo: any) {\r\n        const { ctrl_way } = realInfo;\r\n        ctrlWay = ctrl_way;\r\n      },\r\n      // 绘制左边相位\r\n      drawPhases(realInfo: any, movements: any) {\r\n        // 创建相位图层\r\n        phaseStage && phaseStage.destroy();\r\n        phaseLayer && phaseLayer.destroy();\r\n\r\n        phaseWidth = baseLayerWidth / 6;\r\n        phaseStage = new Konva.Stage({\r\n          container: scTfPhaseBox.value,\r\n          width: phaseWidth,\r\n          height: Math.max(clientHeight, phaseWidth * realInfo.phase_num),\r\n        });\r\n        phaseLayer = new Konva.Layer({\r\n          x: 0,\r\n          y: 0,\r\n        });\r\n        phaseLayer.width = phaseWidth;\r\n        phaseLayer.height = Math.max(\r\n          clientHeight,\r\n          phaseWidth * realInfo.phase_num\r\n        );\r\n        phaseStage.add(phaseLayer);\r\n        let phaseBack = new Konva.Rect({\r\n          x: 0,\r\n          y: 0,\r\n          width: phaseWidth,\r\n          height: Math.max(clientHeight, phaseWidth * realInfo.phase_num),\r\n          fill: state.drawOption.phaseBackColor,\r\n        });\r\n        phaseLayer.add(phaseBack);\r\n        // 如果关灯，就不要绘制具体相位了\r\n        if (realInfo.ctrl_way === 7) {\r\n          return;\r\n        }\r\n        realInfo.phase_movements_info.forEach((it: any, i: any) => {\r\n          if (it) {\r\n            const phaseNum = i + 1;\r\n            // 主道流向\r\n            const phaseList = this.getEntrancePhaseList(it, movements, \"main\");\r\n            // 辅道流向\r\n            const fdPhaseList = this.getEntrancePhaseList(it, movements, \"fd\");\r\n            this.darwPhaseWithPhaseList(realInfo, phaseList, phaseNum, \"main\");\r\n            this.darwPhaseWithPhaseList(realInfo, fdPhaseList, phaseNum, \"fd\");\r\n          }\r\n        });\r\n        this.slideToCurPhase(realInfo.current_phase_num);\r\n      },\r\n\r\n      // 绘制具体相位\r\n      darwPhaseWithPhaseList(\r\n        realInfo: any,\r\n        phaseList: any,\r\n        phaseNum: any,\r\n        road_type: any\r\n      ) {\r\n        const phasePolygonShap: any = [];\r\n        phaseList.forEach((it: any, i: any) => {\r\n          const enterFlowPoint: any = [];\r\n          if (cross.is_have_son !== 2 || i === 2) {\r\n            it.forEach((itt: any, j: any) => {\r\n              const phasePoints = getRealPhasePoint(\r\n                phaseNum,\r\n                itt,\r\n                phaseWidth,\r\n                road_type\r\n              );\r\n              enterFlowPoint.push(phasePoints);\r\n            });\r\n          }\r\n          const rotatePoints = this.rotatePoint(phaseNum, i, enterFlowPoint);\r\n          phasePolygonShap.push(rotatePoints);\r\n        });\r\n        this.drawPhaseBox(\r\n          phaseWidth,\r\n          phaseNum,\r\n          phasePolygonShap,\r\n          realInfo.current_phase_num\r\n        );\r\n      },\r\n\r\n      // 滚动到当前相位\r\n      slideToCurPhase(currentPhaseNum: any) {\r\n        scTfPhaseBox.value.scrollTop = phaseWidth * (currentPhaseNum - 1);\r\n      },\r\n      // 绘制每一个相位\r\n      drawPhaseBox(\r\n        phaseWidth: any,\r\n        phaseNum: any,\r\n        realPhasePolygonShap: any,\r\n        currentPhase: any\r\n      ) {\r\n        // 绘制相位框\r\n        let phase = new Konva.Rect({\r\n          x: 2,\r\n          y: (phaseNum - 1) * phaseWidth + 2,\r\n          width: phaseWidth - 4,\r\n          height: phaseWidth - 4,\r\n          // fill: '#000',\r\n          stroke: currentPhase === phaseNum ? \"#ff0000\" : \"#446a86\",\r\n          strokeWidth: 2,\r\n        });\r\n        phaseLayer.add(phase);\r\n\r\n        // 绘制相位编号 A B C\r\n        let phaseCode = new Konva.Text({\r\n          x: 2 + 2,\r\n          y: phaseNum * phaseWidth - 18,\r\n          text: phaseMap.get(phaseNum),\r\n          fontSize: 16,\r\n          fontFamily: \"Calibri\",\r\n          fill: state.drawOption.phaseNumColor,\r\n        });\r\n        phaseLayer.add(phaseCode);\r\n\r\n        // 绘制每个相位流向\r\n        realPhasePolygonShap.forEach((it: any) => {\r\n          it.forEach((itt: any) => {\r\n            let phaseFlowPolygonShape = new Konva.Shape({\r\n              stroke: state.drawOption.greenColor,\r\n              fill: state.drawOption.greenColor,\r\n              strokeWidth: 1,\r\n              sceneFunc(context: any, shape: any) {\r\n                context.beginPath();\r\n                itt.forEach((ittt: any, j: any) => {\r\n                  if (j === 0) {\r\n                    context.moveTo(ittt.x, -ittt.y);\r\n                  } else {\r\n                    context.lineTo(ittt.x, -ittt.y);\r\n                  }\r\n                });\r\n                context.closePath();\r\n                context.fillStrokeShape(shape);\r\n              },\r\n            });\r\n            phaseLayer.add(phaseFlowPolygonShape);\r\n          });\r\n        });\r\n      },\r\n      // 根据10进制的相位信息,以及流向配置/获取相位信息\r\n      getEntrancePhaseList(\r\n        DecMovements: any,\r\n        movementParas: any,\r\n        road_type: any\r\n      ) {\r\n        let moveList = DecMovements.toString(2).split(\"\");\r\n        moveList.reverse();\r\n        const movenents = this.getPhaseListWithBin(\r\n          moveList,\r\n          movementParas,\r\n          \"phase\",\r\n          road_type\r\n        );\r\n        return movenents;\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2022-03-03 16:25:52\r\n       * @introduction 根据二进制的相位信息,以及流向配置/获取相位信息\r\n       * @param {参数类型} 参数 参数说明\r\n       * @param {参数类型} type:'inter' 路口中央的流向1红/2黄/3绿  'phase'方案的流向1放行/2取消 flowType:main fd 主流向还是辅道流向\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getPhaseListWithBin(\r\n        moveList: any,\r\n        movementParas: any,\r\n        type = \"inter\",\r\n        road_type = \"main\"\r\n      ) {\r\n        const movenents: any = [];\r\n        let movementMap: any = {};\r\n        movementParas.forEach((it: any) => {\r\n          movementMap[it.num_movements] = it;\r\n        });\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const list: any = [];\r\n          moveList.forEach((itt: any, j: any) => {\r\n            const flow = movementMap[j + 1];\r\n            let bool = false;\r\n            if (road_type === \"fd\") {\r\n              if (flow && flow.fd_flow) {\r\n                bool = true;\r\n              }\r\n            } else {\r\n              if (flow && !flow.fd_flow) {\r\n                bool = true;\r\n              }\r\n            }\r\n            if (\r\n              flow &&\r\n              flow.enter_port_direction === it.en_id &&\r\n              flow.if_control &&\r\n              bool\r\n            ) {\r\n              if (type === \"phase\") {\r\n                if (Number(itt)) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              } else if (type === \"run\") {\r\n                // if (Number(itt)) {\r\n                list.push(flow.movements_type);\r\n                // }\r\n              } else {\r\n                if (Number(itt) !== 1 && Number(itt) !== 0) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              }\r\n            }\r\n          });\r\n          const phaseMovemenes = this.getPhaseMovementType(list);\r\n          movenents.push(phaseMovemenes);\r\n        });\r\n        return movenents;\r\n        // return [[1, 2], [1, 2, 3, 4], [1, 2], [1, 2, 3, 4]]\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2022-03-03 17:23:22\r\n       * @introduction 简述\r\n       * @description  获取绿灯相位信息列表\r\n       * @param {参数类型} type 0灰/1红/2黄/3绿  road_type 主道辅道\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getTypePhaseListWithBin(\r\n        moveList: any,\r\n        movementParas: any,\r\n        type = 1,\r\n        road_type: any\r\n      ) {\r\n        const movenents: any = [];\r\n        let movementMap: any = {};\r\n        movementParas.forEach((it: any) => {\r\n          movementMap[it.num_movements] = it;\r\n        });\r\n        const fdFlow = road_type !== \"main\";\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const list: any = [];\r\n          moveList.forEach((itt: any, j: any) => {\r\n            const flow = movementMap[j + 1];\r\n            if (flow) {\r\n              flow.fd_flow = !!flow.fd_flow;\r\n              if (\r\n                flow.enter_port_direction === it.en_id &&\r\n                flow.if_control &&\r\n                flow.fd_flow === fdFlow\r\n              ) {\r\n                if (Number(itt) === type) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              }\r\n            }\r\n          });\r\n          const phaseMovemenes = this.getPhaseMovementType(list);\r\n          movenents.push(phaseMovemenes);\r\n        });\r\n        return movenents;\r\n        // return [[1, 2], [1, 2, 3, 4], [1, 2], [1, 2, 3, 4]]\r\n      },\r\n\r\n      // 路口流向转换成相位流向\r\n      getPhaseMovementType(phaseMovemenes: any) {\r\n        const movemenes: any = [];\r\n        // 相位上展示的基础流向\r\n        const baseFlowType = [1, 2, 3, 4, 8, 10, 11, 12, 13];\r\n        phaseMovemenes.forEach((it: any) => {\r\n          if (baseFlowType.includes(it)) {\r\n            movemenes.push(it);\r\n          } else if (it === 5) {\r\n            movemenes.push(1);\r\n            movemenes.push(2);\r\n          } else if (it === 6) {\r\n            movemenes.push(2);\r\n            movemenes.push(3);\r\n          } else if (it === 7) {\r\n            movemenes.push(1);\r\n            movemenes.push(2);\r\n            movemenes.push(3);\r\n          } else if (it === 9) {\r\n            movemenes.push(1);\r\n            movemenes.push(8);\r\n          } else if (it === 14) {\r\n            movemenes.push(12);\r\n            movemenes.push(13);\r\n          }\r\n        });\r\n        /* eslint-disable */\r\n        return Array.from(new Set(movemenes));\r\n      },\r\n      // 实时相位信息旋转 i 0 / 1 /2  进口序号\r\n      rotatePoint(phaseNum: any, i: any, phasePoints: any) {\r\n        const enterInfo = cross.entranceArray[i];\r\n        const phaseCenterPoint = [\r\n          phaseWidth / 2 + 2,\r\n          -phaseWidth * (phaseNum - 0.5) - 2,\r\n        ];\r\n        let rotatePoins: any = [];\r\n        if (Array.isArray(phasePoints)) {\r\n          rotatePoins = [];\r\n          phasePoints.forEach((info, index) => {\r\n            if (Array.isArray(info)) {\r\n              rotatePoins[index] = [];\r\n              info.map((it) => {\r\n                rotatePoins[index].push(\r\n                  Util.pointRotateByPoint(\r\n                    it,\r\n                    -enterInfo.angle,\r\n                    phaseCenterPoint\r\n                  )\r\n                );\r\n              });\r\n            } else {\r\n              rotatePoins.push(\r\n                Util.pointRotateByPoint(\r\n                  info,\r\n                  -enterInfo.angle,\r\n                  phaseCenterPoint\r\n                )\r\n              );\r\n            }\r\n          });\r\n        } else {\r\n          rotatePoins = Util.pointRotateByPoint(\r\n            phasePoints,\r\n            -enterInfo.angle,\r\n            phaseCenterPoint\r\n          );\r\n        }\r\n        return rotatePoins;\r\n      },\r\n      // 绘制路口模型上当前流向 current_phase_num\r\n      drawInterPhase(realInfo: any, movements: any) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          \"main\"\r\n        );\r\n        const fdPhaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          \"fd\"\r\n        );\r\n        this.drawInterPhaseWithPhaseList(\r\n          realInfo,\r\n          movements,\r\n          phaseList,\r\n          \"main\"\r\n        );\r\n        this.drawInterPhaseWithPhaseList(\r\n          realInfo,\r\n          movements,\r\n          fdPhaseList,\r\n          \"fd\"\r\n        );\r\n      },\r\n      drawInterPhaseWithPhaseList(\r\n        realInfo: any,\r\n        movements: any,\r\n        phaseList: any,\r\n        road_type: any\r\n      ) {\r\n        phaseList.forEach((it: any, i: any) => {\r\n          it.forEach((itt: any, j: any) => {\r\n            const entrance = cross.entranceArray[i];\r\n            // 匝道并且不是第三个进口就不绘制\r\n            if (cross.is_have_son !== 2 || entrance.en_id === 3) {\r\n              const flowData = getInterPhaseflowData(itt, entrance, road_type);\r\n              const rotateFlowData = drawMethods.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              const color = this.getInterPhaseFlowColor(\r\n                realInfo.movements_state,\r\n                movements,\r\n                i,\r\n                itt,\r\n                road_type\r\n              );\r\n              this.drawInterPhaseFlow(rotateFlowData, color);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 获取绘制路口中流向的颜色\r\n      getInterPhaseFlowColor(\r\n        movements_state: any,\r\n        movementParas: any,\r\n        index: any,\r\n        flowType: any,\r\n        road_type: any\r\n      ) {\r\n        let color = state.drawOption.yellowColor;\r\n        // 当前进口\r\n        const curEntrance = cross.entranceArray[index];\r\n        const fdFlow = road_type !== \"main\";\r\n        let greenFlowList: any = [];\r\n        movementParas.forEach((it: any) => {\r\n          if (it.if_control) {\r\n            if (\r\n              it.enter_port_direction === curEntrance.en_id &&\r\n              it.fd_flow === fdFlow\r\n            ) {\r\n              if (movements_state[it.num_movements - 1] === 3) {\r\n                greenFlowList.push(it.movements_type);\r\n              }\r\n            }\r\n          }\r\n        });\r\n        const greenPhaseMovemenes = this.getPhaseMovementType(greenFlowList);\r\n        if (greenPhaseMovemenes.includes(flowType)) {\r\n          color = state.drawOption.greenColor;\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 绘制路口上的相位的单个流向\r\n      drawInterPhaseFlow(rotateFlowData: any, color: any) {\r\n        let interPhaseFlowPolygonShape = new Konva.Shape({\r\n          stroke: color,\r\n          fill: color,\r\n          strokeWidth: 1,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((it: any, i: any) => {\r\n              if (i === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        // this.baseLayer.add(interPhaseFlowPolygonShape)\r\n        realLayer.add(interPhaseFlowPolygonShape);\r\n      },\r\n      // 绘制相位倒计时\r\n      drawPhaseRemainTime(time: any) {\r\n        let remainTime = new Konva.Text({\r\n          x: 0,\r\n          y: 0,\r\n          text: time,\r\n          fontSize: 14,\r\n          fontFamily: \"Calibri\",\r\n          fill: \"#ffffff\",\r\n          cornerRadius: 10,\r\n        });\r\n        remainTime.offsetX(remainTime.width() / 2);\r\n        remainTime.offsetY(remainTime.height() / 2);\r\n        let circle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: (CrossConst.roadWidth * 2) / 3,\r\n          fill: \"#3a3b45\",\r\n        });\r\n        realLayer.add(circle);\r\n        realLayer.add(remainTime);\r\n      },\r\n      // 绘制人行灯\r\n      drawWalkMan(realInfo: any, movements: any) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"run\",\r\n          \"main\"\r\n        );\r\n        const greyPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          0,\r\n          null\r\n        );\r\n        const redPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          1,\r\n          null\r\n        );\r\n        const yellowPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          2,\r\n          null\r\n        );\r\n        const greenPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          3,\r\n          null\r\n        );\r\n        phaseList.forEach((it: any, i: any) => {\r\n          const greyPhases = greyPhaseList[i];\r\n          const redPhases = redPhaseList[i];\r\n          const yellowPhases = yellowPhaseList[i];\r\n          const greenPhases = greenPhaseList[i];\r\n          let runColor = this.getRuncolor(\r\n            \"run\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          let run1Color = this.getRuncolor(\r\n            \"run1\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          let run2Color = this.getRuncolor(\r\n            \"run2\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          const entrance = cross.entranceArray[i];\r\n          const manPoint = this.getEntranceManPoint(entrance);\r\n          // 人行数据 绿灯\r\n          if (it.includes(4)) {\r\n            this.drawFootLight(manPoint[0], \"green\", entrance.angle, runColor);\r\n            this.drawFootLight(manPoint[3], \"green\", entrance.angle, runColor);\r\n          } else {\r\n            if (it.includes(10) || it.includes(11)) {\r\n              if (it.includes(10)) {\r\n                // 人行1\r\n                this.drawFootLight(\r\n                  manPoint[0],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run1Color\r\n                );\r\n                this.drawFootLight(\r\n                  manPoint[1],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run1Color\r\n                );\r\n              }\r\n              if (it.includes(11)) {\r\n                this.drawFootLight(\r\n                  manPoint[2],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run2Color\r\n                );\r\n                this.drawFootLight(\r\n                  manPoint[3],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run2Color\r\n                );\r\n              }\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 获取每个车道的人行等绘制位置\r\n      getEntranceManPoint(entrance: any) {\r\n        // 车道相对高度差\r\n        const laneOffsetHeight =\r\n          (entrance.point.H0[0].y - entrance.point.H0[1].y) / 2;\r\n        const offsetY =\r\n          CrossConst.manCarInterval +\r\n          CrossConst.manRoadLength / 2 +\r\n          laneOffsetHeight;\r\n        const offsetX = CrossConst.roadWidth / 2;\r\n        const manPoint: any = [];\r\n        const outOfsset = drawMethods.getOutLineOffset(\r\n          entrance.road_center_mode\r\n        );\r\n        const pointIndex = [\r\n          1,\r\n          entrance.in,\r\n          entrance.in + 1 + outOfsset,\r\n          entrance.in + entrance.out + outOfsset,\r\n        ];\r\n        pointIndex.forEach((it) => {\r\n          manPoint.push([\r\n            entrance.point.H0[it].x + offsetX,\r\n            entrance.point.H0[it].y + offsetY,\r\n          ]);\r\n        });\r\n        return manPoint;\r\n      },\r\n      // 绘制绿灯通行/红灯禁止通行\r\n      drawFootLight(point: any, type: any, angle: any, color: any) {\r\n        const centerPoint = Util.pointRotateAngel(\r\n          { x: point[0], y: point[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        let circle = new Konva.Circle({\r\n          x: centerPoint.x,\r\n          y: -centerPoint.y,\r\n          radius: (CrossConst.roadWidth * 2) / 5,\r\n          fill: \"#000\",\r\n        });\r\n        realLayer.add(circle);\r\n        const manData = getFootLightData(centerPoint, type);\r\n\r\n        let interPhaseFlowPolygonShape = new Konva.Shape({\r\n          stroke: color,\r\n          fill: color,\r\n          strokeWidth: 0.2,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            manData.forEach((it: any, k: any) => {\r\n              if (k === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        realLayer.add(interPhaseFlowPolygonShape);\r\n      },\r\n      // 绘制红绿灯\r\n      drawGreenRedLight(realInfo: any, movements: any) {\r\n        // 主道红绿灯\r\n        this.drawGreenRedLightWithType(realInfo, movements, \"main\");\r\n        // 绘制辅道红绿灯\r\n        this.drawGreenRedLightWithType(realInfo, movements, \"fd\");\r\n      },\r\n      // 绘制红绿灯\r\n      drawGreenRedLightWithType(\r\n        realInfo: any,\r\n        movements: any,\r\n        road_type = \"main\"\r\n      ) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          road_type\r\n        );\r\n        const greyPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          0,\r\n          road_type\r\n        );\r\n        const redPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          1,\r\n          road_type\r\n        );\r\n        const yellowPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          2,\r\n          road_type\r\n        );\r\n        const greenPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          3,\r\n          road_type\r\n        );\r\n        phaseList.forEach((it: any, i: any) => {\r\n          if (it.length || road_type === \"main\") {\r\n            const greyPhases = greyPhaseList[i];\r\n            const redPhases = redPhaseList[i];\r\n            const yellowPhases = yellowPhaseList[i];\r\n            const greenPhases = greenPhaseList[i];\r\n            // 获取绘制红绿灯位置的点\r\n            const { points, angle } = this.getEntranceLightPoint(i, road_type);\r\n            const xAngle = this.getxAngle(points, angle);\r\n            // 绘制红绿灯背景\r\n            this.drawLightHandler(\r\n              points[1],\r\n              \"back\",\r\n              angle,\r\n              null,\r\n              xAngle,\r\n              road_type\r\n            );\r\n            let leftColor = this.getLightcolor(\r\n              \"left\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            let centerColor = this.getLightcolor(\r\n              \"center\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            let rightColor = this.getLightcolor(\r\n              \"right\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            // 绘制红绿灯左转\r\n            this.drawLightHandler(points[0], \"left\", angle, leftColor, xAngle);\r\n            // 绘制红绿灯直行\r\n            this.drawLightHandler(points[1], \"center\", angle, centerColor);\r\n            // 绘制红绿灯右转\r\n            this.drawLightHandler(\r\n              points[2],\r\n              \"right\",\r\n              angle,\r\n              rightColor,\r\n              xAngle\r\n            );\r\n          }\r\n        });\r\n      },\r\n\r\n      // 获取红绿灯颜色\r\n      getLightcolor(\r\n        type: any,\r\n        greyPhases: any,\r\n        redPhases: any,\r\n        yellowPhases: any,\r\n        greenPhases: any\r\n      ) {\r\n        const phaseMap = [\r\n          { phase: greyPhases, color: state.drawOption.greyColor },\r\n          { phase: redPhases, color: state.drawOption.redColor },\r\n          { phase: yellowPhases, color: state.drawOption.yellowColor },\r\n          { phase: greenPhases, color: state.drawOption.greenColor },\r\n        ];\r\n        let color = state.drawOption.greyColor;\r\n        if (type === \"left\") {\r\n          // const flowMap = [1, 5, 7, 8, 9]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(1) ||\r\n              it.phase.includes(5) ||\r\n              it.phase.includes(7) ||\r\n              it.phase.includes(8) ||\r\n              it.phase.includes(9)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"center\") {\r\n          // const flowMap = [2, 5, 6, 7]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(2) ||\r\n              it.phase.includes(5) ||\r\n              it.phase.includes(6) ||\r\n              it.phase.includes(7)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"right\") {\r\n          // const flowMap = [3, 6, 7]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(3) ||\r\n              it.phase.includes(6) ||\r\n              it.phase.includes(7)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 获取人行速度\r\n      getRuncolor(\r\n        type: any,\r\n        greyPhases: any,\r\n        redPhases: any,\r\n        yellowPhases: any,\r\n        greenPhases: any\r\n      ) {\r\n        const phaseMap = [\r\n          { phase: greenPhases, color: state.drawOption.greenColor },\r\n          { phase: yellowPhases, color: state.drawOption.yellowColor },\r\n          { phase: redPhases, color: state.drawOption.redColor },\r\n          { phase: greyPhases, color: state.drawOption.greyColor },\r\n        ];\r\n        let color = state.drawOption.greenColor;\r\n        if (type === \"run\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(4)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"run1\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(10)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"run2\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(11)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 获取绘制红绿灯的绘制位置\r\n      getEntranceLightPoint(i: any, road_type = \"main\") {\r\n        const enNum = cross.entranceArray.length;\r\n        let points = [];\r\n        let angle = [];\r\n\r\n        if (enNum === 2) {\r\n          // 一字路口\r\n          // 获取到对面的进口\r\n          const drawEntrance = cross.entranceArray[(i + 1) % 2];\r\n          const pointInfo = this.calculateEntranceLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        } else if (enNum === 3) {\r\n          // T型路口\r\n          const entrance = cross.entranceArray[i];\r\n          const leftIndex = (i + 4) % 3;\r\n          const rightIndex = i - 1 >= 0 ? i - 1 : 2;\r\n          if ((entrance.degreeLeft + 360 - entrance.degree) % 360 >= 180) {\r\n            const drawEntrance = cross.entranceArray[leftIndex];\r\n            const pointInfo = this.calculateEntranceLightPoint(\r\n              drawEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle;\r\n          } else if (\r\n            (entrance.degree + 360 - entrance.degreeRight) % 360 >=\r\n            180\r\n          ) {\r\n            const drawEntrance = cross.entranceArray[rightIndex];\r\n            const pointInfo = this.calculateEntranceLightPoint(\r\n              drawEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle;\r\n          } else {\r\n            // 画路口对面\r\n            const drawEntrance = cross.entranceArray[i];\r\n            const prevEntrance = cross.entranceArray[rightIndex];\r\n            const nextEntrance = cross.entranceArray[leftIndex];\r\n            const pointInfo = this.calculateEntranceFaceLightPoint(\r\n              drawEntrance,\r\n              prevEntrance,\r\n              nextEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle + 180;\r\n          }\r\n        } else if (enNum === 4) {\r\n          // 十字路口\r\n          // 获取到对面的进口\r\n          const drawEntrance = cross.entranceArray[(i + 2) % 4];\r\n          const pointInfo = this.calculateEntranceLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        } else {\r\n          // 五岔路口 以及以上\r\n          const drawEntrance = cross.entranceArray[i];\r\n          const pointInfo = this.calculateCircleLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        }\r\n        return { points, angle };\r\n      },\r\n      // 计算绘制在进口的点位\r\n      calculateEntranceLightPoint(drawEntrance: any, road_type: any) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const inNum = drawEntrance.in;\r\n        const outNum = drawEntrance.out;\r\n        const margin = 1;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const laneOffsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) / 2;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const centerPoint = [\r\n          drawEntrance.point.H0[inNum].x - (CrossConst.roadWidth * outNum) / 2,\r\n          drawEntrance.point.H0[inNum].y -\r\n            laneOffsetHeight * outNum -\r\n            radius -\r\n            margin -\r\n            fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle;\r\n        return { points, angle };\r\n      },\r\n      // 计算三岔路口对面红绿灯的点位\r\n      calculateEntranceFaceLightPoint(\r\n        drawEntrance: any,\r\n        prevEntrance: any,\r\n        nextEntrance: any,\r\n        road_type: any\r\n      ) {\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const inNum = drawEntrance.in;\r\n        const margin = 1;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const centerPoint = [\r\n          drawEntrance.point.H0[0].x - (CrossConst.roadWidth * inNum) / 2,\r\n          ((nextEntrance.out + prevEntrance.in) / 2) * CrossConst.roadWidth +\r\n            radius * 2 +\r\n            margin +\r\n            fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle + 180;\r\n        return { points, angle };\r\n      },\r\n      // 计算五岔路口 以及以上红绿灯的点位\r\n      calculateCircleLightPoint(drawEntrance: any, road_type: any) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const margin = 1;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const centerPoint = [\r\n          // drawEntrance.point.H0[0].x - CrossConst.roadWidth * inNum / 2,\r\n          0 - CrossConst.roadWidth,\r\n          CrossConst.roadWidth * 2.8 - fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle + 180;\r\n        return { points, angle };\r\n      },\r\n\r\n      // 获取绘制红绿灯\r\n      drawLightHandler(\r\n        point: any,\r\n        drawType: any,\r\n        angle: any,\r\n        color: any,\r\n        xAngle = 0,\r\n        road_type = \"main\"\r\n      ) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        const centerPoint = Util.pointRotateAngel(\r\n          { x: point[0], y: point[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        // 绘制红绿灯背景\r\n        if (drawType === \"back\") {\r\n          let lightBack = new Konva.Rect({\r\n            x: centerPoint.x,\r\n            y: -centerPoint.y,\r\n            width: radius * 6 + 8,\r\n            height: radius * 2 + 2,\r\n            fill: road_type === \"main\" ? \"#fff\" : \"#999\",\r\n            rotation: xAngle,\r\n            cornerRadius: radius,\r\n          });\r\n          lightBack.offsetX(lightBack.width() / 2);\r\n          lightBack.offsetY(lightBack.height() / 2);\r\n          realLayer.add(lightBack);\r\n        } else {\r\n          // 红绿灯黑底\r\n          let circle = new Konva.Circle({\r\n            x: centerPoint.x,\r\n            y: -centerPoint.y,\r\n            radius: CrossConst.roadWidth / 3,\r\n            fill: \"#000\",\r\n          });\r\n          realLayer.add(circle);\r\n          if (drawType === \"center\") {\r\n            let centerCircle = new Konva.Circle({\r\n              x: centerPoint.x,\r\n              y: -centerPoint.y,\r\n              radius: CrossConst.roadWidth / 3,\r\n              fill: color,\r\n            });\r\n            realLayer.add(centerCircle);\r\n          } else {\r\n            const lightData = getDirectionLightData(\r\n              { x: point[0], y: point[1] },\r\n              drawType\r\n            );\r\n            const rotateLightData = drawMethods.getRotateData(lightData, angle);\r\n            let lightPolygonShape = new Konva.Shape({\r\n              stroke: color,\r\n              fill: color,\r\n              strokeWidth: 0.2,\r\n              sceneFunc(context: any, shape: any) {\r\n                context.beginPath();\r\n                rotateLightData.forEach((it: any, k: any) => {\r\n                  if (k === 0) {\r\n                    context.moveTo(it.x, -it.y);\r\n                  } else {\r\n                    context.lineTo(it.x, -it.y);\r\n                  }\r\n                });\r\n                context.closePath();\r\n                context.fillStrokeShape(shape);\r\n              },\r\n            });\r\n            realLayer.add(lightPolygonShape);\r\n          }\r\n        }\r\n      },\r\n      // 获取红绿灯偏移角度\r\n      getxAngle(points: any, angle: any) {\r\n        const [point1, point2] = points;\r\n        const P1 = Util.pointRotateAngel(\r\n          { x: point1[0], y: point1[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        const P2 = Util.pointRotateAngel(\r\n          { x: point2[0], y: point2[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        // 因为点位y跟直角坐标系是相反的，所以P1.y - P2.y\r\n        const degree = Math.atan2(P1.y - P2.y, P2.x - P1.x);\r\n        return degree * (180 / Math.PI);\r\n      },\r\n      // 红绿灯点位旋转车道倾斜角度\r\n      getRotateLightData2(rotateLightData: any, xAngle: any, centerPoint: any) {\r\n        const rotateLightData2: any = [];\r\n        rotateLightData.forEach((it: any) => {\r\n          const point = Util.pointRotateByPoint(it, xAngle, [\r\n            centerPoint.x,\r\n            centerPoint.y,\r\n          ]);\r\n          rotateLightData2.push(point);\r\n        });\r\n        return rotateLightData2;\r\n      },\r\n    };\r\n    //---------------------------------------------imageLoadMixins---------------------------------------------//\r\n    const imageLoadMethods = {\r\n      initImg() {\r\n        // 相邻路口图片\r\n        nearImg = new Image();\r\n        nearImg.src = adjacentIcon;\r\n\r\n        // 非机动车道自行车图片\r\n        const bikeImg = new Image();\r\n        bikeImg.src = bikeIcon;\r\n      },\r\n    };\r\n    imageLoadMethods.initImg();\r\n    return {\r\n      ...toRefs(state),\r\n      tfInterModel,\r\n      scTfInterBox,\r\n      scTfPhaseBox,\r\n      ...methods,\r\n      ...drawMethods,\r\n      ...drawRealMethods,\r\n      ...imageLoadMethods,\r\n    };\r\n  },\r\n});\r\n</script>\r\n \r\n<style scoped lang=\"scss\">\r\n.sc-tf-inter-model {\r\n  width: 100%;\r\n  height: 100%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n  .sc-tf-inter-box {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    z-index: 1;\r\n    width: 100%;\r\n    height: 100%;\r\n  }\r\n  .overflow-box {\r\n    position: absolute;\r\n    left: 0;\r\n    top: 0;\r\n    overflow: hidden;\r\n    width: auto;\r\n    height: 100%;\r\n    z-index: 2;\r\n  }\r\n  .sc-tf-phase-box {\r\n    // position: absolute;\r\n    // left: 0;\r\n    // top: 0;\r\n    // z-index: 2;\r\n    width: calc(100% + 20px);\r\n    // background-color: #fff;\r\n    height: 100%;\r\n    overflow: auto;\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n}\r\n</style>","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles.js\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableRest from \"./nonIterableRest.js\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import defineProperty from \"./defineProperty.js\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { Konva } from './Global.js';\nexport class Transform {\n    constructor(m = [1, 0, 0, 1, 0, 0]) {\n        this.dirty = false;\n        this.m = (m && m.slice()) || [1, 0, 0, 1, 0, 0];\n    }\n    reset() {\n        this.m[0] = 1;\n        this.m[1] = 0;\n        this.m[2] = 0;\n        this.m[3] = 1;\n        this.m[4] = 0;\n        this.m[5] = 0;\n    }\n    copy() {\n        return new Transform(this.m);\n    }\n    copyInto(tr) {\n        tr.m[0] = this.m[0];\n        tr.m[1] = this.m[1];\n        tr.m[2] = this.m[2];\n        tr.m[3] = this.m[3];\n        tr.m[4] = this.m[4];\n        tr.m[5] = this.m[5];\n    }\n    point(point) {\n        var m = this.m;\n        return {\n            x: m[0] * point.x + m[2] * point.y + m[4],\n            y: m[1] * point.x + m[3] * point.y + m[5],\n        };\n    }\n    translate(x, y) {\n        this.m[4] += this.m[0] * x + this.m[2] * y;\n        this.m[5] += this.m[1] * x + this.m[3] * y;\n        return this;\n    }\n    scale(sx, sy) {\n        this.m[0] *= sx;\n        this.m[1] *= sx;\n        this.m[2] *= sy;\n        this.m[3] *= sy;\n        return this;\n    }\n    rotate(rad) {\n        var c = Math.cos(rad);\n        var s = Math.sin(rad);\n        var m11 = this.m[0] * c + this.m[2] * s;\n        var m12 = this.m[1] * c + this.m[3] * s;\n        var m21 = this.m[0] * -s + this.m[2] * c;\n        var m22 = this.m[1] * -s + this.m[3] * c;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    getTranslation() {\n        return {\n            x: this.m[4],\n            y: this.m[5],\n        };\n    }\n    skew(sx, sy) {\n        var m11 = this.m[0] + this.m[2] * sy;\n        var m12 = this.m[1] + this.m[3] * sy;\n        var m21 = this.m[2] + this.m[0] * sx;\n        var m22 = this.m[3] + this.m[1] * sx;\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        return this;\n    }\n    multiply(matrix) {\n        var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n        var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n        var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n        var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n        var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n        var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n        this.m[0] = m11;\n        this.m[1] = m12;\n        this.m[2] = m21;\n        this.m[3] = m22;\n        this.m[4] = dx;\n        this.m[5] = dy;\n        return this;\n    }\n    invert() {\n        var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n        var m0 = this.m[3] * d;\n        var m1 = -this.m[1] * d;\n        var m2 = -this.m[2] * d;\n        var m3 = this.m[0] * d;\n        var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n        var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n        this.m[0] = m0;\n        this.m[1] = m1;\n        this.m[2] = m2;\n        this.m[3] = m3;\n        this.m[4] = m4;\n        this.m[5] = m5;\n        return this;\n    }\n    getMatrix() {\n        return this.m;\n    }\n    decompose() {\n        var a = this.m[0];\n        var b = this.m[1];\n        var c = this.m[2];\n        var d = this.m[3];\n        var e = this.m[4];\n        var f = this.m[5];\n        var delta = a * d - b * c;\n        let result = {\n            x: e,\n            y: f,\n            rotation: 0,\n            scaleX: 0,\n            scaleY: 0,\n            skewX: 0,\n            skewY: 0,\n        };\n        if (a != 0 || b != 0) {\n            var r = Math.sqrt(a * a + b * b);\n            result.rotation = b > 0 ? Math.acos(a / r) : -Math.acos(a / r);\n            result.scaleX = r;\n            result.scaleY = delta / r;\n            result.skewX = (a * c + b * d) / delta;\n            result.skewY = 0;\n        }\n        else if (c != 0 || d != 0) {\n            var s = Math.sqrt(c * c + d * d);\n            result.rotation =\n                Math.PI / 2 - (d > 0 ? Math.acos(-c / s) : -Math.acos(c / s));\n            result.scaleX = delta / s;\n            result.scaleY = s;\n            result.skewX = 0;\n            result.skewY = (a * c + b * d) / delta;\n        }\n        else {\n        }\n        result.rotation = Util._getRotation(result.rotation);\n        return result;\n    }\n}\nvar OBJECT_ARRAY = '[object Array]', OBJECT_NUMBER = '[object Number]', OBJECT_STRING = '[object String]', OBJECT_BOOLEAN = '[object Boolean]', PI_OVER_DEG180 = Math.PI / 180, DEG180_OVER_PI = 180 / Math.PI, HASH = '#', EMPTY_STRING = '', ZERO = '0', KONVA_WARNING = 'Konva warning: ', KONVA_ERROR = 'Konva error: ', RGB_PAREN = 'rgb(', COLORS = {\n    aliceblue: [240, 248, 255],\n    antiquewhite: [250, 235, 215],\n    aqua: [0, 255, 255],\n    aquamarine: [127, 255, 212],\n    azure: [240, 255, 255],\n    beige: [245, 245, 220],\n    bisque: [255, 228, 196],\n    black: [0, 0, 0],\n    blanchedalmond: [255, 235, 205],\n    blue: [0, 0, 255],\n    blueviolet: [138, 43, 226],\n    brown: [165, 42, 42],\n    burlywood: [222, 184, 135],\n    cadetblue: [95, 158, 160],\n    chartreuse: [127, 255, 0],\n    chocolate: [210, 105, 30],\n    coral: [255, 127, 80],\n    cornflowerblue: [100, 149, 237],\n    cornsilk: [255, 248, 220],\n    crimson: [220, 20, 60],\n    cyan: [0, 255, 255],\n    darkblue: [0, 0, 139],\n    darkcyan: [0, 139, 139],\n    darkgoldenrod: [184, 132, 11],\n    darkgray: [169, 169, 169],\n    darkgreen: [0, 100, 0],\n    darkgrey: [169, 169, 169],\n    darkkhaki: [189, 183, 107],\n    darkmagenta: [139, 0, 139],\n    darkolivegreen: [85, 107, 47],\n    darkorange: [255, 140, 0],\n    darkorchid: [153, 50, 204],\n    darkred: [139, 0, 0],\n    darksalmon: [233, 150, 122],\n    darkseagreen: [143, 188, 143],\n    darkslateblue: [72, 61, 139],\n    darkslategray: [47, 79, 79],\n    darkslategrey: [47, 79, 79],\n    darkturquoise: [0, 206, 209],\n    darkviolet: [148, 0, 211],\n    deeppink: [255, 20, 147],\n    deepskyblue: [0, 191, 255],\n    dimgray: [105, 105, 105],\n    dimgrey: [105, 105, 105],\n    dodgerblue: [30, 144, 255],\n    firebrick: [178, 34, 34],\n    floralwhite: [255, 255, 240],\n    forestgreen: [34, 139, 34],\n    fuchsia: [255, 0, 255],\n    gainsboro: [220, 220, 220],\n    ghostwhite: [248, 248, 255],\n    gold: [255, 215, 0],\n    goldenrod: [218, 165, 32],\n    gray: [128, 128, 128],\n    green: [0, 128, 0],\n    greenyellow: [173, 255, 47],\n    grey: [128, 128, 128],\n    honeydew: [240, 255, 240],\n    hotpink: [255, 105, 180],\n    indianred: [205, 92, 92],\n    indigo: [75, 0, 130],\n    ivory: [255, 255, 240],\n    khaki: [240, 230, 140],\n    lavender: [230, 230, 250],\n    lavenderblush: [255, 240, 245],\n    lawngreen: [124, 252, 0],\n    lemonchiffon: [255, 250, 205],\n    lightblue: [173, 216, 230],\n    lightcoral: [240, 128, 128],\n    lightcyan: [224, 255, 255],\n    lightgoldenrodyellow: [250, 250, 210],\n    lightgray: [211, 211, 211],\n    lightgreen: [144, 238, 144],\n    lightgrey: [211, 211, 211],\n    lightpink: [255, 182, 193],\n    lightsalmon: [255, 160, 122],\n    lightseagreen: [32, 178, 170],\n    lightskyblue: [135, 206, 250],\n    lightslategray: [119, 136, 153],\n    lightslategrey: [119, 136, 153],\n    lightsteelblue: [176, 196, 222],\n    lightyellow: [255, 255, 224],\n    lime: [0, 255, 0],\n    limegreen: [50, 205, 50],\n    linen: [250, 240, 230],\n    magenta: [255, 0, 255],\n    maroon: [128, 0, 0],\n    mediumaquamarine: [102, 205, 170],\n    mediumblue: [0, 0, 205],\n    mediumorchid: [186, 85, 211],\n    mediumpurple: [147, 112, 219],\n    mediumseagreen: [60, 179, 113],\n    mediumslateblue: [123, 104, 238],\n    mediumspringgreen: [0, 250, 154],\n    mediumturquoise: [72, 209, 204],\n    mediumvioletred: [199, 21, 133],\n    midnightblue: [25, 25, 112],\n    mintcream: [245, 255, 250],\n    mistyrose: [255, 228, 225],\n    moccasin: [255, 228, 181],\n    navajowhite: [255, 222, 173],\n    navy: [0, 0, 128],\n    oldlace: [253, 245, 230],\n    olive: [128, 128, 0],\n    olivedrab: [107, 142, 35],\n    orange: [255, 165, 0],\n    orangered: [255, 69, 0],\n    orchid: [218, 112, 214],\n    palegoldenrod: [238, 232, 170],\n    palegreen: [152, 251, 152],\n    paleturquoise: [175, 238, 238],\n    palevioletred: [219, 112, 147],\n    papayawhip: [255, 239, 213],\n    peachpuff: [255, 218, 185],\n    peru: [205, 133, 63],\n    pink: [255, 192, 203],\n    plum: [221, 160, 203],\n    powderblue: [176, 224, 230],\n    purple: [128, 0, 128],\n    rebeccapurple: [102, 51, 153],\n    red: [255, 0, 0],\n    rosybrown: [188, 143, 143],\n    royalblue: [65, 105, 225],\n    saddlebrown: [139, 69, 19],\n    salmon: [250, 128, 114],\n    sandybrown: [244, 164, 96],\n    seagreen: [46, 139, 87],\n    seashell: [255, 245, 238],\n    sienna: [160, 82, 45],\n    silver: [192, 192, 192],\n    skyblue: [135, 206, 235],\n    slateblue: [106, 90, 205],\n    slategray: [119, 128, 144],\n    slategrey: [119, 128, 144],\n    snow: [255, 255, 250],\n    springgreen: [0, 255, 127],\n    steelblue: [70, 130, 180],\n    tan: [210, 180, 140],\n    teal: [0, 128, 128],\n    thistle: [216, 191, 216],\n    transparent: [255, 255, 255, 0],\n    tomato: [255, 99, 71],\n    turquoise: [64, 224, 208],\n    violet: [238, 130, 238],\n    wheat: [245, 222, 179],\n    white: [255, 255, 255],\n    whitesmoke: [245, 245, 245],\n    yellow: [255, 255, 0],\n    yellowgreen: [154, 205, 5],\n}, RGB_REGEX = /rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)/, animQueue = [];\nconst req = (typeof requestAnimationFrame !== 'undefined' && requestAnimationFrame) ||\n    function (f) {\n        setTimeout(f, 60);\n    };\nexport const Util = {\n    _isElement(obj) {\n        return !!(obj && obj.nodeType == 1);\n    },\n    _isFunction(obj) {\n        return !!(obj && obj.constructor && obj.call && obj.apply);\n    },\n    _isPlainObject(obj) {\n        return !!obj && obj.constructor === Object;\n    },\n    _isArray(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_ARRAY;\n    },\n    _isNumber(obj) {\n        return (Object.prototype.toString.call(obj) === OBJECT_NUMBER &&\n            !isNaN(obj) &&\n            isFinite(obj));\n    },\n    _isString(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_STRING;\n    },\n    _isBoolean(obj) {\n        return Object.prototype.toString.call(obj) === OBJECT_BOOLEAN;\n    },\n    isObject(val) {\n        return val instanceof Object;\n    },\n    isValidSelector(selector) {\n        if (typeof selector !== 'string') {\n            return false;\n        }\n        var firstChar = selector[0];\n        return (firstChar === '#' ||\n            firstChar === '.' ||\n            firstChar === firstChar.toUpperCase());\n    },\n    _sign(number) {\n        if (number === 0) {\n            return 1;\n        }\n        if (number > 0) {\n            return 1;\n        }\n        else {\n            return -1;\n        }\n    },\n    requestAnimFrame(callback) {\n        animQueue.push(callback);\n        if (animQueue.length === 1) {\n            req(function () {\n                const queue = animQueue;\n                animQueue = [];\n                queue.forEach(function (cb) {\n                    cb();\n                });\n            });\n        }\n    },\n    createCanvasElement() {\n        var canvas = document.createElement('canvas');\n        try {\n            canvas.style = canvas.style || {};\n        }\n        catch (e) { }\n        return canvas;\n    },\n    createImageElement() {\n        return document.createElement('img');\n    },\n    _isInDocument(el) {\n        while ((el = el.parentNode)) {\n            if (el == document) {\n                return true;\n            }\n        }\n        return false;\n    },\n    _urlToImage(url, callback) {\n        var imageObj = Util.createImageElement();\n        imageObj.onload = function () {\n            callback(imageObj);\n        };\n        imageObj.src = url;\n    },\n    _rgbToHex(r, g, b) {\n        return ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n    },\n    _hexToRgb(hex) {\n        hex = hex.replace(HASH, EMPTY_STRING);\n        var bigint = parseInt(hex, 16);\n        return {\n            r: (bigint >> 16) & 255,\n            g: (bigint >> 8) & 255,\n            b: bigint & 255,\n        };\n    },\n    getRandomColor() {\n        var randColor = ((Math.random() * 0xffffff) << 0).toString(16);\n        while (randColor.length < 6) {\n            randColor = ZERO + randColor;\n        }\n        return HASH + randColor;\n    },\n    getRGB(color) {\n        var rgb;\n        if (color in COLORS) {\n            rgb = COLORS[color];\n            return {\n                r: rgb[0],\n                g: rgb[1],\n                b: rgb[2],\n            };\n        }\n        else if (color[0] === HASH) {\n            return this._hexToRgb(color.substring(1));\n        }\n        else if (color.substr(0, 4) === RGB_PAREN) {\n            rgb = RGB_REGEX.exec(color.replace(/ /g, ''));\n            return {\n                r: parseInt(rgb[1], 10),\n                g: parseInt(rgb[2], 10),\n                b: parseInt(rgb[3], 10),\n            };\n        }\n        else {\n            return {\n                r: 0,\n                g: 0,\n                b: 0,\n            };\n        }\n    },\n    colorToRGBA(str) {\n        str = str || 'black';\n        return (Util._namedColorToRBA(str) ||\n            Util._hex3ColorToRGBA(str) ||\n            Util._hex6ColorToRGBA(str) ||\n            Util._rgbColorToRGBA(str) ||\n            Util._rgbaColorToRGBA(str) ||\n            Util._hslColorToRGBA(str));\n    },\n    _namedColorToRBA(str) {\n        var c = COLORS[str.toLowerCase()];\n        if (!c) {\n            return null;\n        }\n        return {\n            r: c[0],\n            g: c[1],\n            b: c[2],\n            a: 1,\n        };\n    },\n    _rgbColorToRGBA(str) {\n        if (str.indexOf('rgb(') === 0) {\n            str = str.match(/rgb\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map(Number);\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: 1,\n            };\n        }\n    },\n    _rgbaColorToRGBA(str) {\n        if (str.indexOf('rgba(') === 0) {\n            str = str.match(/rgba\\(([^)]+)\\)/)[1];\n            var parts = str.split(/ *, */).map((n, index) => {\n                if (n.slice(-1) === '%') {\n                    return index === 3 ? parseInt(n) / 100 : (parseInt(n) / 100) * 255;\n                }\n                return Number(n);\n            });\n            return {\n                r: parts[0],\n                g: parts[1],\n                b: parts[2],\n                a: parts[3],\n            };\n        }\n    },\n    _hex6ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 7) {\n            return {\n                r: parseInt(str.slice(1, 3), 16),\n                g: parseInt(str.slice(3, 5), 16),\n                b: parseInt(str.slice(5, 7), 16),\n                a: 1,\n            };\n        }\n    },\n    _hex3ColorToRGBA(str) {\n        if (str[0] === '#' && str.length === 4) {\n            return {\n                r: parseInt(str[1] + str[1], 16),\n                g: parseInt(str[2] + str[2], 16),\n                b: parseInt(str[3] + str[3], 16),\n                a: 1,\n            };\n        }\n    },\n    _hslColorToRGBA(str) {\n        if (/hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.test(str)) {\n            const [_, ...hsl] = /hsl\\((\\d+),\\s*([\\d.]+)%,\\s*([\\d.]+)%\\)/g.exec(str);\n            const h = Number(hsl[0]) / 360;\n            const s = Number(hsl[1]) / 100;\n            const l = Number(hsl[2]) / 100;\n            let t2;\n            let t3;\n            let val;\n            if (s === 0) {\n                val = l * 255;\n                return {\n                    r: Math.round(val),\n                    g: Math.round(val),\n                    b: Math.round(val),\n                    a: 1,\n                };\n            }\n            if (l < 0.5) {\n                t2 = l * (1 + s);\n            }\n            else {\n                t2 = l + s - l * s;\n            }\n            const t1 = 2 * l - t2;\n            const rgb = [0, 0, 0];\n            for (let i = 0; i < 3; i++) {\n                t3 = h + (1 / 3) * -(i - 1);\n                if (t3 < 0) {\n                    t3++;\n                }\n                if (t3 > 1) {\n                    t3--;\n                }\n                if (6 * t3 < 1) {\n                    val = t1 + (t2 - t1) * 6 * t3;\n                }\n                else if (2 * t3 < 1) {\n                    val = t2;\n                }\n                else if (3 * t3 < 2) {\n                    val = t1 + (t2 - t1) * (2 / 3 - t3) * 6;\n                }\n                else {\n                    val = t1;\n                }\n                rgb[i] = val * 255;\n            }\n            return {\n                r: Math.round(rgb[0]),\n                g: Math.round(rgb[1]),\n                b: Math.round(rgb[2]),\n                a: 1,\n            };\n        }\n    },\n    haveIntersection(r1, r2) {\n        return !(r2.x > r1.x + r1.width ||\n            r2.x + r2.width < r1.x ||\n            r2.y > r1.y + r1.height ||\n            r2.y + r2.height < r1.y);\n    },\n    cloneObject(obj) {\n        var retObj = {};\n        for (var key in obj) {\n            if (this._isPlainObject(obj[key])) {\n                retObj[key] = this.cloneObject(obj[key]);\n            }\n            else if (this._isArray(obj[key])) {\n                retObj[key] = this.cloneArray(obj[key]);\n            }\n            else {\n                retObj[key] = obj[key];\n            }\n        }\n        return retObj;\n    },\n    cloneArray(arr) {\n        return arr.slice(0);\n    },\n    degToRad(deg) {\n        return deg * PI_OVER_DEG180;\n    },\n    radToDeg(rad) {\n        return rad * DEG180_OVER_PI;\n    },\n    _degToRad(deg) {\n        Util.warn('Util._degToRad is removed. Please use public Util.degToRad instead.');\n        return Util.degToRad(deg);\n    },\n    _radToDeg(rad) {\n        Util.warn('Util._radToDeg is removed. Please use public Util.radToDeg instead.');\n        return Util.radToDeg(rad);\n    },\n    _getRotation(radians) {\n        return Konva.angleDeg ? Util.radToDeg(radians) : radians;\n    },\n    _capitalize(str) {\n        return str.charAt(0).toUpperCase() + str.slice(1);\n    },\n    throw(str) {\n        throw new Error(KONVA_ERROR + str);\n    },\n    error(str) {\n        console.error(KONVA_ERROR + str);\n    },\n    warn(str) {\n        if (!Konva.showWarnings) {\n            return;\n        }\n        console.warn(KONVA_WARNING + str);\n    },\n    each(obj, func) {\n        for (var key in obj) {\n            func(key, obj[key]);\n        }\n    },\n    _inRange(val, left, right) {\n        return left <= val && val < right;\n    },\n    _getProjectionToSegment(x1, y1, x2, y2, x3, y3) {\n        var x, y, dist;\n        var pd2 = (x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2);\n        if (pd2 == 0) {\n            x = x1;\n            y = y1;\n            dist = (x3 - x2) * (x3 - x2) + (y3 - y2) * (y3 - y2);\n        }\n        else {\n            var u = ((x3 - x1) * (x2 - x1) + (y3 - y1) * (y2 - y1)) / pd2;\n            if (u < 0) {\n                x = x1;\n                y = y1;\n                dist = (x1 - x3) * (x1 - x3) + (y1 - y3) * (y1 - y3);\n            }\n            else if (u > 1.0) {\n                x = x2;\n                y = y2;\n                dist = (x2 - x3) * (x2 - x3) + (y2 - y3) * (y2 - y3);\n            }\n            else {\n                x = x1 + u * (x2 - x1);\n                y = y1 + u * (y2 - y1);\n                dist = (x - x3) * (x - x3) + (y - y3) * (y - y3);\n            }\n        }\n        return [x, y, dist];\n    },\n    _getProjectionToLine(pt, line, isClosed) {\n        var pc = Util.cloneObject(pt);\n        var dist = Number.MAX_VALUE;\n        line.forEach(function (p1, i) {\n            if (!isClosed && i === line.length - 1) {\n                return;\n            }\n            var p2 = line[(i + 1) % line.length];\n            var proj = Util._getProjectionToSegment(p1.x, p1.y, p2.x, p2.y, pt.x, pt.y);\n            var px = proj[0], py = proj[1], pdist = proj[2];\n            if (pdist < dist) {\n                pc.x = px;\n                pc.y = py;\n                dist = pdist;\n            }\n        });\n        return pc;\n    },\n    _prepareArrayForTween(startArray, endArray, isClosed) {\n        var n, start = [], end = [];\n        if (startArray.length > endArray.length) {\n            var temp = endArray;\n            endArray = startArray;\n            startArray = temp;\n        }\n        for (n = 0; n < startArray.length; n += 2) {\n            start.push({\n                x: startArray[n],\n                y: startArray[n + 1],\n            });\n        }\n        for (n = 0; n < endArray.length; n += 2) {\n            end.push({\n                x: endArray[n],\n                y: endArray[n + 1],\n            });\n        }\n        var newStart = [];\n        end.forEach(function (point) {\n            var pr = Util._getProjectionToLine(point, start, isClosed);\n            newStart.push(pr.x);\n            newStart.push(pr.y);\n        });\n        return newStart;\n    },\n    _prepareToStringify(obj) {\n        var desc;\n        obj.visitedByCircularReferenceRemoval = true;\n        for (var key in obj) {\n            if (!(obj.hasOwnProperty(key) && obj[key] && typeof obj[key] == 'object')) {\n                continue;\n            }\n            desc = Object.getOwnPropertyDescriptor(obj, key);\n            if (obj[key].visitedByCircularReferenceRemoval ||\n                Util._isElement(obj[key])) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n            else if (Util._prepareToStringify(obj[key]) === null) {\n                if (desc.configurable) {\n                    delete obj[key];\n                }\n                else {\n                    return null;\n                }\n            }\n        }\n        delete obj.visitedByCircularReferenceRemoval;\n        return obj;\n    },\n    _assign(target, source) {\n        for (var key in source) {\n            target[key] = source[key];\n        }\n        return target;\n    },\n    _getFirstPointerId(evt) {\n        if (!evt.touches) {\n            return evt.pointerId || 999;\n        }\n        else {\n            return evt.changedTouches[0].identifier;\n        }\n    },\n};\n","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nfunction _formatValue(val) {\n    if (Util._isString(val)) {\n        return '\"' + val + '\"';\n    }\n    if (Object.prototype.toString.call(val) === '[object Number]') {\n        return val;\n    }\n    if (Util._isBoolean(val)) {\n        return val;\n    }\n    return Object.prototype.toString.call(val);\n}\nexport function RGBComponent(val) {\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    return Math.round(val);\n}\nexport function alphaComponent(val) {\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0.0001) {\n        return 0.0001;\n    }\n    return val;\n}\nexport function getNumberValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isNumber(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrArrayOfNumbersValidator(noOfElements) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            let isNumber = Util._isNumber(val);\n            let isValidArray = Util._isArray(val) && val.length == noOfElements;\n            if (!isNumber && !isValidArray) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or Array<number>(' +\n                    noOfElements +\n                    ')');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberOrAutoValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isNumber = Util._isNumber(val);\n            var isAuto = val === 'auto';\n            if (!(isNumber || isAuto)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a number or \"auto\".');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isString(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string.');\n            }\n            return val;\n        };\n    }\n}\nexport function getStringOrGradientValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            const isString = Util._isString(val);\n            const isGradient = Object.prototype.toString.call(val) === '[object CanvasGradient]' ||\n                (val && val.addColorStop);\n            if (!(isString || isGradient)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a string or a native gradient.');\n            }\n            return val;\n        };\n    }\n}\nexport function getFunctionValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isFunction(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a function.');\n            }\n            return val;\n        };\n    }\n}\nexport function getNumberArrayValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util._isArray(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a array of numbers.');\n            }\n            else {\n                val.forEach(function (item) {\n                    if (!Util._isNumber(item)) {\n                        Util.warn('\"' +\n                            attr +\n                            '\" attribute has non numeric element ' +\n                            item +\n                            '. Make sure that all elements are numbers.');\n                    }\n                });\n            }\n            return val;\n        };\n    }\n}\nexport function getBooleanValidator() {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            var isBool = val === true || val === false;\n            if (!isBool) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be a boolean.');\n            }\n            return val;\n        };\n    }\n}\nexport function getComponentValidator(components) {\n    if (Konva.isUnminified) {\n        return function (val, attr) {\n            if (!Util.isObject(val)) {\n                Util.warn(_formatValue(val) +\n                    ' is a not valid value for \"' +\n                    attr +\n                    '\" attribute. The value should be an object with properties ' +\n                    components);\n            }\n            return val;\n        };\n    }\n}\n","import { Util } from './Util.js';\nimport { getComponentValidator } from './Validators.js';\nvar GET = 'get', SET = 'set';\nexport const Factory = {\n    addGetterSetter(constructor, attr, def, validator, after) {\n        Factory.addGetter(constructor, attr, def);\n        Factory.addSetter(constructor, attr, validator, after);\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addGetter(constructor, attr, def) {\n        var method = GET + Util._capitalize(attr);\n        constructor.prototype[method] =\n            constructor.prototype[method] ||\n                function () {\n                    var val = this.attrs[attr];\n                    return val === undefined ? def : val;\n                };\n    },\n    addSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        if (!constructor.prototype[method]) {\n            Factory.overWriteSetter(constructor, attr, validator, after);\n        }\n    },\n    overWriteSetter(constructor, attr, validator, after) {\n        var method = SET + Util._capitalize(attr);\n        constructor.prototype[method] = function (val) {\n            if (validator && val !== undefined && val !== null) {\n                val = validator.call(this, val, attr);\n            }\n            this._setAttr(attr, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n    },\n    addComponentsGetterSetter(constructor, attr, components, validator, after) {\n        var len = components.length, capitalize = Util._capitalize, getter = GET + capitalize(attr), setter = SET + capitalize(attr), n, component;\n        constructor.prototype[getter] = function () {\n            var ret = {};\n            for (n = 0; n < len; n++) {\n                component = components[n];\n                ret[component] = this.getAttr(attr + capitalize(component));\n            }\n            return ret;\n        };\n        var basicValidator = getComponentValidator(components);\n        constructor.prototype[setter] = function (val) {\n            var oldVal = this.attrs[attr], key;\n            if (validator) {\n                val = validator.call(this, val);\n            }\n            if (basicValidator) {\n                basicValidator.call(this, val, attr);\n            }\n            for (key in val) {\n                if (!val.hasOwnProperty(key)) {\n                    continue;\n                }\n                this._setAttr(attr + capitalize(key), val[key]);\n            }\n            this._fireChangeEvent(attr, oldVal, val);\n            if (after) {\n                after.call(this);\n            }\n            return this;\n        };\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    addOverloadedGetterSetter(constructor, attr) {\n        var capitalizedAttr = Util._capitalize(attr), setter = SET + capitalizedAttr, getter = GET + capitalizedAttr;\n        constructor.prototype[attr] = function () {\n            if (arguments.length) {\n                this[setter](arguments[0]);\n                return this;\n            }\n            return this[getter]();\n        };\n    },\n    addDeprecatedGetterSetter(constructor, attr, def, validator) {\n        Util.error('Adding deprecated ' + attr);\n        var method = GET + Util._capitalize(attr);\n        var message = attr +\n            ' property is deprecated and will be removed soon. Look at Konva change log for more information.';\n        constructor.prototype[method] = function () {\n            Util.error(message);\n            var val = this.attrs[attr];\n            return val === undefined ? def : val;\n        };\n        Factory.addSetter(constructor, attr, validator, function () {\n            Util.error(message);\n        });\n        Factory.addOverloadedGetterSetter(constructor, attr);\n    },\n    backCompat(constructor, methods) {\n        Util.each(methods, function (oldMethodName, newMethodName) {\n            var method = constructor.prototype[newMethodName];\n            var oldGetter = GET + Util._capitalize(oldMethodName);\n            var oldSetter = SET + Util._capitalize(oldMethodName);\n            function deprecated() {\n                method.apply(this, arguments);\n                Util.error('\"' +\n                    oldMethodName +\n                    '\" method is deprecated and will be removed soon. Use \"\"' +\n                    newMethodName +\n                    '\" instead.');\n            }\n            constructor.prototype[oldMethodName] = deprecated;\n            constructor.prototype[oldGetter] = deprecated;\n            constructor.prototype[oldSetter] = deprecated;\n        });\n    },\n    afterSetFilter() {\n        this._filterUpToDate = false;\n    },\n};\n","import { Util } from './Util.js';\nimport { Konva } from './Global.js';\nfunction simplifyArray(arr) {\n    var retArr = [], len = arr.length, util = Util, n, val;\n    for (n = 0; n < len; n++) {\n        val = arr[n];\n        if (util._isNumber(val)) {\n            val = Math.round(val * 1000) / 1000;\n        }\n        else if (!util._isString(val)) {\n            val = val + '';\n        }\n        retArr.push(val);\n    }\n    return retArr;\n}\nvar COMMA = ',', OPEN_PAREN = '(', CLOSE_PAREN = ')', OPEN_PAREN_BRACKET = '([', CLOSE_BRACKET_PAREN = '])', SEMICOLON = ';', DOUBLE_PAREN = '()', EQUALS = '=', CONTEXT_METHODS = [\n    'arc',\n    'arcTo',\n    'beginPath',\n    'bezierCurveTo',\n    'clearRect',\n    'clip',\n    'closePath',\n    'createLinearGradient',\n    'createPattern',\n    'createRadialGradient',\n    'drawImage',\n    'ellipse',\n    'fill',\n    'fillText',\n    'getImageData',\n    'createImageData',\n    'lineTo',\n    'moveTo',\n    'putImageData',\n    'quadraticCurveTo',\n    'rect',\n    'restore',\n    'rotate',\n    'save',\n    'scale',\n    'setLineDash',\n    'setTransform',\n    'stroke',\n    'strokeText',\n    'transform',\n    'translate',\n];\nvar CONTEXT_PROPERTIES = [\n    'fillStyle',\n    'strokeStyle',\n    'shadowColor',\n    'shadowBlur',\n    'shadowOffsetX',\n    'shadowOffsetY',\n    'lineCap',\n    'lineDashOffset',\n    'lineJoin',\n    'lineWidth',\n    'miterLimit',\n    'font',\n    'textAlign',\n    'textBaseline',\n    'globalAlpha',\n    'globalCompositeOperation',\n    'imageSmoothingEnabled',\n];\nconst traceArrMax = 100;\nexport class Context {\n    constructor(canvas) {\n        this.canvas = canvas;\n        this._context = canvas._canvas.getContext('2d');\n        if (Konva.enableTrace) {\n            this.traceArr = [];\n            this._enableTrace();\n        }\n    }\n    fillShape(shape) {\n        if (shape.fillEnabled()) {\n            this._fill(shape);\n        }\n    }\n    _fill(shape) {\n    }\n    strokeShape(shape) {\n        if (shape.hasStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n    }\n    fillStrokeShape(shape) {\n        if (shape.attrs.fillAfterStrokeEnabled) {\n            this.strokeShape(shape);\n            this.fillShape(shape);\n        }\n        else {\n            this.fillShape(shape);\n            this.strokeShape(shape);\n        }\n    }\n    getTrace(relaxed, rounded) {\n        var traceArr = this.traceArr, len = traceArr.length, str = '', n, trace, method, args;\n        for (n = 0; n < len; n++) {\n            trace = traceArr[n];\n            method = trace.method;\n            if (method) {\n                args = trace.args;\n                str += method;\n                if (relaxed) {\n                    str += DOUBLE_PAREN;\n                }\n                else {\n                    if (Util._isArray(args[0])) {\n                        str += OPEN_PAREN_BRACKET + args.join(COMMA) + CLOSE_BRACKET_PAREN;\n                    }\n                    else {\n                        if (rounded) {\n                            args = args.map((a) => typeof a === 'number' ? Math.floor(a) : a);\n                        }\n                        str += OPEN_PAREN + args.join(COMMA) + CLOSE_PAREN;\n                    }\n                }\n            }\n            else {\n                str += trace.property;\n                if (!relaxed) {\n                    str += EQUALS + trace.val;\n                }\n            }\n            str += SEMICOLON;\n        }\n        return str;\n    }\n    clearTrace() {\n        this.traceArr = [];\n    }\n    _trace(str) {\n        var traceArr = this.traceArr, len;\n        traceArr.push(str);\n        len = traceArr.length;\n        if (len >= traceArrMax) {\n            traceArr.shift();\n        }\n    }\n    reset() {\n        var pixelRatio = this.getCanvas().getPixelRatio();\n        this.setTransform(1 * pixelRatio, 0, 0, 1 * pixelRatio, 0, 0);\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    clear(bounds) {\n        var canvas = this.getCanvas();\n        if (bounds) {\n            this.clearRect(bounds.x || 0, bounds.y || 0, bounds.width || 0, bounds.height || 0);\n        }\n        else {\n            this.clearRect(0, 0, canvas.getWidth() / canvas.pixelRatio, canvas.getHeight() / canvas.pixelRatio);\n        }\n    }\n    _applyLineCap(shape) {\n        var lineCap = shape.getLineCap();\n        if (lineCap) {\n            this.setAttr('lineCap', lineCap);\n        }\n    }\n    _applyOpacity(shape) {\n        var absOpacity = shape.getAbsoluteOpacity();\n        if (absOpacity !== 1) {\n            this.setAttr('globalAlpha', absOpacity);\n        }\n    }\n    _applyLineJoin(shape) {\n        var lineJoin = shape.attrs.lineJoin;\n        if (lineJoin) {\n            this.setAttr('lineJoin', lineJoin);\n        }\n    }\n    setAttr(attr, val) {\n        this._context[attr] = val;\n    }\n    arc(a0, a1, a2, a3, a4, a5) {\n        this._context.arc(a0, a1, a2, a3, a4, a5);\n    }\n    arcTo(a0, a1, a2, a3, a4) {\n        this._context.arcTo(a0, a1, a2, a3, a4);\n    }\n    beginPath() {\n        this._context.beginPath();\n    }\n    bezierCurveTo(a0, a1, a2, a3, a4, a5) {\n        this._context.bezierCurveTo(a0, a1, a2, a3, a4, a5);\n    }\n    clearRect(a0, a1, a2, a3) {\n        this._context.clearRect(a0, a1, a2, a3);\n    }\n    clip() {\n        this._context.clip();\n    }\n    closePath() {\n        this._context.closePath();\n    }\n    createImageData(a0, a1) {\n        var a = arguments;\n        if (a.length === 2) {\n            return this._context.createImageData(a0, a1);\n        }\n        else if (a.length === 1) {\n            return this._context.createImageData(a0);\n        }\n    }\n    createLinearGradient(a0, a1, a2, a3) {\n        return this._context.createLinearGradient(a0, a1, a2, a3);\n    }\n    createPattern(a0, a1) {\n        return this._context.createPattern(a0, a1);\n    }\n    createRadialGradient(a0, a1, a2, a3, a4, a5) {\n        return this._context.createRadialGradient(a0, a1, a2, a3, a4, a5);\n    }\n    drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8) {\n        var a = arguments, _context = this._context;\n        if (a.length === 3) {\n            _context.drawImage(a0, a1, a2);\n        }\n        else if (a.length === 5) {\n            _context.drawImage(a0, a1, a2, a3, a4);\n        }\n        else if (a.length === 9) {\n            _context.drawImage(a0, a1, a2, a3, a4, a5, a6, a7, a8);\n        }\n    }\n    ellipse(a0, a1, a2, a3, a4, a5, a6, a7) {\n        this._context.ellipse(a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    isPointInPath(x, y) {\n        return this._context.isPointInPath(x, y);\n    }\n    fill(path2d) {\n        if (path2d) {\n            this._context.fill(path2d);\n        }\n        else {\n            this._context.fill();\n        }\n    }\n    fillRect(x, y, width, height) {\n        this._context.fillRect(x, y, width, height);\n    }\n    strokeRect(x, y, width, height) {\n        this._context.strokeRect(x, y, width, height);\n    }\n    fillText(text, x, y, maxWidth) {\n        if (maxWidth) {\n            this._context.fillText(text, x, y, maxWidth);\n        }\n        else {\n            this._context.fillText(text, x, y);\n        }\n    }\n    measureText(text) {\n        return this._context.measureText(text);\n    }\n    getImageData(a0, a1, a2, a3) {\n        return this._context.getImageData(a0, a1, a2, a3);\n    }\n    lineTo(a0, a1) {\n        this._context.lineTo(a0, a1);\n    }\n    moveTo(a0, a1) {\n        this._context.moveTo(a0, a1);\n    }\n    rect(a0, a1, a2, a3) {\n        this._context.rect(a0, a1, a2, a3);\n    }\n    putImageData(a0, a1, a2) {\n        this._context.putImageData(a0, a1, a2);\n    }\n    quadraticCurveTo(a0, a1, a2, a3) {\n        this._context.quadraticCurveTo(a0, a1, a2, a3);\n    }\n    restore() {\n        this._context.restore();\n    }\n    rotate(a0) {\n        this._context.rotate(a0);\n    }\n    save() {\n        this._context.save();\n    }\n    scale(a0, a1) {\n        this._context.scale(a0, a1);\n    }\n    setLineDash(a0) {\n        if (this._context.setLineDash) {\n            this._context.setLineDash(a0);\n        }\n        else if ('mozDash' in this._context) {\n            this._context['mozDash'] = a0;\n        }\n        else if ('webkitLineDash' in this._context) {\n            this._context['webkitLineDash'] = a0;\n        }\n    }\n    getLineDash() {\n        return this._context.getLineDash();\n    }\n    setTransform(a0, a1, a2, a3, a4, a5) {\n        this._context.setTransform(a0, a1, a2, a3, a4, a5);\n    }\n    stroke(path2d) {\n        if (path2d) {\n            this._context.stroke(path2d);\n        }\n        else {\n            this._context.stroke();\n        }\n    }\n    strokeText(a0, a1, a2, a3) {\n        this._context.strokeText(a0, a1, a2, a3);\n    }\n    transform(a0, a1, a2, a3, a4, a5) {\n        this._context.transform(a0, a1, a2, a3, a4, a5);\n    }\n    translate(a0, a1) {\n        this._context.translate(a0, a1);\n    }\n    _enableTrace() {\n        var that = this, len = CONTEXT_METHODS.length, origSetter = this.setAttr, n, args;\n        var func = function (methodName) {\n            var origMethod = that[methodName], ret;\n            that[methodName] = function () {\n                args = simplifyArray(Array.prototype.slice.call(arguments, 0));\n                ret = origMethod.apply(that, arguments);\n                that._trace({\n                    method: methodName,\n                    args: args,\n                });\n                return ret;\n            };\n        };\n        for (n = 0; n < len; n++) {\n            func(CONTEXT_METHODS[n]);\n        }\n        that.setAttr = function () {\n            origSetter.apply(that, arguments);\n            var prop = arguments[0];\n            var val = arguments[1];\n            if (prop === 'shadowOffsetX' ||\n                prop === 'shadowOffsetY' ||\n                prop === 'shadowBlur') {\n                val = val / this.canvas.getPixelRatio();\n            }\n            that._trace({\n                property: prop,\n                val: val,\n            });\n        };\n    }\n    _applyGlobalCompositeOperation(node) {\n        const op = node.attrs.globalCompositeOperation;\n        var def = !op || op === 'source-over';\n        if (!def) {\n            this.setAttr('globalCompositeOperation', op);\n        }\n    }\n}\nCONTEXT_PROPERTIES.forEach(function (prop) {\n    Object.defineProperty(Context.prototype, prop, {\n        get() {\n            return this._context[prop];\n        },\n        set(val) {\n            this._context[prop] = val;\n        },\n    });\n});\nexport class SceneContext extends Context {\n    _fillColor(shape) {\n        var fill = shape.fill();\n        this.setAttr('fillStyle', fill);\n        shape._fillFunc(this);\n    }\n    _fillPattern(shape) {\n        this.setAttr('fillStyle', shape._getFillPattern());\n        shape._fillFunc(this);\n    }\n    _fillLinearGradient(shape) {\n        var grd = shape._getLinearGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fillRadialGradient(shape) {\n        var grd = shape._getRadialGradient();\n        if (grd) {\n            this.setAttr('fillStyle', grd);\n            shape._fillFunc(this);\n        }\n    }\n    _fill(shape) {\n        var hasColor = shape.fill(), fillPriority = shape.getFillPriority();\n        if (hasColor && fillPriority === 'color') {\n            this._fillColor(shape);\n            return;\n        }\n        var hasPattern = shape.getFillPatternImage();\n        if (hasPattern && fillPriority === 'pattern') {\n            this._fillPattern(shape);\n            return;\n        }\n        var hasLinearGradient = shape.getFillLinearGradientColorStops();\n        if (hasLinearGradient && fillPriority === 'linear-gradient') {\n            this._fillLinearGradient(shape);\n            return;\n        }\n        var hasRadialGradient = shape.getFillRadialGradientColorStops();\n        if (hasRadialGradient && fillPriority === 'radial-gradient') {\n            this._fillRadialGradient(shape);\n            return;\n        }\n        if (hasColor) {\n            this._fillColor(shape);\n        }\n        else if (hasPattern) {\n            this._fillPattern(shape);\n        }\n        else if (hasLinearGradient) {\n            this._fillLinearGradient(shape);\n        }\n        else if (hasRadialGradient) {\n            this._fillRadialGradient(shape);\n        }\n    }\n    _strokeLinearGradient(shape) {\n        var start = shape.getStrokeLinearGradientStartPoint(), end = shape.getStrokeLinearGradientEndPoint(), colorStops = shape.getStrokeLinearGradientColorStops(), grd = this.createLinearGradient(start.x, start.y, end.x, end.y);\n        if (colorStops) {\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            this.setAttr('strokeStyle', grd);\n        }\n    }\n    _stroke(shape) {\n        var dash = shape.dash(), strokeScaleEnabled = shape.getStrokeScaleEnabled();\n        if (shape.hasStroke()) {\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            if (dash && shape.dashEnabled()) {\n                this.setLineDash(dash);\n                this.setAttr('lineDashOffset', shape.dashOffset());\n            }\n            this.setAttr('lineWidth', shape.strokeWidth());\n            if (!shape.getShadowForStrokeEnabled()) {\n                this.setAttr('shadowColor', 'rgba(0,0,0,0)');\n            }\n            var hasLinearGradient = shape.getStrokeLinearGradientColorStops();\n            if (hasLinearGradient) {\n                this._strokeLinearGradient(shape);\n            }\n            else {\n                this.setAttr('strokeStyle', shape.stroke());\n            }\n            shape._strokeFunc(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n    _applyShadow(shape) {\n        var _a, _b, _c;\n        var color = (_a = shape.getShadowRGBA()) !== null && _a !== void 0 ? _a : 'black', blur = (_b = shape.getShadowBlur()) !== null && _b !== void 0 ? _b : 5, offset = (_c = shape.getShadowOffset()) !== null && _c !== void 0 ? _c : {\n            x: 0,\n            y: 0,\n        }, scale = shape.getAbsoluteScale(), ratio = this.canvas.getPixelRatio(), scaleX = scale.x * ratio, scaleY = scale.y * ratio;\n        this.setAttr('shadowColor', color);\n        this.setAttr('shadowBlur', blur * Math.min(Math.abs(scaleX), Math.abs(scaleY)));\n        this.setAttr('shadowOffsetX', offset.x * scaleX);\n        this.setAttr('shadowOffsetY', offset.y * scaleY);\n    }\n}\nexport class HitContext extends Context {\n    _fill(shape) {\n        this.save();\n        this.setAttr('fillStyle', shape.colorKey);\n        shape._fillFuncHit(this);\n        this.restore();\n    }\n    strokeShape(shape) {\n        if (shape.hasHitStroke()) {\n            this._stroke(shape);\n        }\n    }\n    _stroke(shape) {\n        if (shape.hasHitStroke()) {\n            var strokeScaleEnabled = shape.getStrokeScaleEnabled();\n            if (!strokeScaleEnabled) {\n                this.save();\n                var pixelRatio = this.getCanvas().getPixelRatio();\n                this.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n            }\n            this._applyLineCap(shape);\n            var hitStrokeWidth = shape.hitStrokeWidth();\n            var strokeWidth = hitStrokeWidth === 'auto' ? shape.strokeWidth() : hitStrokeWidth;\n            this.setAttr('lineWidth', strokeWidth);\n            this.setAttr('strokeStyle', shape.colorKey);\n            shape._strokeFuncHit(this);\n            if (!strokeScaleEnabled) {\n                this.restore();\n            }\n        }\n    }\n}\n","import { Util } from './Util.js';\nimport { SceneContext, HitContext } from './Context.js';\nimport { Konva } from './Global.js';\nimport { Factory } from './Factory.js';\nimport { getNumberValidator } from './Validators.js';\nvar _pixelRatio;\nfunction getDevicePixelRatio() {\n    if (_pixelRatio) {\n        return _pixelRatio;\n    }\n    var canvas = Util.createCanvasElement();\n    var context = canvas.getContext('2d');\n    _pixelRatio = (function () {\n        var devicePixelRatio = Konva._global.devicePixelRatio || 1, backingStoreRatio = context.webkitBackingStorePixelRatio ||\n            context.mozBackingStorePixelRatio ||\n            context.msBackingStorePixelRatio ||\n            context.oBackingStorePixelRatio ||\n            context.backingStorePixelRatio ||\n            1;\n        return devicePixelRatio / backingStoreRatio;\n    })();\n    return _pixelRatio;\n}\nexport class Canvas {\n    constructor(config) {\n        this.pixelRatio = 1;\n        this.width = 0;\n        this.height = 0;\n        this.isCache = false;\n        var conf = config || {};\n        var pixelRatio = conf.pixelRatio || Konva.pixelRatio || getDevicePixelRatio();\n        this.pixelRatio = pixelRatio;\n        this._canvas = Util.createCanvasElement();\n        this._canvas.style.padding = '0';\n        this._canvas.style.margin = '0';\n        this._canvas.style.border = '0';\n        this._canvas.style.background = 'transparent';\n        this._canvas.style.position = 'absolute';\n        this._canvas.style.top = '0';\n        this._canvas.style.left = '0';\n    }\n    getContext() {\n        return this.context;\n    }\n    getPixelRatio() {\n        return this.pixelRatio;\n    }\n    setPixelRatio(pixelRatio) {\n        var previousRatio = this.pixelRatio;\n        this.pixelRatio = pixelRatio;\n        this.setSize(this.getWidth() / previousRatio, this.getHeight() / previousRatio);\n    }\n    setWidth(width) {\n        this.width = this._canvas.width = width * this.pixelRatio;\n        this._canvas.style.width = width + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    setHeight(height) {\n        this.height = this._canvas.height = height * this.pixelRatio;\n        this._canvas.style.height = height + 'px';\n        var pixelRatio = this.pixelRatio, _context = this.getContext()._context;\n        _context.scale(pixelRatio, pixelRatio);\n    }\n    getWidth() {\n        return this.width;\n    }\n    getHeight() {\n        return this.height;\n    }\n    setSize(width, height) {\n        this.setWidth(width || 0);\n        this.setHeight(height || 0);\n    }\n    toDataURL(mimeType, quality) {\n        try {\n            return this._canvas.toDataURL(mimeType, quality);\n        }\n        catch (e) {\n            try {\n                return this._canvas.toDataURL();\n            }\n            catch (err) {\n                Util.error('Unable to get data URL. ' +\n                    err.message +\n                    ' For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                return '';\n            }\n        }\n    }\n}\nFactory.addGetterSetter(Canvas, 'pixelRatio', undefined, getNumberValidator());\nexport class SceneCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.context = new SceneContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\nexport class HitCanvas extends Canvas {\n    constructor(config = { width: 0, height: 0 }) {\n        super(config);\n        this.hitCanvas = true;\n        this.context = new HitContext(this);\n        this.setSize(config.width, config.height);\n    }\n}\n","import { Konva } from './Global.js';\nimport { Util } from './Util.js';\nexport const DD = {\n    get isDragging() {\n        var flag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus === 'dragging') {\n                flag = true;\n            }\n        });\n        return flag;\n    },\n    justDragged: false,\n    get node() {\n        var node;\n        DD._dragElements.forEach((elem) => {\n            node = elem.node;\n        });\n        return node;\n    },\n    _dragElements: new Map(),\n    _drag(evt) {\n        const nodesToFireEvents = [];\n        DD._dragElements.forEach((elem, key) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            stage.setPointersPositions(evt);\n            if (elem.pointerId === undefined) {\n                elem.pointerId = Util._getFirstPointerId(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus !== 'dragging') {\n                var dragDistance = node.dragDistance();\n                var distance = Math.max(Math.abs(pos.x - elem.startPointerPos.x), Math.abs(pos.y - elem.startPointerPos.y));\n                if (distance < dragDistance) {\n                    return;\n                }\n                node.startDrag({ evt });\n                if (!node.isDragging()) {\n                    return;\n                }\n            }\n            node._setDragPosition(evt, elem);\n            nodesToFireEvents.push(node);\n        });\n        nodesToFireEvents.forEach((node) => {\n            node.fire('dragmove', {\n                type: 'dragmove',\n                target: node,\n                evt: evt,\n            }, true);\n        });\n    },\n    _endDragBefore(evt) {\n        DD._dragElements.forEach((elem) => {\n            const { node } = elem;\n            const stage = node.getStage();\n            if (evt) {\n                stage.setPointersPositions(evt);\n            }\n            const pos = stage._changedPointerPositions.find((pos) => pos.id === elem.pointerId);\n            if (!pos) {\n                return;\n            }\n            if (elem.dragStatus === 'dragging' || elem.dragStatus === 'stopped') {\n                DD.justDragged = true;\n                Konva._mouseListenClick = false;\n                Konva._touchListenClick = false;\n                Konva._pointerListenClick = false;\n                elem.dragStatus = 'stopped';\n            }\n            const drawNode = elem.node.getLayer() ||\n                (elem.node instanceof Konva['Stage'] && elem.node);\n            if (drawNode) {\n                drawNode.batchDraw();\n            }\n        });\n    },\n    _endDragAfter(evt) {\n        DD._dragElements.forEach((elem, key) => {\n            if (elem.dragStatus === 'stopped') {\n                elem.node.fire('dragend', {\n                    type: 'dragend',\n                    target: elem.node,\n                    evt: evt,\n                }, true);\n            }\n            if (elem.dragStatus !== 'dragging') {\n                DD._dragElements.delete(key);\n            }\n        });\n    },\n};\nif (Konva.isBrowser) {\n    window.addEventListener('mouseup', DD._endDragBefore, true);\n    window.addEventListener('touchend', DD._endDragBefore, true);\n    window.addEventListener('mousemove', DD._drag);\n    window.addEventListener('touchmove', DD._drag);\n    window.addEventListener('mouseup', DD._endDragAfter, false);\n    window.addEventListener('touchend', DD._endDragAfter, false);\n}\n","import { Util, Transform } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { Konva } from './Global.js';\nimport { DD } from './DragAndDrop.js';\nimport { getNumberValidator, getStringValidator, getBooleanValidator, } from './Validators.js';\nvar ABSOLUTE_OPACITY = 'absoluteOpacity', ALL_LISTENERS = 'allEventListeners', ABSOLUTE_TRANSFORM = 'absoluteTransform', ABSOLUTE_SCALE = 'absoluteScale', CANVAS = 'canvas', CHANGE = 'Change', CHILDREN = 'children', KONVA = 'konva', LISTENING = 'listening', MOUSEENTER = 'mouseenter', MOUSELEAVE = 'mouseleave', NAME = 'name', SET = 'set', SHAPE = 'Shape', SPACE = ' ', STAGE = 'stage', TRANSFORM = 'transform', UPPER_STAGE = 'Stage', VISIBLE = 'visible', TRANSFORM_CHANGE_STR = [\n    'xChange.konva',\n    'yChange.konva',\n    'scaleXChange.konva',\n    'scaleYChange.konva',\n    'skewXChange.konva',\n    'skewYChange.konva',\n    'rotationChange.konva',\n    'offsetXChange.konva',\n    'offsetYChange.konva',\n    'transformsEnabledChange.konva',\n].join(SPACE);\nlet idCounter = 1;\nexport class Node {\n    constructor(config) {\n        this._id = idCounter++;\n        this.eventListeners = {};\n        this.attrs = {};\n        this.index = 0;\n        this._allEventListeners = null;\n        this.parent = null;\n        this._cache = new Map();\n        this._attachedDepsListeners = new Map();\n        this._lastPos = null;\n        this._batchingTransformChange = false;\n        this._needClearTransformCache = false;\n        this._filterUpToDate = false;\n        this._isUnderCache = false;\n        this._dragEventId = null;\n        this._shouldFireChangeEvents = false;\n        this.setAttrs(config);\n        this._shouldFireChangeEvents = true;\n    }\n    hasChildren() {\n        return false;\n    }\n    _clearCache(attr) {\n        if ((attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM) &&\n            this._cache.get(attr)) {\n            this._cache.get(attr).dirty = true;\n        }\n        else if (attr) {\n            this._cache.delete(attr);\n        }\n        else {\n            this._cache.clear();\n        }\n    }\n    _getCache(attr, privateGetter) {\n        var cache = this._cache.get(attr);\n        var isTransform = attr === TRANSFORM || attr === ABSOLUTE_TRANSFORM;\n        var invalid = cache === undefined || (isTransform && cache.dirty === true);\n        if (invalid) {\n            cache = privateGetter.call(this);\n            this._cache.set(attr, cache);\n        }\n        return cache;\n    }\n    _calculate(name, deps, getter) {\n        if (!this._attachedDepsListeners.get(name)) {\n            const depsString = deps.map((dep) => dep + 'Change.konva').join(SPACE);\n            this.on(depsString, () => {\n                this._clearCache(name);\n            });\n            this._attachedDepsListeners.set(name, true);\n        }\n        return this._getCache(name, getter);\n    }\n    _getCanvasCache() {\n        return this._cache.get(CANVAS);\n    }\n    _clearSelfAndDescendantCache(attr) {\n        this._clearCache(attr);\n        if (attr === ABSOLUTE_TRANSFORM) {\n            this.fire('absoluteTransformChange');\n        }\n    }\n    clearCache() {\n        this._cache.delete(CANVAS);\n        this._clearSelfAndDescendantCache();\n        this._requestDraw();\n        return this;\n    }\n    cache(config) {\n        var conf = config || {};\n        var rect = {};\n        if (conf.x === undefined ||\n            conf.y === undefined ||\n            conf.width === undefined ||\n            conf.height === undefined) {\n            rect = this.getClientRect({\n                skipTransform: true,\n                relativeTo: this.getParent(),\n            });\n        }\n        var width = Math.ceil(conf.width || rect.width), height = Math.ceil(conf.height || rect.height), pixelRatio = conf.pixelRatio, x = conf.x === undefined ? Math.floor(rect.x) : conf.x, y = conf.y === undefined ? Math.floor(rect.y) : conf.y, offset = conf.offset || 0, drawBorder = conf.drawBorder || false, hitCanvasPixelRatio = conf.hitCanvasPixelRatio || 1;\n        if (!width || !height) {\n            Util.error('Can not cache the node. Width or height of the node equals 0. Caching is skipped.');\n            return;\n        }\n        width += offset * 2 + 1;\n        height += offset * 2 + 1;\n        x -= offset;\n        y -= offset;\n        var cachedSceneCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: width,\n            height: height,\n        }), cachedFilterCanvas = new SceneCanvas({\n            pixelRatio: pixelRatio,\n            width: 0,\n            height: 0,\n        }), cachedHitCanvas = new HitCanvas({\n            pixelRatio: hitCanvasPixelRatio,\n            width: width,\n            height: height,\n        }), sceneContext = cachedSceneCanvas.getContext(), hitContext = cachedHitCanvas.getContext();\n        cachedHitCanvas.isCache = true;\n        cachedSceneCanvas.isCache = true;\n        this._cache.delete(CANVAS);\n        this._filterUpToDate = false;\n        if (conf.imageSmoothingEnabled === false) {\n            cachedSceneCanvas.getContext()._context.imageSmoothingEnabled = false;\n            cachedFilterCanvas.getContext()._context.imageSmoothingEnabled = false;\n        }\n        sceneContext.save();\n        hitContext.save();\n        sceneContext.translate(-x, -y);\n        hitContext.translate(-x, -y);\n        this._isUnderCache = true;\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this.drawScene(cachedSceneCanvas, this);\n        this.drawHit(cachedHitCanvas, this);\n        this._isUnderCache = false;\n        sceneContext.restore();\n        hitContext.restore();\n        if (drawBorder) {\n            sceneContext.save();\n            sceneContext.beginPath();\n            sceneContext.rect(0, 0, width, height);\n            sceneContext.closePath();\n            sceneContext.setAttr('strokeStyle', 'red');\n            sceneContext.setAttr('lineWidth', 5);\n            sceneContext.stroke();\n            sceneContext.restore();\n        }\n        this._cache.set(CANVAS, {\n            scene: cachedSceneCanvas,\n            filter: cachedFilterCanvas,\n            hit: cachedHitCanvas,\n            x: x,\n            y: y,\n        });\n        this._requestDraw();\n        return this;\n    }\n    isCached() {\n        return this._cache.has(CANVAS);\n    }\n    getClientRect(config) {\n        throw new Error('abstract \"getClientRect\" method call');\n    }\n    _transformedRect(rect, top) {\n        var points = [\n            { x: rect.x, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y },\n            { x: rect.x + rect.width, y: rect.y + rect.height },\n            { x: rect.x, y: rect.y + rect.height },\n        ];\n        var minX, minY, maxX, maxY;\n        var trans = this.getAbsoluteTransform(top);\n        points.forEach(function (point) {\n            var transformed = trans.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    _drawCachedSceneCanvas(context) {\n        context.save();\n        context._applyOpacity(this);\n        context._applyGlobalCompositeOperation(this);\n        const canvasCache = this._getCanvasCache();\n        context.translate(canvasCache.x, canvasCache.y);\n        var cacheCanvas = this._getCachedSceneCanvas();\n        var ratio = cacheCanvas.pixelRatio;\n        context.drawImage(cacheCanvas._canvas, 0, 0, cacheCanvas.width / ratio, cacheCanvas.height / ratio);\n        context.restore();\n    }\n    _drawCachedHitCanvas(context) {\n        var canvasCache = this._getCanvasCache(), hitCanvas = canvasCache.hit;\n        context.save();\n        context.translate(canvasCache.x, canvasCache.y);\n        context.drawImage(hitCanvas._canvas, 0, 0, hitCanvas.width / hitCanvas.pixelRatio, hitCanvas.height / hitCanvas.pixelRatio);\n        context.restore();\n    }\n    _getCachedSceneCanvas() {\n        var filters = this.filters(), cachedCanvas = this._getCanvasCache(), sceneCanvas = cachedCanvas.scene, filterCanvas = cachedCanvas.filter, filterContext = filterCanvas.getContext(), len, imageData, n, filter;\n        if (filters) {\n            if (!this._filterUpToDate) {\n                var ratio = sceneCanvas.pixelRatio;\n                filterCanvas.setSize(sceneCanvas.width / sceneCanvas.pixelRatio, sceneCanvas.height / sceneCanvas.pixelRatio);\n                try {\n                    len = filters.length;\n                    filterContext.clear();\n                    filterContext.drawImage(sceneCanvas._canvas, 0, 0, sceneCanvas.getWidth() / ratio, sceneCanvas.getHeight() / ratio);\n                    imageData = filterContext.getImageData(0, 0, filterCanvas.getWidth(), filterCanvas.getHeight());\n                    for (n = 0; n < len; n++) {\n                        filter = filters[n];\n                        if (typeof filter !== 'function') {\n                            Util.error('Filter should be type of function, but got ' +\n                                typeof filter +\n                                ' instead. Please check correct filters');\n                            continue;\n                        }\n                        filter.call(this, imageData);\n                        filterContext.putImageData(imageData, 0, 0);\n                    }\n                }\n                catch (e) {\n                    Util.error('Unable to apply filter. ' +\n                        e.message +\n                        ' This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.');\n                }\n                this._filterUpToDate = true;\n            }\n            return filterCanvas;\n        }\n        return sceneCanvas;\n    }\n    on(evtStr, handler) {\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (arguments.length === 3) {\n            return this._delegate.apply(this, arguments);\n        }\n        var events = evtStr.split(SPACE), len = events.length, n, event, parts, baseEvent, name;\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1] || '';\n            if (!this.eventListeners[baseEvent]) {\n                this.eventListeners[baseEvent] = [];\n            }\n            this.eventListeners[baseEvent].push({\n                name: name,\n                handler: handler,\n            });\n        }\n        return this;\n    }\n    off(evtStr, callback) {\n        var events = (evtStr || '').split(SPACE), len = events.length, n, t, event, parts, baseEvent, name;\n        this._cache && this._cache.delete(ALL_LISTENERS);\n        if (!evtStr) {\n            for (t in this.eventListeners) {\n                this._off(t);\n            }\n        }\n        for (n = 0; n < len; n++) {\n            event = events[n];\n            parts = event.split('.');\n            baseEvent = parts[0];\n            name = parts[1];\n            if (baseEvent) {\n                if (this.eventListeners[baseEvent]) {\n                    this._off(baseEvent, name, callback);\n                }\n            }\n            else {\n                for (t in this.eventListeners) {\n                    this._off(t, name, callback);\n                }\n            }\n        }\n        return this;\n    }\n    dispatchEvent(evt) {\n        var e = {\n            target: this,\n            type: evt.type,\n            evt: evt,\n        };\n        this.fire(evt.type, e);\n        return this;\n    }\n    addEventListener(type, handler) {\n        this.on(type, function (evt) {\n            handler.call(this, evt.evt);\n        });\n        return this;\n    }\n    removeEventListener(type) {\n        this.off(type);\n        return this;\n    }\n    _delegate(event, selector, handler) {\n        var stopNode = this;\n        this.on(event, function (evt) {\n            var targets = evt.target.findAncestors(selector, true, stopNode);\n            for (var i = 0; i < targets.length; i++) {\n                evt = Util.cloneObject(evt);\n                evt.currentTarget = targets[i];\n                handler.call(targets[i], evt);\n            }\n        });\n    }\n    remove() {\n        if (this.isDragging()) {\n            this.stopDrag();\n        }\n        DD._dragElements.delete(this._id);\n        this._remove();\n        return this;\n    }\n    _clearCaches() {\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n        this._clearSelfAndDescendantCache(ABSOLUTE_SCALE);\n        this._clearSelfAndDescendantCache(STAGE);\n        this._clearSelfAndDescendantCache(VISIBLE);\n        this._clearSelfAndDescendantCache(LISTENING);\n    }\n    _remove() {\n        this._clearCaches();\n        var parent = this.getParent();\n        if (parent && parent.children) {\n            parent.children.splice(this.index, 1);\n            parent._setChildrenIndices();\n            this.parent = null;\n        }\n    }\n    destroy() {\n        this.remove();\n        return this;\n    }\n    getAttr(attr) {\n        var method = 'get' + Util._capitalize(attr);\n        if (Util._isFunction(this[method])) {\n            return this[method]();\n        }\n        return this.attrs[attr];\n    }\n    getAncestors() {\n        var parent = this.getParent(), ancestors = [];\n        while (parent) {\n            ancestors.push(parent);\n            parent = parent.getParent();\n        }\n        return ancestors;\n    }\n    getAttrs() {\n        return this.attrs || {};\n    }\n    setAttrs(config) {\n        this._batchTransformChanges(() => {\n            var key, method;\n            if (!config) {\n                return this;\n            }\n            for (key in config) {\n                if (key === CHILDREN) {\n                    continue;\n                }\n                method = SET + Util._capitalize(key);\n                if (Util._isFunction(this[method])) {\n                    this[method](config[key]);\n                }\n                else {\n                    this._setAttr(key, config[key]);\n                }\n            }\n        });\n        return this;\n    }\n    isListening() {\n        return this._getCache(LISTENING, this._isListening);\n    }\n    _isListening(relativeTo) {\n        const listening = this.listening();\n        if (!listening) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isListening(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    isVisible() {\n        return this._getCache(VISIBLE, this._isVisible);\n    }\n    _isVisible(relativeTo) {\n        const visible = this.visible();\n        if (!visible) {\n            return false;\n        }\n        const parent = this.getParent();\n        if (parent && parent !== relativeTo && this !== relativeTo) {\n            return parent._isVisible(relativeTo);\n        }\n        else {\n            return true;\n        }\n    }\n    shouldDrawHit(top, skipDragCheck = false) {\n        if (top) {\n            return this._isVisible(top) && this._isListening(top);\n        }\n        var layer = this.getLayer();\n        var layerUnderDrag = false;\n        DD._dragElements.forEach((elem) => {\n            if (elem.dragStatus !== 'dragging') {\n                return;\n            }\n            else if (elem.node.nodeType === 'Stage') {\n                layerUnderDrag = true;\n            }\n            else if (elem.node.getLayer() === layer) {\n                layerUnderDrag = true;\n            }\n        });\n        var dragSkip = !skipDragCheck && !Konva.hitOnDragEnabled && layerUnderDrag;\n        return this.isListening() && this.isVisible() && !dragSkip;\n    }\n    show() {\n        this.visible(true);\n        return this;\n    }\n    hide() {\n        this.visible(false);\n        return this;\n    }\n    getZIndex() {\n        return this.index || 0;\n    }\n    getAbsoluteZIndex() {\n        var depth = this.getDepth(), that = this, index = 0, nodes, len, n, child;\n        function addChildren(children) {\n            nodes = [];\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                child = children[n];\n                index++;\n                if (child.nodeType !== SHAPE) {\n                    nodes = nodes.concat(child.getChildren().slice());\n                }\n                if (child._id === that._id) {\n                    n = len;\n                }\n            }\n            if (nodes.length > 0 && nodes[0].getDepth() <= depth) {\n                addChildren(nodes);\n            }\n        }\n        if (that.nodeType !== UPPER_STAGE) {\n            addChildren(that.getStage().getChildren());\n        }\n        return index;\n    }\n    getDepth() {\n        var depth = 0, parent = this.parent;\n        while (parent) {\n            depth++;\n            parent = parent.parent;\n        }\n        return depth;\n    }\n    _batchTransformChanges(func) {\n        this._batchingTransformChange = true;\n        func();\n        this._batchingTransformChange = false;\n        if (this._needClearTransformCache) {\n            this._clearCache(TRANSFORM);\n            this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        }\n        this._needClearTransformCache = false;\n    }\n    setPosition(pos) {\n        this._batchTransformChanges(() => {\n            this.x(pos.x);\n            this.y(pos.y);\n        });\n        return this;\n    }\n    getPosition() {\n        return {\n            x: this.x(),\n            y: this.y(),\n        };\n    }\n    getRelativePointerPosition() {\n        if (!this.getStage()) {\n            return null;\n        }\n        var pos = this.getStage().getPointerPosition();\n        if (!pos) {\n            return null;\n        }\n        var transform = this.getAbsoluteTransform().copy();\n        transform.invert();\n        return transform.point(pos);\n    }\n    getAbsolutePosition(top) {\n        let haveCachedParent = false;\n        let parent = this.parent;\n        while (parent) {\n            if (parent.isCached()) {\n                haveCachedParent = true;\n                break;\n            }\n            parent = parent.parent;\n        }\n        if (haveCachedParent && !top) {\n            top = true;\n        }\n        var absoluteMatrix = this.getAbsoluteTransform(top).getMatrix(), absoluteTransform = new Transform(), offset = this.offset();\n        absoluteTransform.m = absoluteMatrix.slice();\n        absoluteTransform.translate(offset.x, offset.y);\n        return absoluteTransform.getTranslation();\n    }\n    setAbsolutePosition(pos) {\n        var origTrans = this._clearTransform();\n        this.attrs.x = origTrans.x;\n        this.attrs.y = origTrans.y;\n        delete origTrans.x;\n        delete origTrans.y;\n        this._clearCache(TRANSFORM);\n        var it = this._getAbsoluteTransform().copy();\n        it.invert();\n        it.translate(pos.x, pos.y);\n        pos = {\n            x: this.attrs.x + it.getTranslation().x,\n            y: this.attrs.y + it.getTranslation().y,\n        };\n        this._setTransform(origTrans);\n        this.setPosition({ x: pos.x, y: pos.y });\n        this._clearCache(TRANSFORM);\n        this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n        return this;\n    }\n    _setTransform(trans) {\n        var key;\n        for (key in trans) {\n            this.attrs[key] = trans[key];\n        }\n    }\n    _clearTransform() {\n        var trans = {\n            x: this.x(),\n            y: this.y(),\n            rotation: this.rotation(),\n            scaleX: this.scaleX(),\n            scaleY: this.scaleY(),\n            offsetX: this.offsetX(),\n            offsetY: this.offsetY(),\n            skewX: this.skewX(),\n            skewY: this.skewY(),\n        };\n        this.attrs.x = 0;\n        this.attrs.y = 0;\n        this.attrs.rotation = 0;\n        this.attrs.scaleX = 1;\n        this.attrs.scaleY = 1;\n        this.attrs.offsetX = 0;\n        this.attrs.offsetY = 0;\n        this.attrs.skewX = 0;\n        this.attrs.skewY = 0;\n        return trans;\n    }\n    move(change) {\n        var changeX = change.x, changeY = change.y, x = this.x(), y = this.y();\n        if (changeX !== undefined) {\n            x += changeX;\n        }\n        if (changeY !== undefined) {\n            y += changeY;\n        }\n        this.setPosition({ x: x, y: y });\n        return this;\n    }\n    _eachAncestorReverse(func, top) {\n        var family = [], parent = this.getParent(), len, n;\n        if (top && top._id === this._id) {\n            return;\n        }\n        family.unshift(this);\n        while (parent && (!top || parent._id !== top._id)) {\n            family.unshift(parent);\n            parent = parent.parent;\n        }\n        len = family.length;\n        for (n = 0; n < len; n++) {\n            func(family[n]);\n        }\n    }\n    rotate(theta) {\n        this.rotation(this.rotation() + theta);\n        return this;\n    }\n    moveToTop() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToTop function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.push(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveUp() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveUp function is ignored.');\n            return false;\n        }\n        var index = this.index, len = this.parent.getChildren().length;\n        if (index < len - 1) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index + 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveDown() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveDown function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.splice(index - 1, 0, this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (!this.parent) {\n            Util.warn('Node has no parent. moveToBottom function is ignored.');\n            return false;\n        }\n        var index = this.index;\n        if (index > 0) {\n            this.parent.children.splice(index, 1);\n            this.parent.children.unshift(this);\n            this.parent._setChildrenIndices();\n            return true;\n        }\n        return false;\n    }\n    setZIndex(zIndex) {\n        if (!this.parent) {\n            Util.warn('Node has no parent. zIndex parameter is ignored.');\n            return this;\n        }\n        if (zIndex < 0 || zIndex >= this.parent.children.length) {\n            Util.warn('Unexpected value ' +\n                zIndex +\n                ' for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to ' +\n                (this.parent.children.length - 1) +\n                '.');\n        }\n        var index = this.index;\n        this.parent.children.splice(index, 1);\n        this.parent.children.splice(zIndex, 0, this);\n        this.parent._setChildrenIndices();\n        return this;\n    }\n    getAbsoluteOpacity() {\n        return this._getCache(ABSOLUTE_OPACITY, this._getAbsoluteOpacity);\n    }\n    _getAbsoluteOpacity() {\n        var absOpacity = this.opacity();\n        var parent = this.getParent();\n        if (parent && !parent._isUnderCache) {\n            absOpacity *= parent.getAbsoluteOpacity();\n        }\n        return absOpacity;\n    }\n    moveTo(newContainer) {\n        if (this.getParent() !== newContainer) {\n            this._remove();\n            newContainer.add(this);\n        }\n        return this;\n    }\n    toObject() {\n        var obj = {}, attrs = this.getAttrs(), key, val, getter, defaultValue, nonPlainObject;\n        obj.attrs = {};\n        for (key in attrs) {\n            val = attrs[key];\n            nonPlainObject =\n                Util.isObject(val) && !Util._isPlainObject(val) && !Util._isArray(val);\n            if (nonPlainObject) {\n                continue;\n            }\n            getter = typeof this[key] === 'function' && this[key];\n            delete attrs[key];\n            defaultValue = getter ? getter.call(this) : null;\n            attrs[key] = val;\n            if (defaultValue !== val) {\n                obj.attrs[key] = val;\n            }\n        }\n        obj.className = this.getClassName();\n        return Util._prepareToStringify(obj);\n    }\n    toJSON() {\n        return JSON.stringify(this.toObject());\n    }\n    getParent() {\n        return this.parent;\n    }\n    findAncestors(selector, includeSelf, stopNode) {\n        var res = [];\n        if (includeSelf && this._isMatch(selector)) {\n            res.push(this);\n        }\n        var ancestor = this.parent;\n        while (ancestor) {\n            if (ancestor === stopNode) {\n                return res;\n            }\n            if (ancestor._isMatch(selector)) {\n                res.push(ancestor);\n            }\n            ancestor = ancestor.parent;\n        }\n        return res;\n    }\n    isAncestorOf(node) {\n        return false;\n    }\n    findAncestor(selector, includeSelf, stopNode) {\n        return this.findAncestors(selector, includeSelf, stopNode)[0];\n    }\n    _isMatch(selector) {\n        if (!selector) {\n            return false;\n        }\n        if (typeof selector === 'function') {\n            return selector(this);\n        }\n        var selectorArr = selector.replace(/ /g, '').split(','), len = selectorArr.length, n, sel;\n        for (n = 0; n < len; n++) {\n            sel = selectorArr[n];\n            if (!Util.isValidSelector(sel)) {\n                Util.warn('Selector \"' +\n                    sel +\n                    '\" is invalid. Allowed selectors examples are \"#foo\", \".bar\" or \"Group\".');\n                Util.warn('If you have a custom shape with such className, please change it to start with upper letter like \"Triangle\".');\n                Util.warn('Konva is awesome, right?');\n            }\n            if (sel.charAt(0) === '#') {\n                if (this.id() === sel.slice(1)) {\n                    return true;\n                }\n            }\n            else if (sel.charAt(0) === '.') {\n                if (this.hasName(sel.slice(1))) {\n                    return true;\n                }\n            }\n            else if (this.className === sel || this.nodeType === sel) {\n                return true;\n            }\n        }\n        return false;\n    }\n    getLayer() {\n        var parent = this.getParent();\n        return parent ? parent.getLayer() : null;\n    }\n    getStage() {\n        return this._getCache(STAGE, this._getStage);\n    }\n    _getStage() {\n        var parent = this.getParent();\n        if (parent) {\n            return parent.getStage();\n        }\n        else {\n            return undefined;\n        }\n    }\n    fire(eventType, evt = {}, bubble) {\n        evt.target = evt.target || this;\n        if (bubble) {\n            this._fireAndBubble(eventType, evt);\n        }\n        else {\n            this._fire(eventType, evt);\n        }\n        return this;\n    }\n    getAbsoluteTransform(top) {\n        if (top) {\n            return this._getAbsoluteTransform(top);\n        }\n        else {\n            return this._getCache(ABSOLUTE_TRANSFORM, this._getAbsoluteTransform);\n        }\n    }\n    _getAbsoluteTransform(top) {\n        var at;\n        if (top) {\n            at = new Transform();\n            this._eachAncestorReverse(function (node) {\n                var transformsEnabled = node.transformsEnabled();\n                if (transformsEnabled === 'all') {\n                    at.multiply(node.getTransform());\n                }\n                else if (transformsEnabled === 'position') {\n                    at.translate(node.x() - node.offsetX(), node.y() - node.offsetY());\n                }\n            }, top);\n            return at;\n        }\n        else {\n            at = this._cache.get(ABSOLUTE_TRANSFORM) || new Transform();\n            if (this.parent) {\n                this.parent.getAbsoluteTransform().copyInto(at);\n            }\n            else {\n                at.reset();\n            }\n            var transformsEnabled = this.transformsEnabled();\n            if (transformsEnabled === 'all') {\n                at.multiply(this.getTransform());\n            }\n            else if (transformsEnabled === 'position') {\n                const x = this.attrs.x || 0;\n                const y = this.attrs.y || 0;\n                const offsetX = this.attrs.offsetX || 0;\n                const offsetY = this.attrs.offsetY || 0;\n                at.translate(x - offsetX, y - offsetY);\n            }\n            at.dirty = false;\n            return at;\n        }\n    }\n    getAbsoluteScale(top) {\n        var parent = this;\n        while (parent) {\n            if (parent._isUnderCache) {\n                top = parent;\n            }\n            parent = parent.getParent();\n        }\n        const transform = this.getAbsoluteTransform(top);\n        const attrs = transform.decompose();\n        return {\n            x: attrs.scaleX,\n            y: attrs.scaleY,\n        };\n    }\n    getAbsoluteRotation() {\n        return this.getAbsoluteTransform().decompose().rotation;\n    }\n    getTransform() {\n        return this._getCache(TRANSFORM, this._getTransform);\n    }\n    _getTransform() {\n        var _a, _b;\n        var m = this._cache.get(TRANSFORM) || new Transform();\n        m.reset();\n        var x = this.x(), y = this.y(), rotation = Konva.getAngle(this.rotation()), scaleX = (_a = this.attrs.scaleX) !== null && _a !== void 0 ? _a : 1, scaleY = (_b = this.attrs.scaleY) !== null && _b !== void 0 ? _b : 1, skewX = this.attrs.skewX || 0, skewY = this.attrs.skewY || 0, offsetX = this.attrs.offsetX || 0, offsetY = this.attrs.offsetY || 0;\n        if (x !== 0 || y !== 0) {\n            m.translate(x, y);\n        }\n        if (rotation !== 0) {\n            m.rotate(rotation);\n        }\n        if (skewX !== 0 || skewY !== 0) {\n            m.skew(skewX, skewY);\n        }\n        if (scaleX !== 1 || scaleY !== 1) {\n            m.scale(scaleX, scaleY);\n        }\n        if (offsetX !== 0 || offsetY !== 0) {\n            m.translate(-1 * offsetX, -1 * offsetY);\n        }\n        m.dirty = false;\n        return m;\n    }\n    clone(obj) {\n        var attrs = Util.cloneObject(this.attrs), key, allListeners, len, n, listener;\n        for (key in obj) {\n            attrs[key] = obj[key];\n        }\n        var node = new this.constructor(attrs);\n        for (key in this.eventListeners) {\n            allListeners = this.eventListeners[key];\n            len = allListeners.length;\n            for (n = 0; n < len; n++) {\n                listener = allListeners[n];\n                if (listener.name.indexOf(KONVA) < 0) {\n                    if (!node.eventListeners[key]) {\n                        node.eventListeners[key] = [];\n                    }\n                    node.eventListeners[key].push(listener);\n                }\n            }\n        }\n        return node;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        var box = this.getClientRect();\n        var stage = this.getStage(), x = config.x !== undefined ? config.x : Math.floor(box.x), y = config.y !== undefined ? config.y : Math.floor(box.y), pixelRatio = config.pixelRatio || 1, canvas = new SceneCanvas({\n            width: config.width || Math.ceil(box.width) || (stage ? stage.width() : 0),\n            height: config.height ||\n                Math.ceil(box.height) ||\n                (stage ? stage.height() : 0),\n            pixelRatio: pixelRatio,\n        }), context = canvas.getContext();\n        if (config.imageSmoothingEnabled === false) {\n            context._context.imageSmoothingEnabled = false;\n        }\n        context.save();\n        if (x || y) {\n            context.translate(-1 * x, -1 * y);\n        }\n        this.drawScene(canvas);\n        context.restore();\n        return canvas;\n    }\n    toCanvas(config) {\n        return this._toKonvaCanvas(config)._canvas;\n    }\n    toDataURL(config) {\n        config = config || {};\n        var mimeType = config.mimeType || null, quality = config.quality || null;\n        var url = this._toKonvaCanvas(config).toDataURL(mimeType, quality);\n        if (config.callback) {\n            config.callback(url);\n        }\n        return url;\n    }\n    toImage(config) {\n        if (!config || !config.callback) {\n            throw 'callback required for toImage method config argument';\n        }\n        var callback = config.callback;\n        delete config.callback;\n        Util._urlToImage(this.toDataURL(config), function (img) {\n            callback(img);\n        });\n    }\n    setSize(size) {\n        this.width(size.width);\n        this.height(size.height);\n        return this;\n    }\n    getSize() {\n        return {\n            width: this.width(),\n            height: this.height(),\n        };\n    }\n    getClassName() {\n        return this.className || this.nodeType;\n    }\n    getType() {\n        return this.nodeType;\n    }\n    getDragDistance() {\n        if (this.attrs.dragDistance !== undefined) {\n            return this.attrs.dragDistance;\n        }\n        else if (this.parent) {\n            return this.parent.getDragDistance();\n        }\n        else {\n            return Konva.dragDistance;\n        }\n    }\n    _off(type, name, callback) {\n        var evtListeners = this.eventListeners[type], i, evtName, handler;\n        for (i = 0; i < evtListeners.length; i++) {\n            evtName = evtListeners[i].name;\n            handler = evtListeners[i].handler;\n            if ((evtName !== 'konva' || name === 'konva') &&\n                (!name || evtName === name) &&\n                (!callback || callback === handler)) {\n                evtListeners.splice(i, 1);\n                if (evtListeners.length === 0) {\n                    delete this.eventListeners[type];\n                    break;\n                }\n                i--;\n            }\n        }\n    }\n    _fireChangeEvent(attr, oldVal, newVal) {\n        this._fire(attr + CHANGE, {\n            oldVal: oldVal,\n            newVal: newVal,\n        });\n    }\n    addName(name) {\n        if (!this.hasName(name)) {\n            var oldName = this.name();\n            var newName = oldName ? oldName + ' ' + name : name;\n            this.name(newName);\n        }\n        return this;\n    }\n    hasName(name) {\n        if (!name) {\n            return false;\n        }\n        const fullName = this.name();\n        if (!fullName) {\n            return false;\n        }\n        var names = (fullName || '').split(/\\s/g);\n        return names.indexOf(name) !== -1;\n    }\n    removeName(name) {\n        var names = (this.name() || '').split(/\\s/g);\n        var index = names.indexOf(name);\n        if (index !== -1) {\n            names.splice(index, 1);\n            this.name(names.join(' '));\n        }\n        return this;\n    }\n    setAttr(attr, val) {\n        var func = this[SET + Util._capitalize(attr)];\n        if (Util._isFunction(func)) {\n            func.call(this, val);\n        }\n        else {\n            this._setAttr(attr, val);\n        }\n        return this;\n    }\n    _requestDraw() {\n        if (Konva.autoDrawEnabled) {\n            const drawNode = this.getLayer() || this.getStage();\n            drawNode === null || drawNode === void 0 ? void 0 : drawNode.batchDraw();\n        }\n    }\n    _setAttr(key, val) {\n        var oldVal = this.attrs[key];\n        if (oldVal === val && !Util.isObject(val)) {\n            return;\n        }\n        if (val === undefined || val === null) {\n            delete this.attrs[key];\n        }\n        else {\n            this.attrs[key] = val;\n        }\n        if (this._shouldFireChangeEvents) {\n            this._fireChangeEvent(key, oldVal, val);\n        }\n        this._requestDraw();\n    }\n    _setComponentAttr(key, component, val) {\n        var oldVal;\n        if (val !== undefined) {\n            oldVal = this.attrs[key];\n            if (!oldVal) {\n                this.attrs[key] = this.getAttr(key);\n            }\n            this.attrs[key][component] = val;\n            this._fireChangeEvent(key, oldVal, val);\n        }\n    }\n    _fireAndBubble(eventType, evt, compareShape) {\n        if (evt && this.nodeType === SHAPE) {\n            evt.target = this;\n        }\n        var shouldStop = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n            ((compareShape &&\n                (this === compareShape ||\n                    (this.isAncestorOf && this.isAncestorOf(compareShape)))) ||\n                (this.nodeType === 'Stage' && !compareShape));\n        if (!shouldStop) {\n            this._fire(eventType, evt);\n            var stopBubble = (eventType === MOUSEENTER || eventType === MOUSELEAVE) &&\n                compareShape &&\n                compareShape.isAncestorOf &&\n                compareShape.isAncestorOf(this) &&\n                !compareShape.isAncestorOf(this.parent);\n            if (((evt && !evt.cancelBubble) || !evt) &&\n                this.parent &&\n                this.parent.isListening() &&\n                !stopBubble) {\n                if (compareShape && compareShape.parent) {\n                    this._fireAndBubble.call(this.parent, eventType, evt, compareShape);\n                }\n                else {\n                    this._fireAndBubble.call(this.parent, eventType, evt);\n                }\n            }\n        }\n    }\n    _getProtoListeners(eventType) {\n        let listeners = this._cache.get(ALL_LISTENERS);\n        if (!listeners) {\n            listeners = {};\n            let obj = Object.getPrototypeOf(this);\n            while (obj) {\n                if (!obj.eventListeners) {\n                    obj = Object.getPrototypeOf(obj);\n                    continue;\n                }\n                for (var event in obj.eventListeners) {\n                    const newEvents = obj.eventListeners[event];\n                    const oldEvents = listeners[event] || [];\n                    listeners[event] = newEvents.concat(oldEvents);\n                }\n                obj = Object.getPrototypeOf(obj);\n            }\n            this._cache.set(ALL_LISTENERS, listeners);\n        }\n        return listeners[eventType];\n    }\n    _fire(eventType, evt) {\n        evt = evt || {};\n        evt.currentTarget = this;\n        evt.type = eventType;\n        const topListeners = this._getProtoListeners(eventType);\n        if (topListeners) {\n            for (var i = 0; i < topListeners.length; i++) {\n                topListeners[i].handler.call(this, evt);\n            }\n        }\n        const selfListeners = this.eventListeners[eventType];\n        if (selfListeners) {\n            for (var i = 0; i < selfListeners.length; i++) {\n                selfListeners[i].handler.call(this, evt);\n            }\n        }\n    }\n    draw() {\n        this.drawScene();\n        this.drawHit();\n        return this;\n    }\n    _createDragElement(evt) {\n        var pointerId = evt ? evt.pointerId : undefined;\n        var stage = this.getStage();\n        var ap = this.getAbsolutePosition();\n        var pos = stage._getPointerById(pointerId) ||\n            stage._changedPointerPositions[0] ||\n            ap;\n        DD._dragElements.set(this._id, {\n            node: this,\n            startPointerPos: pos,\n            offset: {\n                x: pos.x - ap.x,\n                y: pos.y - ap.y,\n            },\n            dragStatus: 'ready',\n            pointerId,\n        });\n    }\n    startDrag(evt, bubbleEvent = true) {\n        if (!DD._dragElements.has(this._id)) {\n            this._createDragElement(evt);\n        }\n        const elem = DD._dragElements.get(this._id);\n        elem.dragStatus = 'dragging';\n        this.fire('dragstart', {\n            type: 'dragstart',\n            target: this,\n            evt: evt && evt.evt,\n        }, bubbleEvent);\n    }\n    _setDragPosition(evt, elem) {\n        const pos = this.getStage()._getPointerById(elem.pointerId);\n        if (!pos) {\n            return;\n        }\n        var newNodePos = {\n            x: pos.x - elem.offset.x,\n            y: pos.y - elem.offset.y,\n        };\n        var dbf = this.dragBoundFunc();\n        if (dbf !== undefined) {\n            const bounded = dbf.call(this, newNodePos, evt);\n            if (!bounded) {\n                Util.warn('dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.');\n            }\n            else {\n                newNodePos = bounded;\n            }\n        }\n        if (!this._lastPos ||\n            this._lastPos.x !== newNodePos.x ||\n            this._lastPos.y !== newNodePos.y) {\n            this.setAbsolutePosition(newNodePos);\n            this._requestDraw();\n        }\n        this._lastPos = newNodePos;\n    }\n    stopDrag(evt) {\n        const elem = DD._dragElements.get(this._id);\n        if (elem) {\n            elem.dragStatus = 'stopped';\n        }\n        DD._endDragBefore(evt);\n        DD._endDragAfter(evt);\n    }\n    setDraggable(draggable) {\n        this._setAttr('draggable', draggable);\n        this._dragChange();\n    }\n    isDragging() {\n        const elem = DD._dragElements.get(this._id);\n        return elem ? elem.dragStatus === 'dragging' : false;\n    }\n    _listenDrag() {\n        this._dragCleanup();\n        this.on('mousedown.konva touchstart.konva', function (evt) {\n            var shouldCheckButton = evt.evt['button'] !== undefined;\n            var canDrag = !shouldCheckButton || Konva.dragButtons.indexOf(evt.evt['button']) >= 0;\n            if (!canDrag) {\n                return;\n            }\n            if (this.isDragging()) {\n                return;\n            }\n            var hasDraggingChild = false;\n            DD._dragElements.forEach((elem) => {\n                if (this.isAncestorOf(elem.node)) {\n                    hasDraggingChild = true;\n                }\n            });\n            if (!hasDraggingChild) {\n                this._createDragElement(evt);\n            }\n        });\n    }\n    _dragChange() {\n        if (this.attrs.draggable) {\n            this._listenDrag();\n        }\n        else {\n            this._dragCleanup();\n            var stage = this.getStage();\n            if (!stage) {\n                return;\n            }\n            const dragElement = DD._dragElements.get(this._id);\n            const isDragging = dragElement && dragElement.dragStatus === 'dragging';\n            const isReady = dragElement && dragElement.dragStatus === 'ready';\n            if (isDragging) {\n                this.stopDrag();\n            }\n            else if (isReady) {\n                DD._dragElements.delete(this._id);\n            }\n        }\n    }\n    _dragCleanup() {\n        this.off('mousedown.konva');\n        this.off('touchstart.konva');\n    }\n    isClientRectOnScreen(margin = { x: 0, y: 0 }) {\n        const stage = this.getStage();\n        if (!stage) {\n            return false;\n        }\n        const screenRect = {\n            x: -margin.x,\n            y: -margin.y,\n            width: stage.width() + 2 * margin.x,\n            height: stage.height() + 2 * margin.y,\n        };\n        return Util.haveIntersection(screenRect, this.getClientRect());\n    }\n    static create(data, container) {\n        if (Util._isString(data)) {\n            data = JSON.parse(data);\n        }\n        return this._createNode(data, container);\n    }\n    static _createNode(obj, container) {\n        var className = Node.prototype.getClassName.call(obj), children = obj.children, no, len, n;\n        if (container) {\n            obj.attrs.container = container;\n        }\n        if (!Konva[className]) {\n            Util.warn('Can not find a node with class name \"' +\n                className +\n                '\". Fallback to \"Shape\".');\n            className = 'Shape';\n        }\n        const Class = Konva[className];\n        no = new Class(obj.attrs);\n        if (children) {\n            len = children.length;\n            for (n = 0; n < len; n++) {\n                no.add(Node._createNode(children[n]));\n            }\n        }\n        return no;\n    }\n}\nNode.prototype.nodeType = 'Node';\nNode.prototype._attrsAffectingSize = [];\nNode.prototype.eventListeners = {};\nNode.prototype.on.call(Node.prototype, TRANSFORM_CHANGE_STR, function () {\n    if (this._batchingTransformChange) {\n        this._needClearTransformCache = true;\n        return;\n    }\n    this._clearCache(TRANSFORM);\n    this._clearSelfAndDescendantCache(ABSOLUTE_TRANSFORM);\n});\nNode.prototype.on.call(Node.prototype, 'visibleChange.konva', function () {\n    this._clearSelfAndDescendantCache(VISIBLE);\n});\nNode.prototype.on.call(Node.prototype, 'listeningChange.konva', function () {\n    this._clearSelfAndDescendantCache(LISTENING);\n});\nNode.prototype.on.call(Node.prototype, 'opacityChange.konva', function () {\n    this._clearSelfAndDescendantCache(ABSOLUTE_OPACITY);\n});\nconst addGetterSetter = Factory.addGetterSetter;\naddGetterSetter(Node, 'zIndex');\naddGetterSetter(Node, 'absolutePosition');\naddGetterSetter(Node, 'position');\naddGetterSetter(Node, 'x', 0, getNumberValidator());\naddGetterSetter(Node, 'y', 0, getNumberValidator());\naddGetterSetter(Node, 'globalCompositeOperation', 'source-over', getStringValidator());\naddGetterSetter(Node, 'opacity', 1, getNumberValidator());\naddGetterSetter(Node, 'name', '', getStringValidator());\naddGetterSetter(Node, 'id', '', getStringValidator());\naddGetterSetter(Node, 'rotation', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'scale', ['x', 'y']);\naddGetterSetter(Node, 'scaleX', 1, getNumberValidator());\naddGetterSetter(Node, 'scaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'skew', ['x', 'y']);\naddGetterSetter(Node, 'skewX', 0, getNumberValidator());\naddGetterSetter(Node, 'skewY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Node, 'offset', ['x', 'y']);\naddGetterSetter(Node, 'offsetX', 0, getNumberValidator());\naddGetterSetter(Node, 'offsetY', 0, getNumberValidator());\naddGetterSetter(Node, 'dragDistance', null, getNumberValidator());\naddGetterSetter(Node, 'width', 0, getNumberValidator());\naddGetterSetter(Node, 'height', 0, getNumberValidator());\naddGetterSetter(Node, 'listening', true, getBooleanValidator());\naddGetterSetter(Node, 'preventDefault', true, getBooleanValidator());\naddGetterSetter(Node, 'filters', null, function (val) {\n    this._filterUpToDate = false;\n    return val;\n});\naddGetterSetter(Node, 'visible', true, getBooleanValidator());\naddGetterSetter(Node, 'transformsEnabled', 'all', getStringValidator());\naddGetterSetter(Node, 'size');\naddGetterSetter(Node, 'dragBoundFunc');\naddGetterSetter(Node, 'draggable', false, getBooleanValidator());\nFactory.backCompat(Node, {\n    rotateDeg: 'rotate',\n    setRotationDeg: 'setRotation',\n    getRotationDeg: 'getRotation',\n});\n","import { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator } from './Validators.js';\nexport class Container extends Node {\n    constructor() {\n        super(...arguments);\n        this.children = [];\n    }\n    getChildren(filterFunc) {\n        if (!filterFunc) {\n            return this.children || [];\n        }\n        const children = this.children || [];\n        var results = [];\n        children.forEach(function (child) {\n            if (filterFunc(child)) {\n                results.push(child);\n            }\n        });\n        return results;\n    }\n    hasChildren() {\n        return this.getChildren().length > 0;\n    }\n    removeChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.remove();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    destroyChildren() {\n        this.getChildren().forEach((child) => {\n            child.parent = null;\n            child.index = 0;\n            child.destroy();\n        });\n        this.children = [];\n        this._requestDraw();\n        return this;\n    }\n    add(...children) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        var child = children[0];\n        if (child.getParent()) {\n            child.moveTo(this);\n            return this;\n        }\n        this._validateAdd(child);\n        child.index = this.getChildren().length;\n        child.parent = this;\n        child._clearCaches();\n        this.getChildren().push(child);\n        this._fire('add', {\n            child: child,\n        });\n        this._requestDraw();\n        return this;\n    }\n    destroy() {\n        if (this.hasChildren()) {\n            this.destroyChildren();\n        }\n        super.destroy();\n        return this;\n    }\n    find(selector) {\n        return this._generalFind(selector, false);\n    }\n    findOne(selector) {\n        var result = this._generalFind(selector, true);\n        return result.length > 0 ? result[0] : undefined;\n    }\n    _generalFind(selector, findOne) {\n        var retArr = [];\n        this._descendants((node) => {\n            const valid = node._isMatch(selector);\n            if (valid) {\n                retArr.push(node);\n            }\n            if (valid && findOne) {\n                return true;\n            }\n            return false;\n        });\n        return retArr;\n    }\n    _descendants(fn) {\n        let shouldStop = false;\n        const children = this.getChildren();\n        for (const child of children) {\n            shouldStop = fn(child);\n            if (shouldStop) {\n                return true;\n            }\n            if (!child.hasChildren()) {\n                continue;\n            }\n            shouldStop = child._descendants(fn);\n            if (shouldStop) {\n                return true;\n            }\n        }\n        return false;\n    }\n    toObject() {\n        var obj = Node.prototype.toObject.call(this);\n        obj.children = [];\n        this.getChildren().forEach((child) => {\n            obj.children.push(child.toObject());\n        });\n        return obj;\n    }\n    isAncestorOf(node) {\n        var parent = node.getParent();\n        while (parent) {\n            if (parent._id === this._id) {\n                return true;\n            }\n            parent = parent.getParent();\n        }\n        return false;\n    }\n    clone(obj) {\n        var node = Node.prototype.clone.call(this, obj);\n        this.getChildren().forEach(function (no) {\n            node.add(no.clone());\n        });\n        return node;\n    }\n    getAllIntersections(pos) {\n        var arr = [];\n        this.find('Shape').forEach(function (shape) {\n            if (shape.isVisible() && shape.intersects(pos)) {\n                arr.push(shape);\n            }\n        });\n        return arr;\n    }\n    _clearSelfAndDescendantCache(attr) {\n        var _a;\n        super._clearSelfAndDescendantCache(attr);\n        if (this.isCached()) {\n            return;\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (node) {\n            node._clearSelfAndDescendantCache(attr);\n        });\n    }\n    _setChildrenIndices() {\n        var _a;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child, n) {\n            child.index = n;\n        });\n        this._requestDraw();\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas()), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedSceneCanvas = cachedCanvas && cachedCanvas.scene;\n        var caching = canvas && canvas.isCache;\n        if (!this.isVisible() && !caching) {\n            return this;\n        }\n        if (cachedSceneCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawScene', canvas, top);\n        }\n        return this;\n    }\n    drawHit(can, top) {\n        if (!this.shouldDrawHit(top)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas), context = canvas && canvas.getContext(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n        }\n        else {\n            this._drawChildren('drawHit', canvas, top);\n        }\n        return this;\n    }\n    _drawChildren(drawMethod, canvas, top) {\n        var _a;\n        var context = canvas && canvas.getContext(), clipWidth = this.clipWidth(), clipHeight = this.clipHeight(), clipFunc = this.clipFunc(), hasClip = (clipWidth && clipHeight) || clipFunc;\n        const selfCache = top === this;\n        if (hasClip) {\n            context.save();\n            var transform = this.getAbsoluteTransform(top);\n            var m = transform.getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            context.beginPath();\n            if (clipFunc) {\n                clipFunc.call(this, context, this);\n            }\n            else {\n                var clipX = this.clipX();\n                var clipY = this.clipY();\n                context.rect(clipX, clipY, clipWidth, clipHeight);\n            }\n            context.clip();\n            m = transform.copy().invert().getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n        }\n        var hasComposition = !selfCache &&\n            this.globalCompositeOperation() !== 'source-over' &&\n            drawMethod === 'drawScene';\n        if (hasComposition) {\n            context.save();\n            context._applyGlobalCompositeOperation(this);\n        }\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            child[drawMethod](canvas, top);\n        });\n        if (hasComposition) {\n            context.restore();\n        }\n        if (hasClip) {\n            context.restore();\n        }\n    }\n    getClientRect(config) {\n        var _a;\n        config = config || {};\n        var skipTransform = config.skipTransform;\n        var relativeTo = config.relativeTo;\n        var minX, minY, maxX, maxY;\n        var selfRect = {\n            x: Infinity,\n            y: Infinity,\n            width: 0,\n            height: 0,\n        };\n        var that = this;\n        (_a = this.children) === null || _a === void 0 ? void 0 : _a.forEach(function (child) {\n            if (!child.visible()) {\n                return;\n            }\n            var rect = child.getClientRect({\n                relativeTo: that,\n                skipShadow: config.skipShadow,\n                skipStroke: config.skipStroke,\n            });\n            if (rect.width === 0 && rect.height === 0) {\n                return;\n            }\n            if (minX === undefined) {\n                minX = rect.x;\n                minY = rect.y;\n                maxX = rect.x + rect.width;\n                maxY = rect.y + rect.height;\n            }\n            else {\n                minX = Math.min(minX, rect.x);\n                minY = Math.min(minY, rect.y);\n                maxX = Math.max(maxX, rect.x + rect.width);\n                maxY = Math.max(maxY, rect.y + rect.height);\n            }\n        });\n        var shapes = this.find('Shape');\n        var hasVisible = false;\n        for (var i = 0; i < shapes.length; i++) {\n            var shape = shapes[i];\n            if (shape._isVisible(this)) {\n                hasVisible = true;\n                break;\n            }\n        }\n        if (hasVisible && minX !== undefined) {\n            selfRect = {\n                x: minX,\n                y: minY,\n                width: maxX - minX,\n                height: maxY - minY,\n            };\n        }\n        else {\n            selfRect = {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (!skipTransform) {\n            return this._transformedRect(selfRect, relativeTo);\n        }\n        return selfRect;\n    }\n}\nFactory.addComponentsGetterSetter(Container, 'clip', [\n    'x',\n    'y',\n    'width',\n    'height',\n]);\nFactory.addGetterSetter(Container, 'clipX', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipY', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipWidth', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipHeight', undefined, getNumberValidator());\nFactory.addGetterSetter(Container, 'clipFunc');\n","import { Konva } from './Global.js';\nconst Captures = new Map();\nconst SUPPORT_POINTER_EVENTS = Konva._global['PointerEvent'] !== undefined;\nexport function getCapturedShape(pointerId) {\n    return Captures.get(pointerId);\n}\nexport function createEvent(evt) {\n    return {\n        evt,\n        pointerId: evt.pointerId,\n    };\n}\nexport function hasPointerCapture(pointerId, shape) {\n    return Captures.get(pointerId) === shape;\n}\nexport function setPointerCapture(pointerId, shape) {\n    releaseCapture(pointerId);\n    const stage = shape.getStage();\n    if (!stage)\n        return;\n    Captures.set(pointerId, shape);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('gotpointercapture', createEvent(new PointerEvent('gotpointercapture')));\n    }\n}\nexport function releaseCapture(pointerId, target) {\n    const shape = Captures.get(pointerId);\n    if (!shape)\n        return;\n    const stage = shape.getStage();\n    if (stage && stage.content) {\n    }\n    Captures.delete(pointerId);\n    if (SUPPORT_POINTER_EVENTS) {\n        shape._fire('lostpointercapture', createEvent(new PointerEvent('lostpointercapture')));\n    }\n}\n","import { Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Container } from './Container.js';\nimport { Konva } from './Global.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { DD } from './DragAndDrop.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar STAGE = 'Stage', STRING = 'string', PX = 'px', MOUSEOUT = 'mouseout', MOUSELEAVE = 'mouseleave', MOUSEOVER = 'mouseover', MOUSEENTER = 'mouseenter', MOUSEMOVE = 'mousemove', MOUSEDOWN = 'mousedown', MOUSEUP = 'mouseup', POINTERMOVE = 'pointermove', POINTERDOWN = 'pointerdown', POINTERUP = 'pointerup', POINTERCANCEL = 'pointercancel', LOSTPOINTERCAPTURE = 'lostpointercapture', POINTEROUT = 'pointerout', POINTERLEAVE = 'pointerleave', POINTEROVER = 'pointerover', POINTERENTER = 'pointerenter', CONTEXTMENU = 'contextmenu', TOUCHSTART = 'touchstart', TOUCHEND = 'touchend', TOUCHMOVE = 'touchmove', TOUCHCANCEL = 'touchcancel', WHEEL = 'wheel', MAX_LAYERS_NUMBER = 5, EVENTS = [\n    [MOUSEENTER, '_pointerenter'],\n    [MOUSEDOWN, '_pointerdown'],\n    [MOUSEMOVE, '_pointermove'],\n    [MOUSEUP, '_pointerup'],\n    [MOUSELEAVE, '_pointerleave'],\n    [TOUCHSTART, '_pointerdown'],\n    [TOUCHMOVE, '_pointermove'],\n    [TOUCHEND, '_pointerup'],\n    [TOUCHCANCEL, '_pointercancel'],\n    [MOUSEOVER, '_pointerover'],\n    [WHEEL, '_wheel'],\n    [CONTEXTMENU, '_contextmenu'],\n    [POINTERDOWN, '_pointerdown'],\n    [POINTERMOVE, '_pointermove'],\n    [POINTERUP, '_pointerup'],\n    [POINTERCANCEL, '_pointercancel'],\n    [LOSTPOINTERCAPTURE, '_lostpointercapture'],\n];\nconst EVENTS_MAP = {\n    mouse: {\n        [POINTEROUT]: MOUSEOUT,\n        [POINTERLEAVE]: MOUSELEAVE,\n        [POINTEROVER]: MOUSEOVER,\n        [POINTERENTER]: MOUSEENTER,\n        [POINTERMOVE]: MOUSEMOVE,\n        [POINTERDOWN]: MOUSEDOWN,\n        [POINTERUP]: MOUSEUP,\n        [POINTERCANCEL]: 'mousecancel',\n        pointerclick: 'click',\n        pointerdblclick: 'dblclick',\n    },\n    touch: {\n        [POINTEROUT]: 'touchout',\n        [POINTERLEAVE]: 'touchleave',\n        [POINTEROVER]: 'touchover',\n        [POINTERENTER]: 'touchenter',\n        [POINTERMOVE]: TOUCHMOVE,\n        [POINTERDOWN]: TOUCHSTART,\n        [POINTERUP]: TOUCHEND,\n        [POINTERCANCEL]: TOUCHCANCEL,\n        pointerclick: 'tap',\n        pointerdblclick: 'dbltap',\n    },\n    pointer: {\n        [POINTEROUT]: POINTEROUT,\n        [POINTERLEAVE]: POINTERLEAVE,\n        [POINTEROVER]: POINTEROVER,\n        [POINTERENTER]: POINTERENTER,\n        [POINTERMOVE]: POINTERMOVE,\n        [POINTERDOWN]: POINTERDOWN,\n        [POINTERUP]: POINTERUP,\n        [POINTERCANCEL]: POINTERCANCEL,\n        pointerclick: 'pointerclick',\n        pointerdblclick: 'pointerdblclick',\n    },\n};\nconst getEventType = (type) => {\n    if (type.indexOf('pointer') >= 0) {\n        return 'pointer';\n    }\n    if (type.indexOf('touch') >= 0) {\n        return 'touch';\n    }\n    return 'mouse';\n};\nconst getEventsMap = (eventType) => {\n    const type = getEventType(eventType);\n    if (type === 'pointer') {\n        return Konva.pointerEventsEnabled && EVENTS_MAP.pointer;\n    }\n    if (type === 'touch') {\n        return EVENTS_MAP.touch;\n    }\n    if (type === 'mouse') {\n        return EVENTS_MAP.mouse;\n    }\n};\nfunction checkNoClip(attrs = {}) {\n    if (attrs.clipFunc || attrs.clipWidth || attrs.clipHeight) {\n        Util.warn('Stage does not support clipping. Please use clip for Layers or Groups.');\n    }\n    return attrs;\n}\nconst NO_POINTERS_MESSAGE = `Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);`;\nexport const stages = [];\nexport class Stage extends Container {\n    constructor(config) {\n        super(checkNoClip(config));\n        this._pointerPositions = [];\n        this._changedPointerPositions = [];\n        this._buildDOM();\n        this._bindContentEvents();\n        stages.push(this);\n        this.on('widthChange.konva heightChange.konva', this._resizeDOM);\n        this.on('visibleChange.konva', this._checkVisibility);\n        this.on('clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva', () => {\n            checkNoClip(this.attrs);\n        });\n        this._checkVisibility();\n    }\n    _validateAdd(child) {\n        const isLayer = child.getType() === 'Layer';\n        const isFastLayer = child.getType() === 'FastLayer';\n        const valid = isLayer || isFastLayer;\n        if (!valid) {\n            Util.throw('You may only add layers to the stage.');\n        }\n    }\n    _checkVisibility() {\n        if (!this.content) {\n            return;\n        }\n        const style = this.visible() ? '' : 'none';\n        this.content.style.display = style;\n    }\n    setContainer(container) {\n        if (typeof container === STRING) {\n            if (container.charAt(0) === '.') {\n                var className = container.slice(1);\n                container = document.getElementsByClassName(className)[0];\n            }\n            else {\n                var id;\n                if (container.charAt(0) !== '#') {\n                    id = container;\n                }\n                else {\n                    id = container.slice(1);\n                }\n                container = document.getElementById(id);\n            }\n            if (!container) {\n                throw 'Can not find container in document with id ' + id;\n            }\n        }\n        this._setAttr('container', container);\n        if (this.content) {\n            if (this.content.parentElement) {\n                this.content.parentElement.removeChild(this.content);\n            }\n            container.appendChild(this.content);\n        }\n        return this;\n    }\n    shouldDrawHit() {\n        return true;\n    }\n    clear() {\n        var layers = this.children, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            layers[n].clear();\n        }\n        return this;\n    }\n    clone(obj) {\n        if (!obj) {\n            obj = {};\n        }\n        obj.container =\n            typeof document !== 'undefined' && document.createElement('div');\n        return Container.prototype.clone.call(this, obj);\n    }\n    destroy() {\n        super.destroy();\n        var content = this.content;\n        if (content && Util._isInDocument(content)) {\n            this.container().removeChild(content);\n        }\n        var index = stages.indexOf(this);\n        if (index > -1) {\n            stages.splice(index, 1);\n        }\n        return this;\n    }\n    getPointerPosition() {\n        const pos = this._pointerPositions[0] || this._changedPointerPositions[0];\n        if (!pos) {\n            Util.warn(NO_POINTERS_MESSAGE);\n            return null;\n        }\n        return {\n            x: pos.x,\n            y: pos.y,\n        };\n    }\n    _getPointerById(id) {\n        return this._pointerPositions.find((p) => p.id === id);\n    }\n    getPointersPositions() {\n        return this._pointerPositions;\n    }\n    getStage() {\n        return this;\n    }\n    getContent() {\n        return this.content;\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.x = config.x || 0;\n        config.y = config.y || 0;\n        config.width = config.width || this.width();\n        config.height = config.height || this.height();\n        var canvas = new SceneCanvas({\n            width: config.width,\n            height: config.height,\n            pixelRatio: config.pixelRatio || 1,\n        });\n        var _context = canvas.getContext()._context;\n        var layers = this.children;\n        if (config.x || config.y) {\n            _context.translate(-1 * config.x, -1 * config.y);\n        }\n        layers.forEach(function (layer) {\n            if (!layer.isVisible()) {\n                return;\n            }\n            var layerCanvas = layer._toKonvaCanvas(config);\n            _context.drawImage(layerCanvas._canvas, config.x, config.y, layerCanvas.getWidth() / layerCanvas.getPixelRatio(), layerCanvas.getHeight() / layerCanvas.getPixelRatio());\n        });\n        return canvas;\n    }\n    getIntersection(pos) {\n        if (!pos) {\n            return null;\n        }\n        var layers = this.children, len = layers.length, end = len - 1, n;\n        for (n = end; n >= 0; n--) {\n            const shape = layers[n].getIntersection(pos);\n            if (shape) {\n                return shape;\n            }\n        }\n        return null;\n    }\n    _resizeDOM() {\n        var width = this.width();\n        var height = this.height();\n        if (this.content) {\n            this.content.style.width = width + PX;\n            this.content.style.height = height + PX;\n        }\n        this.bufferCanvas.setSize(width, height);\n        this.bufferHitCanvas.setSize(width, height);\n        this.children.forEach((layer) => {\n            layer.setSize({ width, height });\n            layer.draw();\n        });\n    }\n    add(layer, ...rest) {\n        if (arguments.length > 1) {\n            for (var i = 0; i < arguments.length; i++) {\n                this.add(arguments[i]);\n            }\n            return this;\n        }\n        super.add(layer);\n        var length = this.children.length;\n        if (length > MAX_LAYERS_NUMBER) {\n            Util.warn('The stage has ' +\n                length +\n                ' layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group.');\n        }\n        layer.setSize({ width: this.width(), height: this.height() });\n        layer.draw();\n        if (Konva.isBrowser) {\n            this.content.appendChild(layer.canvas._canvas);\n        }\n        return this;\n    }\n    getParent() {\n        return null;\n    }\n    getLayer() {\n        return null;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n    getLayers() {\n        return this.children;\n    }\n    _bindContentEvents() {\n        if (!Konva.isBrowser) {\n            return;\n        }\n        EVENTS.forEach(([event, methodName]) => {\n            this.content.addEventListener(event, (evt) => {\n                this[methodName](evt);\n            });\n        });\n    }\n    _pointerenter(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerenter, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _pointerover(evt) {\n        this.setPointersPositions(evt);\n        const events = getEventsMap(evt.type);\n        this._fire(events.pointerover, {\n            evt: evt,\n            target: this,\n            currentTarget: this,\n        });\n    }\n    _getTargetShape(evenType) {\n        let shape = this[evenType + 'targetShape'];\n        if (shape && !shape.getStage()) {\n            shape = null;\n        }\n        return shape;\n    }\n    _pointerleave(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var targetShape = this._getTargetShape(eventType);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (targetShape && eventsEnabled) {\n            targetShape._fireAndBubble(events.pointerout, { evt: evt });\n            targetShape._fireAndBubble(events.pointerleave, { evt: evt });\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this[eventType + 'targetShape'] = null;\n        }\n        else if (eventsEnabled) {\n            this._fire(events.pointerleave, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n            this._fire(events.pointerout, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n        this.pointerPos = undefined;\n        this._pointerPositions = [];\n    }\n    _pointerdown(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        var triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            var shape = this.getIntersection(pos);\n            DD.justDragged = false;\n            Konva['_' + eventType + 'ListenClick'] = true;\n            const hasShape = shape && shape.isListening();\n            if (!hasShape) {\n                return;\n            }\n            if (Konva.capturePointerEventsEnabled) {\n                shape.setPointerCapture(pos.id);\n            }\n            this[eventType + 'ClickStartShape'] = shape;\n            shape._fireAndBubble(events.pointerdown, {\n                evt: evt,\n                pointerId: pos.id,\n            });\n            triggeredOnShape = true;\n            const isTouch = evt.type.indexOf('touch') >= 0;\n            if (shape.preventDefault() && evt.cancelable && isTouch) {\n                evt.preventDefault();\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerdown, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._pointerPositions[0].id,\n            });\n        }\n    }\n    _pointermove(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        if (DD.isDragging && DD.node.preventDefault() && evt.cancelable) {\n            evt.preventDefault();\n        }\n        this.setPointersPositions(evt);\n        var eventsEnabled = !DD.isDragging || Konva.hitOnDragEnabled;\n        if (!eventsEnabled) {\n            return;\n        }\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        var targetShape = this._getTargetShape(eventType);\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            var differentTarget = targetShape !== shape;\n            if (differentTarget && targetShape) {\n                targetShape._fireAndBubble(events.pointerout, Object.assign({}, event), shape);\n                targetShape._fireAndBubble(events.pointerleave, Object.assign({}, event), shape);\n            }\n            if (shape) {\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                if (differentTarget) {\n                    shape._fireAndBubble(events.pointerover, Object.assign({}, event), targetShape);\n                    shape._fireAndBubble(events.pointerenter, Object.assign({}, event), targetShape);\n                    this[eventType + 'targetShape'] = shape;\n                }\n                shape._fireAndBubble(events.pointermove, Object.assign({}, event));\n            }\n            else {\n                if (targetShape) {\n                    this._fire(events.pointerover, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                    this[eventType + 'targetShape'] = null;\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointermove, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n    }\n    _pointerup(evt) {\n        const events = getEventsMap(evt.type);\n        const eventType = getEventType(evt.type);\n        if (!events) {\n            return;\n        }\n        this.setPointersPositions(evt);\n        const clickStartShape = this[eventType + 'ClickStartShape'];\n        const clickEndShape = this[eventType + 'ClickEndShape'];\n        var processedShapesIds = {};\n        let triggeredOnShape = false;\n        this._changedPointerPositions.forEach((pos) => {\n            const shape = (PointerEvents.getCapturedShape(pos.id) ||\n                this.getIntersection(pos));\n            if (shape) {\n                shape.releaseCapture(pos.id);\n                if (processedShapesIds[shape._id]) {\n                    return;\n                }\n                processedShapesIds[shape._id] = true;\n            }\n            const pointerId = pos.id;\n            const event = { evt: evt, pointerId };\n            let fireDblClick = false;\n            if (Konva['_' + eventType + 'InDblClickWindow']) {\n                fireDblClick = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            else if (!DD.justDragged) {\n                Konva['_' + eventType + 'InDblClickWindow'] = true;\n                clearTimeout(this[eventType + 'DblTimeout']);\n            }\n            this[eventType + 'DblTimeout'] = setTimeout(function () {\n                Konva['_' + eventType + 'InDblClickWindow'] = false;\n            }, Konva.dblClickWindow);\n            if (shape && shape.isListening()) {\n                triggeredOnShape = true;\n                this[eventType + 'ClickEndShape'] = shape;\n                shape._fireAndBubble(events.pointerup, Object.assign({}, event));\n                if (Konva['_' + eventType + 'ListenClick'] &&\n                    clickStartShape &&\n                    clickStartShape === shape) {\n                    shape._fireAndBubble(events.pointerclick, Object.assign({}, event));\n                    if (fireDblClick && clickEndShape && clickEndShape === shape) {\n                        shape._fireAndBubble(events.pointerdblclick, Object.assign({}, event));\n                    }\n                }\n            }\n            else {\n                this[eventType + 'ClickEndShape'] = null;\n                if (Konva['_' + eventType + 'ListenClick']) {\n                    this._fire(events.pointerclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n                if (fireDblClick) {\n                    this._fire(events.pointerdblclick, {\n                        evt: evt,\n                        target: this,\n                        currentTarget: this,\n                        pointerId,\n                    });\n                }\n            }\n        });\n        if (!triggeredOnShape) {\n            this._fire(events.pointerup, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n                pointerId: this._changedPointerPositions[0].id,\n            });\n        }\n        Konva['_' + eventType + 'ListenClick'] = false;\n        if (evt.cancelable) {\n            evt.preventDefault();\n        }\n    }\n    _contextmenu(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(CONTEXTMENU, { evt: evt });\n        }\n        else {\n            this._fire(CONTEXTMENU, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _wheel(evt) {\n        this.setPointersPositions(evt);\n        var shape = this.getIntersection(this.getPointerPosition());\n        if (shape && shape.isListening()) {\n            shape._fireAndBubble(WHEEL, { evt: evt });\n        }\n        else {\n            this._fire(WHEEL, {\n                evt: evt,\n                target: this,\n                currentTarget: this,\n            });\n        }\n    }\n    _pointercancel(evt) {\n        this.setPointersPositions(evt);\n        const shape = PointerEvents.getCapturedShape(evt.pointerId) ||\n            this.getIntersection(this.getPointerPosition());\n        if (shape) {\n            shape._fireAndBubble(POINTERUP, PointerEvents.createEvent(evt));\n        }\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    _lostpointercapture(evt) {\n        PointerEvents.releaseCapture(evt.pointerId);\n    }\n    setPointersPositions(evt) {\n        var contentPosition = this._getContentPosition(), x = null, y = null;\n        evt = evt ? evt : window.event;\n        if (evt.touches !== undefined) {\n            this._pointerPositions = [];\n            this._changedPointerPositions = [];\n            Array.prototype.forEach.call(evt.touches, (touch) => {\n                this._pointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n            Array.prototype.forEach.call(evt.changedTouches || evt.touches, (touch) => {\n                this._changedPointerPositions.push({\n                    id: touch.identifier,\n                    x: (touch.clientX - contentPosition.left) / contentPosition.scaleX,\n                    y: (touch.clientY - contentPosition.top) / contentPosition.scaleY,\n                });\n            });\n        }\n        else {\n            x = (evt.clientX - contentPosition.left) / contentPosition.scaleX;\n            y = (evt.clientY - contentPosition.top) / contentPosition.scaleY;\n            this.pointerPos = {\n                x: x,\n                y: y,\n            };\n            this._pointerPositions = [{ x, y, id: Util._getFirstPointerId(evt) }];\n            this._changedPointerPositions = [\n                { x, y, id: Util._getFirstPointerId(evt) },\n            ];\n        }\n    }\n    _setPointerPosition(evt) {\n        Util.warn('Method _setPointerPosition is deprecated. Use \"stage.setPointersPositions(event)\" instead.');\n        this.setPointersPositions(evt);\n    }\n    _getContentPosition() {\n        if (!this.content || !this.content.getBoundingClientRect) {\n            return {\n                top: 0,\n                left: 0,\n                scaleX: 1,\n                scaleY: 1,\n            };\n        }\n        var rect = this.content.getBoundingClientRect();\n        return {\n            top: rect.top,\n            left: rect.left,\n            scaleX: rect.width / this.content.clientWidth || 1,\n            scaleY: rect.height / this.content.clientHeight || 1,\n        };\n    }\n    _buildDOM() {\n        this.bufferCanvas = new SceneCanvas({\n            width: this.width(),\n            height: this.height(),\n        });\n        this.bufferHitCanvas = new HitCanvas({\n            pixelRatio: 1,\n            width: this.width(),\n            height: this.height(),\n        });\n        if (!Konva.isBrowser) {\n            return;\n        }\n        var container = this.container();\n        if (!container) {\n            throw 'Stage has no container. A container is required.';\n        }\n        container.innerHTML = '';\n        this.content = document.createElement('div');\n        this.content.style.position = 'relative';\n        this.content.style.userSelect = 'none';\n        this.content.className = 'konvajs-content';\n        this.content.setAttribute('role', 'presentation');\n        container.appendChild(this.content);\n        this._resizeDOM();\n    }\n    cache() {\n        Util.warn('Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.');\n        return this;\n    }\n    clearCache() {\n        return this;\n    }\n    batchDraw() {\n        this.getChildren().forEach(function (layer) {\n            layer.batchDraw();\n        });\n        return this;\n    }\n}\nStage.prototype.nodeType = STAGE;\n_registerNode(Stage);\nFactory.addGetterSetter(Stage, 'container');\n","import { Konva } from './Global.js';\nimport { Transform, Util } from './Util.js';\nimport { Factory } from './Factory.js';\nimport { Node } from './Node.js';\nimport { getNumberValidator, getNumberOrAutoValidator, getStringValidator, getBooleanValidator, getStringOrGradientValidator, } from './Validators.js';\nimport { _registerNode } from './Global.js';\nimport * as PointerEvents from './PointerEvents.js';\nvar HAS_SHADOW = 'hasShadow';\nvar SHADOW_RGBA = 'shadowRGBA';\nvar patternImage = 'patternImage';\nvar linearGradient = 'linearGradient';\nvar radialGradient = 'radialGradient';\nlet dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext('2d');\n    return dummyContext;\n}\nexport const shapes = {};\nfunction _fillFunc(context) {\n    context.fill();\n}\nfunction _strokeFunc(context) {\n    context.stroke();\n}\nfunction _fillFuncHit(context) {\n    context.fill();\n}\nfunction _strokeFuncHit(context) {\n    context.stroke();\n}\nfunction _clearHasShadowCache() {\n    this._clearCache(HAS_SHADOW);\n}\nfunction _clearGetShadowRGBACache() {\n    this._clearCache(SHADOW_RGBA);\n}\nfunction _clearFillPatternCache() {\n    this._clearCache(patternImage);\n}\nfunction _clearLinearGradientCache() {\n    this._clearCache(linearGradient);\n}\nfunction _clearRadialGradientCache() {\n    this._clearCache(radialGradient);\n}\nexport class Shape extends Node {\n    constructor(config) {\n        super(config);\n        let key;\n        while (true) {\n            key = Util.getRandomColor();\n            if (key && !(key in shapes)) {\n                break;\n            }\n        }\n        this.colorKey = key;\n        shapes[key] = this;\n    }\n    getContext() {\n        Util.warn('shape.getContext() method is deprecated. Please do not use it.');\n        return this.getLayer().getContext();\n    }\n    getCanvas() {\n        Util.warn('shape.getCanvas() method is deprecated. Please do not use it.');\n        return this.getLayer().getCanvas();\n    }\n    getSceneFunc() {\n        return this.attrs.sceneFunc || this['_sceneFunc'];\n    }\n    getHitFunc() {\n        return this.attrs.hitFunc || this['_hitFunc'];\n    }\n    hasShadow() {\n        return this._getCache(HAS_SHADOW, this._hasShadow);\n    }\n    _hasShadow() {\n        return (this.shadowEnabled() &&\n            this.shadowOpacity() !== 0 &&\n            !!(this.shadowColor() ||\n                this.shadowBlur() ||\n                this.shadowOffsetX() ||\n                this.shadowOffsetY()));\n    }\n    _getFillPattern() {\n        return this._getCache(patternImage, this.__getFillPattern);\n    }\n    __getFillPattern() {\n        if (this.fillPatternImage()) {\n            var ctx = getDummyContext();\n            const pattern = ctx.createPattern(this.fillPatternImage(), this.fillPatternRepeat() || 'repeat');\n            if (pattern && pattern.setTransform) {\n                const tr = new Transform();\n                tr.translate(this.fillPatternX(), this.fillPatternY());\n                tr.rotate(Konva.getAngle(this.fillPatternRotation()));\n                tr.scale(this.fillPatternScaleX(), this.fillPatternScaleY());\n                tr.translate(-1 * this.fillPatternOffsetX(), -1 * this.fillPatternOffsetY());\n                const m = tr.getMatrix();\n                const matrix = typeof DOMMatrix === 'undefined'\n                    ? {\n                        a: m[0],\n                        b: m[1],\n                        c: m[2],\n                        d: m[3],\n                        e: m[4],\n                        f: m[5],\n                    }\n                    : new DOMMatrix(m);\n                pattern.setTransform(matrix);\n            }\n            return pattern;\n        }\n    }\n    _getLinearGradient() {\n        return this._getCache(linearGradient, this.__getLinearGradient);\n    }\n    __getLinearGradient() {\n        var colorStops = this.fillLinearGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillLinearGradientStartPoint();\n            var end = this.fillLinearGradientEndPoint();\n            var grd = ctx.createLinearGradient(start.x, start.y, end.x, end.y);\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    _getRadialGradient() {\n        return this._getCache(radialGradient, this.__getRadialGradient);\n    }\n    __getRadialGradient() {\n        var colorStops = this.fillRadialGradientColorStops();\n        if (colorStops) {\n            var ctx = getDummyContext();\n            var start = this.fillRadialGradientStartPoint();\n            var end = this.fillRadialGradientEndPoint();\n            var grd = ctx.createRadialGradient(start.x, start.y, this.fillRadialGradientStartRadius(), end.x, end.y, this.fillRadialGradientEndRadius());\n            for (var n = 0; n < colorStops.length; n += 2) {\n                grd.addColorStop(colorStops[n], colorStops[n + 1]);\n            }\n            return grd;\n        }\n    }\n    getShadowRGBA() {\n        return this._getCache(SHADOW_RGBA, this._getShadowRGBA);\n    }\n    _getShadowRGBA() {\n        if (this.hasShadow()) {\n            var rgba = Util.colorToRGBA(this.shadowColor());\n            return ('rgba(' +\n                rgba.r +\n                ',' +\n                rgba.g +\n                ',' +\n                rgba.b +\n                ',' +\n                rgba.a * (this.shadowOpacity() || 1) +\n                ')');\n        }\n    }\n    hasFill() {\n        return this._calculate('hasFill', [\n            'fillEnabled',\n            'fill',\n            'fillPatternImage',\n            'fillLinearGradientColorStops',\n            'fillRadialGradientColorStops',\n        ], () => {\n            return (this.fillEnabled() &&\n                !!(this.fill() ||\n                    this.fillPatternImage() ||\n                    this.fillLinearGradientColorStops() ||\n                    this.fillRadialGradientColorStops()));\n        });\n    }\n    hasStroke() {\n        return this._calculate('hasStroke', [\n            'strokeEnabled',\n            'strokeWidth',\n            'stroke',\n            'strokeLinearGradientColorStops',\n        ], () => {\n            return (this.strokeEnabled() &&\n                this.strokeWidth() &&\n                !!(this.stroke() || this.strokeLinearGradientColorStops()));\n        });\n    }\n    hasHitStroke() {\n        const width = this.hitStrokeWidth();\n        if (width === 'auto') {\n            return this.hasStroke();\n        }\n        return this.strokeEnabled() && !!width;\n    }\n    intersects(point) {\n        var stage = this.getStage(), bufferHitCanvas = stage.bufferHitCanvas, p;\n        bufferHitCanvas.getContext().clear();\n        this.drawHit(bufferHitCanvas, null, true);\n        p = bufferHitCanvas.context.getImageData(Math.round(point.x), Math.round(point.y), 1, 1).data;\n        return p[3] > 0;\n    }\n    destroy() {\n        Node.prototype.destroy.call(this);\n        delete shapes[this.colorKey];\n        delete this.colorKey;\n        return this;\n    }\n    _useBufferCanvas(forceFill) {\n        var _a;\n        if (!this.getStage()) {\n            return false;\n        }\n        const perfectDrawEnabled = (_a = this.attrs.perfectDrawEnabled) !== null && _a !== void 0 ? _a : true;\n        if (!perfectDrawEnabled) {\n            return false;\n        }\n        const hasFill = forceFill || this.hasFill();\n        const hasStroke = this.hasStroke();\n        const isTransparent = this.getAbsoluteOpacity() !== 1;\n        if (hasFill && hasStroke && isTransparent) {\n            return true;\n        }\n        const hasShadow = this.hasShadow();\n        const strokeForShadow = this.shadowForStrokeEnabled();\n        if (hasFill && hasStroke && hasShadow && strokeForShadow) {\n            return true;\n        }\n        return false;\n    }\n    setStrokeHitEnabled(val) {\n        Util.warn('strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead.');\n        if (val) {\n            this.hitStrokeWidth('auto');\n        }\n        else {\n            this.hitStrokeWidth(0);\n        }\n    }\n    getStrokeHitEnabled() {\n        if (this.hitStrokeWidth() === 0) {\n            return false;\n        }\n        else {\n            return true;\n        }\n    }\n    getSelfRect() {\n        var size = this.size();\n        return {\n            x: this._centroid ? -size.width / 2 : 0,\n            y: this._centroid ? -size.height / 2 : 0,\n            width: size.width,\n            height: size.height,\n        };\n    }\n    getClientRect(config = {}) {\n        const skipTransform = config.skipTransform;\n        const relativeTo = config.relativeTo;\n        const fillRect = this.getSelfRect();\n        const applyStroke = !config.skipStroke && this.hasStroke();\n        const strokeWidth = (applyStroke && this.strokeWidth()) || 0;\n        const fillAndStrokeWidth = fillRect.width + strokeWidth;\n        const fillAndStrokeHeight = fillRect.height + strokeWidth;\n        const applyShadow = !config.skipShadow && this.hasShadow();\n        const shadowOffsetX = applyShadow ? this.shadowOffsetX() : 0;\n        const shadowOffsetY = applyShadow ? this.shadowOffsetY() : 0;\n        const preWidth = fillAndStrokeWidth + Math.abs(shadowOffsetX);\n        const preHeight = fillAndStrokeHeight + Math.abs(shadowOffsetY);\n        const blurRadius = (applyShadow && this.shadowBlur()) || 0;\n        const width = preWidth + blurRadius * 2;\n        const height = preHeight + blurRadius * 2;\n        const rect = {\n            width: width,\n            height: height,\n            x: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetX, 0) +\n                fillRect.x,\n            y: -(strokeWidth / 2 + blurRadius) +\n                Math.min(shadowOffsetY, 0) +\n                fillRect.y,\n        };\n        if (!skipTransform) {\n            return this._transformedRect(rect, relativeTo);\n        }\n        return rect;\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || layer.getCanvas(), context = canvas.getContext(), cachedCanvas = this._getCanvasCache(), drawFunc = this.getSceneFunc(), hasShadow = this.hasShadow(), stage, bufferCanvas, bufferContext;\n        var skipBuffer = canvas.isCache;\n        var cachingSelf = top === this;\n        if (!this.isVisible() && !cachingSelf) {\n            return this;\n        }\n        if (cachedCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedSceneCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        if (this._useBufferCanvas() && !skipBuffer) {\n            stage = this.getStage();\n            bufferCanvas = stage.bufferCanvas;\n            bufferContext = bufferCanvas.getContext();\n            bufferContext.clear();\n            bufferContext.save();\n            bufferContext._applyLineJoin(this);\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            bufferContext.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n            drawFunc.call(this, bufferContext, this);\n            bufferContext.restore();\n            var ratio = bufferCanvas.pixelRatio;\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            context._applyOpacity(this);\n            context._applyGlobalCompositeOperation(this);\n            context.drawImage(bufferCanvas._canvas, 0, 0, bufferCanvas.width / ratio, bufferCanvas.height / ratio);\n        }\n        else {\n            context._applyLineJoin(this);\n            if (!cachingSelf) {\n                var o = this.getAbsoluteTransform(top).getMatrix();\n                context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n                context._applyOpacity(this);\n                context._applyGlobalCompositeOperation(this);\n            }\n            if (hasShadow) {\n                context._applyShadow(this);\n            }\n            drawFunc.call(this, context, this);\n        }\n        context.restore();\n        return this;\n    }\n    drawHit(can, top, skipDragCheck = false) {\n        if (!this.shouldDrawHit(top, skipDragCheck)) {\n            return this;\n        }\n        var layer = this.getLayer(), canvas = can || layer.hitCanvas, context = canvas && canvas.getContext(), drawFunc = this.hitFunc() || this.sceneFunc(), cachedCanvas = this._getCanvasCache(), cachedHitCanvas = cachedCanvas && cachedCanvas.hit;\n        if (!this.colorKey) {\n            Util.warn('Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()');\n        }\n        if (cachedHitCanvas) {\n            context.save();\n            var m = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(m[0], m[1], m[2], m[3], m[4], m[5]);\n            this._drawCachedHitCanvas(context);\n            context.restore();\n            return this;\n        }\n        if (!drawFunc) {\n            return this;\n        }\n        context.save();\n        context._applyLineJoin(this);\n        const selfCache = this === top;\n        if (!selfCache) {\n            var o = this.getAbsoluteTransform(top).getMatrix();\n            context.transform(o[0], o[1], o[2], o[3], o[4], o[5]);\n        }\n        drawFunc.call(this, context, this);\n        context.restore();\n        return this;\n    }\n    drawHitFromCache(alphaThreshold = 0) {\n        var cachedCanvas = this._getCanvasCache(), sceneCanvas = this._getCachedSceneCanvas(), hitCanvas = cachedCanvas.hit, hitContext = hitCanvas.getContext(), hitWidth = hitCanvas.getWidth(), hitHeight = hitCanvas.getHeight(), hitImageData, hitData, len, rgbColorKey, i, alpha;\n        hitContext.clear();\n        hitContext.drawImage(sceneCanvas._canvas, 0, 0, hitWidth, hitHeight);\n        try {\n            hitImageData = hitContext.getImageData(0, 0, hitWidth, hitHeight);\n            hitData = hitImageData.data;\n            len = hitData.length;\n            rgbColorKey = Util._hexToRgb(this.colorKey);\n            for (i = 0; i < len; i += 4) {\n                alpha = hitData[i + 3];\n                if (alpha > alphaThreshold) {\n                    hitData[i] = rgbColorKey.r;\n                    hitData[i + 1] = rgbColorKey.g;\n                    hitData[i + 2] = rgbColorKey.b;\n                    hitData[i + 3] = 255;\n                }\n                else {\n                    hitData[i + 3] = 0;\n                }\n            }\n            hitContext.putImageData(hitImageData, 0, 0);\n        }\n        catch (e) {\n            Util.error('Unable to draw hit graph from cached scene canvas. ' + e.message);\n        }\n        return this;\n    }\n    hasPointerCapture(pointerId) {\n        return PointerEvents.hasPointerCapture(pointerId, this);\n    }\n    setPointerCapture(pointerId) {\n        PointerEvents.setPointerCapture(pointerId, this);\n    }\n    releaseCapture(pointerId) {\n        PointerEvents.releaseCapture(pointerId, this);\n    }\n}\nShape.prototype._fillFunc = _fillFunc;\nShape.prototype._strokeFunc = _strokeFunc;\nShape.prototype._fillFuncHit = _fillFuncHit;\nShape.prototype._strokeFuncHit = _strokeFuncHit;\nShape.prototype._centroid = false;\nShape.prototype.nodeType = 'Shape';\n_registerNode(Shape);\nShape.prototype.eventListeners = {};\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearHasShadowCache);\nShape.prototype.on.call(Shape.prototype, 'shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva', _clearGetShadowRGBACache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva', _clearFillPatternCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva', _clearLinearGradientCache);\nShape.prototype.on.call(Shape.prototype, 'fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva', _clearRadialGradientCache);\nFactory.addGetterSetter(Shape, 'stroke', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'strokeWidth', 2, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillAfterStrokeEnabled', false);\nFactory.addGetterSetter(Shape, 'hitStrokeWidth', 'auto', getNumberOrAutoValidator());\nFactory.addGetterSetter(Shape, 'strokeHitEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'perfectDrawEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'shadowForStrokeEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Shape, 'lineJoin');\nFactory.addGetterSetter(Shape, 'lineCap');\nFactory.addGetterSetter(Shape, 'sceneFunc');\nFactory.addGetterSetter(Shape, 'hitFunc');\nFactory.addGetterSetter(Shape, 'dash');\nFactory.addGetterSetter(Shape, 'dashOffset', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowColor', undefined, getStringValidator());\nFactory.addGetterSetter(Shape, 'shadowBlur', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOpacity', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'shadowOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'shadowOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'shadowOffsetY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternImage');\nFactory.addGetterSetter(Shape, 'fill', undefined, getStringOrGradientValidator());\nFactory.addGetterSetter(Shape, 'fillPatternX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternY', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'strokeLinearGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndRadius', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientColorStops');\nFactory.addGetterSetter(Shape, 'fillPatternRepeat', 'repeat');\nFactory.addGetterSetter(Shape, 'fillEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeEnabled', true);\nFactory.addGetterSetter(Shape, 'shadowEnabled', true);\nFactory.addGetterSetter(Shape, 'dashEnabled', true);\nFactory.addGetterSetter(Shape, 'strokeScaleEnabled', true);\nFactory.addGetterSetter(Shape, 'fillPriority', 'color');\nFactory.addComponentsGetterSetter(Shape, 'fillPatternOffset', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternOffsetX', 0, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternOffsetY', 0, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillPatternScale', ['x', 'y']);\nFactory.addGetterSetter(Shape, 'fillPatternScaleX', 1, getNumberValidator());\nFactory.addGetterSetter(Shape, 'fillPatternScaleY', 1, getNumberValidator());\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientStartPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addComponentsGetterSetter(Shape, 'strokeLinearGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillLinearGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'strokeLinearGradientEndPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientStartPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientStartPointY', 0);\nFactory.addComponentsGetterSetter(Shape, 'fillRadialGradientEndPoint', [\n    'x',\n    'y',\n]);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointX', 0);\nFactory.addGetterSetter(Shape, 'fillRadialGradientEndPointY', 0);\nFactory.addGetterSetter(Shape, 'fillPatternRotation', 0);\nFactory.backCompat(Shape, {\n    dashArray: 'dash',\n    getDashArray: 'getDash',\n    setDashArray: 'getDash',\n    drawFunc: 'sceneFunc',\n    getDrawFunc: 'getSceneFunc',\n    setDrawFunc: 'setSceneFunc',\n    drawHitFunc: 'hitFunc',\n    getDrawHitFunc: 'getHitFunc',\n    setDrawHitFunc: 'setHitFunc',\n});\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { Node } from './Node.js';\nimport { Factory } from './Factory.js';\nimport { SceneCanvas, HitCanvas } from './Canvas.js';\nimport { getBooleanValidator } from './Validators.js';\nimport { shapes } from './Shape.js';\nimport { _registerNode } from './Global.js';\nvar HASH = '#', BEFORE_DRAW = 'beforeDraw', DRAW = 'draw', INTERSECTION_OFFSETS = [\n    { x: 0, y: 0 },\n    { x: -1, y: -1 },\n    { x: 1, y: -1 },\n    { x: 1, y: 1 },\n    { x: -1, y: 1 },\n], INTERSECTION_OFFSETS_LEN = INTERSECTION_OFFSETS.length;\nexport class Layer extends Container {\n    constructor(config) {\n        super(config);\n        this.canvas = new SceneCanvas();\n        this.hitCanvas = new HitCanvas({\n            pixelRatio: 1,\n        });\n        this._waitingForDraw = false;\n        this.on('visibleChange.konva', this._checkVisibility);\n        this._checkVisibility();\n        this.on('imageSmoothingEnabledChange.konva', this._setSmoothEnabled);\n        this._setSmoothEnabled();\n    }\n    createPNGStream() {\n        const c = this.canvas._canvas;\n        return c.createPNGStream();\n    }\n    getCanvas() {\n        return this.canvas;\n    }\n    getNativeCanvasElement() {\n        return this.canvas._canvas;\n    }\n    getHitCanvas() {\n        return this.hitCanvas;\n    }\n    getContext() {\n        return this.getCanvas().getContext();\n    }\n    clear(bounds) {\n        this.getContext().clear(bounds);\n        this.getHitCanvas().getContext().clear(bounds);\n        return this;\n    }\n    setZIndex(index) {\n        super.setZIndex(index);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            if (index < stage.children.length - 1) {\n                stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[index + 1].getCanvas()._canvas);\n            }\n            else {\n                stage.content.appendChild(this.getNativeCanvasElement());\n            }\n        }\n        return this;\n    }\n    moveToTop() {\n        Node.prototype.moveToTop.call(this);\n        var stage = this.getStage();\n        if (stage && stage.content) {\n            stage.content.removeChild(this.getNativeCanvasElement());\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveUp() {\n        var moved = Node.prototype.moveUp.call(this);\n        if (!moved) {\n            return false;\n        }\n        var stage = this.getStage();\n        if (!stage || !stage.content) {\n            return false;\n        }\n        stage.content.removeChild(this.getNativeCanvasElement());\n        if (this.index < stage.children.length - 1) {\n            stage.content.insertBefore(this.getNativeCanvasElement(), stage.children[this.index + 1].getCanvas()._canvas);\n        }\n        else {\n            stage.content.appendChild(this.getNativeCanvasElement());\n        }\n        return true;\n    }\n    moveDown() {\n        if (Node.prototype.moveDown.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[this.index + 1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    moveToBottom() {\n        if (Node.prototype.moveToBottom.call(this)) {\n            var stage = this.getStage();\n            if (stage) {\n                var children = stage.children;\n                if (stage.content) {\n                    stage.content.removeChild(this.getNativeCanvasElement());\n                    stage.content.insertBefore(this.getNativeCanvasElement(), children[1].getCanvas()._canvas);\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    getLayer() {\n        return this;\n    }\n    remove() {\n        var _canvas = this.getNativeCanvasElement();\n        Node.prototype.remove.call(this);\n        if (_canvas && _canvas.parentNode && Util._isInDocument(_canvas)) {\n            _canvas.parentNode.removeChild(_canvas);\n        }\n        return this;\n    }\n    getStage() {\n        return this.parent;\n    }\n    setSize({ width, height }) {\n        this.canvas.setSize(width, height);\n        this.hitCanvas.setSize(width, height);\n        this._setSmoothEnabled();\n        return this;\n    }\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to a layer.');\n        }\n    }\n    _toKonvaCanvas(config) {\n        config = config || {};\n        config.width = config.width || this.getWidth();\n        config.height = config.height || this.getHeight();\n        config.x = config.x !== undefined ? config.x : this.x();\n        config.y = config.y !== undefined ? config.y : this.y();\n        return Node.prototype._toKonvaCanvas.call(this, config);\n    }\n    _checkVisibility() {\n        const visible = this.visible();\n        if (visible) {\n            this.canvas._canvas.style.display = 'block';\n        }\n        else {\n            this.canvas._canvas.style.display = 'none';\n        }\n    }\n    _setSmoothEnabled() {\n        this.getContext()._context.imageSmoothingEnabled =\n            this.imageSmoothingEnabled();\n    }\n    getWidth() {\n        if (this.parent) {\n            return this.parent.width();\n        }\n    }\n    setWidth() {\n        Util.warn('Can not change width of layer. Use \"stage.width(value)\" function instead.');\n    }\n    getHeight() {\n        if (this.parent) {\n            return this.parent.height();\n        }\n    }\n    setHeight() {\n        Util.warn('Can not change height of layer. Use \"stage.height(value)\" function instead.');\n    }\n    batchDraw() {\n        if (!this._waitingForDraw) {\n            this._waitingForDraw = true;\n            Util.requestAnimFrame(() => {\n                this.draw();\n                this._waitingForDraw = false;\n            });\n        }\n        return this;\n    }\n    getIntersection(pos) {\n        if (!this.isListening() || !this.isVisible()) {\n            return null;\n        }\n        var spiralSearchDistance = 1;\n        var continueSearch = false;\n        while (true) {\n            for (let i = 0; i < INTERSECTION_OFFSETS_LEN; i++) {\n                const intersectionOffset = INTERSECTION_OFFSETS[i];\n                const obj = this._getIntersection({\n                    x: pos.x + intersectionOffset.x * spiralSearchDistance,\n                    y: pos.y + intersectionOffset.y * spiralSearchDistance,\n                });\n                const shape = obj.shape;\n                if (shape) {\n                    return shape;\n                }\n                continueSearch = !!obj.antialiased;\n                if (!obj.antialiased) {\n                    break;\n                }\n            }\n            if (continueSearch) {\n                spiralSearchDistance += 1;\n            }\n            else {\n                return null;\n            }\n        }\n    }\n    _getIntersection(pos) {\n        const ratio = this.hitCanvas.pixelRatio;\n        const p = this.hitCanvas.context.getImageData(Math.round(pos.x * ratio), Math.round(pos.y * ratio), 1, 1).data;\n        const p3 = p[3];\n        if (p3 === 255) {\n            const colorKey = Util._rgbToHex(p[0], p[1], p[2]);\n            const shape = shapes[HASH + colorKey];\n            if (shape) {\n                return {\n                    shape: shape,\n                };\n            }\n            return {\n                antialiased: true,\n            };\n        }\n        else if (p3 > 0) {\n            return {\n                antialiased: true,\n            };\n        }\n        return {};\n    }\n    drawScene(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.getCanvas());\n        this._fire(BEFORE_DRAW, {\n            node: this,\n        });\n        if (this.clearBeforeDraw()) {\n            canvas.getContext().clear();\n        }\n        Container.prototype.drawScene.call(this, canvas, top);\n        this._fire(DRAW, {\n            node: this,\n        });\n        return this;\n    }\n    drawHit(can, top) {\n        var layer = this.getLayer(), canvas = can || (layer && layer.hitCanvas);\n        if (layer && layer.clearBeforeDraw()) {\n            layer.getHitCanvas().getContext().clear();\n        }\n        Container.prototype.drawHit.call(this, canvas, top);\n        return this;\n    }\n    enableHitGraph() {\n        this.hitGraphEnabled(true);\n        return this;\n    }\n    disableHitGraph() {\n        this.hitGraphEnabled(false);\n        return this;\n    }\n    setHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        this.listening(val);\n    }\n    getHitGraphEnabled(val) {\n        Util.warn('hitGraphEnabled method is deprecated. Please use layer.listening() instead.');\n        return this.listening();\n    }\n    toggleHitCanvas() {\n        if (!this.parent || !this.parent['content']) {\n            return;\n        }\n        var parent = this.parent;\n        var added = !!this.hitCanvas._canvas.parentNode;\n        if (added) {\n            parent.content.removeChild(this.hitCanvas._canvas);\n        }\n        else {\n            parent.content.appendChild(this.hitCanvas._canvas);\n        }\n    }\n}\nLayer.prototype.nodeType = 'Layer';\n_registerNode(Layer);\nFactory.addGetterSetter(Layer, 'imageSmoothingEnabled', true);\nFactory.addGetterSetter(Layer, 'clearBeforeDraw', true);\nFactory.addGetterSetter(Layer, 'hitGraphEnabled', true, getBooleanValidator());\n","import { Util } from './Util.js';\nimport { Layer } from './Layer.js';\nimport { _registerNode } from './Global.js';\nexport class FastLayer extends Layer {\n    constructor(attrs) {\n        super(attrs);\n        this.listening(false);\n        Util.warn('Konva.Fast layer is deprecated. Please use \"new Konva.Layer({ listening: false })\" instead.');\n    }\n}\nFastLayer.prototype.nodeType = 'FastLayer';\n_registerNode(FastLayer);\n","import { Util } from './Util.js';\nimport { Container } from './Container.js';\nimport { _registerNode } from './Global.js';\nexport class Group extends Container {\n    _validateAdd(child) {\n        var type = child.getType();\n        if (type !== 'Group' && type !== 'Shape') {\n            Util.throw('You may only add groups and shapes to groups.');\n        }\n    }\n}\nGroup.prototype.nodeType = 'Group';\n_registerNode(Group);\n","import { glob } from './Global.js';\nimport { Util } from './Util.js';\nvar now = (function () {\n    if (glob.performance && glob.performance.now) {\n        return function () {\n            return glob.performance.now();\n        };\n    }\n    return function () {\n        return new Date().getTime();\n    };\n})();\nexport class Animation {\n    constructor(func, layers) {\n        this.id = Animation.animIdCounter++;\n        this.frame = {\n            time: 0,\n            timeDiff: 0,\n            lastTime: now(),\n            frameRate: 0,\n        };\n        this.func = func;\n        this.setLayers(layers);\n    }\n    setLayers(layers) {\n        var lays = [];\n        if (!layers) {\n            lays = [];\n        }\n        else if (layers.length > 0) {\n            lays = layers;\n        }\n        else {\n            lays = [layers];\n        }\n        this.layers = lays;\n        return this;\n    }\n    getLayers() {\n        return this.layers;\n    }\n    addLayer(layer) {\n        var layers = this.layers, len = layers.length, n;\n        for (n = 0; n < len; n++) {\n            if (layers[n]._id === layer._id) {\n                return false;\n            }\n        }\n        this.layers.push(layer);\n        return true;\n    }\n    isRunning() {\n        var a = Animation, animations = a.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === this.id) {\n                return true;\n            }\n        }\n        return false;\n    }\n    start() {\n        this.stop();\n        this.frame.timeDiff = 0;\n        this.frame.lastTime = now();\n        Animation._addAnimation(this);\n        return this;\n    }\n    stop() {\n        Animation._removeAnimation(this);\n        return this;\n    }\n    _updateFrameObject(time) {\n        this.frame.timeDiff = time - this.frame.lastTime;\n        this.frame.lastTime = time;\n        this.frame.time += this.frame.timeDiff;\n        this.frame.frameRate = 1000 / this.frame.timeDiff;\n    }\n    static _addAnimation(anim) {\n        this.animations.push(anim);\n        this._handleAnimation();\n    }\n    static _removeAnimation(anim) {\n        var id = anim.id, animations = this.animations, len = animations.length, n;\n        for (n = 0; n < len; n++) {\n            if (animations[n].id === id) {\n                this.animations.splice(n, 1);\n                break;\n            }\n        }\n    }\n    static _runFrames() {\n        var layerHash = {}, animations = this.animations, anim, layers, func, n, i, layersLen, layer, key, needRedraw;\n        for (n = 0; n < animations.length; n++) {\n            anim = animations[n];\n            layers = anim.layers;\n            func = anim.func;\n            anim._updateFrameObject(now());\n            layersLen = layers.length;\n            if (func) {\n                needRedraw = func.call(anim, anim.frame) !== false;\n            }\n            else {\n                needRedraw = true;\n            }\n            if (!needRedraw) {\n                continue;\n            }\n            for (i = 0; i < layersLen; i++) {\n                layer = layers[i];\n                if (layer._id !== undefined) {\n                    layerHash[layer._id] = layer;\n                }\n            }\n        }\n        for (key in layerHash) {\n            if (!layerHash.hasOwnProperty(key)) {\n                continue;\n            }\n            layerHash[key].batchDraw();\n        }\n    }\n    static _animationLoop() {\n        var Anim = Animation;\n        if (Anim.animations.length) {\n            Anim._runFrames();\n            Util.requestAnimFrame(Anim._animationLoop);\n        }\n        else {\n            Anim.animRunning = false;\n        }\n    }\n    static _handleAnimation() {\n        if (!this.animRunning) {\n            this.animRunning = true;\n            Util.requestAnimFrame(this._animationLoop);\n        }\n    }\n}\nAnimation.animations = [];\nAnimation.animIdCounter = 0;\nAnimation.animRunning = false;\n","import { Util } from './Util.js';\nimport { Animation } from './Animation.js';\nimport { Node } from './Node.js';\nimport { Konva } from './Global.js';\nvar blacklist = {\n    node: 1,\n    duration: 1,\n    easing: 1,\n    onFinish: 1,\n    yoyo: 1,\n}, PAUSED = 1, PLAYING = 2, REVERSING = 3, idCounter = 0, colorAttrs = ['fill', 'stroke', 'shadowColor'];\nclass TweenEngine {\n    constructor(prop, propFunc, func, begin, finish, duration, yoyo) {\n        this.prop = prop;\n        this.propFunc = propFunc;\n        this.begin = begin;\n        this._pos = begin;\n        this.duration = duration;\n        this._change = 0;\n        this.prevPos = 0;\n        this.yoyo = yoyo;\n        this._time = 0;\n        this._position = 0;\n        this._startTime = 0;\n        this._finish = 0;\n        this.func = func;\n        this._change = finish - this.begin;\n        this.pause();\n    }\n    fire(str) {\n        var handler = this[str];\n        if (handler) {\n            handler();\n        }\n    }\n    setTime(t) {\n        if (t > this.duration) {\n            if (this.yoyo) {\n                this._time = this.duration;\n                this.reverse();\n            }\n            else {\n                this.finish();\n            }\n        }\n        else if (t < 0) {\n            if (this.yoyo) {\n                this._time = 0;\n                this.play();\n            }\n            else {\n                this.reset();\n            }\n        }\n        else {\n            this._time = t;\n            this.update();\n        }\n    }\n    getTime() {\n        return this._time;\n    }\n    setPosition(p) {\n        this.prevPos = this._pos;\n        this.propFunc(p);\n        this._pos = p;\n    }\n    getPosition(t) {\n        if (t === undefined) {\n            t = this._time;\n        }\n        return this.func(t, this.begin, this._change, this.duration);\n    }\n    play() {\n        this.state = PLAYING;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onPlay');\n    }\n    reverse() {\n        this.state = REVERSING;\n        this._time = this.duration - this._time;\n        this._startTime = this.getTimer() - this._time;\n        this.onEnterFrame();\n        this.fire('onReverse');\n    }\n    seek(t) {\n        this.pause();\n        this._time = t;\n        this.update();\n        this.fire('onSeek');\n    }\n    reset() {\n        this.pause();\n        this._time = 0;\n        this.update();\n        this.fire('onReset');\n    }\n    finish() {\n        this.pause();\n        this._time = this.duration;\n        this.update();\n        this.fire('onFinish');\n    }\n    update() {\n        this.setPosition(this.getPosition(this._time));\n        this.fire('onUpdate');\n    }\n    onEnterFrame() {\n        var t = this.getTimer() - this._startTime;\n        if (this.state === PLAYING) {\n            this.setTime(t);\n        }\n        else if (this.state === REVERSING) {\n            this.setTime(this.duration - t);\n        }\n    }\n    pause() {\n        this.state = PAUSED;\n        this.fire('onPause');\n    }\n    getTimer() {\n        return new Date().getTime();\n    }\n}\nexport class Tween {\n    constructor(config) {\n        var that = this, node = config.node, nodeId = node._id, duration, easing = config.easing || Easings.Linear, yoyo = !!config.yoyo, key;\n        if (typeof config.duration === 'undefined') {\n            duration = 0.3;\n        }\n        else if (config.duration === 0) {\n            duration = 0.001;\n        }\n        else {\n            duration = config.duration;\n        }\n        this.node = node;\n        this._id = idCounter++;\n        var layers = node.getLayer() ||\n            (node instanceof Konva['Stage'] ? node.getLayers() : null);\n        if (!layers) {\n            Util.error('Tween constructor have `node` that is not in a layer. Please add node into layer first.');\n        }\n        this.anim = new Animation(function () {\n            that.tween.onEnterFrame();\n        }, layers);\n        this.tween = new TweenEngine(key, function (i) {\n            that._tweenFunc(i);\n        }, easing, 0, 1, duration * 1000, yoyo);\n        this._addListeners();\n        if (!Tween.attrs[nodeId]) {\n            Tween.attrs[nodeId] = {};\n        }\n        if (!Tween.attrs[nodeId][this._id]) {\n            Tween.attrs[nodeId][this._id] = {};\n        }\n        if (!Tween.tweens[nodeId]) {\n            Tween.tweens[nodeId] = {};\n        }\n        for (key in config) {\n            if (blacklist[key] === undefined) {\n                this._addAttr(key, config[key]);\n            }\n        }\n        this.reset();\n        this.onFinish = config.onFinish;\n        this.onReset = config.onReset;\n        this.onUpdate = config.onUpdate;\n    }\n    _addAttr(key, end) {\n        var node = this.node, nodeId = node._id, start, diff, tweenId, n, len, trueEnd, trueStart, endRGBA;\n        tweenId = Tween.tweens[nodeId][key];\n        if (tweenId) {\n            delete Tween.attrs[nodeId][tweenId][key];\n        }\n        start = node.getAttr(key);\n        if (Util._isArray(end)) {\n            diff = [];\n            len = Math.max(end.length, start.length);\n            if (key === 'points' && end.length !== start.length) {\n                if (end.length > start.length) {\n                    trueStart = start;\n                    start = Util._prepareArrayForTween(start, end, node.closed());\n                }\n                else {\n                    trueEnd = end;\n                    end = Util._prepareArrayForTween(end, start, node.closed());\n                }\n            }\n            if (key.indexOf('fill') === 0) {\n                for (n = 0; n < len; n++) {\n                    if (n % 2 === 0) {\n                        diff.push(end[n] - start[n]);\n                    }\n                    else {\n                        var startRGBA = Util.colorToRGBA(start[n]);\n                        endRGBA = Util.colorToRGBA(end[n]);\n                        start[n] = startRGBA;\n                        diff.push({\n                            r: endRGBA.r - startRGBA.r,\n                            g: endRGBA.g - startRGBA.g,\n                            b: endRGBA.b - startRGBA.b,\n                            a: endRGBA.a - startRGBA.a,\n                        });\n                    }\n                }\n            }\n            else {\n                for (n = 0; n < len; n++) {\n                    diff.push(end[n] - start[n]);\n                }\n            }\n        }\n        else if (colorAttrs.indexOf(key) !== -1) {\n            start = Util.colorToRGBA(start);\n            endRGBA = Util.colorToRGBA(end);\n            diff = {\n                r: endRGBA.r - start.r,\n                g: endRGBA.g - start.g,\n                b: endRGBA.b - start.b,\n                a: endRGBA.a - start.a,\n            };\n        }\n        else {\n            diff = end - start;\n        }\n        Tween.attrs[nodeId][this._id][key] = {\n            start: start,\n            diff: diff,\n            end: end,\n            trueEnd: trueEnd,\n            trueStart: trueStart,\n        };\n        Tween.tweens[nodeId][key] = this._id;\n    }\n    _tweenFunc(i) {\n        var node = this.node, attrs = Tween.attrs[node._id][this._id], key, attr, start, diff, newVal, n, len, end;\n        for (key in attrs) {\n            attr = attrs[key];\n            start = attr.start;\n            diff = attr.diff;\n            end = attr.end;\n            if (Util._isArray(start)) {\n                newVal = [];\n                len = Math.max(start.length, end.length);\n                if (key.indexOf('fill') === 0) {\n                    for (n = 0; n < len; n++) {\n                        if (n % 2 === 0) {\n                            newVal.push((start[n] || 0) + diff[n] * i);\n                        }\n                        else {\n                            newVal.push('rgba(' +\n                                Math.round(start[n].r + diff[n].r * i) +\n                                ',' +\n                                Math.round(start[n].g + diff[n].g * i) +\n                                ',' +\n                                Math.round(start[n].b + diff[n].b * i) +\n                                ',' +\n                                (start[n].a + diff[n].a * i) +\n                                ')');\n                        }\n                    }\n                }\n                else {\n                    for (n = 0; n < len; n++) {\n                        newVal.push((start[n] || 0) + diff[n] * i);\n                    }\n                }\n            }\n            else if (colorAttrs.indexOf(key) !== -1) {\n                newVal =\n                    'rgba(' +\n                        Math.round(start.r + diff.r * i) +\n                        ',' +\n                        Math.round(start.g + diff.g * i) +\n                        ',' +\n                        Math.round(start.b + diff.b * i) +\n                        ',' +\n                        (start.a + diff.a * i) +\n                        ')';\n            }\n            else {\n                newVal = start + diff * i;\n            }\n            node.setAttr(key, newVal);\n        }\n    }\n    _addListeners() {\n        this.tween.onPlay = () => {\n            this.anim.start();\n        };\n        this.tween.onReverse = () => {\n            this.anim.start();\n        };\n        this.tween.onPause = () => {\n            this.anim.stop();\n        };\n        this.tween.onFinish = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueEnd) {\n                node.setAttr('points', attrs.points.trueEnd);\n            }\n            if (this.onFinish) {\n                this.onFinish.call(this);\n            }\n        };\n        this.tween.onReset = () => {\n            var node = this.node;\n            var attrs = Tween.attrs[node._id][this._id];\n            if (attrs.points && attrs.points.trueStart) {\n                node.points(attrs.points.trueStart);\n            }\n            if (this.onReset) {\n                this.onReset();\n            }\n        };\n        this.tween.onUpdate = () => {\n            if (this.onUpdate) {\n                this.onUpdate.call(this);\n            }\n        };\n    }\n    play() {\n        this.tween.play();\n        return this;\n    }\n    reverse() {\n        this.tween.reverse();\n        return this;\n    }\n    reset() {\n        this.tween.reset();\n        return this;\n    }\n    seek(t) {\n        this.tween.seek(t * 1000);\n        return this;\n    }\n    pause() {\n        this.tween.pause();\n        return this;\n    }\n    finish() {\n        this.tween.finish();\n        return this;\n    }\n    destroy() {\n        var nodeId = this.node._id, thisId = this._id, attrs = Tween.tweens[nodeId], key;\n        this.pause();\n        for (key in attrs) {\n            delete Tween.tweens[nodeId][key];\n        }\n        delete Tween.attrs[nodeId][thisId];\n    }\n}\nTween.attrs = {};\nTween.tweens = {};\nNode.prototype.to = function (params) {\n    var onFinish = params.onFinish;\n    params.node = this;\n    params.onFinish = function () {\n        this.destroy();\n        if (onFinish) {\n            onFinish();\n        }\n    };\n    var tween = new Tween(params);\n    tween.play();\n};\nexport const Easings = {\n    BackEaseIn(t, b, c, d) {\n        var s = 1.70158;\n        return c * (t /= d) * t * ((s + 1) * t - s) + b;\n    },\n    BackEaseOut(t, b, c, d) {\n        var s = 1.70158;\n        return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n    },\n    BackEaseInOut(t, b, c, d) {\n        var s = 1.70158;\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n        }\n        return (c / 2) * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    },\n    ElasticEaseIn(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (-(a *\n            Math.pow(2, 10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p)) + b);\n    },\n    ElasticEaseOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d) === 1) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * 0.3;\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        return (a * Math.pow(2, -10 * t) * Math.sin(((t * d - s) * (2 * Math.PI)) / p) +\n            c +\n            b);\n    },\n    ElasticEaseInOut(t, b, c, d, a, p) {\n        var s = 0;\n        if (t === 0) {\n            return b;\n        }\n        if ((t /= d / 2) === 2) {\n            return b + c;\n        }\n        if (!p) {\n            p = d * (0.3 * 1.5);\n        }\n        if (!a || a < Math.abs(c)) {\n            a = c;\n            s = p / 4;\n        }\n        else {\n            s = (p / (2 * Math.PI)) * Math.asin(c / a);\n        }\n        if (t < 1) {\n            return (-0.5 *\n                (a *\n                    Math.pow(2, 10 * (t -= 1)) *\n                    Math.sin(((t * d - s) * (2 * Math.PI)) / p)) +\n                b);\n        }\n        return (a *\n            Math.pow(2, -10 * (t -= 1)) *\n            Math.sin(((t * d - s) * (2 * Math.PI)) / p) *\n            0.5 +\n            c +\n            b);\n    },\n    BounceEaseOut(t, b, c, d) {\n        if ((t /= d) < 1 / 2.75) {\n            return c * (7.5625 * t * t) + b;\n        }\n        else if (t < 2 / 2.75) {\n            return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n        }\n        else if (t < 2.5 / 2.75) {\n            return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n        }\n        else {\n            return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n        }\n    },\n    BounceEaseIn(t, b, c, d) {\n        return c - Easings.BounceEaseOut(d - t, 0, c, d) + b;\n    },\n    BounceEaseInOut(t, b, c, d) {\n        if (t < d / 2) {\n            return Easings.BounceEaseIn(t * 2, 0, c, d) * 0.5 + b;\n        }\n        else {\n            return Easings.BounceEaseOut(t * 2 - d, 0, c, d) * 0.5 + c * 0.5 + b;\n        }\n    },\n    EaseIn(t, b, c, d) {\n        return c * (t /= d) * t + b;\n    },\n    EaseOut(t, b, c, d) {\n        return -c * (t /= d) * (t - 2) + b;\n    },\n    EaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t + b;\n        }\n        return (-c / 2) * (--t * (t - 2) - 1) + b;\n    },\n    StrongEaseIn(t, b, c, d) {\n        return c * (t /= d) * t * t * t * t + b;\n    },\n    StrongEaseOut(t, b, c, d) {\n        return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n    },\n    StrongEaseInOut(t, b, c, d) {\n        if ((t /= d / 2) < 1) {\n            return (c / 2) * t * t * t * t * t + b;\n        }\n        return (c / 2) * ((t -= 2) * t * t * t * t + 2) + b;\n    },\n    Linear(t, b, c, d) {\n        return (c * t) / d + b;\n    },\n};\n","import { Konva as Global } from './Global.js';\nimport { Util, Transform } from './Util.js';\nimport { Node } from './Node.js';\nimport { Container } from './Container.js';\nimport { Stage, stages } from './Stage.js';\nimport { Layer } from './Layer.js';\nimport { FastLayer } from './FastLayer.js';\nimport { Group } from './Group.js';\nimport { DD } from './DragAndDrop.js';\nimport { Shape, shapes } from './Shape.js';\nimport { Animation } from './Animation.js';\nimport { Tween, Easings } from './Tween.js';\nimport { Context } from './Context.js';\nimport { Canvas } from './Canvas.js';\nexport const Konva = Util._assign(Global, {\n    Util,\n    Transform,\n    Node,\n    Container,\n    Stage,\n    stages,\n    Layer,\n    FastLayer,\n    Group,\n    DD,\n    Shape,\n    shapes,\n    Animation,\n    Tween,\n    Easings,\n    Context,\n    Canvas,\n});\nexport default Konva;\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Konva } from '../Global.js';\nimport { getNumberValidator, getBooleanValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Arc extends Shape {\n    _sceneFunc(context) {\n        var angle = Konva.getAngle(this.angle()), clockwise = this.clockwise();\n        context.beginPath();\n        context.arc(0, 0, this.outerRadius(), 0, angle, clockwise);\n        context.arc(0, 0, this.innerRadius(), angle, 0, !clockwise);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n    getSelfRect() {\n        const innerRadius = this.innerRadius();\n        const outerRadius = this.outerRadius();\n        const clockwise = this.clockwise();\n        const angle = Konva.getAngle(clockwise ? 360 - this.angle() : this.angle());\n        const boundLeftRatio = Math.cos(Math.min(angle, Math.PI));\n        const boundRightRatio = 1;\n        const boundTopRatio = Math.sin(Math.min(Math.max(Math.PI, angle), (3 * Math.PI) / 2));\n        const boundBottomRatio = Math.sin(Math.min(angle, Math.PI / 2));\n        const boundLeft = boundLeftRatio * (boundLeftRatio > 0 ? innerRadius : outerRadius);\n        const boundRight = boundRightRatio * (boundRightRatio > 0 ? outerRadius : innerRadius);\n        const boundTop = boundTopRatio * (boundTopRatio > 0 ? innerRadius : outerRadius);\n        const boundBottom = boundBottomRatio * (boundBottomRatio > 0 ? outerRadius : innerRadius);\n        return {\n            x: boundLeft,\n            y: clockwise ? -1 * boundBottom : boundTop,\n            width: boundRight - boundLeft,\n            height: boundBottom - boundTop,\n        };\n    }\n}\nArc.prototype._centroid = true;\nArc.prototype.className = 'Arc';\nArc.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Arc);\nFactory.addGetterSetter(Arc, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'outerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'angle', 0, getNumberValidator());\nFactory.addGetterSetter(Arc, 'clockwise', false, getBooleanValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getNumberArrayValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nfunction getControlPoints(x0, y0, x1, y1, x2, y2, t) {\n    var d01 = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)), d12 = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2)), fa = (t * d01) / (d01 + d12), fb = (t * d12) / (d01 + d12), p1x = x1 - fa * (x2 - x0), p1y = y1 - fa * (y2 - y0), p2x = x1 + fb * (x2 - x0), p2y = y1 + fb * (y2 - y0);\n    return [p1x, p1y, p2x, p2y];\n}\nfunction expandPoints(p, tension) {\n    var len = p.length, allPoints = [], n, cp;\n    for (n = 2; n < len - 2; n += 2) {\n        cp = getControlPoints(p[n - 2], p[n - 1], p[n], p[n + 1], p[n + 2], p[n + 3], tension);\n        if (isNaN(cp[0])) {\n            continue;\n        }\n        allPoints.push(cp[0]);\n        allPoints.push(cp[1]);\n        allPoints.push(p[n]);\n        allPoints.push(p[n + 1]);\n        allPoints.push(cp[2]);\n        allPoints.push(cp[3]);\n    }\n    return allPoints;\n}\nexport class Line extends Shape {\n    constructor(config) {\n        super(config);\n        this.on('pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva', function () {\n            this._clearCache('tensionPoints');\n        });\n    }\n    _sceneFunc(context) {\n        var points = this.points(), length = points.length, tension = this.tension(), closed = this.closed(), bezier = this.bezier(), tp, len, n;\n        if (!length) {\n            return;\n        }\n        context.beginPath();\n        context.moveTo(points[0], points[1]);\n        if (tension !== 0 && length > 4) {\n            tp = this.getTensionPoints();\n            len = tp.length;\n            n = closed ? 0 : 4;\n            if (!closed) {\n                context.quadraticCurveTo(tp[0], tp[1], tp[2], tp[3]);\n            }\n            while (n < len - 2) {\n                context.bezierCurveTo(tp[n++], tp[n++], tp[n++], tp[n++], tp[n++], tp[n++]);\n            }\n            if (!closed) {\n                context.quadraticCurveTo(tp[len - 2], tp[len - 1], points[length - 2], points[length - 1]);\n            }\n        }\n        else if (bezier) {\n            n = 2;\n            while (n < length) {\n                context.bezierCurveTo(points[n++], points[n++], points[n++], points[n++], points[n++], points[n++]);\n            }\n        }\n        else {\n            for (n = 2; n < length; n += 2) {\n                context.lineTo(points[n], points[n + 1]);\n            }\n        }\n        if (closed) {\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        else {\n            context.strokeShape(this);\n        }\n    }\n    getTensionPoints() {\n        return this._getCache('tensionPoints', this._getTensionPoints);\n    }\n    _getTensionPoints() {\n        if (this.closed()) {\n            return this._getTensionPointsClosed();\n        }\n        else {\n            return expandPoints(this.points(), this.tension());\n        }\n    }\n    _getTensionPointsClosed() {\n        var p = this.points(), len = p.length, tension = this.tension(), firstControlPoints = getControlPoints(p[len - 2], p[len - 1], p[0], p[1], p[2], p[3], tension), lastControlPoints = getControlPoints(p[len - 4], p[len - 3], p[len - 2], p[len - 1], p[0], p[1], tension), middle = expandPoints(p, tension), tp = [firstControlPoints[2], firstControlPoints[3]]\n            .concat(middle)\n            .concat([\n            lastControlPoints[0],\n            lastControlPoints[1],\n            p[len - 2],\n            p[len - 1],\n            lastControlPoints[2],\n            lastControlPoints[3],\n            firstControlPoints[0],\n            firstControlPoints[1],\n            p[0],\n            p[1],\n        ]);\n        return tp;\n    }\n    getWidth() {\n        return this.getSelfRect().width;\n    }\n    getHeight() {\n        return this.getSelfRect().height;\n    }\n    getSelfRect() {\n        var points = this.points();\n        if (points.length < 4) {\n            return {\n                x: points[0] || 0,\n                y: points[1] || 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        if (this.tension() !== 0) {\n            points = [\n                points[0],\n                points[1],\n                ...this._getTensionPoints(),\n                points[points.length - 2],\n                points[points.length - 1],\n            ];\n        }\n        else {\n            points = this.points();\n        }\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n}\nLine.prototype.className = 'Line';\nLine.prototype._attrsAffectingSize = ['points', 'bezier', 'tension'];\n_registerNode(Line);\nFactory.addGetterSetter(Line, 'closed', false);\nFactory.addGetterSetter(Line, 'bezier', false);\nFactory.addGetterSetter(Line, 'tension', 0, getNumberValidator());\nFactory.addGetterSetter(Line, 'points', [], getNumberArrayValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { _registerNode } from '../Global.js';\nexport class Path extends Shape {\n    constructor(config) {\n        super(config);\n        this.dataArray = [];\n        this.pathLength = 0;\n        this.dataArray = Path.parsePathData(this.data());\n        this.pathLength = 0;\n        for (var i = 0; i < this.dataArray.length; ++i) {\n            this.pathLength += this.dataArray[i].pathLength;\n        }\n        this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.data());\n            this.pathLength = 0;\n            for (var i = 0; i < this.dataArray.length; ++i) {\n                this.pathLength += this.dataArray[i].pathLength;\n            }\n        });\n    }\n    _sceneFunc(context) {\n        var ca = this.dataArray;\n        context.beginPath();\n        var isClosed = false;\n        for (var n = 0; n < ca.length; n++) {\n            var c = ca[n].command;\n            var p = ca[n].points;\n            switch (c) {\n                case 'L':\n                    context.lineTo(p[0], p[1]);\n                    break;\n                case 'M':\n                    context.moveTo(p[0], p[1]);\n                    break;\n                case 'C':\n                    context.bezierCurveTo(p[0], p[1], p[2], p[3], p[4], p[5]);\n                    break;\n                case 'Q':\n                    context.quadraticCurveTo(p[0], p[1], p[2], p[3]);\n                    break;\n                case 'A':\n                    var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6], fs = p[7];\n                    var r = rx > ry ? rx : ry;\n                    var scaleX = rx > ry ? 1 : rx / ry;\n                    var scaleY = rx > ry ? ry / rx : 1;\n                    context.translate(cx, cy);\n                    context.rotate(psi);\n                    context.scale(scaleX, scaleY);\n                    context.arc(0, 0, r, theta, theta + dTheta, 1 - fs);\n                    context.scale(1 / scaleX, 1 / scaleY);\n                    context.rotate(-psi);\n                    context.translate(-cx, -cy);\n                    break;\n                case 'z':\n                    isClosed = true;\n                    context.closePath();\n                    break;\n            }\n        }\n        if (!isClosed && !this.hasFill()) {\n            context.strokeShape(this);\n        }\n        else {\n            context.fillStrokeShape(this);\n        }\n    }\n    getSelfRect() {\n        var points = [];\n        this.dataArray.forEach(function (data) {\n            if (data.command === 'A') {\n                var start = data.points[4];\n                var dTheta = data.points[5];\n                var end = data.points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                if (dTheta < 0) {\n                    for (let t = start - inc; t > end; t -= inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n                else {\n                    for (let t = start + inc; t < end; t += inc) {\n                        const point = Path.getPointOnEllipticalArc(data.points[0], data.points[1], data.points[2], data.points[3], t, 0);\n                        points.push(point.x, point.y);\n                    }\n                }\n            }\n            else if (data.command === 'C') {\n                for (let t = 0.0; t <= 1; t += 0.01) {\n                    const point = Path.getPointOnCubicBezier(t, data.start.x, data.start.y, data.points[0], data.points[1], data.points[2], data.points[3], data.points[4], data.points[5]);\n                    points.push(point.x, point.y);\n                }\n            }\n            else {\n                points = points.concat(data.points);\n            }\n        });\n        var minX = points[0];\n        var maxX = points[0];\n        var minY = points[1];\n        var maxY = points[1];\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            if (!isNaN(x)) {\n                minX = Math.min(minX, x);\n                maxX = Math.max(maxX, x);\n            }\n            if (!isNaN(y)) {\n                minY = Math.min(minY, y);\n                maxY = Math.max(maxY, y);\n            }\n        }\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getLength() {\n        return this.pathLength;\n    }\n    getPointAtLength(length) {\n        var point, i = 0, ii = this.dataArray.length;\n        if (!ii) {\n            return null;\n        }\n        while (i < ii && length > this.dataArray[i].pathLength) {\n            length -= this.dataArray[i].pathLength;\n            ++i;\n        }\n        if (i === ii) {\n            point = this.dataArray[i - 1].points.slice(-2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        if (length < 0.01) {\n            point = this.dataArray[i].points.slice(0, 2);\n            return {\n                x: point[0],\n                y: point[1],\n            };\n        }\n        var cp = this.dataArray[i];\n        var p = cp.points;\n        switch (cp.command) {\n            case 'L':\n                return Path.getPointOnLine(length, cp.start.x, cp.start.y, p[0], p[1]);\n            case 'C':\n                return Path.getPointOnCubicBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3], p[4], p[5]);\n            case 'Q':\n                return Path.getPointOnQuadraticBezier(length / cp.pathLength, cp.start.x, cp.start.y, p[0], p[1], p[2], p[3]);\n            case 'A':\n                var cx = p[0], cy = p[1], rx = p[2], ry = p[3], theta = p[4], dTheta = p[5], psi = p[6];\n                theta += (dTheta * length) / cp.pathLength;\n                return Path.getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi);\n        }\n        return null;\n    }\n    static getLineLength(x1, y1, x2, y2) {\n        return Math.sqrt((x2 - x1) * (x2 - x1) + (y2 - y1) * (y2 - y1));\n    }\n    static getPointOnLine(dist, P1x, P1y, P2x, P2y, fromX, fromY) {\n        if (fromX === undefined) {\n            fromX = P1x;\n        }\n        if (fromY === undefined) {\n            fromY = P1y;\n        }\n        var m = (P2y - P1y) / (P2x - P1x + 0.00000001);\n        var run = Math.sqrt((dist * dist) / (1 + m * m));\n        if (P2x < P1x) {\n            run *= -1;\n        }\n        var rise = m * run;\n        var pt;\n        if (P2x === P1x) {\n            pt = {\n                x: fromX,\n                y: fromY + rise,\n            };\n        }\n        else if ((fromY - P1y) / (fromX - P1x + 0.00000001) === m) {\n            pt = {\n                x: fromX + run,\n                y: fromY + rise,\n            };\n        }\n        else {\n            var ix, iy;\n            var len = this.getLineLength(P1x, P1y, P2x, P2y);\n            var u = (fromX - P1x) * (P2x - P1x) + (fromY - P1y) * (P2y - P1y);\n            u = u / (len * len);\n            ix = P1x + u * (P2x - P1x);\n            iy = P1y + u * (P2y - P1y);\n            var pRise = this.getLineLength(fromX, fromY, ix, iy);\n            var pRun = Math.sqrt(dist * dist - pRise * pRise);\n            run = Math.sqrt((pRun * pRun) / (1 + m * m));\n            if (P2x < P1x) {\n                run *= -1;\n            }\n            rise = m * run;\n            pt = {\n                x: ix + run,\n                y: iy + rise,\n            };\n        }\n        return pt;\n    }\n    static getPointOnCubicBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y, P4x, P4y) {\n        function CB1(t) {\n            return t * t * t;\n        }\n        function CB2(t) {\n            return 3 * t * t * (1 - t);\n        }\n        function CB3(t) {\n            return 3 * t * (1 - t) * (1 - t);\n        }\n        function CB4(t) {\n            return (1 - t) * (1 - t) * (1 - t);\n        }\n        var x = P4x * CB1(pct) + P3x * CB2(pct) + P2x * CB3(pct) + P1x * CB4(pct);\n        var y = P4y * CB1(pct) + P3y * CB2(pct) + P2y * CB3(pct) + P1y * CB4(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnQuadraticBezier(pct, P1x, P1y, P2x, P2y, P3x, P3y) {\n        function QB1(t) {\n            return t * t;\n        }\n        function QB2(t) {\n            return 2 * t * (1 - t);\n        }\n        function QB3(t) {\n            return (1 - t) * (1 - t);\n        }\n        var x = P3x * QB1(pct) + P2x * QB2(pct) + P1x * QB3(pct);\n        var y = P3y * QB1(pct) + P2y * QB2(pct) + P1y * QB3(pct);\n        return {\n            x: x,\n            y: y,\n        };\n    }\n    static getPointOnEllipticalArc(cx, cy, rx, ry, theta, psi) {\n        var cosPsi = Math.cos(psi), sinPsi = Math.sin(psi);\n        var pt = {\n            x: rx * Math.cos(theta),\n            y: ry * Math.sin(theta),\n        };\n        return {\n            x: cx + (pt.x * cosPsi - pt.y * sinPsi),\n            y: cy + (pt.x * sinPsi + pt.y * cosPsi),\n        };\n    }\n    static parsePathData(data) {\n        if (!data) {\n            return [];\n        }\n        var cs = data;\n        var cc = [\n            'm',\n            'M',\n            'l',\n            'L',\n            'v',\n            'V',\n            'h',\n            'H',\n            'z',\n            'Z',\n            'c',\n            'C',\n            'q',\n            'Q',\n            't',\n            'T',\n            's',\n            'S',\n            'a',\n            'A',\n        ];\n        cs = cs.replace(new RegExp(' ', 'g'), ',');\n        for (var n = 0; n < cc.length; n++) {\n            cs = cs.replace(new RegExp(cc[n], 'g'), '|' + cc[n]);\n        }\n        var arr = cs.split('|');\n        var ca = [];\n        var coords = [];\n        var cpx = 0;\n        var cpy = 0;\n        var re = /([-+]?((\\d+\\.\\d+)|((\\d+)|(\\.\\d+)))(?:e[-+]?\\d+)?)/gi;\n        var match;\n        for (n = 1; n < arr.length; n++) {\n            var str = arr[n];\n            var c = str.charAt(0);\n            str = str.slice(1);\n            coords.length = 0;\n            while ((match = re.exec(str))) {\n                coords.push(match[0]);\n            }\n            var p = [];\n            for (var j = 0, jlen = coords.length; j < jlen; j++) {\n                if (coords[j] === '00') {\n                    p.push(0, 0);\n                    continue;\n                }\n                var parsed = parseFloat(coords[j]);\n                if (!isNaN(parsed)) {\n                    p.push(parsed);\n                }\n                else {\n                    p.push(0);\n                }\n            }\n            while (p.length > 0) {\n                if (isNaN(p[0])) {\n                    break;\n                }\n                var cmd = null;\n                var points = [];\n                var startX = cpx, startY = cpy;\n                var prevCmd, ctlPtx, ctlPty;\n                var rx, ry, psi, fa, fs, x1, y1;\n                switch (c) {\n                    case 'l':\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'L':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'm':\n                        var dx = p.shift();\n                        var dy = p.shift();\n                        cpx += dx;\n                        cpy += dy;\n                        cmd = 'M';\n                        if (ca.length > 2 && ca[ca.length - 1].command === 'z') {\n                            for (var idx = ca.length - 2; idx >= 0; idx--) {\n                                if (ca[idx].command === 'M') {\n                                    cpx = ca[idx].points[0] + dx;\n                                    cpy = ca[idx].points[1] + dy;\n                                    break;\n                                }\n                            }\n                        }\n                        points.push(cpx, cpy);\n                        c = 'l';\n                        break;\n                    case 'M':\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'M';\n                        points.push(cpx, cpy);\n                        c = 'L';\n                        break;\n                    case 'h':\n                        cpx += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'H':\n                        cpx = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'v':\n                        cpy += p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'V':\n                        cpy = p.shift();\n                        cmd = 'L';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'C':\n                        points.push(p.shift(), p.shift(), p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'c':\n                        points.push(cpx + p.shift(), cpy + p.shift(), cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'S':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 's':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'C') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[2]);\n                            ctlPty = cpy + (cpy - prevCmd.points[3]);\n                        }\n                        points.push(ctlPtx, ctlPty, cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'C';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'Q':\n                        points.push(p.shift(), p.shift());\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        points.push(cpx, cpy);\n                        break;\n                    case 'q':\n                        points.push(cpx + p.shift(), cpy + p.shift());\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(cpx, cpy);\n                        break;\n                    case 'T':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 't':\n                        ctlPtx = cpx;\n                        ctlPty = cpy;\n                        prevCmd = ca[ca.length - 1];\n                        if (prevCmd.command === 'Q') {\n                            ctlPtx = cpx + (cpx - prevCmd.points[0]);\n                            ctlPty = cpy + (cpy - prevCmd.points[1]);\n                        }\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'Q';\n                        points.push(ctlPtx, ctlPty, cpx, cpy);\n                        break;\n                    case 'A':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx = p.shift();\n                        cpy = p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                    case 'a':\n                        rx = p.shift();\n                        ry = p.shift();\n                        psi = p.shift();\n                        fa = p.shift();\n                        fs = p.shift();\n                        x1 = cpx;\n                        y1 = cpy;\n                        cpx += p.shift();\n                        cpy += p.shift();\n                        cmd = 'A';\n                        points = this.convertEndpointToCenterParameterization(x1, y1, cpx, cpy, fa, fs, rx, ry, psi);\n                        break;\n                }\n                ca.push({\n                    command: cmd || c,\n                    points: points,\n                    start: {\n                        x: startX,\n                        y: startY,\n                    },\n                    pathLength: this.calcLength(startX, startY, cmd || c, points),\n                });\n            }\n            if (c === 'z' || c === 'Z') {\n                ca.push({\n                    command: 'z',\n                    points: [],\n                    start: undefined,\n                    pathLength: 0,\n                });\n            }\n        }\n        return ca;\n    }\n    static calcLength(x, y, cmd, points) {\n        var len, p1, p2, t;\n        var path = Path;\n        switch (cmd) {\n            case 'L':\n                return path.getLineLength(x, y, points[0], points[1]);\n            case 'C':\n                len = 0.0;\n                p1 = path.getPointOnCubicBezier(0, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnCubicBezier(t, x, y, points[0], points[1], points[2], points[3], points[4], points[5]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'Q':\n                len = 0.0;\n                p1 = path.getPointOnQuadraticBezier(0, x, y, points[0], points[1], points[2], points[3]);\n                for (t = 0.01; t <= 1; t += 0.01) {\n                    p2 = path.getPointOnQuadraticBezier(t, x, y, points[0], points[1], points[2], points[3]);\n                    len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                    p1 = p2;\n                }\n                return len;\n            case 'A':\n                len = 0.0;\n                var start = points[4];\n                var dTheta = points[5];\n                var end = points[4] + dTheta;\n                var inc = Math.PI / 180.0;\n                if (Math.abs(start - end) < inc) {\n                    inc = Math.abs(start - end);\n                }\n                p1 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], start, 0);\n                if (dTheta < 0) {\n                    for (t = start - inc; t > end; t -= inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                else {\n                    for (t = start + inc; t < end; t += inc) {\n                        p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], t, 0);\n                        len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                        p1 = p2;\n                    }\n                }\n                p2 = path.getPointOnEllipticalArc(points[0], points[1], points[2], points[3], end, 0);\n                len += path.getLineLength(p1.x, p1.y, p2.x, p2.y);\n                return len;\n        }\n        return 0;\n    }\n    static convertEndpointToCenterParameterization(x1, y1, x2, y2, fa, fs, rx, ry, psiDeg) {\n        var psi = psiDeg * (Math.PI / 180.0);\n        var xp = (Math.cos(psi) * (x1 - x2)) / 2.0 + (Math.sin(psi) * (y1 - y2)) / 2.0;\n        var yp = (-1 * Math.sin(psi) * (x1 - x2)) / 2.0 +\n            (Math.cos(psi) * (y1 - y2)) / 2.0;\n        var lambda = (xp * xp) / (rx * rx) + (yp * yp) / (ry * ry);\n        if (lambda > 1) {\n            rx *= Math.sqrt(lambda);\n            ry *= Math.sqrt(lambda);\n        }\n        var f = Math.sqrt((rx * rx * (ry * ry) - rx * rx * (yp * yp) - ry * ry * (xp * xp)) /\n            (rx * rx * (yp * yp) + ry * ry * (xp * xp)));\n        if (fa === fs) {\n            f *= -1;\n        }\n        if (isNaN(f)) {\n            f = 0;\n        }\n        var cxp = (f * rx * yp) / ry;\n        var cyp = (f * -ry * xp) / rx;\n        var cx = (x1 + x2) / 2.0 + Math.cos(psi) * cxp - Math.sin(psi) * cyp;\n        var cy = (y1 + y2) / 2.0 + Math.sin(psi) * cxp + Math.cos(psi) * cyp;\n        var vMag = function (v) {\n            return Math.sqrt(v[0] * v[0] + v[1] * v[1]);\n        };\n        var vRatio = function (u, v) {\n            return (u[0] * v[0] + u[1] * v[1]) / (vMag(u) * vMag(v));\n        };\n        var vAngle = function (u, v) {\n            return (u[0] * v[1] < u[1] * v[0] ? -1 : 1) * Math.acos(vRatio(u, v));\n        };\n        var theta = vAngle([1, 0], [(xp - cxp) / rx, (yp - cyp) / ry]);\n        var u = [(xp - cxp) / rx, (yp - cyp) / ry];\n        var v = [(-1 * xp - cxp) / rx, (-1 * yp - cyp) / ry];\n        var dTheta = vAngle(u, v);\n        if (vRatio(u, v) <= -1) {\n            dTheta = Math.PI;\n        }\n        if (vRatio(u, v) >= 1) {\n            dTheta = 0;\n        }\n        if (fs === 0 && dTheta > 0) {\n            dTheta = dTheta - 2 * Math.PI;\n        }\n        if (fs === 1 && dTheta < 0) {\n            dTheta = dTheta + 2 * Math.PI;\n        }\n        return [cx, cy, rx, ry, theta, dTheta, psi, fs];\n    }\n}\nPath.prototype.className = 'Path';\nPath.prototype._attrsAffectingSize = ['data'];\n_registerNode(Path);\nFactory.addGetterSetter(Path, 'data');\n","import { Factory } from '../Factory.js';\nimport { Line } from './Line.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nimport { Path } from './Path.js';\nexport class Arrow extends Line {\n    _sceneFunc(ctx) {\n        super._sceneFunc(ctx);\n        var PI2 = Math.PI * 2;\n        var points = this.points();\n        var tp = points;\n        var fromTension = this.tension() !== 0 && points.length > 4;\n        if (fromTension) {\n            tp = this.getTensionPoints();\n        }\n        var length = this.pointerLength();\n        var n = points.length;\n        var dx, dy;\n        if (fromTension) {\n            const lp = [\n                tp[tp.length - 4],\n                tp[tp.length - 3],\n                tp[tp.length - 2],\n                tp[tp.length - 1],\n                points[n - 2],\n                points[n - 1],\n            ];\n            const lastLength = Path.calcLength(tp[tp.length - 4], tp[tp.length - 3], 'C', lp);\n            const previous = Path.getPointOnQuadraticBezier(Math.min(1, 1 - length / lastLength), lp[0], lp[1], lp[2], lp[3], lp[4], lp[5]);\n            dx = points[n - 2] - previous.x;\n            dy = points[n - 1] - previous.y;\n        }\n        else {\n            dx = points[n - 2] - points[n - 4];\n            dy = points[n - 1] - points[n - 3];\n        }\n        var radians = (Math.atan2(dy, dx) + PI2) % PI2;\n        var width = this.pointerWidth();\n        if (this.pointerAtEnding()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[n - 2], points[n - 1]);\n            ctx.rotate(radians);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n        if (this.pointerAtBeginning()) {\n            ctx.save();\n            ctx.beginPath();\n            ctx.translate(points[0], points[1]);\n            if (fromTension) {\n                dx = (tp[0] + tp[2]) / 2 - points[0];\n                dy = (tp[1] + tp[3]) / 2 - points[1];\n            }\n            else {\n                dx = points[2] - points[0];\n                dy = points[3] - points[1];\n            }\n            ctx.rotate((Math.atan2(-dy, -dx) + PI2) % PI2);\n            ctx.moveTo(0, 0);\n            ctx.lineTo(-length, width / 2);\n            ctx.lineTo(-length, -width / 2);\n            ctx.closePath();\n            ctx.restore();\n            this.__fillStroke(ctx);\n        }\n    }\n    __fillStroke(ctx) {\n        var isDashEnabled = this.dashEnabled();\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = false;\n            ctx.setLineDash([]);\n        }\n        ctx.fillStrokeShape(this);\n        if (isDashEnabled) {\n            this.attrs.dashEnabled = true;\n        }\n    }\n    getSelfRect() {\n        const lineRect = super.getSelfRect();\n        const offset = this.pointerWidth() / 2;\n        return {\n            x: lineRect.x - offset,\n            y: lineRect.y - offset,\n            width: lineRect.width + offset * 2,\n            height: lineRect.height + offset * 2,\n        };\n    }\n}\nArrow.prototype.className = 'Arrow';\n_registerNode(Arrow);\nFactory.addGetterSetter(Arrow, 'pointerLength', 10, getNumberValidator());\nFactory.addGetterSetter(Arrow, 'pointerWidth', 10, getNumberValidator());\nFactory.addGetterSetter(Arrow, 'pointerAtBeginning', false);\nFactory.addGetterSetter(Arrow, 'pointerAtEnding', true);\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Circle extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.attrs.radius || 0, 0, Math.PI * 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        if (this.radius() !== width / 2) {\n            this.radius(width / 2);\n        }\n    }\n    setHeight(height) {\n        if (this.radius() !== height / 2) {\n            this.radius(height / 2);\n        }\n    }\n}\nCircle.prototype._centroid = true;\nCircle.prototype.className = 'Circle';\nCircle.prototype._attrsAffectingSize = ['radius'];\n_registerNode(Circle);\nFactory.addGetterSetter(Circle, 'radius', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Ellipse extends Shape {\n    _sceneFunc(context) {\n        var rx = this.radiusX(), ry = this.radiusY();\n        context.beginPath();\n        context.save();\n        if (rx !== ry) {\n            context.scale(1, ry / rx);\n        }\n        context.arc(0, 0, rx, 0, Math.PI * 2, false);\n        context.restore();\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radiusX() * 2;\n    }\n    getHeight() {\n        return this.radiusY() * 2;\n    }\n    setWidth(width) {\n        this.radiusX(width / 2);\n    }\n    setHeight(height) {\n        this.radiusY(height / 2);\n    }\n}\nEllipse.prototype.className = 'Ellipse';\nEllipse.prototype._centroid = true;\nEllipse.prototype._attrsAffectingSize = ['radiusX', 'radiusY'];\n_registerNode(Ellipse);\nFactory.addComponentsGetterSetter(Ellipse, 'radius', ['x', 'y']);\nFactory.addGetterSetter(Ellipse, 'radiusX', 0, getNumberValidator());\nFactory.addGetterSetter(Ellipse, 'radiusY', 0, getNumberValidator());\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Image extends Shape {\n    constructor(attrs) {\n        super(attrs);\n        this.on('imageChange.konva', () => {\n            this._setImageLoad();\n        });\n        this._setImageLoad();\n    }\n    _setImageLoad() {\n        const image = this.image();\n        if (image && image.complete) {\n            return;\n        }\n        if (image && image.readyState === 4) {\n            return;\n        }\n        if (image && image['addEventListener']) {\n            image['addEventListener']('load', () => {\n                this._requestDraw();\n            });\n        }\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _sceneFunc(context) {\n        const width = this.getWidth();\n        const height = this.getHeight();\n        const image = this.attrs.image;\n        let params;\n        if (image) {\n            const cropWidth = this.attrs.cropWidth;\n            const cropHeight = this.attrs.cropHeight;\n            if (cropWidth && cropHeight) {\n                params = [\n                    image,\n                    this.cropX(),\n                    this.cropY(),\n                    cropWidth,\n                    cropHeight,\n                    0,\n                    0,\n                    width,\n                    height,\n                ];\n            }\n            else {\n                params = [image, 0, 0, width, height];\n            }\n        }\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            context.drawImage.apply(context, params);\n        }\n    }\n    _hitFunc(context) {\n        var width = this.width(), height = this.height();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        var _a, _b;\n        return (_a = this.attrs.width) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.width;\n    }\n    getHeight() {\n        var _a, _b;\n        return (_a = this.attrs.height) !== null && _a !== void 0 ? _a : (_b = this.image()) === null || _b === void 0 ? void 0 : _b.height;\n    }\n    static fromURL(url, callback, onError = null) {\n        var img = Util.createImageElement();\n        img.onload = function () {\n            var image = new Image({\n                image: img,\n            });\n            callback(image);\n        };\n        img.onerror = onError;\n        img.crossOrigin = 'Anonymous';\n        img.src = url;\n    }\n}\nImage.prototype.className = 'Image';\n_registerNode(Image);\nFactory.addGetterSetter(Image, 'image');\nFactory.addComponentsGetterSetter(Image, 'crop', ['x', 'y', 'width', 'height']);\nFactory.addGetterSetter(Image, 'cropX', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropY', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Image, 'cropHeight', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Group } from '../Group.js';\nimport { getNumberOrArrayOfNumbersValidator, getNumberValidator, } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'padding',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n], CHANGE_KONVA = 'Change.konva', NONE = 'none', UP = 'up', RIGHT = 'right', DOWN = 'down', LEFT = 'left', attrChangeListLen = ATTR_CHANGE_LIST.length;\nexport class Label extends Group {\n    constructor(config) {\n        super(config);\n        this.on('add.konva', function (evt) {\n            this._addListeners(evt.child);\n            this._sync();\n        });\n    }\n    getText() {\n        return this.find('Text')[0];\n    }\n    getTag() {\n        return this.find('Tag')[0];\n    }\n    _addListeners(text) {\n        var that = this, n;\n        var func = function () {\n            that._sync();\n        };\n        for (n = 0; n < attrChangeListLen; n++) {\n            text.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, func);\n        }\n    }\n    getWidth() {\n        return this.getText().width();\n    }\n    getHeight() {\n        return this.getText().height();\n    }\n    _sync() {\n        var text = this.getText(), tag = this.getTag(), width, height, pointerDirection, pointerWidth, x, y, pointerHeight;\n        if (text && tag) {\n            width = text.width();\n            height = text.height();\n            pointerDirection = tag.pointerDirection();\n            pointerWidth = tag.pointerWidth();\n            pointerHeight = tag.pointerHeight();\n            x = 0;\n            y = 0;\n            switch (pointerDirection) {\n                case UP:\n                    x = width / 2;\n                    y = -1 * pointerHeight;\n                    break;\n                case RIGHT:\n                    x = width + pointerWidth;\n                    y = height / 2;\n                    break;\n                case DOWN:\n                    x = width / 2;\n                    y = height + pointerHeight;\n                    break;\n                case LEFT:\n                    x = -1 * pointerWidth;\n                    y = height / 2;\n                    break;\n            }\n            tag.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n                width: width,\n                height: height,\n            });\n            text.setAttrs({\n                x: -1 * x,\n                y: -1 * y,\n            });\n        }\n    }\n}\nLabel.prototype.className = 'Label';\n_registerNode(Label);\nexport class Tag extends Shape {\n    _sceneFunc(context) {\n        var width = this.width(), height = this.height(), pointerDirection = this.pointerDirection(), pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), cornerRadius = this.cornerRadius();\n        let topLeft = 0;\n        let topRight = 0;\n        let bottomLeft = 0;\n        let bottomRight = 0;\n        if (typeof cornerRadius === 'number') {\n            topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n        }\n        else {\n            topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n            topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n            bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n            bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n        }\n        context.beginPath();\n        context.moveTo(topLeft, 0);\n        if (pointerDirection === UP) {\n            context.lineTo((width - pointerWidth) / 2, 0);\n            context.lineTo(width / 2, -1 * pointerHeight);\n            context.lineTo((width + pointerWidth) / 2, 0);\n        }\n        context.lineTo(width - topRight, 0);\n        context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n        if (pointerDirection === RIGHT) {\n            context.lineTo(width, (height - pointerHeight) / 2);\n            context.lineTo(width + pointerWidth, height / 2);\n            context.lineTo(width, (height + pointerHeight) / 2);\n        }\n        context.lineTo(width, height - bottomRight);\n        context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n        if (pointerDirection === DOWN) {\n            context.lineTo((width + pointerWidth) / 2, height);\n            context.lineTo(width / 2, height + pointerHeight);\n            context.lineTo((width - pointerWidth) / 2, height);\n        }\n        context.lineTo(bottomLeft, height);\n        context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n        if (pointerDirection === LEFT) {\n            context.lineTo(0, (height + pointerHeight) / 2);\n            context.lineTo(-1 * pointerWidth, height / 2);\n            context.lineTo(0, (height - pointerHeight) / 2);\n        }\n        context.lineTo(0, topLeft);\n        context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getSelfRect() {\n        var x = 0, y = 0, pointerWidth = this.pointerWidth(), pointerHeight = this.pointerHeight(), direction = this.pointerDirection(), width = this.width(), height = this.height();\n        if (direction === UP) {\n            y -= pointerHeight;\n            height += pointerHeight;\n        }\n        else if (direction === DOWN) {\n            height += pointerHeight;\n        }\n        else if (direction === LEFT) {\n            x -= pointerWidth * 1.5;\n            width += pointerWidth;\n        }\n        else if (direction === RIGHT) {\n            width += pointerWidth * 1.5;\n        }\n        return {\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n        };\n    }\n}\nTag.prototype.className = 'Tag';\n_registerNode(Tag);\nFactory.addGetterSetter(Tag, 'pointerDirection', NONE);\nFactory.addGetterSetter(Tag, 'pointerWidth', 0, getNumberValidator());\nFactory.addGetterSetter(Tag, 'pointerHeight', 0, getNumberValidator());\nFactory.addGetterSetter(Tag, 'cornerRadius', 0, getNumberOrArrayOfNumbersValidator(4));\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { _registerNode } from '../Global.js';\nimport { getNumberOrArrayOfNumbersValidator } from '../Validators.js';\nexport class Rect extends Shape {\n    _sceneFunc(context) {\n        var cornerRadius = this.cornerRadius(), width = this.width(), height = this.height();\n        context.beginPath();\n        if (!cornerRadius) {\n            context.rect(0, 0, width, height);\n        }\n        else {\n            let topLeft = 0;\n            let topRight = 0;\n            let bottomLeft = 0;\n            let bottomRight = 0;\n            if (typeof cornerRadius === 'number') {\n                topLeft = topRight = bottomLeft = bottomRight = Math.min(cornerRadius, width / 2, height / 2);\n            }\n            else {\n                topLeft = Math.min(cornerRadius[0] || 0, width / 2, height / 2);\n                topRight = Math.min(cornerRadius[1] || 0, width / 2, height / 2);\n                bottomRight = Math.min(cornerRadius[2] || 0, width / 2, height / 2);\n                bottomLeft = Math.min(cornerRadius[3] || 0, width / 2, height / 2);\n            }\n            context.moveTo(topLeft, 0);\n            context.lineTo(width - topRight, 0);\n            context.arc(width - topRight, topRight, topRight, (Math.PI * 3) / 2, 0, false);\n            context.lineTo(width, height - bottomRight);\n            context.arc(width - bottomRight, height - bottomRight, bottomRight, 0, Math.PI / 2, false);\n            context.lineTo(bottomLeft, height);\n            context.arc(bottomLeft, height - bottomLeft, bottomLeft, Math.PI / 2, Math.PI, false);\n            context.lineTo(0, topLeft);\n            context.arc(topLeft, topLeft, topLeft, Math.PI, (Math.PI * 3) / 2, false);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n}\nRect.prototype.className = 'Rect';\n_registerNode(Rect);\nFactory.addGetterSetter(Rect, 'cornerRadius', 0, getNumberOrArrayOfNumbersValidator(4));\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class RegularPolygon extends Shape {\n    _sceneFunc(context) {\n        const points = this._getPoints();\n        context.beginPath();\n        context.moveTo(points[0].x, points[0].y);\n        for (var n = 1; n < points.length; n++) {\n            context.lineTo(points[n].x, points[n].y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    _getPoints() {\n        const sides = this.attrs.sides;\n        const radius = this.attrs.radius || 0;\n        const points = [];\n        for (var n = 0; n < sides; n++) {\n            points.push({\n                x: radius * Math.sin((n * 2 * Math.PI) / sides),\n                y: -1 * radius * Math.cos((n * 2 * Math.PI) / sides),\n            });\n        }\n        return points;\n    }\n    getSelfRect() {\n        const points = this._getPoints();\n        var minX = points[0].x;\n        var maxX = points[0].y;\n        var minY = points[0].x;\n        var maxY = points[0].y;\n        points.forEach((point) => {\n            minX = Math.min(minX, point.x);\n            maxX = Math.max(maxX, point.x);\n            minY = Math.min(minY, point.y);\n            maxY = Math.max(maxY, point.y);\n        });\n        return {\n            x: minX,\n            y: minY,\n            width: maxX - minX,\n            height: maxY - minY,\n        };\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nRegularPolygon.prototype.className = 'RegularPolygon';\nRegularPolygon.prototype._centroid = true;\nRegularPolygon.prototype._attrsAffectingSize = ['radius'];\n_registerNode(RegularPolygon);\nFactory.addGetterSetter(RegularPolygon, 'radius', 0, getNumberValidator());\nFactory.addGetterSetter(RegularPolygon, 'sides', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar PIx2 = Math.PI * 2;\nexport class Ring extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.innerRadius(), 0, PIx2, false);\n        context.moveTo(this.outerRadius(), 0);\n        context.arc(0, 0, this.outerRadius(), PIx2, 0, true);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nRing.prototype.className = 'Ring';\nRing.prototype._centroid = true;\nRing.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Ring);\nFactory.addGetterSetter(Ring, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Ring, 'outerRadius', 0, getNumberValidator());\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Animation } from '../Animation.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Sprite extends Shape {\n    constructor(config) {\n        super(config);\n        this._updated = true;\n        this.anim = new Animation(() => {\n            var updated = this._updated;\n            this._updated = false;\n            return updated;\n        });\n        this.on('animationChange.konva', function () {\n            this.frameIndex(0);\n        });\n        this.on('frameIndexChange.konva', function () {\n            this._updated = true;\n        });\n        this.on('frameRateChange.konva', function () {\n            if (!this.anim.isRunning()) {\n                return;\n            }\n            clearInterval(this.interval);\n            this._setInterval();\n        });\n    }\n    _sceneFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), x = set[ix4 + 0], y = set[ix4 + 1], width = set[ix4 + 2], height = set[ix4 + 3], image = this.image();\n        if (this.hasFill() || this.hasStroke()) {\n            context.beginPath();\n            context.rect(0, 0, width, height);\n            context.closePath();\n            context.fillStrokeShape(this);\n        }\n        if (image) {\n            if (offsets) {\n                var offset = offsets[anim], ix2 = index * 2;\n                context.drawImage(image, x, y, width, height, offset[ix2 + 0], offset[ix2 + 1], width, height);\n            }\n            else {\n                context.drawImage(image, x, y, width, height, 0, 0, width, height);\n            }\n        }\n    }\n    _hitFunc(context) {\n        var anim = this.animation(), index = this.frameIndex(), ix4 = index * 4, set = this.animations()[anim], offsets = this.frameOffsets(), width = set[ix4 + 2], height = set[ix4 + 3];\n        context.beginPath();\n        if (offsets) {\n            var offset = offsets[anim];\n            var ix2 = index * 2;\n            context.rect(offset[ix2 + 0], offset[ix2 + 1], width, height);\n        }\n        else {\n            context.rect(0, 0, width, height);\n        }\n        context.closePath();\n        context.fillShape(this);\n    }\n    _useBufferCanvas() {\n        return super._useBufferCanvas(true);\n    }\n    _setInterval() {\n        var that = this;\n        this.interval = setInterval(function () {\n            that._updateIndex();\n        }, 1000 / this.frameRate());\n    }\n    start() {\n        if (this.isRunning()) {\n            return;\n        }\n        var layer = this.getLayer();\n        this.anim.setLayers(layer);\n        this._setInterval();\n        this.anim.start();\n    }\n    stop() {\n        this.anim.stop();\n        clearInterval(this.interval);\n    }\n    isRunning() {\n        return this.anim.isRunning();\n    }\n    _updateIndex() {\n        var index = this.frameIndex(), animation = this.animation(), animations = this.animations(), anim = animations[animation], len = anim.length / 4;\n        if (index < len - 1) {\n            this.frameIndex(index + 1);\n        }\n        else {\n            this.frameIndex(0);\n        }\n    }\n}\nSprite.prototype.className = 'Sprite';\n_registerNode(Sprite);\nFactory.addGetterSetter(Sprite, 'animation');\nFactory.addGetterSetter(Sprite, 'animations');\nFactory.addGetterSetter(Sprite, 'frameOffsets');\nFactory.addGetterSetter(Sprite, 'image');\nFactory.addGetterSetter(Sprite, 'frameIndex', 0, getNumberValidator());\nFactory.addGetterSetter(Sprite, 'frameRate', 17, getNumberValidator());\nFactory.backCompat(Sprite, {\n    index: 'frameIndex',\n    getIndex: 'getFrameIndex',\n    setIndex: 'setFrameIndex',\n});\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Star extends Shape {\n    _sceneFunc(context) {\n        var innerRadius = this.innerRadius(), outerRadius = this.outerRadius(), numPoints = this.numPoints();\n        context.beginPath();\n        context.moveTo(0, 0 - outerRadius);\n        for (var n = 1; n < numPoints * 2; n++) {\n            var radius = n % 2 === 0 ? outerRadius : innerRadius;\n            var x = radius * Math.sin((n * Math.PI) / numPoints);\n            var y = -1 * radius * Math.cos((n * Math.PI) / numPoints);\n            context.lineTo(x, y);\n        }\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.outerRadius() * 2;\n    }\n    getHeight() {\n        return this.outerRadius() * 2;\n    }\n    setWidth(width) {\n        this.outerRadius(width / 2);\n    }\n    setHeight(height) {\n        this.outerRadius(height / 2);\n    }\n}\nStar.prototype.className = 'Star';\nStar.prototype._centroid = true;\nStar.prototype._attrsAffectingSize = ['innerRadius', 'outerRadius'];\n_registerNode(Star);\nFactory.addGetterSetter(Star, 'numPoints', 5, getNumberValidator());\nFactory.addGetterSetter(Star, 'innerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Star, 'outerRadius', 0, getNumberValidator());\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { getNumberValidator, getStringValidator, getNumberOrAutoValidator, getBooleanValidator, } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport function stringToArray(string) {\n    return Array.from(string);\n}\nvar AUTO = 'auto', CENTER = 'center', JUSTIFY = 'justify', CHANGE_KONVA = 'Change.konva', CONTEXT_2D = '2d', DASH = '-', LEFT = 'left', TEXT = 'text', TEXT_UPPER = 'Text', TOP = 'top', BOTTOM = 'bottom', MIDDLE = 'middle', NORMAL = 'normal', PX_SPACE = 'px ', SPACE = ' ', RIGHT = 'right', WORD = 'word', CHAR = 'char', NONE = 'none', ELLIPSIS = '…', ATTR_CHANGE_LIST = [\n    'fontFamily',\n    'fontSize',\n    'fontStyle',\n    'fontVariant',\n    'padding',\n    'align',\n    'verticalAlign',\n    'lineHeight',\n    'text',\n    'width',\n    'height',\n    'wrap',\n    'ellipsis',\n    'letterSpacing',\n], attrChangeListLen = ATTR_CHANGE_LIST.length;\nfunction normalizeFontFamily(fontFamily) {\n    return fontFamily\n        .split(',')\n        .map((family) => {\n        family = family.trim();\n        const hasSpace = family.indexOf(' ') >= 0;\n        const hasQuotes = family.indexOf('\"') >= 0 || family.indexOf(\"'\") >= 0;\n        if (hasSpace && !hasQuotes) {\n            family = `\"${family}\"`;\n        }\n        return family;\n    })\n        .join(', ');\n}\nvar dummyContext;\nfunction getDummyContext() {\n    if (dummyContext) {\n        return dummyContext;\n    }\n    dummyContext = Util.createCanvasElement().getContext(CONTEXT_2D);\n    return dummyContext;\n}\nfunction _fillFunc(context) {\n    context.fillText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this._partialText, this._partialTextX, this._partialTextY);\n}\nfunction checkDefaultFill(config) {\n    config = config || {};\n    if (!config.fillLinearGradientColorStops &&\n        !config.fillRadialGradientColorStops &&\n        !config.fillPatternImage) {\n        config.fill = config.fill || 'black';\n    }\n    return config;\n}\nexport class Text extends Shape {\n    constructor(config) {\n        super(checkDefaultFill(config));\n        this._partialTextX = 0;\n        this._partialTextY = 0;\n        for (var n = 0; n < attrChangeListLen; n++) {\n            this.on(ATTR_CHANGE_LIST[n] + CHANGE_KONVA, this._setTextData);\n        }\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        var textArr = this.textArr, textArrLen = textArr.length;\n        if (!this.text()) {\n            return;\n        }\n        var padding = this.padding(), fontSize = this.fontSize(), lineHeightPx = this.lineHeight() * fontSize, verticalAlign = this.verticalAlign(), alignY = 0, align = this.align(), totalWidth = this.getWidth(), letterSpacing = this.letterSpacing(), fill = this.fill(), textDecoration = this.textDecoration(), shouldUnderline = textDecoration.indexOf('underline') !== -1, shouldLineThrough = textDecoration.indexOf('line-through') !== -1, n;\n        var translateY = 0;\n        var translateY = lineHeightPx / 2;\n        var lineTranslateX = 0;\n        var lineTranslateY = 0;\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', MIDDLE);\n        context.setAttr('textAlign', LEFT);\n        if (verticalAlign === MIDDLE) {\n            alignY = (this.getHeight() - textArrLen * lineHeightPx - padding * 2) / 2;\n        }\n        else if (verticalAlign === BOTTOM) {\n            alignY = this.getHeight() - textArrLen * lineHeightPx - padding * 2;\n        }\n        context.translate(padding, alignY + padding);\n        for (n = 0; n < textArrLen; n++) {\n            var lineTranslateX = 0;\n            var lineTranslateY = 0;\n            var obj = textArr[n], text = obj.text, width = obj.width, lastLine = obj.lastInParagraph, spacesNumber, oneWord, lineWidth;\n            context.save();\n            if (align === RIGHT) {\n                lineTranslateX += totalWidth - width - padding * 2;\n            }\n            else if (align === CENTER) {\n                lineTranslateX += (totalWidth - width - padding * 2) / 2;\n            }\n            if (shouldUnderline) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY + Math.round(fontSize / 2));\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY + Math.round(fontSize / 2));\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (shouldLineThrough) {\n                context.save();\n                context.beginPath();\n                context.moveTo(lineTranslateX, translateY + lineTranslateY);\n                spacesNumber = text.split(' ').length - 1;\n                oneWord = spacesNumber === 0;\n                lineWidth =\n                    align === JUSTIFY && lastLine && !oneWord\n                        ? totalWidth - padding * 2\n                        : width;\n                context.lineTo(lineTranslateX + Math.round(lineWidth), translateY + lineTranslateY);\n                context.lineWidth = fontSize / 15;\n                context.strokeStyle = fill;\n                context.stroke();\n                context.restore();\n            }\n            if (letterSpacing !== 0 || align === JUSTIFY) {\n                spacesNumber = text.split(' ').length - 1;\n                var array = stringToArray(text);\n                for (var li = 0; li < array.length; li++) {\n                    var letter = array[li];\n                    if (letter === ' ' && !lastLine && align === JUSTIFY) {\n                        lineTranslateX += (totalWidth - padding * 2 - width) / spacesNumber;\n                    }\n                    this._partialTextX = lineTranslateX;\n                    this._partialTextY = translateY + lineTranslateY;\n                    this._partialText = letter;\n                    context.fillStrokeShape(this);\n                    lineTranslateX += this.measureSize(letter).width + letterSpacing;\n                }\n            }\n            else {\n                this._partialTextX = lineTranslateX;\n                this._partialTextY = translateY + lineTranslateY;\n                this._partialText = text;\n                context.fillStrokeShape(this);\n            }\n            context.restore();\n            if (textArrLen > 1) {\n                translateY += lineHeightPx;\n            }\n        }\n    }\n    _hitFunc(context) {\n        var width = this.getWidth(), height = this.getHeight();\n        context.beginPath();\n        context.rect(0, 0, width, height);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    setText(text) {\n        var str = Util._isString(text)\n            ? text\n            : text === null || text === undefined\n                ? ''\n                : text + '';\n        this._setAttr(TEXT, str);\n        return this;\n    }\n    getWidth() {\n        var isAuto = this.attrs.width === AUTO || this.attrs.width === undefined;\n        return isAuto ? this.getTextWidth() + this.padding() * 2 : this.attrs.width;\n    }\n    getHeight() {\n        var isAuto = this.attrs.height === AUTO || this.attrs.height === undefined;\n        return isAuto\n            ? this.fontSize() * this.textArr.length * this.lineHeight() +\n                this.padding() * 2\n            : this.attrs.height;\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    measureSize(text) {\n        var _context = getDummyContext(), fontSize = this.fontSize(), metrics;\n        _context.save();\n        _context.font = this._getContextFont();\n        metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: fontSize,\n        };\n    }\n    _getContextFont() {\n        return (this.fontStyle() +\n            SPACE +\n            this.fontVariant() +\n            SPACE +\n            (this.fontSize() + PX_SPACE) +\n            normalizeFontFamily(this.fontFamily()));\n    }\n    _addTextLine(line) {\n        if (this.align() === JUSTIFY) {\n            line = line.trim();\n        }\n        var width = this._getTextWidth(line);\n        return this.textArr.push({\n            text: line,\n            width: width,\n            lastInParagraph: false,\n        });\n    }\n    _getTextWidth(text) {\n        var letterSpacing = this.letterSpacing();\n        var length = text.length;\n        return (getDummyContext().measureText(text).width +\n            (length ? letterSpacing * (length - 1) : 0));\n    }\n    _setTextData() {\n        var lines = this.text().split('\\n'), fontSize = +this.fontSize(), textWidth = 0, lineHeightPx = this.lineHeight() * fontSize, width = this.attrs.width, height = this.attrs.height, fixedWidth = width !== AUTO && width !== undefined, fixedHeight = height !== AUTO && height !== undefined, padding = this.padding(), maxWidth = width - padding * 2, maxHeightPx = height - padding * 2, currentHeightPx = 0, wrap = this.wrap(), shouldWrap = wrap !== NONE, wrapAtWord = wrap !== CHAR && shouldWrap, shouldAddEllipsis = this.ellipsis();\n        this.textArr = [];\n        getDummyContext().font = this._getContextFont();\n        var additionalWidth = shouldAddEllipsis ? this._getTextWidth(ELLIPSIS) : 0;\n        for (var i = 0, max = lines.length; i < max; ++i) {\n            var line = lines[i];\n            var lineWidth = this._getTextWidth(line);\n            if (fixedWidth && lineWidth > maxWidth) {\n                while (line.length > 0) {\n                    var low = 0, high = line.length, match = '', matchWidth = 0;\n                    while (low < high) {\n                        var mid = (low + high) >>> 1, substr = line.slice(0, mid + 1), substrWidth = this._getTextWidth(substr) + additionalWidth;\n                        if (substrWidth <= maxWidth) {\n                            low = mid + 1;\n                            match = substr;\n                            matchWidth = substrWidth;\n                        }\n                        else {\n                            high = mid;\n                        }\n                    }\n                    if (match) {\n                        if (wrapAtWord) {\n                            var wrapIndex;\n                            var nextChar = line[match.length];\n                            var nextIsSpaceOrDash = nextChar === SPACE || nextChar === DASH;\n                            if (nextIsSpaceOrDash && matchWidth <= maxWidth) {\n                                wrapIndex = match.length;\n                            }\n                            else {\n                                wrapIndex =\n                                    Math.max(match.lastIndexOf(SPACE), match.lastIndexOf(DASH)) +\n                                        1;\n                            }\n                            if (wrapIndex > 0) {\n                                low = wrapIndex;\n                                match = match.slice(0, low);\n                                matchWidth = this._getTextWidth(match);\n                            }\n                        }\n                        match = match.trimRight();\n                        this._addTextLine(match);\n                        textWidth = Math.max(textWidth, matchWidth);\n                        currentHeightPx += lineHeightPx;\n                        if (!shouldWrap ||\n                            (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx)) {\n                            var lastLine = this.textArr[this.textArr.length - 1];\n                            if (lastLine) {\n                                if (shouldAddEllipsis) {\n                                    var haveSpace = this._getTextWidth(lastLine.text + ELLIPSIS) < maxWidth;\n                                    if (!haveSpace) {\n                                        lastLine.text = lastLine.text.slice(0, lastLine.text.length - 3);\n                                    }\n                                    this.textArr.splice(this.textArr.length - 1, 1);\n                                    this._addTextLine(lastLine.text + ELLIPSIS);\n                                }\n                            }\n                            break;\n                        }\n                        line = line.slice(low);\n                        line = line.trimLeft();\n                        if (line.length > 0) {\n                            lineWidth = this._getTextWidth(line);\n                            if (lineWidth <= maxWidth) {\n                                this._addTextLine(line);\n                                currentHeightPx += lineHeightPx;\n                                textWidth = Math.max(textWidth, lineWidth);\n                                break;\n                            }\n                        }\n                    }\n                    else {\n                        break;\n                    }\n                }\n            }\n            else {\n                this._addTextLine(line);\n                currentHeightPx += lineHeightPx;\n                textWidth = Math.max(textWidth, lineWidth);\n            }\n            if (fixedHeight && currentHeightPx + lineHeightPx > maxHeightPx) {\n                break;\n            }\n            if (this.textArr[this.textArr.length - 1]) {\n                this.textArr[this.textArr.length - 1].lastInParagraph = true;\n            }\n        }\n        this.textHeight = fontSize;\n        this.textWidth = textWidth;\n    }\n    getStrokeScaleEnabled() {\n        return true;\n    }\n}\nText.prototype._fillFunc = _fillFunc;\nText.prototype._strokeFunc = _strokeFunc;\nText.prototype.className = TEXT_UPPER;\nText.prototype._attrsAffectingSize = [\n    'text',\n    'fontSize',\n    'padding',\n    'wrap',\n    'lineHeight',\n    'letterSpacing',\n];\n_registerNode(Text);\nFactory.overWriteSetter(Text, 'width', getNumberOrAutoValidator());\nFactory.overWriteSetter(Text, 'height', getNumberOrAutoValidator());\nFactory.addGetterSetter(Text, 'fontFamily', 'Arial');\nFactory.addGetterSetter(Text, 'fontSize', 12, getNumberValidator());\nFactory.addGetterSetter(Text, 'fontStyle', NORMAL);\nFactory.addGetterSetter(Text, 'fontVariant', NORMAL);\nFactory.addGetterSetter(Text, 'padding', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'align', LEFT);\nFactory.addGetterSetter(Text, 'verticalAlign', TOP);\nFactory.addGetterSetter(Text, 'lineHeight', 1, getNumberValidator());\nFactory.addGetterSetter(Text, 'wrap', WORD);\nFactory.addGetterSetter(Text, 'ellipsis', false, getBooleanValidator());\nFactory.addGetterSetter(Text, 'letterSpacing', 0, getNumberValidator());\nFactory.addGetterSetter(Text, 'text', '', getStringValidator());\nFactory.addGetterSetter(Text, 'textDecoration', '');\n","import { Util } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Path } from './Path.js';\nimport { Text, stringToArray } from './Text.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar EMPTY_STRING = '', NORMAL = 'normal';\nfunction _fillFunc(context) {\n    context.fillText(this.partialText, 0, 0);\n}\nfunction _strokeFunc(context) {\n    context.strokeText(this.partialText, 0, 0);\n}\nexport class TextPath extends Shape {\n    constructor(config) {\n        super(config);\n        this.dummyCanvas = Util.createCanvasElement();\n        this.dataArray = [];\n        this.dataArray = Path.parsePathData(this.attrs.data);\n        this.on('dataChange.konva', function () {\n            this.dataArray = Path.parsePathData(this.attrs.data);\n            this._setTextData();\n        });\n        this.on('textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva', this._setTextData);\n        this._setTextData();\n    }\n    _sceneFunc(context) {\n        context.setAttr('font', this._getContextFont());\n        context.setAttr('textBaseline', this.textBaseline());\n        context.setAttr('textAlign', 'left');\n        context.save();\n        var textDecoration = this.textDecoration();\n        var fill = this.fill();\n        var fontSize = this.fontSize();\n        var glyphInfo = this.glyphInfo;\n        if (textDecoration === 'underline') {\n            context.beginPath();\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            context.save();\n            var p0 = glyphInfo[i].p0;\n            context.translate(p0.x, p0.y);\n            context.rotate(glyphInfo[i].rotation);\n            this.partialText = glyphInfo[i].text;\n            context.fillStrokeShape(this);\n            if (textDecoration === 'underline') {\n                if (i === 0) {\n                    context.moveTo(0, fontSize / 2 + 1);\n                }\n                context.lineTo(fontSize, fontSize / 2 + 1);\n            }\n            context.restore();\n        }\n        if (textDecoration === 'underline') {\n            context.strokeStyle = fill;\n            context.lineWidth = fontSize / 20;\n            context.stroke();\n        }\n        context.restore();\n    }\n    _hitFunc(context) {\n        context.beginPath();\n        var glyphInfo = this.glyphInfo;\n        if (glyphInfo.length >= 1) {\n            var p0 = glyphInfo[0].p0;\n            context.moveTo(p0.x, p0.y);\n        }\n        for (var i = 0; i < glyphInfo.length; i++) {\n            var p1 = glyphInfo[i].p1;\n            context.lineTo(p1.x, p1.y);\n        }\n        context.setAttr('lineWidth', this.fontSize());\n        context.setAttr('strokeStyle', this.colorKey);\n        context.stroke();\n    }\n    getTextWidth() {\n        return this.textWidth;\n    }\n    getTextHeight() {\n        Util.warn('text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height.');\n        return this.textHeight;\n    }\n    setText(text) {\n        return Text.prototype.setText.call(this, text);\n    }\n    _getContextFont() {\n        return Text.prototype._getContextFont.call(this);\n    }\n    _getTextSize(text) {\n        var dummyCanvas = this.dummyCanvas;\n        var _context = dummyCanvas.getContext('2d');\n        _context.save();\n        _context.font = this._getContextFont();\n        var metrics = _context.measureText(text);\n        _context.restore();\n        return {\n            width: metrics.width,\n            height: parseInt(this.attrs.fontSize, 10),\n        };\n    }\n    _setTextData() {\n        var that = this;\n        var size = this._getTextSize(this.attrs.text);\n        var letterSpacing = this.letterSpacing();\n        var align = this.align();\n        var kerningFunc = this.kerningFunc();\n        this.textWidth = size.width;\n        this.textHeight = size.height;\n        var textFullWidth = Math.max(this.textWidth + ((this.attrs.text || '').length - 1) * letterSpacing, 0);\n        this.glyphInfo = [];\n        var fullPathWidth = 0;\n        for (var l = 0; l < that.dataArray.length; l++) {\n            if (that.dataArray[l].pathLength > 0) {\n                fullPathWidth += that.dataArray[l].pathLength;\n            }\n        }\n        var offset = 0;\n        if (align === 'center') {\n            offset = Math.max(0, fullPathWidth / 2 - textFullWidth / 2);\n        }\n        if (align === 'right') {\n            offset = Math.max(0, fullPathWidth - textFullWidth);\n        }\n        var charArr = stringToArray(this.text());\n        var spacesNumber = this.text().split(' ').length - 1;\n        var p0, p1, pathCmd;\n        var pIndex = -1;\n        var currentT = 0;\n        var getNextPathSegment = function () {\n            currentT = 0;\n            var pathData = that.dataArray;\n            for (var j = pIndex + 1; j < pathData.length; j++) {\n                if (pathData[j].pathLength > 0) {\n                    pIndex = j;\n                    return pathData[j];\n                }\n                else if (pathData[j].command === 'M') {\n                    p0 = {\n                        x: pathData[j].points[0],\n                        y: pathData[j].points[1],\n                    };\n                }\n            }\n            return {};\n        };\n        var findSegmentToFitCharacter = function (c) {\n            var glyphWidth = that._getTextSize(c).width + letterSpacing;\n            if (c === ' ' && align === 'justify') {\n                glyphWidth += (fullPathWidth - textFullWidth) / spacesNumber;\n            }\n            var currLen = 0;\n            var attempts = 0;\n            p1 = undefined;\n            while (Math.abs(glyphWidth - currLen) / glyphWidth > 0.01 &&\n                attempts < 20) {\n                attempts++;\n                var cumulativePathLength = currLen;\n                while (pathCmd === undefined) {\n                    pathCmd = getNextPathSegment();\n                    if (pathCmd &&\n                        cumulativePathLength + pathCmd.pathLength < glyphWidth) {\n                        cumulativePathLength += pathCmd.pathLength;\n                        pathCmd = undefined;\n                    }\n                }\n                if (pathCmd === {} || p0 === undefined) {\n                    return undefined;\n                }\n                var needNewSegment = false;\n                switch (pathCmd.command) {\n                    case 'L':\n                        if (Path.getLineLength(p0.x, p0.y, pathCmd.points[0], pathCmd.points[1]) > glyphWidth) {\n                            p1 = Path.getPointOnLine(glyphWidth, p0.x, p0.y, pathCmd.points[0], pathCmd.points[1], p0.x, p0.y);\n                        }\n                        else {\n                            pathCmd = undefined;\n                        }\n                        break;\n                    case 'A':\n                        var start = pathCmd.points[4];\n                        var dTheta = pathCmd.points[5];\n                        var end = pathCmd.points[4] + dTheta;\n                        if (currentT === 0) {\n                            currentT = start + 0.00000001;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += ((Math.PI / 180.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        else {\n                            currentT -= ((Math.PI / 360.0) * dTheta) / Math.abs(dTheta);\n                        }\n                        if ((dTheta < 0 && currentT < end) ||\n                            (dTheta >= 0 && currentT > end)) {\n                            currentT = end;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnEllipticalArc(pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], currentT, pathCmd.points[6]);\n                        break;\n                    case 'C':\n                        if (currentT === 0) {\n                            if (glyphWidth > pathCmd.pathLength) {\n                                currentT = 0.00000001;\n                            }\n                            else {\n                                currentT = glyphWidth / pathCmd.pathLength;\n                            }\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength / 2;\n                        }\n                        else {\n                            currentT = Math.max(currentT - (currLen - glyphWidth) / pathCmd.pathLength / 2, 0);\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnCubicBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3], pathCmd.points[4], pathCmd.points[5]);\n                        break;\n                    case 'Q':\n                        if (currentT === 0) {\n                            currentT = glyphWidth / pathCmd.pathLength;\n                        }\n                        else if (glyphWidth > currLen) {\n                            currentT += (glyphWidth - currLen) / pathCmd.pathLength;\n                        }\n                        else {\n                            currentT -= (currLen - glyphWidth) / pathCmd.pathLength;\n                        }\n                        if (currentT > 1.0) {\n                            currentT = 1.0;\n                            needNewSegment = true;\n                        }\n                        p1 = Path.getPointOnQuadraticBezier(currentT, pathCmd.start.x, pathCmd.start.y, pathCmd.points[0], pathCmd.points[1], pathCmd.points[2], pathCmd.points[3]);\n                        break;\n                }\n                if (p1 !== undefined) {\n                    currLen = Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n                }\n                if (needNewSegment) {\n                    needNewSegment = false;\n                    pathCmd = undefined;\n                }\n            }\n        };\n        var testChar = 'C';\n        var glyphWidth = that._getTextSize(testChar).width + letterSpacing;\n        var lettersInOffset = offset / glyphWidth - 1;\n        for (var k = 0; k < lettersInOffset; k++) {\n            findSegmentToFitCharacter(testChar);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            p0 = p1;\n        }\n        for (var i = 0; i < charArr.length; i++) {\n            findSegmentToFitCharacter(charArr[i]);\n            if (p0 === undefined || p1 === undefined) {\n                break;\n            }\n            var width = Path.getLineLength(p0.x, p0.y, p1.x, p1.y);\n            var kern = 0;\n            if (kerningFunc) {\n                try {\n                    kern = kerningFunc(charArr[i - 1], charArr[i]) * this.fontSize();\n                }\n                catch (e) {\n                    kern = 0;\n                }\n            }\n            p0.x += kern;\n            p1.x += kern;\n            this.textWidth += kern;\n            var midpoint = Path.getPointOnLine(kern + width / 2.0, p0.x, p0.y, p1.x, p1.y);\n            var rotation = Math.atan2(p1.y - p0.y, p1.x - p0.x);\n            this.glyphInfo.push({\n                transposeX: midpoint.x,\n                transposeY: midpoint.y,\n                text: charArr[i],\n                rotation: rotation,\n                p0: p0,\n                p1: p1,\n            });\n            p0 = p1;\n        }\n    }\n    getSelfRect() {\n        if (!this.glyphInfo.length) {\n            return {\n                x: 0,\n                y: 0,\n                width: 0,\n                height: 0,\n            };\n        }\n        var points = [];\n        this.glyphInfo.forEach(function (info) {\n            points.push(info.p0.x);\n            points.push(info.p0.y);\n            points.push(info.p1.x);\n            points.push(info.p1.y);\n        });\n        var minX = points[0] || 0;\n        var maxX = points[0] || 0;\n        var minY = points[1] || 0;\n        var maxY = points[1] || 0;\n        var x, y;\n        for (var i = 0; i < points.length / 2; i++) {\n            x = points[i * 2];\n            y = points[i * 2 + 1];\n            minX = Math.min(minX, x);\n            maxX = Math.max(maxX, x);\n            minY = Math.min(minY, y);\n            maxY = Math.max(maxY, y);\n        }\n        var fontSize = this.fontSize();\n        return {\n            x: minX - fontSize / 2,\n            y: minY - fontSize / 2,\n            width: maxX - minX + fontSize,\n            height: maxY - minY + fontSize,\n        };\n    }\n}\nTextPath.prototype._fillFunc = _fillFunc;\nTextPath.prototype._strokeFunc = _strokeFunc;\nTextPath.prototype._fillFuncHit = _fillFunc;\nTextPath.prototype._strokeFuncHit = _strokeFunc;\nTextPath.prototype.className = 'TextPath';\nTextPath.prototype._attrsAffectingSize = ['text', 'fontSize', 'data'];\n_registerNode(TextPath);\nFactory.addGetterSetter(TextPath, 'data');\nFactory.addGetterSetter(TextPath, 'fontFamily', 'Arial');\nFactory.addGetterSetter(TextPath, 'fontSize', 12, getNumberValidator());\nFactory.addGetterSetter(TextPath, 'fontStyle', NORMAL);\nFactory.addGetterSetter(TextPath, 'align', 'left');\nFactory.addGetterSetter(TextPath, 'letterSpacing', 0, getNumberValidator());\nFactory.addGetterSetter(TextPath, 'textBaseline', 'middle');\nFactory.addGetterSetter(TextPath, 'fontVariant', NORMAL);\nFactory.addGetterSetter(TextPath, 'text', EMPTY_STRING);\nFactory.addGetterSetter(TextPath, 'textDecoration', null);\nFactory.addGetterSetter(TextPath, 'kerningFunc', null);\n","import { Util, Transform } from '../Util.js';\nimport { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Shape } from '../Shape.js';\nimport { Rect } from './Rect.js';\nimport { Group } from '../Group.js';\nimport { Konva } from '../Global.js';\nimport { getBooleanValidator, getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nvar EVENTS_NAME = 'tr-konva';\nvar ATTR_CHANGE_LIST = [\n    'resizeEnabledChange',\n    'rotateAnchorOffsetChange',\n    'rotateEnabledChange',\n    'enabledAnchorsChange',\n    'anchorSizeChange',\n    'borderEnabledChange',\n    'borderStrokeChange',\n    'borderStrokeWidthChange',\n    'borderDashChange',\n    'anchorStrokeChange',\n    'anchorStrokeWidthChange',\n    'anchorFillChange',\n    'anchorCornerRadiusChange',\n    'ignoreStrokeChange',\n]\n    .map((e) => e + `.${EVENTS_NAME}`)\n    .join(' ');\nvar NODES_RECT = 'nodesRect';\nvar TRANSFORM_CHANGE_STR = [\n    'widthChange',\n    'heightChange',\n    'scaleXChange',\n    'scaleYChange',\n    'skewXChange',\n    'skewYChange',\n    'rotationChange',\n    'offsetXChange',\n    'offsetYChange',\n    'transformsEnabledChange',\n    'strokeWidthChange',\n];\nvar ANGLES = {\n    'top-left': -45,\n    'top-center': 0,\n    'top-right': 45,\n    'middle-right': -90,\n    'middle-left': 90,\n    'bottom-left': -135,\n    'bottom-center': 180,\n    'bottom-right': 135,\n};\nconst TOUCH_DEVICE = 'ontouchstart' in Konva._global;\nfunction getCursor(anchorName, rad) {\n    if (anchorName === 'rotater') {\n        return 'crosshair';\n    }\n    rad += Util.degToRad(ANGLES[anchorName] || 0);\n    var angle = ((Util.radToDeg(rad) % 360) + 360) % 360;\n    if (Util._inRange(angle, 315 + 22.5, 360) || Util._inRange(angle, 0, 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util._inRange(angle, 45 - 22.5, 45 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util._inRange(angle, 90 - 22.5, 90 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util._inRange(angle, 135 - 22.5, 135 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else if (Util._inRange(angle, 180 - 22.5, 180 + 22.5)) {\n        return 'ns-resize';\n    }\n    else if (Util._inRange(angle, 225 - 22.5, 225 + 22.5)) {\n        return 'nesw-resize';\n    }\n    else if (Util._inRange(angle, 270 - 22.5, 270 + 22.5)) {\n        return 'ew-resize';\n    }\n    else if (Util._inRange(angle, 315 - 22.5, 315 + 22.5)) {\n        return 'nwse-resize';\n    }\n    else {\n        Util.error('Transformer has unknown angle for cursor detection: ' + angle);\n        return 'pointer';\n    }\n}\nvar ANCHORS_NAMES = [\n    'top-left',\n    'top-center',\n    'top-right',\n    'middle-right',\n    'middle-left',\n    'bottom-left',\n    'bottom-center',\n    'bottom-right',\n];\nvar MAX_SAFE_INTEGER = 100000000;\nfunction getCenter(shape) {\n    return {\n        x: shape.x +\n            (shape.width / 2) * Math.cos(shape.rotation) +\n            (shape.height / 2) * Math.sin(-shape.rotation),\n        y: shape.y +\n            (shape.height / 2) * Math.cos(shape.rotation) +\n            (shape.width / 2) * Math.sin(shape.rotation),\n    };\n}\nfunction rotateAroundPoint(shape, angleRad, point) {\n    const x = point.x +\n        (shape.x - point.x) * Math.cos(angleRad) -\n        (shape.y - point.y) * Math.sin(angleRad);\n    const y = point.y +\n        (shape.x - point.x) * Math.sin(angleRad) +\n        (shape.y - point.y) * Math.cos(angleRad);\n    return Object.assign(Object.assign({}, shape), { rotation: shape.rotation + angleRad, x,\n        y });\n}\nfunction rotateAroundCenter(shape, deltaRad) {\n    const center = getCenter(shape);\n    return rotateAroundPoint(shape, deltaRad, center);\n}\nfunction getSnap(snaps, newRotationRad, tol) {\n    let snapped = newRotationRad;\n    for (let i = 0; i < snaps.length; i++) {\n        const angle = Konva.getAngle(snaps[i]);\n        const absDiff = Math.abs(angle - newRotationRad) % (Math.PI * 2);\n        const dif = Math.min(absDiff, Math.PI * 2 - absDiff);\n        if (dif < tol) {\n            snapped = angle;\n        }\n    }\n    return snapped;\n}\nexport class Transformer extends Group {\n    constructor(config) {\n        super(config);\n        this._transforming = false;\n        this._createElements();\n        this._handleMouseMove = this._handleMouseMove.bind(this);\n        this._handleMouseUp = this._handleMouseUp.bind(this);\n        this.update = this.update.bind(this);\n        this.on(ATTR_CHANGE_LIST, this.update);\n        if (this.getNode()) {\n            this.update();\n        }\n    }\n    attachTo(node) {\n        this.setNode(node);\n        return this;\n    }\n    setNode(node) {\n        Util.warn('tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead.');\n        return this.setNodes([node]);\n    }\n    getNode() {\n        return this._nodes && this._nodes[0];\n    }\n    _getEventNamespace() {\n        return EVENTS_NAME + this._id;\n    }\n    setNodes(nodes = []) {\n        if (this._nodes && this._nodes.length) {\n            this.detach();\n        }\n        this._nodes = nodes;\n        if (nodes.length === 1 && this.useSingleNodeRotation()) {\n            this.rotation(nodes[0].getAbsoluteRotation());\n        }\n        else {\n            this.rotation(0);\n        }\n        this._nodes.forEach((node) => {\n            const onChange = () => {\n                if (this.nodes().length === 1 && this.useSingleNodeRotation()) {\n                    this.rotation(this.nodes()[0].getAbsoluteRotation());\n                }\n                this._resetTransformCache();\n                if (!this._transforming && !this.isDragging()) {\n                    this.update();\n                }\n            };\n            const additionalEvents = node._attrsAffectingSize\n                .map((prop) => prop + 'Change.' + this._getEventNamespace())\n                .join(' ');\n            node.on(additionalEvents, onChange);\n            node.on(TRANSFORM_CHANGE_STR.map((e) => e + `.${this._getEventNamespace()}`).join(' '), onChange);\n            node.on(`absoluteTransformChange.${this._getEventNamespace()}`, onChange);\n            this._proxyDrag(node);\n        });\n        this._resetTransformCache();\n        var elementsCreated = !!this.findOne('.top-left');\n        if (elementsCreated) {\n            this.update();\n        }\n        return this;\n    }\n    _proxyDrag(node) {\n        let lastPos;\n        node.on(`dragstart.${this._getEventNamespace()}`, (e) => {\n            lastPos = node.getAbsolutePosition();\n            if (!this.isDragging() && node !== this.findOne('.back')) {\n                this.startDrag(e, false);\n            }\n        });\n        node.on(`dragmove.${this._getEventNamespace()}`, (e) => {\n            if (!lastPos) {\n                return;\n            }\n            const abs = node.getAbsolutePosition();\n            const dx = abs.x - lastPos.x;\n            const dy = abs.y - lastPos.y;\n            this.nodes().forEach((otherNode) => {\n                if (otherNode === node) {\n                    return;\n                }\n                if (otherNode.isDragging()) {\n                    return;\n                }\n                const otherAbs = otherNode.getAbsolutePosition();\n                otherNode.setAbsolutePosition({\n                    x: otherAbs.x + dx,\n                    y: otherAbs.y + dy,\n                });\n                otherNode.startDrag(e);\n            });\n            lastPos = null;\n        });\n    }\n    getNodes() {\n        return this._nodes || [];\n    }\n    getActiveAnchor() {\n        return this._movingAnchorName;\n    }\n    detach() {\n        if (this._nodes) {\n            this._nodes.forEach((node) => {\n                node.off('.' + this._getEventNamespace());\n            });\n        }\n        this._nodes = [];\n        this._resetTransformCache();\n    }\n    _resetTransformCache() {\n        this._clearCache(NODES_RECT);\n        this._clearCache('transform');\n        this._clearSelfAndDescendantCache('absoluteTransform');\n    }\n    _getNodeRect() {\n        return this._getCache(NODES_RECT, this.__getNodeRect);\n    }\n    __getNodeShape(node, rot = this.rotation(), relative) {\n        var rect = node.getClientRect({\n            skipTransform: true,\n            skipShadow: true,\n            skipStroke: this.ignoreStroke(),\n        });\n        var absScale = node.getAbsoluteScale(relative);\n        var absPos = node.getAbsolutePosition(relative);\n        var dx = rect.x * absScale.x - node.offsetX() * absScale.x;\n        var dy = rect.y * absScale.y - node.offsetY() * absScale.y;\n        const rotation = (Konva.getAngle(node.getAbsoluteRotation()) + Math.PI * 2) %\n            (Math.PI * 2);\n        const box = {\n            x: absPos.x + dx * Math.cos(rotation) + dy * Math.sin(-rotation),\n            y: absPos.y + dy * Math.cos(rotation) + dx * Math.sin(rotation),\n            width: rect.width * absScale.x,\n            height: rect.height * absScale.y,\n            rotation: rotation,\n        };\n        return rotateAroundPoint(box, -Konva.getAngle(rot), {\n            x: 0,\n            y: 0,\n        });\n    }\n    __getNodeRect() {\n        var node = this.getNode();\n        if (!node) {\n            return {\n                x: -MAX_SAFE_INTEGER,\n                y: -MAX_SAFE_INTEGER,\n                width: 0,\n                height: 0,\n                rotation: 0,\n            };\n        }\n        const totalPoints = [];\n        this.nodes().map((node) => {\n            const box = node.getClientRect({\n                skipTransform: true,\n                skipShadow: true,\n                skipStroke: this.ignoreStroke(),\n            });\n            var points = [\n                { x: box.x, y: box.y },\n                { x: box.x + box.width, y: box.y },\n                { x: box.x + box.width, y: box.y + box.height },\n                { x: box.x, y: box.y + box.height },\n            ];\n            var trans = node.getAbsoluteTransform();\n            points.forEach(function (point) {\n                var transformed = trans.point(point);\n                totalPoints.push(transformed);\n            });\n        });\n        const tr = new Transform();\n        tr.rotate(-Konva.getAngle(this.rotation()));\n        var minX, minY, maxX, maxY;\n        totalPoints.forEach(function (point) {\n            var transformed = tr.point(point);\n            if (minX === undefined) {\n                minX = maxX = transformed.x;\n                minY = maxY = transformed.y;\n            }\n            minX = Math.min(minX, transformed.x);\n            minY = Math.min(minY, transformed.y);\n            maxX = Math.max(maxX, transformed.x);\n            maxY = Math.max(maxY, transformed.y);\n        });\n        tr.invert();\n        const p = tr.point({ x: minX, y: minY });\n        return {\n            x: p.x,\n            y: p.y,\n            width: maxX - minX,\n            height: maxY - minY,\n            rotation: Konva.getAngle(this.rotation()),\n        };\n    }\n    getX() {\n        return this._getNodeRect().x;\n    }\n    getY() {\n        return this._getNodeRect().y;\n    }\n    getWidth() {\n        return this._getNodeRect().width;\n    }\n    getHeight() {\n        return this._getNodeRect().height;\n    }\n    _createElements() {\n        this._createBack();\n        ANCHORS_NAMES.forEach(function (name) {\n            this._createAnchor(name);\n        }.bind(this));\n        this._createAnchor('rotater');\n    }\n    _createAnchor(name) {\n        var anchor = new Rect({\n            stroke: 'rgb(0, 161, 255)',\n            fill: 'white',\n            strokeWidth: 1,\n            name: name + ' _anchor',\n            dragDistance: 0,\n            draggable: true,\n            hitStrokeWidth: TOUCH_DEVICE ? 10 : 'auto',\n        });\n        var self = this;\n        anchor.on('mousedown touchstart', function (e) {\n            self._handleMouseDown(e);\n        });\n        anchor.on('dragstart', (e) => {\n            anchor.stopDrag();\n            e.cancelBubble = true;\n        });\n        anchor.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        anchor.on('mouseenter', () => {\n            var rad = Konva.getAngle(this.rotation());\n            var cursor = getCursor(name, rad);\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = cursor);\n            this._cursorChange = true;\n        });\n        anchor.on('mouseout', () => {\n            anchor.getStage().content &&\n                (anchor.getStage().content.style.cursor = '');\n            this._cursorChange = false;\n        });\n        this.add(anchor);\n    }\n    _createBack() {\n        var back = new Shape({\n            name: 'back',\n            width: 0,\n            height: 0,\n            draggable: true,\n            sceneFunc(ctx) {\n                var tr = this.getParent();\n                var padding = tr.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, this.width() + padding * 2, this.height() + padding * 2);\n                ctx.moveTo(this.width() / 2, -padding);\n                if (tr.rotateEnabled()) {\n                    ctx.lineTo(this.width() / 2, -tr.rotateAnchorOffset() * Util._sign(this.height()) - padding);\n                }\n                ctx.fillStrokeShape(this);\n            },\n            hitFunc: (ctx, shape) => {\n                if (!this.shouldOverdrawWholeArea()) {\n                    return;\n                }\n                var padding = this.padding();\n                ctx.beginPath();\n                ctx.rect(-padding, -padding, shape.width() + padding * 2, shape.height() + padding * 2);\n                ctx.fillStrokeShape(shape);\n            },\n        });\n        this.add(back);\n        this._proxyDrag(back);\n        back.on('dragstart', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragmove', (e) => {\n            e.cancelBubble = true;\n        });\n        back.on('dragend', (e) => {\n            e.cancelBubble = true;\n        });\n        this.on('dragmove', (e) => {\n            this.update();\n        });\n    }\n    _handleMouseDown(e) {\n        this._movingAnchorName = e.target.name().split(' ')[0];\n        var attrs = this._getNodeRect();\n        var width = attrs.width;\n        var height = attrs.height;\n        var hypotenuse = Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2));\n        this.sin = Math.abs(height / hypotenuse);\n        this.cos = Math.abs(width / hypotenuse);\n        if (typeof window !== 'undefined') {\n            window.addEventListener('mousemove', this._handleMouseMove);\n            window.addEventListener('touchmove', this._handleMouseMove);\n            window.addEventListener('mouseup', this._handleMouseUp, true);\n            window.addEventListener('touchend', this._handleMouseUp, true);\n        }\n        this._transforming = true;\n        var ap = e.target.getAbsolutePosition();\n        var pos = e.target.getStage().getPointerPosition();\n        this._anchorDragOffset = {\n            x: pos.x - ap.x,\n            y: pos.y - ap.y,\n        };\n        this._fire('transformstart', { evt: e.evt, target: this.getNode() });\n        this._nodes.forEach((target) => {\n            target._fire('transformstart', { evt: e.evt, target });\n        });\n    }\n    _handleMouseMove(e) {\n        var x, y, newHypotenuse;\n        var anchorNode = this.findOne('.' + this._movingAnchorName);\n        var stage = anchorNode.getStage();\n        stage.setPointersPositions(e);\n        const pp = stage.getPointerPosition();\n        let newNodePos = {\n            x: pp.x - this._anchorDragOffset.x,\n            y: pp.y - this._anchorDragOffset.y,\n        };\n        const oldAbs = anchorNode.getAbsolutePosition();\n        if (this.anchorDragBoundFunc()) {\n            newNodePos = this.anchorDragBoundFunc()(oldAbs, newNodePos, e);\n        }\n        anchorNode.setAbsolutePosition(newNodePos);\n        const newAbs = anchorNode.getAbsolutePosition();\n        if (oldAbs.x === newAbs.x && oldAbs.y === newAbs.y) {\n            return;\n        }\n        if (this._movingAnchorName === 'rotater') {\n            var attrs = this._getNodeRect();\n            x = anchorNode.x() - attrs.width / 2;\n            y = -anchorNode.y() + attrs.height / 2;\n            let delta = Math.atan2(-y, x) + Math.PI / 2;\n            if (attrs.height < 0) {\n                delta -= Math.PI;\n            }\n            var oldRotation = Konva.getAngle(this.rotation());\n            const newRotation = oldRotation + delta;\n            const tol = Konva.getAngle(this.rotationSnapTolerance());\n            const snappedRot = getSnap(this.rotationSnaps(), newRotation, tol);\n            const diff = snappedRot - attrs.rotation;\n            const shape = rotateAroundCenter(attrs, diff);\n            this._fitNodesInto(shape, e);\n            return;\n        }\n        var keepProportion = this.keepRatio() || e.shiftKey;\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (this._movingAnchorName === 'top-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-right').x(),\n                        y: this.findOne('.bottom-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-left').x() > comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-left').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-left').x(comparePoint.x - x);\n                this.findOne('.top-left').y(comparePoint.y - y);\n            }\n        }\n        else if (this._movingAnchorName === 'top-center') {\n            this.findOne('.top-left').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'top-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.bottom-left').x(),\n                        y: this.findOne('.bottom-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(comparePoint.y - anchorNode.y(), 2));\n                var reverseX = this.findOne('.top-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.top-right').y() > comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.top-right').x(comparePoint.x + x);\n                this.findOne('.top-right').y(comparePoint.y - y);\n            }\n            var pos = anchorNode.position();\n            this.findOne('.top-left').y(pos.y);\n            this.findOne('.bottom-right').x(pos.x);\n        }\n        else if (this._movingAnchorName === 'middle-left') {\n            this.findOne('.top-left').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'middle-right') {\n            this.findOne('.bottom-right').x(anchorNode.x());\n        }\n        else if (this._movingAnchorName === 'bottom-left') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-right').x(),\n                        y: this.findOne('.top-right').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(comparePoint.x - anchorNode.x(), 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = comparePoint.x < anchorNode.x() ? -1 : 1;\n                var reverseY = anchorNode.y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                anchorNode.x(comparePoint.x - x);\n                anchorNode.y(comparePoint.y + y);\n            }\n            pos = anchorNode.position();\n            this.findOne('.top-left').x(pos.x);\n            this.findOne('.bottom-right').y(pos.y);\n        }\n        else if (this._movingAnchorName === 'bottom-center') {\n            this.findOne('.bottom-right').y(anchorNode.y());\n        }\n        else if (this._movingAnchorName === 'bottom-right') {\n            if (keepProportion) {\n                var comparePoint = centeredScaling\n                    ? {\n                        x: this.width() / 2,\n                        y: this.height() / 2,\n                    }\n                    : {\n                        x: this.findOne('.top-left').x(),\n                        y: this.findOne('.top-left').y(),\n                    };\n                newHypotenuse = Math.sqrt(Math.pow(anchorNode.x() - comparePoint.x, 2) +\n                    Math.pow(anchorNode.y() - comparePoint.y, 2));\n                var reverseX = this.findOne('.bottom-right').x() < comparePoint.x ? -1 : 1;\n                var reverseY = this.findOne('.bottom-right').y() < comparePoint.y ? -1 : 1;\n                x = newHypotenuse * this.cos * reverseX;\n                y = newHypotenuse * this.sin * reverseY;\n                this.findOne('.bottom-right').x(comparePoint.x + x);\n                this.findOne('.bottom-right').y(comparePoint.y + y);\n            }\n        }\n        else {\n            console.error(new Error('Wrong position argument of selection resizer: ' +\n                this._movingAnchorName));\n        }\n        var centeredScaling = this.centeredScaling() || e.altKey;\n        if (centeredScaling) {\n            var topLeft = this.findOne('.top-left');\n            var bottomRight = this.findOne('.bottom-right');\n            var topOffsetX = topLeft.x();\n            var topOffsetY = topLeft.y();\n            var bottomOffsetX = this.getWidth() - bottomRight.x();\n            var bottomOffsetY = this.getHeight() - bottomRight.y();\n            bottomRight.move({\n                x: -topOffsetX,\n                y: -topOffsetY,\n            });\n            topLeft.move({\n                x: bottomOffsetX,\n                y: bottomOffsetY,\n            });\n        }\n        var absPos = this.findOne('.top-left').getAbsolutePosition();\n        x = absPos.x;\n        y = absPos.y;\n        var width = this.findOne('.bottom-right').x() - this.findOne('.top-left').x();\n        var height = this.findOne('.bottom-right').y() - this.findOne('.top-left').y();\n        this._fitNodesInto({\n            x: x,\n            y: y,\n            width: width,\n            height: height,\n            rotation: Konva.getAngle(this.rotation()),\n        }, e);\n    }\n    _handleMouseUp(e) {\n        this._removeEvents(e);\n    }\n    getAbsoluteTransform() {\n        return this.getTransform();\n    }\n    _removeEvents(e) {\n        if (this._transforming) {\n            this._transforming = false;\n            if (typeof window !== 'undefined') {\n                window.removeEventListener('mousemove', this._handleMouseMove);\n                window.removeEventListener('touchmove', this._handleMouseMove);\n                window.removeEventListener('mouseup', this._handleMouseUp, true);\n                window.removeEventListener('touchend', this._handleMouseUp, true);\n            }\n            var node = this.getNode();\n            this._fire('transformend', { evt: e, target: node });\n            if (node) {\n                this._nodes.forEach((target) => {\n                    target._fire('transformend', { evt: e, target });\n                });\n            }\n            this._movingAnchorName = null;\n        }\n    }\n    _fitNodesInto(newAttrs, evt) {\n        var oldAttrs = this._getNodeRect();\n        const minSize = 1;\n        if (Util._inRange(newAttrs.width, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        if (Util._inRange(newAttrs.height, -this.padding() * 2 - minSize, minSize)) {\n            this.update();\n            return;\n        }\n        const allowNegativeScale = this.flipEnabled();\n        var t = new Transform();\n        t.rotate(Konva.getAngle(this.rotation()));\n        if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('left') >= 0) {\n            const offset = t.point({\n                x: -this.padding() * 2,\n                y: 0,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            newAttrs.width += this.padding() * 2;\n            this._movingAnchorName = this._movingAnchorName.replace('left', 'right');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.width < 0 &&\n            this._movingAnchorName.indexOf('right') >= 0) {\n            const offset = t.point({\n                x: this.padding() * 2,\n                y: 0,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('right', 'left');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.width += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('top') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: -this.padding() * 2,\n            });\n            newAttrs.x += offset.x;\n            newAttrs.y += offset.y;\n            this._movingAnchorName = this._movingAnchorName.replace('top', 'bottom');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        else if (this._movingAnchorName &&\n            newAttrs.height < 0 &&\n            this._movingAnchorName.indexOf('bottom') >= 0) {\n            const offset = t.point({\n                x: 0,\n                y: this.padding() * 2,\n            });\n            this._movingAnchorName = this._movingAnchorName.replace('bottom', 'top');\n            this._anchorDragOffset.x -= offset.x;\n            this._anchorDragOffset.y -= offset.y;\n            newAttrs.height += this.padding() * 2;\n            if (!allowNegativeScale) {\n                this.update();\n                return;\n            }\n        }\n        if (this.boundBoxFunc()) {\n            const bounded = this.boundBoxFunc()(oldAttrs, newAttrs);\n            if (bounded) {\n                newAttrs = bounded;\n            }\n            else {\n                Util.warn('boundBoxFunc returned falsy. You should return new bound rect from it!');\n            }\n        }\n        const baseSize = 10000000;\n        const oldTr = new Transform();\n        oldTr.translate(oldAttrs.x, oldAttrs.y);\n        oldTr.rotate(oldAttrs.rotation);\n        oldTr.scale(oldAttrs.width / baseSize, oldAttrs.height / baseSize);\n        const newTr = new Transform();\n        newTr.translate(newAttrs.x, newAttrs.y);\n        newTr.rotate(newAttrs.rotation);\n        newTr.scale(newAttrs.width / baseSize, newAttrs.height / baseSize);\n        const delta = newTr.multiply(oldTr.invert());\n        this._nodes.forEach((node) => {\n            var _a;\n            const parentTransform = node.getParent().getAbsoluteTransform();\n            const localTransform = node.getTransform().copy();\n            localTransform.translate(node.offsetX(), node.offsetY());\n            const newLocalTransform = new Transform();\n            newLocalTransform\n                .multiply(parentTransform.copy().invert())\n                .multiply(delta)\n                .multiply(parentTransform)\n                .multiply(localTransform);\n            const attrs = newLocalTransform.decompose();\n            node.setAttrs(attrs);\n            this._fire('transform', { evt: evt, target: node });\n            node._fire('transform', { evt: evt, target: node });\n            (_a = node.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n        });\n        this.rotation(Util._getRotation(newAttrs.rotation));\n        this._resetTransformCache();\n        this.update();\n        this.getLayer().batchDraw();\n    }\n    forceUpdate() {\n        this._resetTransformCache();\n        this.update();\n    }\n    _batchChangeChild(selector, attrs) {\n        const anchor = this.findOne(selector);\n        anchor.setAttrs(attrs);\n    }\n    update() {\n        var _a;\n        var attrs = this._getNodeRect();\n        this.rotation(Util._getRotation(attrs.rotation));\n        var width = attrs.width;\n        var height = attrs.height;\n        var enabledAnchors = this.enabledAnchors();\n        var resizeEnabled = this.resizeEnabled();\n        var padding = this.padding();\n        var anchorSize = this.anchorSize();\n        this.find('._anchor').forEach((node) => {\n            node.setAttrs({\n                width: anchorSize,\n                height: anchorSize,\n                offsetX: anchorSize / 2,\n                offsetY: anchorSize / 2,\n                stroke: this.anchorStroke(),\n                strokeWidth: this.anchorStrokeWidth(),\n                fill: this.anchorFill(),\n                cornerRadius: this.anchorCornerRadius(),\n            });\n        });\n        this._batchChangeChild('.top-left', {\n            x: 0,\n            y: 0,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-left') >= 0,\n        });\n        this._batchChangeChild('.top-center', {\n            x: width / 2,\n            y: 0,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-center') >= 0,\n        });\n        this._batchChangeChild('.top-right', {\n            x: width,\n            y: 0,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('top-right') >= 0,\n        });\n        this._batchChangeChild('.middle-left', {\n            x: 0,\n            y: height / 2,\n            offsetX: anchorSize / 2 + padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-left') >= 0,\n        });\n        this._batchChangeChild('.middle-right', {\n            x: width,\n            y: height / 2,\n            offsetX: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('middle-right') >= 0,\n        });\n        this._batchChangeChild('.bottom-left', {\n            x: 0,\n            y: height,\n            offsetX: anchorSize / 2 + padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-left') >= 0,\n        });\n        this._batchChangeChild('.bottom-center', {\n            x: width / 2,\n            y: height,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-center') >= 0,\n        });\n        this._batchChangeChild('.bottom-right', {\n            x: width,\n            y: height,\n            offsetX: anchorSize / 2 - padding,\n            offsetY: anchorSize / 2 - padding,\n            visible: resizeEnabled && enabledAnchors.indexOf('bottom-right') >= 0,\n        });\n        this._batchChangeChild('.rotater', {\n            x: width / 2,\n            y: -this.rotateAnchorOffset() * Util._sign(height) - padding,\n            visible: this.rotateEnabled(),\n        });\n        this._batchChangeChild('.back', {\n            width: width,\n            height: height,\n            visible: this.borderEnabled(),\n            stroke: this.borderStroke(),\n            strokeWidth: this.borderStrokeWidth(),\n            dash: this.borderDash(),\n            x: 0,\n            y: 0,\n        });\n        (_a = this.getLayer()) === null || _a === void 0 ? void 0 : _a.batchDraw();\n    }\n    isTransforming() {\n        return this._transforming;\n    }\n    stopTransform() {\n        if (this._transforming) {\n            this._removeEvents();\n            var anchorNode = this.findOne('.' + this._movingAnchorName);\n            if (anchorNode) {\n                anchorNode.stopDrag();\n            }\n        }\n    }\n    destroy() {\n        if (this.getStage() && this._cursorChange) {\n            this.getStage().content && (this.getStage().content.style.cursor = '');\n        }\n        Group.prototype.destroy.call(this);\n        this.detach();\n        this._removeEvents();\n        return this;\n    }\n    toObject() {\n        return Node.prototype.toObject.call(this);\n    }\n}\nfunction validateAnchors(val) {\n    if (!(val instanceof Array)) {\n        Util.warn('enabledAnchors value should be an array');\n    }\n    if (val instanceof Array) {\n        val.forEach(function (name) {\n            if (ANCHORS_NAMES.indexOf(name) === -1) {\n                Util.warn('Unknown anchor name: ' +\n                    name +\n                    '. Available names are: ' +\n                    ANCHORS_NAMES.join(', '));\n            }\n        });\n    }\n    return val || [];\n}\nTransformer.prototype.className = 'Transformer';\n_registerNode(Transformer);\nFactory.addGetterSetter(Transformer, 'enabledAnchors', ANCHORS_NAMES, validateAnchors);\nFactory.addGetterSetter(Transformer, 'flipEnabled', true, getBooleanValidator());\nFactory.addGetterSetter(Transformer, 'resizeEnabled', true);\nFactory.addGetterSetter(Transformer, 'anchorSize', 10, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'rotateEnabled', true);\nFactory.addGetterSetter(Transformer, 'rotationSnaps', []);\nFactory.addGetterSetter(Transformer, 'rotateAnchorOffset', 50, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'rotationSnapTolerance', 5, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderEnabled', true);\nFactory.addGetterSetter(Transformer, 'anchorStroke', 'rgb(0, 161, 255)');\nFactory.addGetterSetter(Transformer, 'anchorStrokeWidth', 1, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'anchorFill', 'white');\nFactory.addGetterSetter(Transformer, 'anchorCornerRadius', 0, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderStroke', 'rgb(0, 161, 255)');\nFactory.addGetterSetter(Transformer, 'borderStrokeWidth', 1, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'borderDash');\nFactory.addGetterSetter(Transformer, 'keepRatio', true);\nFactory.addGetterSetter(Transformer, 'centeredScaling', false);\nFactory.addGetterSetter(Transformer, 'ignoreStroke', false);\nFactory.addGetterSetter(Transformer, 'padding', 0, getNumberValidator());\nFactory.addGetterSetter(Transformer, 'node');\nFactory.addGetterSetter(Transformer, 'nodes');\nFactory.addGetterSetter(Transformer, 'boundBoxFunc');\nFactory.addGetterSetter(Transformer, 'anchorDragBoundFunc');\nFactory.addGetterSetter(Transformer, 'shouldOverdrawWholeArea', false);\nFactory.addGetterSetter(Transformer, 'useSingleNodeRotation', true);\nFactory.backCompat(Transformer, {\n    lineEnabled: 'borderEnabled',\n    rotateHandlerOffset: 'rotateAnchorOffset',\n    enabledHandlers: 'enabledAnchors',\n});\n","import { Factory } from '../Factory.js';\nimport { Shape } from '../Shape.js';\nimport { Konva } from '../Global.js';\nimport { getNumberValidator } from '../Validators.js';\nimport { _registerNode } from '../Global.js';\nexport class Wedge extends Shape {\n    _sceneFunc(context) {\n        context.beginPath();\n        context.arc(0, 0, this.radius(), 0, Konva.getAngle(this.angle()), this.clockwise());\n        context.lineTo(0, 0);\n        context.closePath();\n        context.fillStrokeShape(this);\n    }\n    getWidth() {\n        return this.radius() * 2;\n    }\n    getHeight() {\n        return this.radius() * 2;\n    }\n    setWidth(width) {\n        this.radius(width / 2);\n    }\n    setHeight(height) {\n        this.radius(height / 2);\n    }\n}\nWedge.prototype.className = 'Wedge';\nWedge.prototype._centroid = true;\nWedge.prototype._attrsAffectingSize = ['radius'];\n_registerNode(Wedge);\nFactory.addGetterSetter(Wedge, 'radius', 0, getNumberValidator());\nFactory.addGetterSetter(Wedge, 'angle', 0, getNumberValidator());\nFactory.addGetterSetter(Wedge, 'clockwise', false);\nFactory.backCompat(Wedge, {\n    angleDeg: 'angle',\n    getAngleDeg: 'getAngle',\n    setAngleDeg: 'setAngle',\n});\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction BlurStack() {\n    this.r = 0;\n    this.g = 0;\n    this.b = 0;\n    this.a = 0;\n    this.next = null;\n}\nvar mul_table = [\n    512,\n    512,\n    456,\n    512,\n    328,\n    456,\n    335,\n    512,\n    405,\n    328,\n    271,\n    456,\n    388,\n    335,\n    292,\n    512,\n    454,\n    405,\n    364,\n    328,\n    298,\n    271,\n    496,\n    456,\n    420,\n    388,\n    360,\n    335,\n    312,\n    292,\n    273,\n    512,\n    482,\n    454,\n    428,\n    405,\n    383,\n    364,\n    345,\n    328,\n    312,\n    298,\n    284,\n    271,\n    259,\n    496,\n    475,\n    456,\n    437,\n    420,\n    404,\n    388,\n    374,\n    360,\n    347,\n    335,\n    323,\n    312,\n    302,\n    292,\n    282,\n    273,\n    265,\n    512,\n    497,\n    482,\n    468,\n    454,\n    441,\n    428,\n    417,\n    405,\n    394,\n    383,\n    373,\n    364,\n    354,\n    345,\n    337,\n    328,\n    320,\n    312,\n    305,\n    298,\n    291,\n    284,\n    278,\n    271,\n    265,\n    259,\n    507,\n    496,\n    485,\n    475,\n    465,\n    456,\n    446,\n    437,\n    428,\n    420,\n    412,\n    404,\n    396,\n    388,\n    381,\n    374,\n    367,\n    360,\n    354,\n    347,\n    341,\n    335,\n    329,\n    323,\n    318,\n    312,\n    307,\n    302,\n    297,\n    292,\n    287,\n    282,\n    278,\n    273,\n    269,\n    265,\n    261,\n    512,\n    505,\n    497,\n    489,\n    482,\n    475,\n    468,\n    461,\n    454,\n    447,\n    441,\n    435,\n    428,\n    422,\n    417,\n    411,\n    405,\n    399,\n    394,\n    389,\n    383,\n    378,\n    373,\n    368,\n    364,\n    359,\n    354,\n    350,\n    345,\n    341,\n    337,\n    332,\n    328,\n    324,\n    320,\n    316,\n    312,\n    309,\n    305,\n    301,\n    298,\n    294,\n    291,\n    287,\n    284,\n    281,\n    278,\n    274,\n    271,\n    268,\n    265,\n    262,\n    259,\n    257,\n    507,\n    501,\n    496,\n    491,\n    485,\n    480,\n    475,\n    470,\n    465,\n    460,\n    456,\n    451,\n    446,\n    442,\n    437,\n    433,\n    428,\n    424,\n    420,\n    416,\n    412,\n    408,\n    404,\n    400,\n    396,\n    392,\n    388,\n    385,\n    381,\n    377,\n    374,\n    370,\n    367,\n    363,\n    360,\n    357,\n    354,\n    350,\n    347,\n    344,\n    341,\n    338,\n    335,\n    332,\n    329,\n    326,\n    323,\n    320,\n    318,\n    315,\n    312,\n    310,\n    307,\n    304,\n    302,\n    299,\n    297,\n    294,\n    292,\n    289,\n    287,\n    285,\n    282,\n    280,\n    278,\n    275,\n    273,\n    271,\n    269,\n    267,\n    265,\n    263,\n    261,\n    259,\n];\nvar shg_table = [\n    9,\n    11,\n    12,\n    13,\n    13,\n    14,\n    14,\n    15,\n    15,\n    15,\n    15,\n    16,\n    16,\n    16,\n    16,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    17,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    18,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    19,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    20,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    21,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    22,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    23,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n    24,\n];\nfunction filterGaussBlurRGBA(imageData, radius) {\n    var pixels = imageData.data, width = imageData.width, height = imageData.height;\n    var x, y, i, p, yp, yi, yw, r_sum, g_sum, b_sum, a_sum, r_out_sum, g_out_sum, b_out_sum, a_out_sum, r_in_sum, g_in_sum, b_in_sum, a_in_sum, pr, pg, pb, pa, rbs;\n    var div = radius + radius + 1, widthMinus1 = width - 1, heightMinus1 = height - 1, radiusPlus1 = radius + 1, sumFactor = (radiusPlus1 * (radiusPlus1 + 1)) / 2, stackStart = new BlurStack(), stackEnd = null, stack = stackStart, stackIn = null, stackOut = null, mul_sum = mul_table[radius], shg_sum = shg_table[radius];\n    for (i = 1; i < div; i++) {\n        stack = stack.next = new BlurStack();\n        if (i === radiusPlus1) {\n            stackEnd = stack;\n        }\n    }\n    stack.next = stackStart;\n    yw = yi = 0;\n    for (y = 0; y < height; y++) {\n        r_in_sum = g_in_sum = b_in_sum = a_in_sum = r_sum = g_sum = b_sum = a_sum = 0;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        for (i = 1; i < radiusPlus1; i++) {\n            p = yi + ((widthMinus1 < i ? widthMinus1 : i) << 2);\n            r_sum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[p + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[p + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[p + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n        }\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (x = 0; x < width; x++) {\n            pixels[yi + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa !== 0) {\n                pa = 255 / pa;\n                pixels[yi] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[yi + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p = (yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1)) << 2;\n            r_in_sum += stackIn.r = pixels[p];\n            g_in_sum += stackIn.g = pixels[p + 1];\n            b_in_sum += stackIn.b = pixels[p + 2];\n            a_in_sum += stackIn.a = pixels[p + 3];\n            r_sum += r_in_sum;\n            g_sum += g_in_sum;\n            b_sum += b_in_sum;\n            a_sum += a_in_sum;\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += 4;\n        }\n        yw += width;\n    }\n    for (x = 0; x < width; x++) {\n        g_in_sum = b_in_sum = a_in_sum = r_in_sum = g_sum = b_sum = a_sum = r_sum = 0;\n        yi = x << 2;\n        r_out_sum = radiusPlus1 * (pr = pixels[yi]);\n        g_out_sum = radiusPlus1 * (pg = pixels[yi + 1]);\n        b_out_sum = radiusPlus1 * (pb = pixels[yi + 2]);\n        a_out_sum = radiusPlus1 * (pa = pixels[yi + 3]);\n        r_sum += sumFactor * pr;\n        g_sum += sumFactor * pg;\n        b_sum += sumFactor * pb;\n        a_sum += sumFactor * pa;\n        stack = stackStart;\n        for (i = 0; i < radiusPlus1; i++) {\n            stack.r = pr;\n            stack.g = pg;\n            stack.b = pb;\n            stack.a = pa;\n            stack = stack.next;\n        }\n        yp = width;\n        for (i = 1; i <= radius; i++) {\n            yi = (yp + x) << 2;\n            r_sum += (stack.r = pr = pixels[yi]) * (rbs = radiusPlus1 - i);\n            g_sum += (stack.g = pg = pixels[yi + 1]) * rbs;\n            b_sum += (stack.b = pb = pixels[yi + 2]) * rbs;\n            a_sum += (stack.a = pa = pixels[yi + 3]) * rbs;\n            r_in_sum += pr;\n            g_in_sum += pg;\n            b_in_sum += pb;\n            a_in_sum += pa;\n            stack = stack.next;\n            if (i < heightMinus1) {\n                yp += width;\n            }\n        }\n        yi = x;\n        stackIn = stackStart;\n        stackOut = stackEnd;\n        for (y = 0; y < height; y++) {\n            p = yi << 2;\n            pixels[p + 3] = pa = (a_sum * mul_sum) >> shg_sum;\n            if (pa > 0) {\n                pa = 255 / pa;\n                pixels[p] = ((r_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 1] = ((g_sum * mul_sum) >> shg_sum) * pa;\n                pixels[p + 2] = ((b_sum * mul_sum) >> shg_sum) * pa;\n            }\n            else {\n                pixels[p] = pixels[p + 1] = pixels[p + 2] = 0;\n            }\n            r_sum -= r_out_sum;\n            g_sum -= g_out_sum;\n            b_sum -= b_out_sum;\n            a_sum -= a_out_sum;\n            r_out_sum -= stackIn.r;\n            g_out_sum -= stackIn.g;\n            b_out_sum -= stackIn.b;\n            a_out_sum -= stackIn.a;\n            p =\n                (x +\n                    ((p = y + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width) <<\n                    2;\n            r_sum += r_in_sum += stackIn.r = pixels[p];\n            g_sum += g_in_sum += stackIn.g = pixels[p + 1];\n            b_sum += b_in_sum += stackIn.b = pixels[p + 2];\n            a_sum += a_in_sum += stackIn.a = pixels[p + 3];\n            stackIn = stackIn.next;\n            r_out_sum += pr = stackOut.r;\n            g_out_sum += pg = stackOut.g;\n            b_out_sum += pb = stackOut.b;\n            a_out_sum += pa = stackOut.a;\n            r_in_sum -= pr;\n            g_in_sum -= pg;\n            b_in_sum -= pb;\n            a_in_sum -= pa;\n            stackOut = stackOut.next;\n            yi += width;\n        }\n    }\n}\nexport const Blur = function Blur(imageData) {\n    var radius = Math.round(this.blurRadius());\n    if (radius > 0) {\n        filterGaussBlurRGBA(imageData, radius);\n    }\n};\nFactory.addGetterSetter(Node, 'blurRadius', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Brighten = function (imageData) {\n    var brightness = this.brightness() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] += brightness;\n        data[i + 1] += brightness;\n        data[i + 2] += brightness;\n    }\n};\nFactory.addGetterSetter(Node, 'brightness', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Contrast = function (imageData) {\n    var adjust = Math.pow((this.contrast() + 100) / 100, 2);\n    var data = imageData.data, nPixels = data.length, red = 150, green = 150, blue = 150, i;\n    for (i = 0; i < nPixels; i += 4) {\n        red = data[i];\n        green = data[i + 1];\n        blue = data[i + 2];\n        red /= 255;\n        red -= 0.5;\n        red *= adjust;\n        red += 0.5;\n        red *= 255;\n        green /= 255;\n        green -= 0.5;\n        green *= adjust;\n        green += 0.5;\n        green *= 255;\n        blue /= 255;\n        blue -= 0.5;\n        blue *= adjust;\n        blue += 0.5;\n        blue *= 255;\n        red = red < 0 ? 0 : red > 255 ? 255 : red;\n        green = green < 0 ? 0 : green > 255 ? 255 : green;\n        blue = blue < 0 ? 0 : blue > 255 ? 255 : blue;\n        data[i] = red;\n        data[i + 1] = green;\n        data[i + 2] = blue;\n    }\n};\nFactory.addGetterSetter(Node, 'contrast', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Util } from '../Util.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Emboss = function (imageData) {\n    var strength = this.embossStrength() * 10, greyLevel = this.embossWhiteLevel() * 255, direction = this.embossDirection(), blend = this.embossBlend(), dirY = 0, dirX = 0, data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    switch (direction) {\n        case 'top-left':\n            dirY = -1;\n            dirX = -1;\n            break;\n        case 'top':\n            dirY = -1;\n            dirX = 0;\n            break;\n        case 'top-right':\n            dirY = -1;\n            dirX = 1;\n            break;\n        case 'right':\n            dirY = 0;\n            dirX = 1;\n            break;\n        case 'bottom-right':\n            dirY = 1;\n            dirX = 1;\n            break;\n        case 'bottom':\n            dirY = 1;\n            dirX = 0;\n            break;\n        case 'bottom-left':\n            dirY = 1;\n            dirX = -1;\n            break;\n        case 'left':\n            dirY = 0;\n            dirX = -1;\n            break;\n        default:\n            Util.error('Unknown emboss direction: ' + direction);\n    }\n    do {\n        var offsetY = (y - 1) * w4;\n        var otherY = dirY;\n        if (y + otherY < 1) {\n            otherY = 0;\n        }\n        if (y + otherY > h) {\n            otherY = 0;\n        }\n        var offsetYOther = (y - 1 + otherY) * w * 4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var otherX = dirX;\n            if (x + otherX < 1) {\n                otherX = 0;\n            }\n            if (x + otherX > w) {\n                otherX = 0;\n            }\n            var offsetOther = offsetYOther + (x - 1 + otherX) * 4;\n            var dR = data[offset] - data[offsetOther];\n            var dG = data[offset + 1] - data[offsetOther + 1];\n            var dB = data[offset + 2] - data[offsetOther + 2];\n            var dif = dR;\n            var absDif = dif > 0 ? dif : -dif;\n            var absG = dG > 0 ? dG : -dG;\n            var absB = dB > 0 ? dB : -dB;\n            if (absG > absDif) {\n                dif = dG;\n            }\n            if (absB > absDif) {\n                dif = dB;\n            }\n            dif *= strength;\n            if (blend) {\n                var r = data[offset] + dif;\n                var g = data[offset + 1] + dif;\n                var b = data[offset + 2] + dif;\n                data[offset] = r > 255 ? 255 : r < 0 ? 0 : r;\n                data[offset + 1] = g > 255 ? 255 : g < 0 ? 0 : g;\n                data[offset + 2] = b > 255 ? 255 : b < 0 ? 0 : b;\n            }\n            else {\n                var grey = greyLevel - dif;\n                if (grey < 0) {\n                    grey = 0;\n                }\n                else if (grey > 255) {\n                    grey = 255;\n                }\n                data[offset] = data[offset + 1] = data[offset + 2] = grey;\n            }\n        } while (--x);\n    } while (--y);\n};\nFactory.addGetterSetter(Node, 'embossStrength', 0.5, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossWhiteLevel', 0.5, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossDirection', 'top-left', null, Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'embossBlend', false, null, Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction remap(fromValue, fromMin, fromMax, toMin, toMax) {\n    var fromRange = fromMax - fromMin, toRange = toMax - toMin, toValue;\n    if (fromRange === 0) {\n        return toMin + toRange / 2;\n    }\n    if (toRange === 0) {\n        return toMin;\n    }\n    toValue = (fromValue - fromMin) / fromRange;\n    toValue = toRange * toValue + toMin;\n    return toValue;\n}\nexport const Enhance = function (imageData) {\n    var data = imageData.data, nSubPixels = data.length, rMin = data[0], rMax = rMin, r, gMin = data[1], gMax = gMin, g, bMin = data[2], bMax = bMin, b, i;\n    var enhanceAmount = this.enhance();\n    if (enhanceAmount === 0) {\n        return;\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        r = data[i + 0];\n        if (r < rMin) {\n            rMin = r;\n        }\n        else if (r > rMax) {\n            rMax = r;\n        }\n        g = data[i + 1];\n        if (g < gMin) {\n            gMin = g;\n        }\n        else if (g > gMax) {\n            gMax = g;\n        }\n        b = data[i + 2];\n        if (b < bMin) {\n            bMin = b;\n        }\n        else if (b > bMax) {\n            bMax = b;\n        }\n    }\n    if (rMax === rMin) {\n        rMax = 255;\n        rMin = 0;\n    }\n    if (gMax === gMin) {\n        gMax = 255;\n        gMin = 0;\n    }\n    if (bMax === bMin) {\n        bMax = 255;\n        bMin = 0;\n    }\n    var rMid, rGoalMax, rGoalMin, gMid, gGoalMax, gGoalMin, bMid, bGoalMax, bGoalMin;\n    if (enhanceAmount > 0) {\n        rGoalMax = rMax + enhanceAmount * (255 - rMax);\n        rGoalMin = rMin - enhanceAmount * (rMin - 0);\n        gGoalMax = gMax + enhanceAmount * (255 - gMax);\n        gGoalMin = gMin - enhanceAmount * (gMin - 0);\n        bGoalMax = bMax + enhanceAmount * (255 - bMax);\n        bGoalMin = bMin - enhanceAmount * (bMin - 0);\n    }\n    else {\n        rMid = (rMax + rMin) * 0.5;\n        rGoalMax = rMax + enhanceAmount * (rMax - rMid);\n        rGoalMin = rMin + enhanceAmount * (rMin - rMid);\n        gMid = (gMax + gMin) * 0.5;\n        gGoalMax = gMax + enhanceAmount * (gMax - gMid);\n        gGoalMin = gMin + enhanceAmount * (gMin - gMid);\n        bMid = (bMax + bMin) * 0.5;\n        bGoalMax = bMax + enhanceAmount * (bMax - bMid);\n        bGoalMin = bMin + enhanceAmount * (bMin - bMid);\n    }\n    for (i = 0; i < nSubPixels; i += 4) {\n        data[i + 0] = remap(data[i + 0], rMin, rMax, rGoalMin, rGoalMax);\n        data[i + 1] = remap(data[i + 1], gMin, gMax, gGoalMin, gGoalMax);\n        data[i + 2] = remap(data[i + 2], bMin, bMax, bGoalMin, bGoalMax);\n    }\n};\nFactory.addGetterSetter(Node, 'enhance', 0, getNumberValidator(), Factory.afterSetFilter);\n","export const Grayscale = function (imageData) {\n    var data = imageData.data, len = data.length, i, brightness;\n    for (i = 0; i < len; i += 4) {\n        brightness = 0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2];\n        data[i] = brightness;\n        data[i + 1] = brightness;\n        data[i + 2] = brightness;\n    }\n};\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nFactory.addGetterSetter(Node, 'hue', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'saturation', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'luminance', 0, getNumberValidator(), Factory.afterSetFilter);\nexport const HSL = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = 1, s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, l = this.luminance() * 127, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b + l;\n        data[i + 1] = gr * r + gg * g + gb * b + l;\n        data[i + 2] = br * r + bg * g + bb * b + l;\n        data[i + 3] = a;\n    }\n};\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const HSV = function (imageData) {\n    var data = imageData.data, nPixels = data.length, v = Math.pow(2, this.value()), s = Math.pow(2, this.saturation()), h = Math.abs(this.hue() + 360) % 360, i;\n    var vsu = v * s * Math.cos((h * Math.PI) / 180), vsw = v * s * Math.sin((h * Math.PI) / 180);\n    var rr = 0.299 * v + 0.701 * vsu + 0.167 * vsw, rg = 0.587 * v - 0.587 * vsu + 0.33 * vsw, rb = 0.114 * v - 0.114 * vsu - 0.497 * vsw;\n    var gr = 0.299 * v - 0.299 * vsu - 0.328 * vsw, gg = 0.587 * v + 0.413 * vsu + 0.035 * vsw, gb = 0.114 * v - 0.114 * vsu + 0.293 * vsw;\n    var br = 0.299 * v - 0.3 * vsu + 1.25 * vsw, bg = 0.587 * v - 0.586 * vsu - 1.05 * vsw, bb = 0.114 * v + 0.886 * vsu - 0.2 * vsw;\n    var r, g, b, a;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        a = data[i + 3];\n        data[i + 0] = rr * r + rg * g + rb * b;\n        data[i + 1] = gr * r + gg * g + gb * b;\n        data[i + 2] = br * r + bg * g + bb * b;\n        data[i + 3] = a;\n    }\n};\nFactory.addGetterSetter(Node, 'hue', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'saturation', 0, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'value', 0, getNumberValidator(), Factory.afterSetFilter);\n","export const Invert = function (imageData) {\n    var data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 4) {\n        data[i] = 255 - data[i];\n        data[i + 1] = 255 - data[i + 1];\n        data[i + 2] = 255 - data[i + 2];\n    }\n};\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { Util } from '../Util.js';\nimport { getNumberValidator } from '../Validators.js';\nvar ToPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta;\n    var conversion = ((360 / tSize) * Math.PI) / 180, sin, cos;\n    for (theta = 0; theta < tSize; theta += 1) {\n        sin = Math.sin(theta * conversion);\n        cos = Math.cos(theta * conversion);\n        for (radius = 0; radius < rSize; radius += 1) {\n            x = Math.floor(xMid + ((rMax * radius) / rSize) * cos);\n            y = Math.floor(yMid + ((rMax * radius) / rSize) * sin);\n            i = (y * xSize + x) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (theta + radius * xSize) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nvar FromPolar = function (src, dst, opt) {\n    var srcPixels = src.data, dstPixels = dst.data, xSize = src.width, ySize = src.height, xMid = opt.polarCenterX || xSize / 2, yMid = opt.polarCenterY || ySize / 2, i, x, y, dx, dy, r = 0, g = 0, b = 0, a = 0;\n    var rad, rMax = Math.sqrt(xMid * xMid + yMid * yMid);\n    x = xSize - xMid;\n    y = ySize - yMid;\n    rad = Math.sqrt(x * x + y * y);\n    rMax = rad > rMax ? rad : rMax;\n    var rSize = ySize, tSize = xSize, radius, theta, phaseShift = opt.polarRotation || 0;\n    var x1, y1;\n    for (x = 0; x < xSize; x += 1) {\n        for (y = 0; y < ySize; y += 1) {\n            dx = x - xMid;\n            dy = y - yMid;\n            radius = (Math.sqrt(dx * dx + dy * dy) * rSize) / rMax;\n            theta = ((Math.atan2(dy, dx) * 180) / Math.PI + 360 + phaseShift) % 360;\n            theta = (theta * tSize) / 360;\n            x1 = Math.floor(theta);\n            y1 = Math.floor(radius);\n            i = (y1 * xSize + x1) * 4;\n            r = srcPixels[i + 0];\n            g = srcPixels[i + 1];\n            b = srcPixels[i + 2];\n            a = srcPixels[i + 3];\n            i = (y * xSize + x) * 4;\n            dstPixels[i + 0] = r;\n            dstPixels[i + 1] = g;\n            dstPixels[i + 2] = b;\n            dstPixels[i + 3] = a;\n        }\n    }\n};\nexport const Kaleidoscope = function (imageData) {\n    var xSize = imageData.width, ySize = imageData.height;\n    var x, y, xoff, i, r, g, b, a, srcPos, dstPos;\n    var power = Math.round(this.kaleidoscopePower());\n    var angle = Math.round(this.kaleidoscopeAngle());\n    var offset = Math.floor((xSize * (angle % 360)) / 360);\n    if (power < 1) {\n        return;\n    }\n    var tempCanvas = Util.createCanvasElement();\n    tempCanvas.width = xSize;\n    tempCanvas.height = ySize;\n    var scratchData = tempCanvas\n        .getContext('2d')\n        .getImageData(0, 0, xSize, ySize);\n    ToPolar(imageData, scratchData, {\n        polarCenterX: xSize / 2,\n        polarCenterY: ySize / 2,\n    });\n    var minSectionSize = xSize / Math.pow(2, power);\n    while (minSectionSize <= 8) {\n        minSectionSize = minSectionSize * 2;\n        power -= 1;\n    }\n    minSectionSize = Math.ceil(minSectionSize);\n    var sectionSize = minSectionSize;\n    var xStart = 0, xEnd = sectionSize, xDelta = 1;\n    if (offset + minSectionSize > xSize) {\n        xStart = sectionSize;\n        xEnd = 0;\n        xDelta = -1;\n    }\n    for (y = 0; y < ySize; y += 1) {\n        for (x = xStart; x !== xEnd; x += xDelta) {\n            xoff = Math.round(x + offset) % xSize;\n            srcPos = (xSize * y + xoff) * 4;\n            r = scratchData.data[srcPos + 0];\n            g = scratchData.data[srcPos + 1];\n            b = scratchData.data[srcPos + 2];\n            a = scratchData.data[srcPos + 3];\n            dstPos = (xSize * y + x) * 4;\n            scratchData.data[dstPos + 0] = r;\n            scratchData.data[dstPos + 1] = g;\n            scratchData.data[dstPos + 2] = b;\n            scratchData.data[dstPos + 3] = a;\n        }\n    }\n    for (y = 0; y < ySize; y += 1) {\n        sectionSize = Math.floor(minSectionSize);\n        for (i = 0; i < power; i += 1) {\n            for (x = 0; x < sectionSize + 1; x += 1) {\n                srcPos = (xSize * y + x) * 4;\n                r = scratchData.data[srcPos + 0];\n                g = scratchData.data[srcPos + 1];\n                b = scratchData.data[srcPos + 2];\n                a = scratchData.data[srcPos + 3];\n                dstPos = (xSize * y + sectionSize * 2 - x - 1) * 4;\n                scratchData.data[dstPos + 0] = r;\n                scratchData.data[dstPos + 1] = g;\n                scratchData.data[dstPos + 2] = b;\n                scratchData.data[dstPos + 3] = a;\n            }\n            sectionSize *= 2;\n        }\n    }\n    FromPolar(scratchData, imageData, { polarRotation: 0 });\n};\nFactory.addGetterSetter(Node, 'kaleidoscopePower', 2, getNumberValidator(), Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'kaleidoscopeAngle', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nfunction pixelAt(idata, x, y) {\n    var idx = (y * idata.width + x) * 4;\n    var d = [];\n    d.push(idata.data[idx++], idata.data[idx++], idata.data[idx++], idata.data[idx++]);\n    return d;\n}\nfunction rgbDistance(p1, p2) {\n    return Math.sqrt(Math.pow(p1[0] - p2[0], 2) +\n        Math.pow(p1[1] - p2[1], 2) +\n        Math.pow(p1[2] - p2[2], 2));\n}\nfunction rgbMean(pTab) {\n    var m = [0, 0, 0];\n    for (var i = 0; i < pTab.length; i++) {\n        m[0] += pTab[i][0];\n        m[1] += pTab[i][1];\n        m[2] += pTab[i][2];\n    }\n    m[0] /= pTab.length;\n    m[1] /= pTab.length;\n    m[2] /= pTab.length;\n    return m;\n}\nfunction backgroundMask(idata, threshold) {\n    var rgbv_no = pixelAt(idata, 0, 0);\n    var rgbv_ne = pixelAt(idata, idata.width - 1, 0);\n    var rgbv_so = pixelAt(idata, 0, idata.height - 1);\n    var rgbv_se = pixelAt(idata, idata.width - 1, idata.height - 1);\n    var thres = threshold || 10;\n    if (rgbDistance(rgbv_no, rgbv_ne) < thres &&\n        rgbDistance(rgbv_ne, rgbv_se) < thres &&\n        rgbDistance(rgbv_se, rgbv_so) < thres &&\n        rgbDistance(rgbv_so, rgbv_no) < thres) {\n        var mean = rgbMean([rgbv_ne, rgbv_no, rgbv_se, rgbv_so]);\n        var mask = [];\n        for (var i = 0; i < idata.width * idata.height; i++) {\n            var d = rgbDistance(mean, [\n                idata.data[i * 4],\n                idata.data[i * 4 + 1],\n                idata.data[i * 4 + 2],\n            ]);\n            mask[i] = d < thres ? 0 : 255;\n        }\n        return mask;\n    }\n}\nfunction applyMask(idata, mask) {\n    for (var i = 0; i < idata.width * idata.height; i++) {\n        idata.data[4 * i + 3] = mask[i];\n    }\n}\nfunction erodeMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 0, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a === 255 * 8 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction dilateMask(mask, sw, sh) {\n    var weights = [1, 1, 1, 1, 1, 1, 1, 1, 1];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a >= 255 * 4 ? 255 : 0;\n        }\n    }\n    return maskResult;\n}\nfunction smoothEdgeMask(mask, sw, sh) {\n    var weights = [1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9, 1 / 9];\n    var side = Math.round(Math.sqrt(weights.length));\n    var halfSide = Math.floor(side / 2);\n    var maskResult = [];\n    for (var y = 0; y < sh; y++) {\n        for (var x = 0; x < sw; x++) {\n            var so = y * sw + x;\n            var a = 0;\n            for (var cy = 0; cy < side; cy++) {\n                for (var cx = 0; cx < side; cx++) {\n                    var scy = y + cy - halfSide;\n                    var scx = x + cx - halfSide;\n                    if (scy >= 0 && scy < sh && scx >= 0 && scx < sw) {\n                        var srcOff = scy * sw + scx;\n                        var wt = weights[cy * side + cx];\n                        a += mask[srcOff] * wt;\n                    }\n                }\n            }\n            maskResult[so] = a;\n        }\n    }\n    return maskResult;\n}\nexport const Mask = function (imageData) {\n    var threshold = this.threshold(), mask = backgroundMask(imageData, threshold);\n    if (mask) {\n        mask = erodeMask(mask, imageData.width, imageData.height);\n        mask = dilateMask(mask, imageData.width, imageData.height);\n        mask = smoothEdgeMask(mask, imageData.width, imageData.height);\n        applyMask(imageData, mask);\n    }\n    return imageData;\n};\nFactory.addGetterSetter(Node, 'threshold', 0, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Noise = function (imageData) {\n    var amount = this.noise() * 255, data = imageData.data, nPixels = data.length, half = amount / 2, i;\n    for (i = 0; i < nPixels; i += 4) {\n        data[i + 0] += half - 2 * half * Math.random();\n        data[i + 1] += half - 2 * half * Math.random();\n        data[i + 2] += half - 2 * half * Math.random();\n    }\n};\nFactory.addGetterSetter(Node, 'noise', 0.2, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Util } from '../Util.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Pixelate = function (imageData) {\n    var pixelSize = Math.ceil(this.pixelSize()), width = imageData.width, height = imageData.height, x, y, i, red, green, blue, alpha, nBinsX = Math.ceil(width / pixelSize), nBinsY = Math.ceil(height / pixelSize), xBinStart, xBinEnd, yBinStart, yBinEnd, xBin, yBin, pixelsInBin, data = imageData.data;\n    if (pixelSize <= 0) {\n        Util.error('pixelSize value can not be <= 0');\n        return;\n    }\n    for (xBin = 0; xBin < nBinsX; xBin += 1) {\n        for (yBin = 0; yBin < nBinsY; yBin += 1) {\n            red = 0;\n            green = 0;\n            blue = 0;\n            alpha = 0;\n            xBinStart = xBin * pixelSize;\n            xBinEnd = xBinStart + pixelSize;\n            yBinStart = yBin * pixelSize;\n            yBinEnd = yBinStart + pixelSize;\n            pixelsInBin = 0;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    red += data[i + 0];\n                    green += data[i + 1];\n                    blue += data[i + 2];\n                    alpha += data[i + 3];\n                    pixelsInBin += 1;\n                }\n            }\n            red = red / pixelsInBin;\n            green = green / pixelsInBin;\n            blue = blue / pixelsInBin;\n            alpha = alpha / pixelsInBin;\n            for (x = xBinStart; x < xBinEnd; x += 1) {\n                if (x >= width) {\n                    continue;\n                }\n                for (y = yBinStart; y < yBinEnd; y += 1) {\n                    if (y >= height) {\n                        continue;\n                    }\n                    i = (width * y + x) * 4;\n                    data[i + 0] = red;\n                    data[i + 1] = green;\n                    data[i + 2] = blue;\n                    data[i + 3] = alpha;\n                }\n            }\n        }\n    }\n};\nFactory.addGetterSetter(Node, 'pixelSize', 8, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Posterize = function (imageData) {\n    var levels = Math.round(this.levels() * 254) + 1, data = imageData.data, len = data.length, scale = 255 / levels, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = Math.floor(data[i] / scale) * scale;\n    }\n};\nFactory.addGetterSetter(Node, 'levels', 0.5, getNumberValidator(), Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { RGBComponent } from '../Validators.js';\nexport const RGB = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), i, brightness;\n    for (i = 0; i < nPixels; i += 4) {\n        brightness =\n            (0.34 * data[i] + 0.5 * data[i + 1] + 0.16 * data[i + 2]) / 255;\n        data[i] = brightness * red;\n        data[i + 1] = brightness * green;\n        data[i + 2] = brightness * blue;\n        data[i + 3] = data[i + 3];\n    }\n};\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { RGBComponent } from '../Validators.js';\nexport const RGBA = function (imageData) {\n    var data = imageData.data, nPixels = data.length, red = this.red(), green = this.green(), blue = this.blue(), alpha = this.alpha(), i, ia;\n    for (i = 0; i < nPixels; i += 4) {\n        ia = 1 - alpha;\n        data[i] = red * alpha + data[i] * ia;\n        data[i + 1] = green * alpha + data[i + 1] * ia;\n        data[i + 2] = blue * alpha + data[i + 2] * ia;\n    }\n};\nFactory.addGetterSetter(Node, 'red', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'green', 0, function (val) {\n    this._filterUpToDate = false;\n    if (val > 255) {\n        return 255;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return Math.round(val);\n    }\n});\nFactory.addGetterSetter(Node, 'blue', 0, RGBComponent, Factory.afterSetFilter);\nFactory.addGetterSetter(Node, 'alpha', 1, function (val) {\n    this._filterUpToDate = false;\n    if (val > 1) {\n        return 1;\n    }\n    else if (val < 0) {\n        return 0;\n    }\n    else {\n        return val;\n    }\n});\n","export const Sepia = function (imageData) {\n    var data = imageData.data, nPixels = data.length, i, r, g, b;\n    for (i = 0; i < nPixels; i += 4) {\n        r = data[i + 0];\n        g = data[i + 1];\n        b = data[i + 2];\n        data[i + 0] = Math.min(255, r * 0.393 + g * 0.769 + b * 0.189);\n        data[i + 1] = Math.min(255, r * 0.349 + g * 0.686 + b * 0.168);\n        data[i + 2] = Math.min(255, r * 0.272 + g * 0.534 + b * 0.131);\n    }\n};\n","export const Solarize = function (imageData) {\n    var data = imageData.data, w = imageData.width, h = imageData.height, w4 = w * 4, y = h;\n    do {\n        var offsetY = (y - 1) * w4;\n        var x = w;\n        do {\n            var offset = offsetY + (x - 1) * 4;\n            var r = data[offset];\n            var g = data[offset + 1];\n            var b = data[offset + 2];\n            if (r > 127) {\n                r = 255 - r;\n            }\n            if (g > 127) {\n                g = 255 - g;\n            }\n            if (b > 127) {\n                b = 255 - b;\n            }\n            data[offset] = r;\n            data[offset + 1] = g;\n            data[offset + 2] = b;\n        } while (--x);\n    } while (--y);\n};\n","import { Factory } from '../Factory.js';\nimport { Node } from '../Node.js';\nimport { getNumberValidator } from '../Validators.js';\nexport const Threshold = function (imageData) {\n    var level = this.threshold() * 255, data = imageData.data, len = data.length, i;\n    for (i = 0; i < len; i += 1) {\n        data[i] = data[i] < level ? 0 : 255;\n    }\n};\nFactory.addGetterSetter(Node, 'threshold', 0.5, getNumberValidator(), Factory.afterSetFilter);\n","import { Konva as Core } from './_CoreInternals.js';\nimport { Arc } from './shapes/Arc.js';\nimport { Arrow } from './shapes/Arrow.js';\nimport { Circle } from './shapes/Circle.js';\nimport { Ellipse } from './shapes/Ellipse.js';\nimport { Image } from './shapes/Image.js';\nimport { Label, Tag } from './shapes/Label.js';\nimport { Line } from './shapes/Line.js';\nimport { Path } from './shapes/Path.js';\nimport { Rect } from './shapes/Rect.js';\nimport { RegularPolygon } from './shapes/RegularPolygon.js';\nimport { Ring } from './shapes/Ring.js';\nimport { Sprite } from './shapes/Sprite.js';\nimport { Star } from './shapes/Star.js';\nimport { Text } from './shapes/Text.js';\nimport { TextPath } from './shapes/TextPath.js';\nimport { Transformer } from './shapes/Transformer.js';\nimport { Wedge } from './shapes/Wedge.js';\nimport { Blur } from './filters/Blur.js';\nimport { Brighten } from './filters/Brighten.js';\nimport { Contrast } from './filters/Contrast.js';\nimport { Emboss } from './filters/Emboss.js';\nimport { Enhance } from './filters/Enhance.js';\nimport { Grayscale } from './filters/Grayscale.js';\nimport { HSL } from './filters/HSL.js';\nimport { HSV } from './filters/HSV.js';\nimport { Invert } from './filters/Invert.js';\nimport { Kaleidoscope } from './filters/Kaleidoscope.js';\nimport { Mask } from './filters/Mask.js';\nimport { Noise } from './filters/Noise.js';\nimport { Pixelate } from './filters/Pixelate.js';\nimport { Posterize } from './filters/Posterize.js';\nimport { RGB } from './filters/RGB.js';\nimport { RGBA } from './filters/RGBA.js';\nimport { Sepia } from './filters/Sepia.js';\nimport { Solarize } from './filters/Solarize.js';\nimport { Threshold } from './filters/Threshold.js';\nexport const Konva = Core.Util._assign(Core, {\n    Arc,\n    Arrow,\n    Circle,\n    Ellipse,\n    Image,\n    Label,\n    Tag,\n    Line,\n    Path,\n    Rect,\n    RegularPolygon,\n    Ring,\n    Sprite,\n    Star,\n    Text,\n    TextPath,\n    Transformer,\n    Wedge,\n    Filters: {\n        Blur,\n        Brighten,\n        Contrast,\n        Emboss,\n        Enhance,\n        Grayscale,\n        HSL,\n        HSV,\n        Invert,\n        Kaleidoscope,\n        Mask,\n        Noise,\n        Pixelate,\n        Posterize,\n        RGB,\n        RGBA,\n        Sepia,\n        Solarize,\n        Threshold,\n    },\n});\n","import { Konva } from './_FullInternals.js';\nexport default Konva;\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import { getLaneFlowPoint, getRoadFlowPoint, getWaitAreaPoint } from \"./flowPoint\"\r\n// 在canvas为800的基础上，使用以下配置值\r\nconst baseWidth = 800\r\n\r\n// 路口固定配置，根据baseWidth来设置。会根据cross中size等比缩小\r\nconst CrossConstBase:any = {\r\n  roadWidth: 40, // 单个车道宽度  // 2.5米  size：0.000720720720721   1个单位= 0.1米\r\n  bicycleLaneWidth: 15, // 非机动车道\r\n  greenWidth: 10, // 中间绿化带宽度\r\n  doubleYellowLineInterval: 10, // 双黄线间距\r\n  defaultSolidRoadLength: 80, // 进车道实线长度\r\n  defaultRoadLength: 2000, // 道路长度\r\n  defaultRoadNumber: 4, // 初始化道路数\r\n  manRadianLength: 35, // 增加B点位置，释放出交叉口弧度\r\n  manRoadLength: 30, // 马路间人行道长度\r\n  manRoadInterval: 16, // 人行道间隔\r\n  manRoadLineWidth: 1, // 线粗细\r\n  manCarInterval: 4, // 人行道与车道停止线间隔\r\n  walkwayWidth: 20, // 行人通道宽度\r\n  dashLength: 12, // 虚线长度\r\n  busDashLength: 30, // 公交专用车道虚线长度\r\n  tidalDashLength: 24, // 潮汐车道虚线长度\r\n  roadPole: 130 // 路杆子距离人行道距离  绘制非机动车的位置\r\n}\r\n\r\nconst CrossConst:any = {}\r\n// 固定值， 不会变化\r\nconst CrossAngle = {\r\n  radian: 0, // 各个方向间使用一个弧度，该值为偏移角度，越大弧度越平滑。\r\n  interval: 1 // 每个几度取一个点。\r\n}\r\n// 道路中心区域模式\r\nconst RoadCenterMode = {\r\n  doubleYellowLine: 'doubleYellowLine', // 双黄线\r\n  greenArea: 'greenArea', // 绿化带\r\n  singleYellowLine: 'singleYellowLine' // 单黄实线\r\n}\r\n// 工具类\r\nconst Util = {\r\n  // 弧度转换成角度\r\n  toAngle: (radian:any) => {\r\n    return radian * 180 / Math.PI\r\n  },\r\n  // 角度转换成弧度\r\n  toRadian: (angle:any) => {\r\n    return angle * Math.PI / 180\r\n  },\r\n  //偏移-旋转-偏移\r\n  pointRotateByPoint: (point:any, angle:any, rotateCenter = [0, 0]) => {\r\n    const x = point.x - rotateCenter[0]\r\n    const y = point.y - rotateCenter[1]\r\n    let angleXY = Util.toAngle(Math.atan(y / x))\r\n    if (x < 0) {\r\n      angleXY += 180\r\n    }\r\n    const L = Math.sqrt(x * x + y * y)\r\n    return {\r\n      x: Math.cos(Util.toRadian(angleXY - angle)) * L + rotateCenter[0],\r\n      y: Math.sin(Util.toRadian(angleXY - angle)) * L + rotateCenter[1]\r\n    }\r\n  },\r\n  // 旋转点位偏移[{x,y}]\r\n  pointRotateAngel: (point:any, angle:any, move = [0, 0]) => {\r\n    const { x, y } = point\r\n    let angleXY = Util.toAngle(Math.atan(y / x))\r\n    if (x < 0) {\r\n      angleXY += 180\r\n    }\r\n    const L = Math.sqrt(x * x + y * y)\r\n    return {\r\n      x: Math.cos(Util.toRadian(angleXY - angle)) * L + move[0],\r\n      y: Math.sin(Util.toRadian(angleXY - angle)) * L + move[1]\r\n    }\r\n  },\r\n  // 获取距离\r\n  getDistance: (x1:any, y1:any, x2:any, y2:any) => {\r\n    const dx = Math.abs(x2 - x1)\r\n    const dy = Math.abs(y2 - y1)\r\n    const distance = Math.sqrt(Math.pow(dx, 2) + Math.pow(dy, 2))\r\n    return distance\r\n  },\r\n  /**\r\n   * @desc 二阶贝塞尔\r\n   * @param {number} t 当前百分比\r\n   * @param {Array} p1 起点坐标\r\n   * @param {Array} p2 终点坐标\r\n   * @param {Array} cp 控制点\r\n   */\r\n  twoBezier: (t:any, p1:any, cp:any, p2:any) => {\r\n    const [x1, y1] = p1\r\n    const [cx, cy] = cp\r\n    const [x2, y2] = p2\r\n    const x = (1 - t) * (1 - t) * x1 + 2 * t * (1 - t) * cx + t * t * x2\r\n    const y = (1 - t) * (1 - t) * y1 + 2 * t * (1 - t) * cy + t * t * y2\r\n    return [x, y]\r\n  },\r\n  // 获取两个点之前那的弧线角度 返回二维点位数组\r\n  getArcPoint: (pointA:any, pointB:any) => {\r\n    let angelA = 20\r\n    const pointList = []\r\n    let [x1, y1] = pointA\r\n    let [x3, y3] = pointB\r\n    if (x1 > x3) {\r\n      angelA = -angelA;\r\n      [x1, y1, x3, y3] = [x3, y3, x1, y1]\r\n    }\r\n    let x2 = x1 + Math.cos(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n    let y2 = y1 + Math.sin(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n    for (let i = 0; i < 1; i += 0.01) {\r\n      const erPoint = Util.twoBezier(i, [x1, y1], [x2, y2], [x3, y3])\r\n      pointList.push(erPoint)\r\n    }\r\n    return pointList\r\n  },\r\n  //计算两个点位的弧度\r\n  calculateAngle (leftDegree:any, rightDegree:any) {\r\n    let degree = leftDegree - rightDegree\r\n    if (degree < 0) {\r\n      degree += 360\r\n    }\r\n    return degree\r\n  },\r\n\r\n  // os的角度degree转换成路口模型的角度angle\r\n  degreeToAngle: (agree:any) => {\r\n    let angle = 0\r\n    if (agree >= 0 && agree <= 90) {\r\n      angle = 90 - agree\r\n    } else if (agree > 90 && agree < 180) {\r\n      angle = 360 - agree + 90\r\n    } else if (agree >= 180 && agree <= 270) {\r\n      angle = 270 - agree + 180\r\n    } else if (agree > 270 && agree <= 360) {\r\n      angle = 360 - agree + 90\r\n    }\r\n    return angle\r\n  },\r\n\r\n  // 计算左右两边道路的计算弧度\r\n  calculateLeftRightRadian (leftDegree:any, rightDegree:any) {\r\n    let degree = leftDegree - rightDegree\r\n    let degreeRadia = 0\r\n    if (degree < 0) {\r\n      degree += 360\r\n    }\r\n    if (degree <= 90) {\r\n      degreeRadia = Util.toRadian(90 - degree)\r\n    } else if (degree > 90 &&  degree< 180) {\r\n      degreeRadia = Util.toRadian(degree - 90)\r\n    }\r\n    return degreeRadia\r\n  },\r\n\r\n  // 根据两个点位以及分割距离计算分割的每一段的点位\r\n  getSplitPoint (point1:any, point2:any, spliceLength:any) {\r\n    const spliteArr = []\r\n    const d = Util.getDistance(point1.x, point1.y, point2.x, point2.y)\r\n    const dx = (point2.x - point1.x) / d * spliceLength\r\n    const dy = (point2.y - point1.y) / d * spliceLength\r\n    const length = Math.ceil(d / spliceLength / 2)\r\n    for (let j = 0; j < length; j++) {\r\n      spliteArr.push([\r\n        [point1.x + dx * 2 * j, point1.y + dy * 2 * j],\r\n        [point1.x + dx * (2 * j + 1), point1.y + dy * (2 * j + 1)]\r\n      ])\r\n    }\r\n    return spliteArr\r\n  }\r\n\r\n}\r\n// 经纬度\r\n\r\n/**\r\n * @description 方向对象\r\n * @author wsx\r\n * @Date  2021-07-29 13:10:27\r\n */\r\nclass CrossInfo {\r\n\r\n  entrances:any\r\n  origin:any\r\n  centerLineMode : any\r\n  roadNumber : any\r\n  drawOption :any\r\n  is_have_son:any\r\n  baseWidth :any\r\n  clientWidth :any\r\n  clientHeight:any\r\n  entranceArray:any\r\n\r\n  constructor(param:any) {\r\n    const option = Object.assign({\r\n      entrances: [], // 各个方向数据\r\n      origin: [0, 0], // 经纬度或者canvas的原点\r\n      // size: 400, // 控制大小， 经纬度大小或者canvas画布大小\r\n      centerLineMode: false, // true：道路中心线交叉原点、false:黄线对齐。\r\n      drawOption: {},  // 绘制参数\r\n      is_have_son: 0, // 0普通路口 1父子路口 2匝道\r\n      baseWidth: 800,\r\n      clientWidth: 800,\r\n      clientHeight: 800,\r\n    }, param)\r\n    const scale = option.is_have_son == 2 ? 1.1 : 0.8\r\n\r\n    for (const prop in CrossConstBase) {\r\n      CrossConst[prop] = (option.baseWidth * scale) / baseWidth * CrossConstBase[prop]\r\n    }\r\n    if (option.expandManRadian) {\r\n      CrossConst.manRadianLength = CrossConst.manRadianLength * 3\r\n    }\r\n    this.entrances = option.entrances\r\n    this.origin = option.origin\r\n    this.centerLineMode = option.centerLineMode\r\n    this.roadNumber = this.entrances.length\r\n    this.drawOption = option.drawOption\r\n    this.is_have_son = option.is_have_son\r\n    this.baseWidth = option.baseWidth\r\n    this.clientWidth = option.clientWidth\r\n    this.clientHeight = option.clientHeight\r\n    if (this.roadNumber < 2) {\r\n      console.error('路口模型不能小于两个方向。')\r\n      return\r\n    }\r\n    this.init()\r\n  }\r\n\r\n  init () {\r\n    this.entranceArray = this.entrances.map((info:any, index:any) => {\r\n      info.roadNumber = this.roadNumber\r\n      info.number = index\r\n      info.origin = this.origin\r\n      info.centerLineMode = this.centerLineMode\r\n      info.drawOption = this.drawOption\r\n      info.entranceNum = this.entrances.length\r\n      info.is_have_son = this.is_have_son\r\n      info.baseWidth = this.baseWidth\r\n      info.clientWidth = this.clientWidth\r\n      info.clientHeight = this.clientHeight\r\n\r\n      // 第二个进口的进口数量,绘制匝道\r\n      info.secondIn = this.entrances[1].motor_lanes.length\r\n      if (this.is_have_son === 2) {\r\n        return new CrossRampObject(info)\r\n      } else {\r\n        return new CrossDirectionObject(info)\r\n      }\r\n    })\r\n    // 普通路口做计算\r\n    if (this.is_have_son != 2) {\r\n      this.entranceArray.map((info:any, index:any) => {\r\n        const param = {\r\n          degreeLeft: index === this.roadNumber - 1 ? this.entranceArray[0].degree : this.entranceArray[index + 1].degree,\r\n          degreeRight: index === 0 ? this.entranceArray[this.roadNumber - 1].degree : this.entranceArray[index - 1].degree,\r\n          widthLeft: index === this.roadNumber - 1 ? this.entranceArray[0].rightWidth : this.entranceArray[index + 1].rightWidth,\r\n          widthRight: index === 0 ? this.entranceArray[this.roadNumber - 1].leftWidth : this.entranceArray[index - 1].leftWidth,\r\n        }\r\n        info.setLeftAndRight(param)\r\n      })\r\n    }\r\n  }\r\n}\r\n/**\r\n * @description 方向对象\r\n * @author wsx\r\n * @Date  2021-07-29 13:10:27\r\n */\r\nclass CrossDirectionObject {\r\n  // 进口数\r\n  entranceNum :any\r\n  // 进口id\r\n  en_id :any\r\n  name :any\r\n  // 进路口车道数\r\n  in :any\r\n  // 进路口非机动车道数\r\n  inBicycleLane :any\r\n  // 出路口车道数\r\n  out :any\r\n  // 出路口非机动车道数\r\n  outBicycleLane :any\r\n  origin :any\r\n  centerLineMode :any\r\n  drawOption :any\r\n  // 道路中间类型。 双黄线、绿化带、单黄线等\r\n  road_center_mode :any\r\n  canalization :any\r\n  // 车道流向\r\n  motor_lanes :any\r\n  degree :any\r\n  // 路口方向相对正南方向偏移角度  （ -360 / CrossConst.defaultRoadNumber, 360 / CrossConst.defaultRoadNumber ）\r\n  angle:any\r\n  // this.angle = option.angle\r\n  // 道路长度\r\n  roadLength :any\r\n  // 路口类型，几方向路口\r\n  roadNumber :any\r\n  // 当前是第几个方向，正在方为0，逆时针数\r\n  number :any\r\n  centerToManRoadDistance :any\r\n  // 核心点位\r\n  point :any\r\n  // 转换正后的坐标\r\n  correctPoint :any\r\n  // 准确计算后的点线面数据\r\n  pointData :any\r\n  lineData :any\r\n  polygonData :any\r\n  angleLeft :any\r\n  angleRight :any\r\n  degreeLeft:any\r\n  degreeRight :any\r\n  widthLeft :any\r\n  widthRight:any\r\n  leftWidth:any\r\n  rightWidth:any\r\n  width:any\r\n\r\n  constructor(param:any) {\r\n    const option = Object.assign({\r\n      entranceNum: 4,\r\n      en_id: 1,\r\n      in: 2,\r\n      inBicycleLane: 0,\r\n      out: 2,\r\n      name: '道路',\r\n      outBicycleLane: 0,\r\n      origin: [0, 0],\r\n      centerLineMode: true,\r\n      road_center_mode: RoadCenterMode.singleYellowLine,\r\n      canalization: 0, // 右转渠化\r\n      drawOption: {},\r\n      motor_lanes: [], // 进口车道流向\r\n      degree: 0, //道路角度 根据os提供的角度\r\n      angle: 0, //道路角度 根据os提供的角度进行转换\r\n      roadNumber: CrossConst.defaultRoadNumber,\r\n      number: 0,\r\n      roadLength: CrossConst.defaultRoadLength,\r\n      centerToManRoadDistance: 0\r\n    }, param)\r\n\r\n    // 进口数\r\n    this.entranceNum = option.entranceNum\r\n    // 进口id\r\n    this.en_id = option.en_id\r\n    this.name = option.name\r\n    // 进路口车道数\r\n    this.in = option.motor_lanes.length\r\n    // 进路口非机动车道数\r\n    this.inBicycleLane = option.inBicycleLane\r\n    // 出路口车道数\r\n    this.out = option.exit_lanes.length\r\n    // 出路口非机动车道数\r\n    this.outBicycleLane = option.outBicycleLane\r\n    this.origin = option.origin\r\n    this.centerLineMode = option.centerLineMode\r\n    this.drawOption = option.drawOption\r\n    // 道路中间类型。 双黄线、绿化带、单黄线等\r\n    this.road_center_mode = option.road_center_mode\r\n    this.canalization = option.canalization\r\n    // 车道流向\r\n    this.motor_lanes = option.motor_lanes\r\n    this.degree = option.degree\r\n    // 路口方向相对正南方向偏移角度  （ -360 / CrossConst.defaultRoadNumber, 360 / CrossConst.defaultRoadNumber ）\r\n    this.angle = Util.degreeToAngle(option.degree)\r\n    // this.angle = option.angle\r\n    // 道路长度\r\n    this.roadLength = option.roadLength\r\n    // 路口类型，几方向路口\r\n    this.roadNumber = option.roadNumber\r\n    // 当前是第几个方向，正在方为0，逆时针数\r\n    this.number = option.number\r\n    this.centerToManRoadDistance = option.centerToManRoadDistance\r\n    this.calculation('width')\r\n\r\n    // 核心点位\r\n    this.point = {}\r\n    // 转换正后的坐标\r\n    this.correctPoint = {}\r\n    // 准确计算后的点线面数据\r\n    this.pointData = {}\r\n    this.lineData = {}\r\n    this.polygonData = {}\r\n  }\r\n\r\n  // 设置左右方向参数\r\n  setLeftAndRight (param:any) {\r\n    const option = Object.assign({\r\n      angleLeft: 0,\r\n      angleRight: 0,\r\n      degreeLeft: 0,\r\n      degreeRight: 0,\r\n      widthLeft: 4 * CrossConst.roadWidth,\r\n      widthRight: 4 * CrossConst.roadWidth\r\n    }, param)\r\n    // 该路口左右测路口信息。\r\n    this.angleLeft = option.angleLeft\r\n    this.angleRight = option.angleRight\r\n    this.degreeLeft = option.degreeLeft\r\n    this.degreeRight = option.degreeRight\r\n    this.widthLeft = option.widthLeft\r\n    this.widthRight = option.widthRight\r\n    this.calculation('point')\r\n  }\r\n\r\n  // 计算关联属性\r\n  calculation (prop:any) {\r\n    let angleLeft2 = Util.calculateLeftRightRadian(this.degreeLeft, this.degree)\r\n    let angleRight2 = Util.calculateLeftRightRadian(this.degree, this.degreeRight)\r\n    let toLeftAngle = Util.calculateAngle(this.degreeLeft, this.degree)\r\n    let toRightAngle = Util.calculateAngle(this.degree, this.degreeRight)\r\n\r\n    let x = 0; let y = 0; let dy = 0; let dw = 0\r\n    // 根据中心区域不同类型设置, 黄实线的宽度\r\n    switch (this.road_center_mode) {\r\n      case RoadCenterMode.doubleYellowLine:\r\n        dw = CrossConst.doubleYellowLineInterval\r\n        break\r\n      case RoadCenterMode.greenArea:\r\n        dw = CrossConst.greenWidth\r\n        break\r\n      case RoadCenterMode.singleYellowLine:\r\n        dw = 0\r\n        break\r\n    }\r\n    switch (prop) {\r\n      // 道路宽度\r\n      case 'width':\r\n        // this.width = (this.in + this.out) * CrossConst.roadWidth + dw + (this.inBicycleLane + this.outBicycleLane) * CrossConst.bicycleLaneWidth\r\n        // 自身左右道路长度\r\n        this.leftWidth = this.out * CrossConst.roadWidth + dw / 2 + this.outBicycleLane * CrossConst.bicycleLaneWidth\r\n        this.rightWidth = this.in * CrossConst.roadWidth + dw / 2 + this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n        this.width = this.leftWidth + this.rightWidth\r\n        if (this.centerLineMode) {\r\n          this.leftWidth = this.rightWidth = this.width / 2\r\n        }\r\n        break\r\n      // 核心点位\r\n      case 'point':\r\n        this.point = {\r\n          // 左顶点\r\n          AL: {\r\n            x: this.centerLineMode ? -this.width / 2 : -(this.out * CrossConst.roadWidth + dw / 2 + this.outBicycleLane * CrossConst.bicycleLaneWidth)\r\n          },\r\n          // 右顶点\r\n          AR: {\r\n            x: this.centerLineMode ? this.width / 2 : this.in * CrossConst.roadWidth + dw / 2 + this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n          }\r\n        }\r\n        if (toLeftAngle <= 90) {\r\n          this.point.AL.y = Math.tan(angleLeft2) * this.point.AL.x - this.widthLeft / Math.cos(angleLeft2)\r\n        } else if (toLeftAngle > 90 && toLeftAngle < 180) {\r\n          this.point.AL.y = -Math.tan(angleLeft2) * this.point.AL.x - this.widthLeft / Math.cos(angleLeft2)\r\n        } else {\r\n          this.point.AL.y = -20\r\n        }\r\n\r\n        if (toRightAngle <= 90) {\r\n          this.point.AR.y = -Math.tan(angleRight2) * this.point.AR.x - this.widthRight / Math.cos(angleRight2)\r\n        } else if (toRightAngle > 90 && toRightAngle < 180) {\r\n          this.point.AR.y = Math.tan(angleRight2) * this.point.AR.x - this.widthRight / Math.cos(angleRight2)\r\n        }\r\n\r\n        if (toLeftAngle >= 180) {\r\n          this.point.AL.y = this.point.AR.y\r\n        }\r\n        if (toRightAngle >= 180) {\r\n          this.point.AR.y = this.point.AL.y\r\n        }\r\n\r\n        if (this.entranceNum === 2) {\r\n          this.point.AL.y = -CrossConst.roadWidth * 2.5\r\n          this.point.AR.y = -CrossConst.roadWidth * 2.5\r\n        }\r\n\r\n        // eslint-disable-next-line no-case-declarations\r\n        const minY = this.point.AL.y < this.point.AR.y ? this.point.AL.y : this.point.AR.y\r\n        this.point.CL = {\r\n          x: this.point.AL.x,\r\n          y: minY - CrossConst.defaultRoadLength\r\n        }\r\n        this.point.CR = {\r\n          x: this.point.AR.x,\r\n          y: minY - CrossConst.defaultRoadLength\r\n        }\r\n        // 使每个路口都垂直，所以关键点位8的高度要一致\r\n        let h = Math.min(this.point.AL.y, this.point.AR.y)\r\n        // 记录原来的B点位 BLO  BRO\r\n        this.point.BLO = {\r\n          x: this.point.AL.x,\r\n          y: this.centerToManRoadDistance !== 0 ? -this.centerToManRoadDistance : this.point.AL.y - (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n        }\r\n        this.point.BRO = {\r\n          x: this.point.AR.x,\r\n          y: this.centerToManRoadDistance !== 0 ? -this.centerToManRoadDistance : this.point.AR.y - (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n        }\r\n        this.point.BL = {\r\n          x: this.point.AL.x,\r\n          y: this.centerToManRoadDistance !== 0 ? -this.centerToManRoadDistance : h - (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n        }\r\n        this.point.BR = {\r\n          x: this.point.AR.x,\r\n          y: this.centerToManRoadDistance !== 0 ? -this.centerToManRoadDistance : h - (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n        }\r\n        // 设备杆位置\r\n        this.point.roadPole = {\r\n          x: this.point.BR.x + CrossConst.walkwayWidth / 2,\r\n          y: this.point.BR.y - CrossConst.roadPole\r\n        }\r\n        // 右边设备杆\r\n        this.point.roadPoleL = {\r\n          x: this.point.BL.x - CrossConst.walkwayWidth / 2,\r\n          y: this.point.BL.y - CrossConst.roadPole\r\n        }\r\n        this.point.B1L = {\r\n          x: this.point.BL.x - CrossConst.walkwayWidth,\r\n          y: this.point.BL.y\r\n        }\r\n        this.point.B1R = {\r\n          x: this.point.BR.x + CrossConst.walkwayWidth,\r\n          y: this.point.BR.y\r\n        }\r\n        this.point.C1L = {\r\n          x: this.point.AL.x - CrossConst.walkwayWidth,\r\n          y: minY - CrossConst.defaultRoadLength\r\n        }\r\n        this.point.C1R = {\r\n          x: this.point.AR.x + CrossConst.walkwayWidth,\r\n          y: minY - CrossConst.defaultRoadLength\r\n        }\r\n        // 道路名称位置\r\n        this.point.roadName = {\r\n          x: this.point.BL.x - CrossConst.walkwayWidth - 12,\r\n          y: this.point.BL.y\r\n        }\r\n        // 道路中心绿化带区域点位\r\n        if (this.road_center_mode === RoadCenterMode.greenArea) {\r\n          this.point.E1 = {\r\n            x: this.point.CL.x + this.out * CrossConst.roadWidth + this.outBicycleLane * CrossConst.bicycleLaneWidth,\r\n            y: minY - CrossConst.defaultRoadLength\r\n          }\r\n          this.point.F1 = {\r\n            x: this.point.CL.x + this.out * CrossConst.roadWidth + CrossConst.greenWidth + this.outBicycleLane * CrossConst.bicycleLaneWidth,\r\n            y: minY - CrossConst.defaultRoadLength\r\n          }\r\n          this.point.FToE = []\r\n          let angleIndex = 0\r\n          const dx = this.point.CL.x + this.out * CrossConst.roadWidth + this.outBicycleLane * CrossConst.bicycleLaneWidth + CrossConst.greenWidth / 2\r\n          const dy =\r\n            this.point.BL.y + (this.out * CrossConst.roadWidth + this.outBicycleLane * CrossConst.bicycleLaneWidth + CrossConst.greenWidth / 2) /\r\n            (this.point.BR.x - this.point.BL.x) * (this.point.BR.y - this.point.BL.y) -\r\n            CrossConst.greenWidth / 2\r\n          do {\r\n            this.point.FToE.push({\r\n              x: dx + Math.cos(Util.toRadian(angleIndex)) * CrossConst.greenWidth / 2,\r\n              y: dy + Math.sin(Util.toRadian(angleIndex)) * CrossConst.greenWidth / 2\r\n            })\r\n            angleIndex += CrossAngle.interval\r\n          } while (angleIndex <= 180)\r\n        }\r\n\r\n        this.calculation('point2')\r\n        break\r\n      case 'point2':\r\n        // 计算从B到D点间弧度的点。\r\n        this.calculation('BToD')\r\n        // 计算人行道点\r\n        this.calculation('ALToAR')\r\n        // 人行道点位确定\r\n        this.calculation('pointH')\r\n        // 计算 车道 流向点位\r\n        this.calculation('pointLaneFlow')\r\n        // 计算 进口 流向点位\r\n        this.calculation('pointRoadFlow')\r\n        // 计算待驶区的点位\r\n        this.calculation('pointWaitArea')\r\n        for (const prop in this.point) {\r\n          if (Array.isArray(this.point[prop])) {\r\n            this.correctPoint[prop] = []\r\n            this.point[prop].forEach((info:any, index:any) => {\r\n              if (Array.isArray(info)) {\r\n                this.correctPoint[prop][index] = []\r\n                info.map(it => {\r\n                  this.correctPoint[prop][index].push(Util.pointRotateAngel(it, -this.angle, this.origin))\r\n                })\r\n              } else {\r\n                this.correctPoint[prop].push(Util.pointRotateAngel(info, -this.angle, this.origin))\r\n              }\r\n            })\r\n          } else {\r\n            this.correctPoint[prop] = Util.pointRotateAngel(this.point[prop], -this.angle, this.origin)\r\n          }\r\n        }\r\n        // 道路面数据计算\r\n        this.calculation('RoadPolygon')\r\n        this.calculation('walkwayPolygonR')\r\n        this.calculation('walkwayPolygonL')\r\n        this.calculation('manRoadLine')\r\n        this.calculation('carRoadLine0')\r\n        this.calculation('carRoadLine1')\r\n        this.calculation('carRoadLine2')\r\n        this.calculation('carRoadLine3')\r\n        this.calculation('carRoadLine4')\r\n        this.calculation('fdsplitLine')\r\n        this.calculation('laneFlowPolygon')\r\n        this.calculation('roadFlowPolygon')\r\n        if (this.road_center_mode === RoadCenterMode.greenArea) {\r\n          this.calculation('greenPolygon')\r\n        }\r\n        break\r\n      // 计算从B到D点间弧度的点。\r\n      case 'BToD':\r\n        // eslint-disable-next-line no-case-declarations\r\n        const angelA = 20\r\n        // eslint-disable-next-line no-case-declarations\r\n        const createDRToBR = () => {\r\n          let rightPoint = {\r\n            x: this.point.AR.x + Math.cos(angleRight2) * (CrossConst.manRoadLength + CrossConst.manRadianLength),\r\n            y: this.point.AR.y + Math.sin(angleRight2) * (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n          }\r\n          if (toRightAngle <= 90) {\r\n            rightPoint = {\r\n              x: this.point.AR.x + Math.cos(angleRight2) * (CrossConst.manRoadLength + CrossConst.manRadianLength),\r\n              y: this.point.AR.y - Math.sin(angleRight2) * (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n            }\r\n          } else if (toRightAngle > 180) {  // todo 待验证\r\n            rightPoint = {\r\n              x: this.point.AR.x,\r\n              y: this.point.AR.y - Math.sin(angleRight2) * (CrossConst.manRoadLength + CrossConst.manRadianLength)\r\n            }\r\n          }\r\n          this.point.BToDR = []\r\n          this.point.B1ToD1R = []\r\n          let { x: x1, y: y1 } = this.point.BR\r\n          let { x: x3, y: y3 } = rightPoint\r\n          let x2 = x1 + Math.cos(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n          let y2 = y1 + Math.sin(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n          if (toRightAngle < 180 && this.entranceNum !== 2) {\r\n            for (let index = 0; index < 1; index += 0.01) {\r\n              const [x, y] = Util.twoBezier(index, [x1, y1], [x2, y2], [x3, y3])\r\n              this.point.BToDR.push({ x, y })\r\n            }\r\n          } else {\r\n            this.point.BToDR = [{ x: x1, y: y1 }, { x: x3, y: y3 }]\r\n          }\r\n          // 边缘内容\r\n          rightPoint = {\r\n            x: rightPoint.x + Math.sin(angleRight2) * CrossConst.walkwayWidth,\r\n            y: rightPoint.y - Math.cos(angleRight2) * CrossConst.walkwayWidth\r\n          }\r\n          this.point.rightPoint = rightPoint\r\n          x1 += CrossConst.walkwayWidth\r\n          x3 = rightPoint.x\r\n          y3 = rightPoint.y\r\n          x2 = x1 + Math.cos(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n          y2 = y1 + Math.sin(Util.toRadian(angelA + Util.toAngle(Math.atan((y3 - y1) / (x3 - x1))))) * Math.sqrt((y3 - y1) * (y3 - y1) + (x3 - x1) * (x3 - x1)) / 2 / Math.cos(Util.toRadian(angelA))\r\n          this.point.OOO = {\r\n            x: x2,\r\n            y: y2\r\n          }\r\n          if (toRightAngle < 180 && this.entranceNum !== 2) {\r\n            for (let index = 0; index < 1; index += 0.01) {\r\n              const [x, y] = Util.twoBezier(index, [x1, y1], [x2, y2], [x3, y3])\r\n              this.point.B1ToD1R.push({ x, y })\r\n            }\r\n          } else {\r\n            this.point.B1ToD1R = [{ x: x1, y: y1 }, { x: x3, y: y3 }]\r\n          }\r\n        }\r\n        createDRToBR()\r\n        break\r\n      // ALToAR 和 BLToBR\r\n      case 'ALToAR':\r\n        this.point.ALToAR = []\r\n        this.point.BLToBR = []\r\n        // eslint-disable-next-line prefer-destructuring\r\n        x = this.point.BL.x\r\n        dy = (this.point.BR.y - this.point.BL.y) / this.width * CrossConst.manRoadInterval\r\n        // eslint-disable-next-line prefer-destructuring\r\n        y = this.point.BL.y\r\n        do {\r\n          this.point.ALToAR.push({ x, y: y + CrossConst.manRoadLength })\r\n          this.point.BLToBR.push({ x, y })\r\n          x += CrossConst.manRoadInterval\r\n          y += dy\r\n        } while (x <= this.point.BR.x)\r\n        break\r\n      case 'pointH':\r\n        dy = (this.point.BR.y - this.point.BL.y) / (this.point.BR.x - this.point.BL.x) * CrossConst.roadWidth\r\n        // 车道数据\r\n        this.point.H0 = []\r\n        this.point.H1 = []\r\n        this.point.H2 = []\r\n        for (let i = 0; i < (this.in + this.out + 1); i++) {\r\n          switch (this.road_center_mode) {\r\n            case RoadCenterMode.doubleYellowLine:\r\n              const dInterval = (this.point.BR.y - this.point.BL.y) / (this.point.BR.x - this.point.BL.x) * CrossConst.doubleYellowLineInterval\r\n              x = this.point.BR.x - CrossConst.roadWidth * i - (i < this.in ? 0 : CrossConst.doubleYellowLineInterval) - this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n              y = this.point.BR.y - CrossConst.manCarInterval - dy * i - (i < this.in ? 0 : dInterval) - dy * this.inBicycleLane * CrossConst.bicycleLaneWidth / CrossConst.roadWidth\r\n              break\r\n            case RoadCenterMode.greenArea:\r\n              const dGreeny = (this.point.BR.y - this.point.BL.y) / (this.point.BR.x - this.point.BL.x) * CrossConst.greenWidth\r\n              x = this.point.BR.x - CrossConst.roadWidth * i - (i < this.in ? 0 : CrossConst.greenWidth) - this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n              y = this.point.BR.y - CrossConst.manCarInterval - dy * i - (i < this.in ? 0 : dGreeny) - dy * this.inBicycleLane * CrossConst.bicycleLaneWidth / CrossConst.roadWidth\r\n              break\r\n            case RoadCenterMode.singleYellowLine:\r\n              x = this.point.BR.x - CrossConst.roadWidth * i - this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n              y = this.point.BR.y - CrossConst.manCarInterval - dy * i - dy * this.inBicycleLane * CrossConst.bicycleLaneWidth / CrossConst.roadWidth\r\n              break\r\n          }\r\n          this.point.H0.push({\r\n            x: x,\r\n            y: y\r\n          })\r\n          this.point.H1.push({\r\n            x: x,\r\n            y: y - CrossConst.defaultSolidRoadLength\r\n          })\r\n          this.point.H2.push({\r\n            x: x,\r\n            y: this.point.CR.y\r\n          })\r\n          if ((this.road_center_mode === RoadCenterMode.greenArea || this.road_center_mode === RoadCenterMode.doubleYellowLine) &&\r\n            i === this.in - 1) {\r\n            switch (this.road_center_mode) {\r\n              case RoadCenterMode.doubleYellowLine:\r\n                x = this.point.BR.x - CrossConst.roadWidth * (i + 1) - this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n                y = this.point.BR.y - CrossConst.manCarInterval - dy * (i + 1) - dy * this.inBicycleLane * CrossConst.bicycleLaneWidth / CrossConst.roadWidth\r\n                break\r\n              case RoadCenterMode.greenArea:\r\n                x = this.point.BR.x - CrossConst.roadWidth * (i + 1) - this.inBicycleLane * CrossConst.bicycleLaneWidth\r\n                y = this.point.BR.y - CrossConst.manCarInterval - dy * (i + 1) - dy * this.inBicycleLane * CrossConst.bicycleLaneWidth / CrossConst.roadWidth\r\n                break\r\n            }\r\n            this.point.H0.push({\r\n              x: x,\r\n              y: y\r\n            })\r\n            this.point.H1.push({\r\n              x: x,\r\n              y: y - CrossConst.defaultSolidRoadLength\r\n            })\r\n            this.point.H2.push({\r\n              x: x,\r\n              y: this.point.CR.y\r\n            })\r\n          }\r\n        }\r\n        break\r\n      // 计算每个车道流向绘制的点位\r\n      case 'pointLaneFlow':\r\n        this.point.pointLaneFlow = []\r\n        this.motor_lanes.forEach((it:any, i:any) => {\r\n          // 车道里面的流向\r\n          const laneFlowPoints = getLaneFlowPoint(it.id, it.lane_flow, CrossConst, this,null)\r\n          this.point.pointLaneFlow.push(laneFlowPoints)\r\n\r\n          // 左转待行驶区域的流向\r\n          if (it.has_waiting_area && (it.lane_flow === 1 || it.lane_flow === 2)) {\r\n            const waitAreaFlowPoints = getLaneFlowPoint(it.id, it.lane_flow, CrossConst, this, 'waitAreaFlow')\r\n            const waitAreaPoints = getLaneFlowPoint(it.id, it.lane_flow, CrossConst, this, 'waitArea')\r\n            this.point.pointLaneFlow.push(waitAreaFlowPoints)\r\n            this.point.pointLaneFlow.push(waitAreaPoints)\r\n          }\r\n        })\r\n        break\r\n      // 计算流向点位\r\n      case 'pointRoadFlow':\r\n        this.point.pointRoadFlow = []\r\n        this.point.pointRoadFlowText = []\r\n        for (let i = 1; i <= 4; i++) {\r\n          const { roadFlowPoints, flowTextPoint } = getRoadFlowPoint(i, CrossConst, this)\r\n          this.point.pointRoadFlow.push(roadFlowPoints)\r\n          this.point.pointRoadFlowText.push(flowTextPoint)\r\n        }\r\n        break\r\n      // 计算待驶区的点位\r\n      case 'pointWaitArea':\r\n        this.point.pointWaitArea = []\r\n        this.motor_lanes.forEach((it:any, i:any) => {\r\n          // 左转待行驶区域的流向\r\n          if (it.has_waiting_area && (it.lane_flow === 1 || it.lane_flow === 2)) {\r\n            const waitAreaPoints = getWaitAreaPoint(it.id, it.lane_flow, CrossConst, this)\r\n            this.point.pointWaitArea.push(waitAreaPoints)\r\n          }\r\n        })\r\n        break\r\n      // 道路面数据计算\r\n      case 'RoadPolygon':\r\n        this.polygonData[prop] = []\r\n        for (let i = this.correctPoint.BToDR.length - 1; i >= 0; i--) {\r\n          const point = this.correctPoint.BToDR[i]\r\n          this.polygonData[prop].push([point.x, point.y])\r\n        }\r\n        this.polygonData[prop].push([this.correctPoint.CR.x, this.correctPoint.CR.y])\r\n        this.polygonData[prop].push([this.correctPoint.CL.x, this.correctPoint.CL.y])\r\n        this.polygonData[prop].push([this.correctPoint.BL.x, this.correctPoint.BL.y])\r\n        // debugger\r\n        break\r\n      // 行人通道面积-- 右\r\n      case 'walkwayPolygonR':\r\n        this.polygonData[prop] = []\r\n        for (let i = this.correctPoint.BToDR.length - 1; i > 0; i--) {\r\n          this.polygonData[prop].push([this.correctPoint.BToDR[i].x, this.correctPoint.BToDR[i].y])\r\n        }\r\n        this.polygonData[prop].push([this.correctPoint.CR.x, this.correctPoint.CR.y])\r\n        this.polygonData[prop].push([this.correctPoint.C1R.x, this.correctPoint.C1R.y])\r\n        this.correctPoint.B1ToD1R.map((info:any) => {\r\n          this.polygonData[prop].push([info.x, info.y])\r\n        })\r\n        break\r\n      // 行人通道面积-- 左\r\n      case 'walkwayPolygonL':\r\n        this.polygonData[prop] = []\r\n        this.polygonData[prop].push([this.correctPoint.B1L.x, this.correctPoint.B1L.y])\r\n        this.polygonData[prop].push([this.correctPoint.C1L.x, this.correctPoint.C1L.y])\r\n        this.polygonData[prop].push([this.correctPoint.CL.x, this.correctPoint.CL.y])\r\n        this.polygonData[prop].push([this.correctPoint.BL.x, this.correctPoint.BL.y])\r\n        break\r\n      // 绿化地\r\n      case 'greenPolygon':\r\n        this.polygonData[prop] = []\r\n        this.correctPoint.FToE.map((info:any) => {\r\n          this.polygonData[prop].push([info.x, info.y])\r\n        })\r\n        this.polygonData[prop].push([this.correctPoint.E1.x, this.correctPoint.E1.y])\r\n        this.polygonData[prop].push([this.correctPoint.F1.x, this.correctPoint.F1.y])\r\n        break\r\n      // 人行道线路\r\n      case 'manRoadLine':\r\n        this.lineData[prop] = []\r\n        for (let i = 0, len = this.correctPoint.ALToAR.length; i < len; i++) {\r\n          this.lineData[prop].push([[this.correctPoint.ALToAR[i].x, this.correctPoint.ALToAR[i].y], [this.correctPoint.BLToBR[i].x, this.correctPoint.BLToBR[i].y]])\r\n        }\r\n        break\r\n      // 车道边线\r\n      case 'carRoadLine0':\r\n        this.lineData[prop] = []\r\n        // 道路边线\r\n        this.lineData[prop].push([\r\n          [this.correctPoint.H2[0].x, this.correctPoint.H2[0].y],\r\n          [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y]\r\n        ])\r\n        this.lineData[prop].push([\r\n          [this.correctPoint.H2[this.correctPoint.H2.length - 1].x, this.correctPoint.H2[this.correctPoint.H2.length - 1].y],\r\n          [this.correctPoint.H0[this.correctPoint.H2.length - 1].x, this.correctPoint.H0[this.correctPoint.H2.length - 1].y]\r\n        ])\r\n        break\r\n      // 车道线路  白实线部分\r\n      case 'carRoadLine1':\r\n        this.lineData[prop] = []\r\n        for (let i = 0, len = this.in; i < len; i++) {\r\n          if (i) {\r\n            const right_lane_type = this.motor_lanes[this.in - i].lane_type\r\n            const left_lane_type = this.motor_lanes[this.in - (i + 1)] ? this.motor_lanes[this.in - (i + 1)].lane_type : 0\r\n            // 特殊车道类型公交车道/潮汐车道不画侧边停车线         \r\n            if (right_lane_type === 1 || right_lane_type === 2 || left_lane_type === 1 || left_lane_type === 2) {\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H0[i].x, this.correctPoint.H0[i].y],\r\n                [this.correctPoint.H0[i + 1].x, this.correctPoint.H0[i + 1].y]\r\n              ])\r\n            } else {\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H1[i].x, this.correctPoint.H1[i].y],\r\n                [this.correctPoint.H0[i].x, this.correctPoint.H0[i].y],\r\n                [this.correctPoint.H0[i + 1].x, this.correctPoint.H0[i + 1].y],\r\n                [this.correctPoint.H0[i].x, this.correctPoint.H0[i].y]\r\n              ])\r\n            }\r\n          } else {\r\n            this.lineData[prop].push([\r\n              [this.correctPoint.H0[i].x, this.correctPoint.H0[i].y],\r\n              [this.correctPoint.H0[i + 1].x, this.correctPoint.H0[i + 1].y]\r\n            ])\r\n          }\r\n        }\r\n        break\r\n      //  车道线路  白虚线部分\r\n      case 'carRoadLine2':\r\n        this.lineData[prop] = []\r\n        for (let i = 1, len = this.correctPoint.H0.length; i < len; i++) {\r\n          // if (this.road_center_mode === RoadCenterMode.doubleYellowLine ||\r\n          //   this.road_center_mode === RoadCenterMode.greenArea) {\r\n          //   if (i === this.in + 1) {\r\n          //     continue\r\n          //   }\r\n          // }        \r\n          if (i === this.in) {\r\n            continue\r\n          }\r\n          if (i < this.in + 1) {\r\n            const right_lane_type = this.motor_lanes[this.in - i].lane_type\r\n            const left_lane_type = this.motor_lanes[this.in - (i + 1)] ? this.motor_lanes[this.in - (i + 1)].lane_type : 0\r\n            // 特殊车道1：潮汐/2公交 不用画虚线\r\n            if (right_lane_type === 1 || right_lane_type === 2 || left_lane_type === 1 || left_lane_type === 2) {\r\n              continue\r\n            }\r\n            const lineDate = Util.getSplitPoint(this.correctPoint.H1[i], this.correctPoint.H2[i], CrossConst.dashLength)\r\n            this.lineData[prop] = this.lineData[prop].concat(lineDate)\r\n          } else {\r\n            const lineDate = Util.getSplitPoint(this.correctPoint.H0[i], this.correctPoint.H2[i], CrossConst.dashLength)\r\n            this.lineData[prop] = this.lineData[prop].concat(lineDate)\r\n          }\r\n        }\r\n        break\r\n      //  车道线路  中间部分，双实线、实线、绿化带\r\n      case 'carRoadLine3':\r\n        this.lineData[prop] = []\r\n        // 根据中心区域不同类型设置宽度\r\n        switch (this.road_center_mode) {\r\n          case RoadCenterMode.greenArea:\r\n            this.lineData[prop].push([\r\n              [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n              [this.correctPoint.H2[this.in].x, this.correctPoint.H2[this.in].y],\r\n              [this.correctPoint.H2[this.in + 1].x, this.correctPoint.H2[this.in + 1].y],\r\n              [this.correctPoint.H0[this.in + 1].x, this.correctPoint.H0[this.in + 1].y]\r\n            ])\r\n            break\r\n          case RoadCenterMode.doubleYellowLine:\r\n            this.lineData[prop].push([\r\n              [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n              [this.correctPoint.H2[this.in].x, this.correctPoint.H2[this.in].y]\r\n            ])\r\n            this.lineData[prop].push([\r\n              [this.correctPoint.H0[this.in + 1].x, this.correctPoint.H0[this.in + 1].y],\r\n              [this.correctPoint.H2[this.in + 1].x, this.correctPoint.H2[this.in + 1].y]\r\n            ])\r\n            break\r\n          case RoadCenterMode.singleYellowLine:\r\n            this.lineData[prop].push([\r\n              [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n              [this.correctPoint.H2[this.in].x, this.correctPoint.H2[this.in].y]\r\n            ])\r\n            break\r\n        }\r\n        break\r\n      // 特殊黄色车道线  公交专用车道  潮汐车道\r\n      case 'carRoadLine4':\r\n        this.lineData[prop] = []\r\n        this.motor_lanes.forEach((it:any, i:any) => {\r\n          const leftIndex = this.in - i // 车道左边index\r\n          const rightIndex = this.in - (i + 1) // 车道右边index\r\n          // 潮汐车道\r\n          if (it.lane_type === 1) {\r\n            const leftH0 = Util.pointRotateAngel({ x: this.point.H0[leftIndex].x + 3, y: this.point.H0[leftIndex].y }, -this.angle, this.origin)\r\n            const leftH2 = Util.pointRotateAngel({ x: this.point.H2[leftIndex].x + 3, y: this.point.H2[leftIndex].y }, -this.angle, this.origin)\r\n            const rightH0 = Util.pointRotateAngel({ x: this.point.H0[rightIndex].x - 3, y: this.point.H0[rightIndex].y }, -this.angle, this.origin)\r\n            const rightH2 = Util.pointRotateAngel({ x: this.point.H2[rightIndex].x - 3, y: this.point.H2[rightIndex].y }, -this.angle, this.origin)\r\n            const lineDate1 = Util.getSplitPoint(this.correctPoint.H0[leftIndex], this.correctPoint.H2[leftIndex], CrossConst.tidalDashLength)\r\n            const lineDate2 = Util.getSplitPoint(leftH0, leftH2, CrossConst.tidalDashLength)\r\n            const lineDate3 = Util.getSplitPoint(this.correctPoint.H0[rightIndex], this.correctPoint.H2[rightIndex], CrossConst.tidalDashLength)\r\n            const lineDate4 = Util.getSplitPoint(rightH0, rightH2, CrossConst.tidalDashLength)\r\n            this.lineData[prop] = this.lineData[prop].concat(lineDate1).concat(lineDate2).concat(lineDate3).concat(lineDate4)\r\n          } else if (it.lane_type === 2) { // 公交专用车道\r\n            const lineDate1 = Util.getSplitPoint(this.correctPoint.H0[leftIndex], this.correctPoint.H2[leftIndex], CrossConst.busDashLength)\r\n            const lineDate2 = Util.getSplitPoint(this.correctPoint.H0[rightIndex], this.correctPoint.H2[rightIndex], CrossConst.busDashLength)\r\n            this.lineData[prop] = this.lineData[prop].concat(lineDate1).concat(lineDate2)\r\n          }\r\n        })\r\n        break\r\n      // 辅道分割线\r\n      case 'fdsplitLine':\r\n        this.lineData[prop] = []\r\n        const fdLaneNum = this.motor_lanes.findIndex((it:any) => { return it.lane_type === 4 })\r\n        if (fdLaneNum > -1) {\r\n          const { x: x1, y: y1 } = this.correctPoint.H0[this.in - fdLaneNum]\r\n          const { x: x2, y: y2 } = this.correctPoint.H2[this.in - fdLaneNum]\r\n          this.lineData[prop].push([[x1, y1], [x2, y2]])\r\n        }\r\n        break\r\n      // 车道流向 \r\n      case 'laneFlowPolygon':\r\n        this.polygonData[prop] = []\r\n        this.correctPoint.pointLaneFlow.forEach((it:any, i:any) => {\r\n          this.polygonData[prop][i] = []\r\n          it.forEach((itt:any) => {\r\n            this.polygonData[prop][i].push([itt.x, itt.y])\r\n          })\r\n        })\r\n        break\r\n      // 进口流向 \r\n      case 'roadFlowPolygon':\r\n        this.polygonData[prop] = []\r\n        this.correctPoint.pointRoadFlow.forEach((it:any, i:any) => {\r\n          this.polygonData[prop][i] = []\r\n          it.forEach((itt:any) => {\r\n            this.polygonData[prop][i].push([itt.x, itt.y])\r\n          })\r\n        })\r\n        break\r\n      default:\r\n        break\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * @description 匝道方向对象\r\n * @author wsx\r\n * @Date  2021-10-20 13:20:50\r\n */\r\nclass CrossRampObject {\r\n  en_id:any\r\n  name:any\r\n  in:any\r\n  motor_lanes:any\r\n  road_center_mode:any\r\n  degree:any\r\n  angle:any\r\n  origin:any\r\n  secondIn:any\r\n  drawOption:any\r\n  baseWidth:any\r\n  clientWidth:any\r\n  clientHeight:any\r\n  point:any\r\n  correctPoint:any\r\n  pointData:any\r\n  lineData:any\r\n  polygonData:any\r\n  constructor(param:any) {\r\n    const option = Object.assign({\r\n      en_id: 1,\r\n      in: 2,\r\n      name: '道路',\r\n      origin: [0, 0],\r\n      degree: 0, //道路角度 根据os提供的角度\r\n      angle: 0, //道路角度 根据os提供的角度进行转换\r\n      road_center_mode: RoadCenterMode.singleYellowLine,\r\n      motor_lanes: [], // 进口车道流向\r\n      secondIn: 3,\r\n      baseWidth: 800,\r\n      clientWidth: 800,\r\n      clientHeight: 800\r\n    }, param)\r\n    // 进口id\r\n    this.en_id = option.en_id\r\n    // 进口名称\r\n    this.name = option.name\r\n    // 进路口车道数\r\n    this.in = option.motor_lanes.length\r\n    // 车道流向\r\n    this.motor_lanes = option.motor_lanes\r\n    // 间隔线类型\r\n    this.road_center_mode = option.road_center_mode\r\n    this.degree = this.getDegreeByEnId(this.en_id)\r\n    // 路口方向相对正南方向偏移角度  （ -360 / CrossConst.defaultRoadNumber, 360 / CrossConst.defaultRoadNumber ）\r\n    this.angle = Util.degreeToAngle(this.degree)\r\n    this.origin = option.origin\r\n    this.secondIn = option.secondIn\r\n    this.drawOption = option.drawOption\r\n    this.baseWidth = option.baseWidth\r\n    this.clientWidth = option.baseWidth\r\n    this.clientHeight = option.clientHeight\r\n\r\n    // 核心点位\r\n    this.point = {}\r\n    // 转换正后的坐标\r\n    this.correctPoint = {}\r\n    // 准确计算后的点线面数据\r\n    this.pointData = {}\r\n    this.lineData = {}\r\n    this.polygonData = {}\r\n\r\n    this.calculation('point')\r\n  }\r\n  getDegreeByEnId (en_id:any) {\r\n    const degreeMap:any = {\r\n      1: 270,\r\n      2: 90,\r\n      3: 75\r\n    }\r\n    return degreeMap[en_id]\r\n  }\r\n  // 计算关键点位数据\r\n  calculation (prop:any) {\r\n    let dw = 0\r\n    switch (this.road_center_mode) {\r\n      case RoadCenterMode.doubleYellowLine:\r\n        dw = CrossConst.doubleYellowLineInterval\r\n        break\r\n      case RoadCenterMode.greenArea:\r\n        dw = CrossConst.greenWidth\r\n        break\r\n      case RoadCenterMode.singleYellowLine:\r\n        dw = 0\r\n        break\r\n    }\r\n    switch (prop) {\r\n      case 'point':\r\n        if (this.en_id === 1) {\r\n          const x = CrossConst.roadWidth * (this.secondIn) + dw\r\n          const x2 = CrossConst.roadWidth * (this.secondIn + this.in) + dw\r\n          const y = this.clientHeight / 2\r\n          this.point = {\r\n            AL: { x: x, y: y },\r\n            AR: { x: x2, y: y },\r\n            BL: { x: x, y: -y },\r\n            BR: { x: x2, y: -y },\r\n          }\r\n        } else if (this.en_id === 2) {\r\n          const x = CrossConst.roadWidth * this.in\r\n          const y = this.clientHeight / 2\r\n          this.point = {\r\n            AL: { x: -x, y: y },\r\n            AR: { x: 0, y: y },\r\n            BL: { x: -x, y: -y },\r\n            BR: { x: 0, y: -y },\r\n          }\r\n        } else if (this.en_id === 3) {\r\n          const x = CrossConst.roadWidth * this.in / 2\r\n          const y = (CrossConst.roadWidth * this.in / 2) / Math.tan(this.angle * Math.PI / 180)\r\n          this.point = {\r\n            AL: { x: -x, y: -y },\r\n            AR: { x: x, y: -y },\r\n            BL: { x: -x, y: -y - CrossConst.defaultRoadLength },\r\n            BR: { x: x, y: -y - CrossConst.defaultRoadLength },\r\n          }\r\n        }\r\n        // 道路名称位置\r\n        this.point.roadName = {\r\n          x: this.point.AR.x + 12,\r\n          y: this.point.AR.y\r\n        }\r\n        this.calculation('point2')\r\n        break\r\n      case 'point2':\r\n        // 计算人行道点位\r\n        this.calculation('pointH')\r\n        // 计算车道流向点位\r\n        this.calculation('pointLaneFlow')\r\n        // 计算进口流向点位\r\n        this.calculation('pointRoadFlow')\r\n        for (const prop in this.point) {\r\n          if (Array.isArray(this.point[prop])) {\r\n            this.correctPoint[prop] = []\r\n            this.point[prop].forEach((info:any, index:any) => {\r\n              if (Array.isArray(info)) {\r\n                this.correctPoint[prop][index] = []\r\n                info.map(it => {\r\n                  this.correctPoint[prop][index].push(Util.pointRotateAngel(it, -this.angle, this.origin))\r\n                })\r\n              } else {\r\n                this.correctPoint[prop].push(Util.pointRotateAngel(info, -this.angle, this.origin))\r\n              }\r\n            })\r\n          } else {\r\n            this.correctPoint[prop] = Util.pointRotateAngel(this.point[prop], -this.angle, this.origin)\r\n          }\r\n        }\r\n        // 道路面数据计算\r\n        this.calculation('RoadPolygon')\r\n        // 车道边线\r\n        this.calculation('carRoadLine0')\r\n        // 车道线路  白实线部分\r\n        this.calculation('carRoadLine1')\r\n        //  车道线路  白虚线部分\r\n        this.calculation('carRoadLine2')\r\n        //  车道线路  中间部分，双实线、实线、绿化带\r\n        this.calculation('carRoadLine3')\r\n        this.calculation('laneFlowPolygon')\r\n        this.calculation('roadFlowPolygon')\r\n        // 补充匝道面数据        \r\n        this.calculation('poly')\r\n        this.calculation('line')\r\n        break\r\n      case 'pointH':\r\n        let x = 0; let y = 0;\r\n        this.point.H0 = []\r\n        this.point.H1 = []\r\n        this.point.H2 = []\r\n        for (let i = 0; i < (this.in + 1); i++) {\r\n          this.point.H0.push({\r\n            x: this.point.AR.x - i * CrossConst.roadWidth,\r\n            y: this.point.AR.y\r\n          })\r\n          this.point.H1.push({\r\n            x: this.point.BR.x - i * CrossConst.roadWidth,\r\n            y: this.point.BR.y\r\n          })\r\n          this.point.H2.push({\r\n            x: this.point.BR.x - i * CrossConst.roadWidth,\r\n            y: this.point.BR.y\r\n          })\r\n\r\n          if ((this.road_center_mode === RoadCenterMode.greenArea || this.road_center_mode === RoadCenterMode.doubleYellowLine) &&\r\n            i === this.in && this.en_id === 1) {\r\n            x = this.point.AR.x - i * CrossConst.roadWidth - dw\r\n            y = this.point.AR.y\r\n            this.point.H0.push({\r\n              x: x,\r\n              y: this.point.AR.y\r\n            })\r\n            this.point.H1.push({\r\n              x: x,\r\n              y: this.point.BR.y\r\n            })\r\n            this.point.H2.push({\r\n              x: x,\r\n              y: this.point.BR.y\r\n            })\r\n          }\r\n        }\r\n        break\r\n      // 计算每个车道流向绘制的点位\r\n      case 'pointLaneFlow':\r\n        this.point.pointLaneFlow = []\r\n        this.motor_lanes.forEach((it:any, i:any) => {\r\n          const laneFlowPoints = getLaneFlowPoint(it.id, it.lane_flow, CrossConst, this,null)\r\n          this.point.pointLaneFlow.push(laneFlowPoints)\r\n        })\r\n        break\r\n      // 计算流向点位\r\n      case 'pointRoadFlow':\r\n        this.point.pointRoadFlow = []\r\n        this.point.pointRoadFlowText = []\r\n        for (let i = 1; i <= 14; i++) {\r\n          const { roadFlowPoints, flowTextPoint } = getRoadFlowPoint(i, CrossConst, this)\r\n          this.point.pointRoadFlow.push(roadFlowPoints)\r\n          this.point.pointRoadFlowText.push(flowTextPoint)\r\n        }\r\n        break\r\n      case 'RoadPolygon':\r\n        this.polygonData[prop] = []\r\n        if (this.en_id === 3) {\r\n          this.polygonData[prop].push([0, CrossConst.roadWidth * 6])\r\n          this.polygonData[prop].push([this.correctPoint.AR.x, this.correctPoint.AR.y])\r\n          this.polygonData[prop].push([this.correctPoint.BR.x, this.correctPoint.BR.y])\r\n          this.polygonData[prop].push([this.correctPoint.BL.x, this.correctPoint.BL.y])\r\n          this.polygonData[prop].push([this.correctPoint.AL.x, this.correctPoint.AL.y])\r\n        } else {\r\n          this.polygonData[prop].push([this.correctPoint.AL.x, this.correctPoint.AL.y])\r\n          this.polygonData[prop].push([this.correctPoint.AR.x, this.correctPoint.AR.y])\r\n          this.polygonData[prop].push([this.correctPoint.BR.x, this.correctPoint.BR.y])\r\n          this.polygonData[prop].push([this.correctPoint.BL.x, this.correctPoint.BL.y])\r\n        }\r\n      // 车道边线\r\n      case 'carRoadLine0':\r\n        this.lineData[prop] = []\r\n        if (this.en_id === 1) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H1[0].x, this.correctPoint.H1[0].y],\r\n            [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y]\r\n          ])\r\n        } else if (this.en_id === 2) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y],\r\n            [this.correctPoint.H1[0].x, CrossConst.roadWidth * 6]\r\n          ])\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[0].x, -CrossConst.roadWidth],\r\n            [this.correctPoint.H1[0].x, this.correctPoint.H1[0].y]\r\n          ])\r\n        } else if (this.en_id === 3) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n            [this.correctPoint.H1[this.in].x, this.correctPoint.H1[this.in].y]\r\n          ])\r\n          this.lineData[prop].push([\r\n            [0, CrossConst.roadWidth * 6],\r\n            [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y]\r\n          ])\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y],\r\n            [this.correctPoint.H1[0].x, this.correctPoint.H1[0].y]\r\n          ])\r\n        }\r\n        break\r\n      // 车道线路  白实线部分\r\n      case 'carRoadLine1':\r\n        this.lineData[prop] = []\r\n        if (this.en_id === 3) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[0].x, this.correctPoint.H0[0].y],\r\n            [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y]\r\n          ])\r\n        }\r\n        break\r\n      //  车道线路  白虚线部分\r\n      case 'carRoadLine2':\r\n        this.lineData[prop] = []\r\n        for (let i = 1; i < this.in; i++) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[i].x, this.correctPoint.H0[i].y],\r\n            [this.correctPoint.H1[i].x, this.correctPoint.H1[i].y]\r\n          ])\r\n        }\r\n        if (this.en_id === 3) {\r\n          this.lineData[prop].push([\r\n            [this.correctPoint.H0[this.in].x, -CrossConst.roadWidth],\r\n            [this.correctPoint.H0[this.in].x, CrossConst.roadWidth * 6],\r\n          ])\r\n        }\r\n        break\r\n      //  车道线路  中间部分，双实线、实线、绿化带\r\n      case 'carRoadLine3':\r\n        this.lineData[prop] = []\r\n        // 根据中心区域不同类型设置宽度\r\n        if (this.en_id == 1) {\r\n          switch (this.road_center_mode) {\r\n            case RoadCenterMode.greenArea:\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n                [this.correctPoint.H2[this.in].x, this.correctPoint.H2[this.in].y],\r\n                [this.correctPoint.H2[this.in + 1].x, this.correctPoint.H2[this.in + 1].y],\r\n                [this.correctPoint.H0[this.in + 1].x, this.correctPoint.H0[this.in + 1].y]\r\n              ])\r\n              break\r\n            case RoadCenterMode.doubleYellowLine:\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n                [this.correctPoint.H2[this.in].x, this.correctPoint.H2[this.in].y]\r\n              ])\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H0[this.in + 1].x, this.correctPoint.H0[this.in + 1].y],\r\n                [this.correctPoint.H2[this.in + 1].x, this.correctPoint.H2[this.in + 1].y]\r\n              ])\r\n              break\r\n            case RoadCenterMode.singleYellowLine:\r\n              this.lineData[prop].push([\r\n                [this.correctPoint.H0[this.in].x, this.correctPoint.H0[this.in].y],\r\n                [this.correctPoint.H1[this.in].x, this.correctPoint.H1[this.in].y]\r\n              ])\r\n              break\r\n          }\r\n        }\r\n        break\r\n      // 车道流向 \r\n      case 'laneFlowPolygon':\r\n        this.polygonData[prop] = []\r\n        this.correctPoint.pointLaneFlow.forEach((it:any, i:any) => {\r\n          this.polygonData[prop][i] = []\r\n          it.forEach((itt:any) => {\r\n            this.polygonData[prop][i].push([itt.x, itt.y])\r\n          })\r\n        })\r\n        break\r\n      // 进口流向 \r\n      case 'roadFlowPolygon':\r\n        this.polygonData[prop] = []\r\n        this.correctPoint.pointRoadFlow.forEach((it:any, i:any) => {\r\n          this.polygonData[prop][i] = []\r\n          it.forEach((itt:any) => {\r\n            this.polygonData[prop][i].push([itt.x, itt.y])\r\n          })\r\n        })\r\n        break\r\n      case 'poly':\r\n        this.polygonData.walkwayPolygonL = []\r\n        this.polygonData.walkwayPolygonR = []\r\n        break\r\n      case 'line':\r\n        this.lineData.manRoadLine = []\r\n        break\r\n      case 'greenPolygon':\r\n        this.polygonData.greenPolygon = []\r\n        break\r\n    }\r\n  }\r\n}\r\n\r\nexport { baseWidth, CrossConst, CrossInfo, RoadCenterMode, Util }\r\n","import { CrossConst } from './interModel'\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-02 13:36:29\r\n * @introduction 获取车道流向点位\r\n * @description 详细描述\r\n * @param {参数类型} laneNumber 进口车道序号1/2/3\r\n * @param {参数类型} laneFlow 流向1/2/3\r\n * @param {参数类型} CrossConst 路口模型配置参数\r\n * @param {参数类型} self 当前进口到信息\r\n * @param {参数类型} type 待行驶区域 area/areaFlow\r\n * @return 无返回类型\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getLaneFlowPoint (laneNumber:any, laneFlow:any, CrossConst:any, self:any, type:any) {\r\n  const points = [];\r\n  // 绘制的顶点\r\n  let { x: x1, y: y1 } = self.point.H0[self.in - laneNumber + 1]\r\n  let { y: y2 } = self.point.H0[self.in - laneNumber]\r\n  const roadWidth = CrossConst.roadWidth\r\n  let offsetY = self.drawOption.laneFlowOffetStopLine * -roadWidth\r\n  let cenY = (y1 + y2) / 2 + offsetY - 2 * roadWidth\r\n  if (laneFlow === 1) { // 左\r\n    if (type && type === 'waitAreaFlow') {\r\n      x1 -= roadWidth / 3\r\n      cenY += (roadWidth * 2.2 + CrossConst.manRoadLength + CrossConst.manCarInterval)\r\n    }\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 2) { // 直\r\n    if (type && type === 'waitAreaFlow') {\r\n      cenY += (roadWidth * 2.2 + CrossConst.manRoadLength + CrossConst.manCarInterval)\r\n    }\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 5 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY })\r\n  } else if (laneFlow === 3) { // 右\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 5 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 4) {\r\n  } else if (laneFlow === 5) { // 左直\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 5 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 7 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 6) { // 直右\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 5 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 1 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 7) { // 通行\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 5 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + 3 * roadWidth / 2 })\r\n\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 5 * roadWidth / 5, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 7 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY })\r\n  } else if (laneFlow === 8) { // 掉头\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 8, y: cenY + 9 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 9 * roadWidth / 8 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 9) { // 左掉头\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + roadWidth / 4, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + 1 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + 1 * roadWidth / 4, y: cenY + 1 * roadWidth / 2 })\r\n    points.push({ x: x1 + 1 * roadWidth / 8, y: cenY + 5 * roadWidth / 8 })\r\n    points.push({ x: x1 + 3 * roadWidth / 8, y: cenY + 5 * roadWidth / 8 })\r\n    points.push({ x: x1 + 1 * roadWidth / 4, y: cenY + 1 * roadWidth / 2 })\r\n    points.push({ x: x1 + 1 * roadWidth / 4, y: cenY + roadWidth })\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY + roadWidth })\r\n\r\n    points.push({ x: x1 + 3 * roadWidth / 4, y: cenY })\r\n  } else if (laneFlow === 10) { // 可变车道 车道侧边斜线\r\n    points.push({ x: x1 + roadWidth, y: y2 })\r\n    points.push({ x: x1, y: y1 })\r\n    let step = roadWidth / 5\r\n    let leftY = CrossConst.defaultSolidRoadLength\r\n    while (leftY > 0) {\r\n      points.push({ x: x1, y: y1 - leftY })\r\n      points.push({ x: x1 + step, y: y1 - leftY + 3 })\r\n      points.push({ x: x1, y: y1 - leftY })\r\n      points.push({ x: x1, y: Math.min(y1 - leftY + step, y1) })\r\n      leftY -= step\r\n    }\r\n    points.push({ x: x1 + roadWidth, y: y2 })\r\n    let rightY = step\r\n    while (rightY <= CrossConst.defaultSolidRoadLength) {\r\n      points.push({ x: x1 + roadWidth, y: y2 - rightY })\r\n      points.push({ x: x1 + roadWidth - step, y: y2 - rightY + step })\r\n      points.push({ x: x1 + roadWidth, y: y2 - rightY })\r\n      rightY += step\r\n    }\r\n\r\n  } else if (laneFlow === 'variableClick') { // 可变车道圆点点击位置\r\n    points.push({ x: x1 + roadWidth / 2, y: cenY })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-02 13:36:29\r\n * @introduction 获取饱和度流向点位\r\n * @description 详细描述\r\n * @param 流向类型 flowType:1/2/3\r\n * @param 路口模型参数：CrossConst\r\n * @param 当前车道 self\r\n * @return 无返回类型\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getRoadFlowPoint (flowType:any, CrossConst:any, self:any) {\r\n  const points = []\r\n  let flowTextPoint = {}\r\n  // 绘制的顶点\r\n  const { x: x1, y: y1 } = self.point.H0[self.in]\r\n  const { y: y2 } = self.point.H0[self.in - 1]\r\n  const roadWidth = CrossConst.roadWidth\r\n  let offsetY = -2 * roadWidth\r\n  // 左流向画第一个车道\r\n  let offsetX = 0\r\n  if (flowType === 1) {\r\n    offsetX += 0\r\n    offsetY += (y2 - y1) / 2\r\n  } else if (flowType === 2) {\r\n    if (self.in > 3) {\r\n      offsetX += ((self.point.H0[0].x - self.point.H0[self.in].x) - roadWidth) / 2\r\n      offsetY += (self.point.H0[0].y - self.point.H0[self.in].y) / 2\r\n    } else {\r\n      offsetX += roadWidth\r\n      offsetY += ((y2 - y1) / 2) * 3\r\n    }\r\n  } else if (flowType === 3) {\r\n    if (self.in > 3) {\r\n      offsetX += (self.point.H0[0].x - self.point.H0[self.in].x) - roadWidth\r\n      offsetY += (self.point.H0[0].y - self.point.H0[self.in].y) - (y2 - y1) / 2\r\n    } else {\r\n      offsetX += 2 * roadWidth\r\n      offsetY += ((y2 - y1) / 2) * 5\r\n    }\r\n  } else if (flowType === 4) {\r\n    offsetX = 0\r\n    offsetY += (CrossConst.manCarInterval + CrossConst.manRoadLength / 2) + 2 * roadWidth\r\n  }\r\n  const manOffsetY = (y2 - y1) * self.in\r\n  const manOffsetX = roadWidth * (self.in - 1)\r\n  const leftX = x1 + offsetX\r\n  const cenY = y1 + offsetY\r\n  if (flowType === 1) { // 流向左\r\n    points.push({ x: leftX + 7 * roadWidth / 8, y: cenY })\r\n    points.push({ x: leftX + 7 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 13 * roadWidth / 8 })\r\n    points.push({ x: leftX + 1 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 9 * roadWidth / 8 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY })\r\n    flowTextPoint = { x: leftX + 3 * roadWidth / 4, y: cenY - roadWidth / 2 }\r\n  } else if (flowType === 2) { // 流向中\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + roadWidth / 4, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + roadWidth / 2, y: cenY + 13 * roadWidth / 8 })\r\n    points.push({ x: leftX + 3 * roadWidth / 4, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY })\r\n    flowTextPoint = { x: leftX + roadWidth / 2, y: cenY - roadWidth / 2 }\r\n  } else if (flowType === 3) { // 流向右\r\n    points.push({ x: leftX + 1 * roadWidth / 8, y: cenY })\r\n    points.push({ x: leftX + 1 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 3 * roadWidth / 2 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 13 * roadWidth / 8 })\r\n    points.push({ x: leftX + 7 * roadWidth / 8, y: cenY + 11 * roadWidth / 8 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 9 * roadWidth / 8 })\r\n    points.push({ x: leftX + 5 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY + 5 * roadWidth / 4 })\r\n    points.push({ x: leftX + 3 * roadWidth / 8, y: cenY })\r\n    flowTextPoint = { x: leftX + roadWidth / 4, y: cenY - roadWidth / 2 }\r\n  } else if (flowType === 4) { // 流向人行\r\n    points.push({ x: leftX, y: cenY })\r\n    points.push({ x: leftX + 2 * roadWidth / 8, y: cenY - 2 * roadWidth / 8 })\r\n\r\n    points.push({ x: leftX + 2 * roadWidth / 8, y: cenY - roadWidth / 8 })\r\n    points.push({ x: leftX + 6 * roadWidth / 8 + manOffsetX, y: cenY - roadWidth / 8 + manOffsetY })\r\n\r\n    points.push({ x: leftX + 6 * roadWidth / 8 + manOffsetX, y: cenY - 2 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: leftX + roadWidth + manOffsetX, y: cenY + manOffsetY })\r\n    points.push({ x: leftX + 6 * roadWidth / 8 + manOffsetX, y: cenY + 2 * roadWidth / 8 + manOffsetY })\r\n\r\n    points.push({ x: leftX + 6 * roadWidth / 8 + manOffsetX, y: cenY + 1 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: leftX + 2 * roadWidth / 8, y: cenY + 1 * roadWidth / 8 })\r\n\r\n    points.push({ x: leftX + 2 * roadWidth / 8, y: cenY + 2 * roadWidth / 8 })\r\n    points.push({ x: leftX, y: cenY })\r\n  }\r\n  return { roadFlowPoints: points, flowTextPoint: flowTextPoint }\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-05 14:58:40\r\n * @introduction 获取实时信号机相位点位\r\n * @description 详细描述\r\n * @param {参数类型} phaseNum 相位号 1/2/3/4\r\n * @param {参数类型} flowType 1/2/3/4 左/直/右/人行\r\n * @param {参数类型} baseLayerWidth 绘制相位dom宽度\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getRealPhasePoint (phaseNum:any, flowType:any, baseLayerWidth:any, fd_flow = 'main') {\r\n  const points = []\r\n  let x = baseLayerWidth / 3 + 2\r\n  let y = -phaseNum * (baseLayerWidth) + 2 + 1 * baseLayerWidth / 12\r\n  let roadWidth = baseLayerWidth / 9\r\n  // let roadWidth = baseLayerWidth / 15\r\n  if (fd_flow === 'fd') {\r\n    roadWidth = roadWidth * 0.5\r\n    x = x + 5 * roadWidth\r\n  }\r\n  if (flowType === 2) {\r\n    x = x + roadWidth\r\n  } else if (flowType === 3) {\r\n    x = x + 2 * roadWidth\r\n  } else if (flowType === 4) {\r\n    y = y - 3 * roadWidth / 8\r\n    x = x + roadWidth / 8\r\n  } else if (flowType === 10) {\r\n    y = y - 3 * roadWidth / 8\r\n    x = x + roadWidth / 8 + 1.5 * roadWidth\r\n  } else if (flowType === 11) {\r\n    y = y - 3 * roadWidth / 8\r\n    x = x + roadWidth / 8 - 1.5 * roadWidth\r\n  } else if (flowType === 12) {\r\n    x = x + 4.5 * roadWidth\r\n    roadWidth = baseLayerWidth / 20\r\n  } else if (flowType === 13) {\r\n    x = x + 5 * roadWidth\r\n    roadWidth = baseLayerWidth / 20\r\n  }\r\n  // 流向左\r\n  if (flowType === 1) {\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y + 10 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 13 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x, y: y + 12 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 2) { // 流向直\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 2, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 3) { // 流向右\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 10 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 13 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth, y: y + 12 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y })\r\n  } else if (flowType === 4) { // 人行\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8 + 2 * roadWidth, y: y })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 8) { // 掉头\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y + 8 * roadWidth / 8 })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 8 * roadWidth / 8 })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 0 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 6 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 6 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 10) { // 人行1\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8 + 2 * roadWidth, y: y })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 11) { // 人行2\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8 + 2 * roadWidth, y: y })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8 + 2 * roadWidth, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 12) { // 非机动车左\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y + 10 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 13 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x, y: y + 12 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 13) { // 非机动车直\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 2, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-27 14:19:20\r\n * @introduction 获取路口模型中当前相位的点位\r\n * @description 详细描述\r\n * @param {参数类型} 参数 参数说明\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getInterPhaseflowData (flowType:any, entrance:any, fd_flow = 'main') {\r\n  const points = []\r\n  let { x, y } = entrance.point.H0[entrance.in]\r\n  const { y: y1 } = entrance.point.H0[entrance.in]\r\n  const { y: y2 } = entrance.point.H0[entrance.in - 1]\r\n  let laneOffset = y2 - y1\r\n  let roadWidth = CrossConst.roadWidth * 0.75\r\n  y += CrossConst.manCarInterval + CrossConst.manRoadLength + 0.5 * roadWidth\r\n  if (fd_flow === 'fd') {\r\n    x += 3 * roadWidth\r\n    roadWidth = roadWidth * 0.8\r\n  }\r\n  // 流向左\r\n  if (flowType === 1) {\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y + 10 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 13 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x, y: y + 12 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 2) { // 流向直\r\n    x += roadWidth\r\n    y += laneOffset\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth / 2, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 4, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 3) { // 流向右\r\n    x += 2 * roadWidth\r\n    y += laneOffset * 2\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 10 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 13 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 15 * roadWidth / 8 })\r\n    points.push({ x: x + roadWidth, y: y + 12 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8, y: y + 11 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 9 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y })\r\n  } else if (flowType === 4 || flowType === 10) { // 流向人行或者人行1\r\n    // const manOffsetX = roadWidth * (entrance.in - 1)\r\n    const manOffsetX = roadWidth\r\n    roadWidth = roadWidth * 0.5\r\n    const { y: y1 } = entrance.point.H0[entrance.in]\r\n    const { y: y2 } = entrance.point.H0[entrance.in - 1]\r\n    // const manOffsetY = (y2 - y1) * entrance.in\r\n    x = x + roadWidth * 1.5\r\n    const manOffsetY = (y2 - y1) * 3\r\n    y += laneOffset * 2 - roadWidth * 0.5\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y - roadWidth / 8 })\r\n    points.push({ x: x + 6 * roadWidth / 8 + manOffsetX, y: y - roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 6 * roadWidth / 8 + manOffsetX, y: y - 2 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x + roadWidth + manOffsetX, y: y + manOffsetY })\r\n    points.push({ x: x + 6 * roadWidth / 8 + manOffsetX, y: y + 2 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 6 * roadWidth / 8 + manOffsetX, y: y + 1 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 8) { // 掉头\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y })\r\n    points.push({ x: x + 7 * roadWidth / 8, y: y + 8 * roadWidth / 8 })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 8 * roadWidth / 8 })\r\n    points.push({ x: x + 1 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 0 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x + 4 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 4 * roadWidth / 8 })\r\n    points.push({ x: x + 3 * roadWidth / 8, y: y + 6 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y + 6 * roadWidth / 8 })\r\n    points.push({ x: x + 5 * roadWidth / 8, y: y })\r\n  } else if (flowType === 11) { // 流向人行2\r\n    // const manOffsetX = -roadWidth * (entrance.out - 1)\r\n    const manOffsetX = -roadWidth\r\n    roadWidth = roadWidth * 0.5\r\n    x = x - roadWidth * 1.5\r\n    const { y: y1 } = entrance.point.H0[entrance.in]\r\n    const { y: y2 } = entrance.point.H0[entrance.in - 1]\r\n    // const manOffsetY = (y1 - y2) * entrance.out\r\n    const manOffsetY = (y1 - y2) * 3\r\n    y -= roadWidth * 0.2\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x - 2 * roadWidth / 8, y: y - 2 * roadWidth / 8 })\r\n    points.push({ x: x - 2 * roadWidth / 8, y: y - roadWidth / 8 })\r\n    points.push({ x: x - 6 * roadWidth / 8 + manOffsetX, y: y - roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 6 * roadWidth / 8 + manOffsetX, y: y - 2 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x - roadWidth + manOffsetX, y: y + manOffsetY })\r\n    points.push({ x: x - 6 * roadWidth / 8 + manOffsetX, y: y + 2 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 6 * roadWidth / 8 + manOffsetX, y: y + 1 * roadWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 2 * roadWidth / 8, y: y + 1 * roadWidth / 8 })\r\n    points.push({ x: x - 2 * roadWidth / 8, y: y + 2 * roadWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 12) { // 非机动车左\r\n    x += 5.5 * roadWidth\r\n    const nonWidth = roadWidth / 2\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y })\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y + 3 * nonWidth / 2 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 3 * nonWidth / 2 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 13 * nonWidth / 8 })\r\n    points.push({ x: x + 1 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 9 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y })\r\n  } else if (flowType === 13) { // 非机动车直\r\n    const nonWidth = roadWidth / 2\r\n    x += 5.5 * roadWidth + nonWidth\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + nonWidth / 4, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + nonWidth / 2, y: y + 13 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 4, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-24 15:30:00\r\n * @introduction 根据初始点位获取绘制车道流向的数据\r\n * @description 详细描述\r\n * @param {参数类型} originPoint：绘制的左下角点\r\n * @param {参数类型} baseWidth：基础宽度\r\n * @param {参数类型} flowType：流向类型\r\n * @param {参数类型} entrance：进口信息\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getDrawFlowData (originPoint:any, oriBaseWidth:any, flowType:any, entrance:any, type = 'main') {\r\n  let baseWidth = type === 'fd' ? oriBaseWidth * 0.8 : oriBaseWidth\r\n  const points = []\r\n  const [x, y] = originPoint\r\n  if (flowType === 1) { // 流向左\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 3 * baseWidth / 2 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 3 * baseWidth / 2 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n  } else if (flowType === 2) { // 流向中\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + baseWidth / 4, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + baseWidth / 2, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 4, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n  } else if (flowType === 3) { // 流向右\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 3 * baseWidth / 2 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 3 * baseWidth / 2 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 5 * baseWidth / 4 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y })\r\n  } else if (flowType === 4 || flowType === 10) { // 流向人行 或者人行1\r\n    const manOffsetX = baseWidth * (entrance.in - 1)\r\n    const { y: y1 } = entrance.point.H0[entrance.in]\r\n    const { y: y2 } = entrance.point.H0[entrance.in - 1]\r\n    const manOffsetY = (y2 - y1) * entrance.in\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y - 2 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y - baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8 + manOffsetX, y: y - baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 6 * baseWidth / 8 + manOffsetX, y: y - 2 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x + baseWidth + manOffsetX, y: y + manOffsetY })\r\n    points.push({ x: x + 6 * baseWidth / 8 + manOffsetX, y: y + 2 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 6 * baseWidth / 8 + manOffsetX, y: y + 1 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 1 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 2 * baseWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 5) { // 流向左直\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 8 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 4 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n  } else if (flowType === 6) { // 流向直右\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 0 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 4 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y })\r\n  } else if (flowType === 7) { // 流向通行\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 8 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 6 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 4 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 0 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 7 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y })\r\n  } else if (flowType === 8) { // 流向掉头\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 0 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 4 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n  } else if (flowType === 9) { // 流向左掉头\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y })\r\n    points.push({ x: x + 7 * baseWidth / 8, y: y + 12 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 12 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 13 * baseWidth / 8 })\r\n    points.push({ x: x + 0 * baseWidth / 8, y: y + 11 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 9 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 10 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 8 * baseWidth / 8 })\r\n    points.push({ x: x + 1 * baseWidth / 8, y: y + 4 * baseWidth / 8 })\r\n    points.push({ x: x + 0 * baseWidth / 8, y: y + 4 * baseWidth / 8 })\r\n    points.push({ x: x + 2 * baseWidth / 8, y: y + 2 * baseWidth / 8 })\r\n    points.push({ x: x + 4 * baseWidth / 8, y: y + 4 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 4 * baseWidth / 8 })\r\n    points.push({ x: x + 3 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y + 6 * baseWidth / 8 })\r\n    points.push({ x: x + 5 * baseWidth / 8, y: y })\r\n  } else if (flowType === 10) { // 流向人行1 跟 flowType === 4人行一样画\r\n\r\n  } else if (flowType === 11) { // 流向人行2\r\n    const manOffsetX = -baseWidth * (entrance.out - 1)\r\n    const { y: y1 } = entrance.point.H0[entrance.in]\r\n    const { y: y2 } = entrance.point.H0[entrance.in - 1]\r\n    const manOffsetY = (y1 - y2) * entrance.out\r\n    points.push({ x: x, y: y })\r\n    points.push({ x: x - 2 * baseWidth / 8, y: y - 2 * baseWidth / 8 })\r\n    points.push({ x: x - 2 * baseWidth / 8, y: y - baseWidth / 8 })\r\n    points.push({ x: x - 6 * baseWidth / 8 + manOffsetX, y: y - baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 6 * baseWidth / 8 + manOffsetX, y: y - 2 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x - baseWidth + manOffsetX, y: y + manOffsetY })\r\n    points.push({ x: x - 6 * baseWidth / 8 + manOffsetX, y: y + 2 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 6 * baseWidth / 8 + manOffsetX, y: y + 1 * baseWidth / 8 + manOffsetY })\r\n    points.push({ x: x - 2 * baseWidth / 8, y: y + 1 * baseWidth / 8 })\r\n    points.push({ x: x - 2 * baseWidth / 8, y: y + 2 * baseWidth / 8 })\r\n    points.push({ x: x, y: y })\r\n  } else if (flowType === 12) { // 非机动车左\r\n    const nonWidth = baseWidth * 0.6\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y })\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y + 3 * nonWidth / 2 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 3 * nonWidth / 2 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 13 * nonWidth / 8 })\r\n    points.push({ x: x + 1 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 9 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y })\r\n  } else if (flowType === 13) { // 非机动车直\r\n    const nonWidth = baseWidth * 0.6\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + nonWidth / 4, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + nonWidth / 2, y: y + 13 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 4, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 5 * nonWidth / 4 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y })\r\n  } else if (flowType === 14) { // 非机动车左直\r\n    const nonWidth = baseWidth * 0.6\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y })\r\n    points.push({ x: x + 7 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 8 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 6 * nonWidth / 8, y: y + 13 * nonWidth / 8 })\r\n    points.push({ x: x + 4 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 11 * nonWidth / 8 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 9 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 9 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 10 * nonWidth / 8 })\r\n    points.push({ x: x + 1 * nonWidth / 8, y: y + 8 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 6 * nonWidth / 8 })\r\n    points.push({ x: x + 3 * nonWidth / 8, y: y + 7 * nonWidth / 8 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y + 7 * nonWidth / 8 })\r\n    points.push({ x: x + 5 * nonWidth / 8, y: y })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-10-11 15:55:00\r\n * @introduction 获取绘制红绿灯点位数据\r\n * @description 详细描述\r\n * @param {参数类型} point：中心点为\r\n * @param {参数类型} type：green/red\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getFootLightData (point:any, type:any) {\r\n  const roadWidth = CrossConst.roadWidth\r\n  const { x, y } = point\r\n  const points = []\r\n  if (type === 'green') {\r\n    points.push({ x: x, y: y - roadWidth / 4 })\r\n    points.push({ x: x - roadWidth * 3 / 64, y: y + roadWidth / 4 - roadWidth / 64 })\r\n    points.push({ x: x - roadWidth / 32, y: y + roadWidth * 6 / 32 })\r\n    points.push({ x: x - roadWidth / 64, y: y + roadWidth * 6 / 32 })\r\n    points.push({ x: x - roadWidth / 64, y: y + roadWidth * 11 / 64 })\r\n    points.push({ x: x - roadWidth * 3 / 64, y: y + roadWidth * 10 / 64 })\r\n    points.push({ x: x - roadWidth * 3 / 32, y: y + roadWidth * 5 / 64 })\r\n    points.push({ x: x - roadWidth * 11 / 64, y: y + roadWidth / 32 })\r\n    points.push({ x: x - roadWidth * 9 / 64, y: y + roadWidth / 64 })\r\n    points.push({ x: x - roadWidth / 16, y: y + roadWidth / 16 })\r\n    points.push({ x: x - roadWidth * 3 / 64, y: y + roadWidth * 3 / 32 })\r\n    points.push({ x: x - roadWidth / 64, y: y })\r\n    points.push({ x: x - roadWidth * 15 / 128, y: y - roadWidth * 17 / 128 })\r\n    points.push({ x: x - roadWidth * 9 / 64, y: y - roadWidth * 17 / 128 })\r\n    points.push({ x: x - roadWidth * 5 / 32, y: y - roadWidth * 19 / 128 })\r\n    points.push({ x: x - roadWidth * 7 / 64, y: y - roadWidth * 11 / 64 })\r\n    points.push({ x: x + roadWidth / 64, y: y - roadWidth * 3 / 64 })\r\n    points.push({ x: x + roadWidth * 7 / 64, y: y - roadWidth * 9 / 64 })\r\n    points.push({ x: x + roadWidth * 3 / 32, y: y - roadWidth * 11 / 64 })\r\n    points.push({ x: x + roadWidth * 7 / 64, y: y - roadWidth * 6 / 32 })\r\n    points.push({ x: x + roadWidth * 5 / 32, y: y - roadWidth * 5 / 32 })\r\n    points.push({ x: x + roadWidth * 7 / 128, y: y + roadWidth / 128 })\r\n    points.push({ x: x + roadWidth * 7 / 128, y: y + roadWidth * 7 / 64 })\r\n    points.push({ x: x + roadWidth * 3 / 32, y: y + roadWidth * 2 / 32 })\r\n    points.push({ x: x + roadWidth * 7 / 64, y: y - roadWidth / 64 })\r\n    points.push({ x: x + roadWidth * 9 / 64, y: y })\r\n    points.push({ x: x + roadWidth * 4 / 32, y: y + roadWidth * 3 / 32 })\r\n    points.push({ x: x + roadWidth * 2 / 32, y: y + roadWidth * 5 / 32 })\r\n    points.push({ x: x + roadWidth / 64, y: y + roadWidth * 11 / 64 })\r\n    points.push({ x: x + roadWidth / 64, y: y + roadWidth / 4 - roadWidth / 64 })\r\n    points.push({ x: x, y: y - roadWidth / 4 })\r\n  } else if (type === 'red') {\r\n    points.push({ x: x - roadWidth / 32, y: y + roadWidth / 4 - roadWidth / 32 })\r\n    points.push({ x: x - roadWidth / 32 + roadWidth / 32 / 4, y: y + roadWidth * 7 / 32 - roadWidth * 3 / 64 })\r\n    points.push({ x: x - roadWidth * 5 / 64, y: y + roadWidth / 4 - roadWidth * 3 / 32 })\r\n    points.push({ x: x - roadWidth * 7 / 64, y: y + roadWidth / 4 - roadWidth * 3 / 32 })\r\n    points.push({ x: x - roadWidth * 3 / 32 - roadWidth / 32 / 4, y: y - roadWidth / 64 })\r\n    points.push({ x: x - roadWidth * 5 / 64, y: y - roadWidth / 32 })\r\n    points.push({ x: x - roadWidth * 5 / 64, y: y + roadWidth * 2 / 32 })\r\n    points.push({ x: x - roadWidth * 2 / 32, y: y + roadWidth * 4 / 32 })\r\n    points.push({ x: x - roadWidth / 32 - roadWidth / 64, y: y + roadWidth / 64 })\r\n    points.push({ x: x - roadWidth * 5 / 64 - roadWidth / 64, y: y - roadWidth * 6 / 32 })\r\n    points.push({ x: x - roadWidth * 7 / 64 + roadWidth * 4 / 64, y: y - roadWidth * 7 / 32 })\r\n    points.push({ x: x, y: y - roadWidth / 32 })\r\n    points.push({ x: x + roadWidth * 7 / 64 - roadWidth * 4 / 64, y: y - roadWidth * 7 / 32 })\r\n    points.push({ x: x + roadWidth * 7 / 64, y: y - roadWidth * 7 / 32 })\r\n    points.push({ x: x + roadWidth / 32 + roadWidth / 64, y: y - roadWidth / 64 })\r\n    points.push({ x: x + roadWidth * 2 / 32, y: y + roadWidth * 4 / 32 })\r\n    points.push({ x: x + roadWidth * 5 / 64, y: y + roadWidth * 2 / 32 })\r\n    points.push({ x: x + roadWidth * 3 / 32 + roadWidth / 32 / 4, y: y - roadWidth / 64 })\r\n    points.push({ x: x + roadWidth * 7 / 64, y: y + roadWidth / 4 - roadWidth * 11 / 64 })\r\n    points.push({ x: x + roadWidth * 5 / 64, y: y + roadWidth / 4 - roadWidth * 3 / 32 })\r\n    points.push({ x: x + roadWidth / 32 - roadWidth / 32 / 4, y: y + roadWidth * 7 / 32 - roadWidth * 3 / 64 })\r\n    points.push({ x: x + roadWidth / 32, y: y + roadWidth / 4 - roadWidth / 32 })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-10-15 10:46:14\r\n * @introduction 简述\r\n * @description 获取红绿灯左 右的绘制数据\r\n * @param {参数类型} point：中心点为\r\n * @param {参数类型} type：left/right\r\n * @return {返回类型说明}\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getDirectionLightData (point:any, type:any) {\r\n  const roadWidth = CrossConst.roadWidth\r\n  let { x, y } = point\r\n  y = y - roadWidth / 3\r\n  const points = []\r\n  if (type === 'left') {\r\n    x = x + roadWidth / 3\r\n    points.push({ x: x - roadWidth / 3 / 5, y: y + roadWidth / 3 })\r\n    points.push({ x: x - roadWidth / 3 + roadWidth / 3 / 6 + roadWidth / 3 / 15, y: y + roadWidth * 2 / 3 / 5 - roadWidth / 3 / 10 })\r\n    points.push({ x: x - roadWidth / 3 - roadWidth / 3 / 5 + roadWidth / 3 / 15, y: y + roadWidth * 2 / 3 / 5 - roadWidth / 3 / 10 })\r\n    points.push({ x: x - roadWidth * 4 / 3 / 5 + roadWidth / 3 / 15, y: y + roadWidth / 3 - roadWidth / 3 / 6 })\r\n    points.push({ x: x - roadWidth * 8 / 3 / 5, y: y + roadWidth / 3 - roadWidth / 3 / 6 })\r\n    points.push({ x: x - roadWidth * 8 / 3 / 5, y: y + roadWidth / 3 + roadWidth / 3 / 6 })\r\n    points.push({ x: x - roadWidth * 4 / 3 / 5 + roadWidth / 3 / 15, y: y + roadWidth / 3 + roadWidth / 3 / 6 })\r\n    points.push({ x: x - roadWidth / 3 - roadWidth / 3 / 5 + roadWidth / 3 / 15, y: y + roadWidth * 8 / 3 / 5 + roadWidth / 3 / 10 })\r\n    points.push({ x: x - roadWidth / 3 + roadWidth / 3 / 6 + roadWidth / 3 / 15, y: y + roadWidth * 8 / 3 / 5 + roadWidth / 3 / 10 })\r\n    points.push({ x: x - roadWidth / 3 / 5, y: y + roadWidth / 3 })\r\n  } else if (type === 'right') {\r\n    x = x - roadWidth / 3\r\n    points.push({ y: y + roadWidth / 3, x: x + roadWidth / 3 / 5 })\r\n    points.push({ y: y + roadWidth * 2 / 3 / 5 - roadWidth / 3 / 10, x: x + roadWidth / 3 - roadWidth / 3 / 6 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth * 2 / 3 / 5 - roadWidth / 3 / 10, x: x + roadWidth / 3 + roadWidth / 3 / 5 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth / 3 - roadWidth / 3 / 6, x: x + roadWidth * 4 / 3 / 5 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth / 3 - roadWidth / 3 / 6, x: x + roadWidth * 8 / 3 / 5 })\r\n    points.push({ y: y + roadWidth / 3 + roadWidth / 3 / 6, x: x + roadWidth * 8 / 3 / 5 })\r\n    points.push({ y: y + roadWidth / 3 + roadWidth / 3 / 6, x: x + roadWidth * 4 / 3 / 5 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth * 8 / 3 / 5 + roadWidth / 3 / 10, x: x + roadWidth / 3 + roadWidth / 3 / 5 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth * 8 / 3 / 5 + roadWidth / 3 / 10, x: x + roadWidth / 3 - roadWidth / 3 / 6 - roadWidth / 3 / 15 })\r\n    points.push({ y: y + roadWidth / 3, x: x + roadWidth / 3 / 5 })\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * @name wsx\r\n * @Date 2021-08-02 13:36:29\r\n * @introduction 获取车道流向点位\r\n * @description 详细描述\r\n * @param {参数类型} laneNumber 进口车道序号1/2/3\r\n * @param {参数类型} laneFlow 流向1/2/3\r\n * @param {参数类型} CrossConst 路口模型配置参数\r\n * @param {参数类型} self 当前进口到信息\r\n * @return 无返回类型\r\n * @exception [违例类型] [违例类型说明]\r\n */\r\nexport function getWaitAreaPoint (laneNumber:any, laneFlow:any, CrossConst:any, self:any) {\r\n  const points = [];\r\n  // 绘制的顶点\r\n  let { x: x1, y: y1 } = self.point.H0[self.in - laneNumber + 1]\r\n  let { x: x2, y: y2 } = self.point.H0[self.in - laneNumber]\r\n  const roadWidth = CrossConst.roadWidth\r\n  const offset = CrossConst.manRoadLength + CrossConst.manCarInterval\r\n  // 左转\r\n  if (laneFlow === 1) {\r\n    points.push({ x: x1, y: y1 + offset })\r\n    points.push({ x: x1 - roadWidth / 16, y: y1 + offset + roadWidth * 5 / 8 })\r\n    points.push({ x: x1 - roadWidth * 3 / 16, y: y1 + offset + roadWidth * 9 / 8 })\r\n    points.push({ x: x1 - roadWidth * 6 / 16, y: y1 + offset + roadWidth * 13 / 8 })\r\n    points.push({ x: x1 - roadWidth * 9 / 16, y: y1 + offset + roadWidth * 15 / 8 })\r\n    points.push({ x: x1 - roadWidth * 12 / 16, y: y1 + offset + roadWidth * 16 / 8 })\r\n    points.push({ x: x2 - roadWidth * 15 / 16, y: y2 + offset + roadWidth * 18 / 8 })\r\n    points.push({ x: x2 - roadWidth * 12 / 16, y: y2 + offset + roadWidth * 16 / 8 })\r\n    points.push({ x: x2 - roadWidth * 9 / 16, y: y2 + offset + roadWidth * 15 / 8 })\r\n    points.push({ x: x2 - roadWidth * 6 / 16, y: y2 + offset + roadWidth * 13 / 8 })\r\n    points.push({ x: x2 - roadWidth * 3 / 16, y: y2 + offset + roadWidth * 9 / 8 })\r\n    points.push({ x: x2, y: y2 + offset })\r\n  } else if (laneFlow === 2) { // 直行\r\n    points.push({ x: x1, y: y1 + offset })\r\n    points.push({ x: x1, y: y1 + offset + 2 * roadWidth })\r\n    points.push({ x: x2, y: y2 + offset + 2 * roadWidth })\r\n    points.push({ x: x2, y: y2 + offset })\r\n  }\r\n  return points\r\n}\r\n","/* eslint-disable */\r\nlet phaseMap = new Map();\r\nphaseMap.set(1, 'A');\r\nphaseMap.set(2, 'B');\r\nphaseMap.set(3, 'C');\r\nphaseMap.set(4, 'D');\r\nphaseMap.set(5, 'E');\r\nphaseMap.set(6, 'F');\r\nphaseMap.set(7, 'G');\r\nphaseMap.set(8, 'H');\r\nphaseMap.set(9, 'I');\r\nphaseMap.set(10, 'J');\r\nphaseMap.set(11, 'K');\r\nphaseMap.set(12, 'L');\r\nphaseMap.set(13, 'M');\r\nphaseMap.set(14, 'N');\r\nphaseMap.set(15, 'O');\r\nphaseMap.set(16, 'P');\r\nphaseMap.set(17, 'Q');\r\nphaseMap.set(18, 'R');\r\nphaseMap.set(19, 'S');\r\nphaseMap.set(20, 'T');\r\nphaseMap.set(21, 'U');\r\nphaseMap.set(22, 'V');\r\nphaseMap.set(23, 'W');\r\nphaseMap.set(24, 'X');\r\nphaseMap.set(25, 'Y');\r\nphaseMap.set(26, 'Z');\r\nphaseMap.set(27, 'a');\r\nphaseMap.set(28, 'b');\r\nphaseMap.set(29, 'c');\r\nphaseMap.set(30, 'd');\r\nphaseMap.set(31, 'e');\r\nphaseMap.set(32, 'f');\r\n\r\n// 流向类型字典\r\nlet enterFlowMap = new Map();\r\nenterFlowMap.set(1, \"左转\");\r\nenterFlowMap.set(2, \"直行\");\r\nenterFlowMap.set(3, \"右转\");\r\nenterFlowMap.set(4, \"人行\");\r\nenterFlowMap.set(5, \"左直\");\r\nenterFlowMap.set(6, \"直右\");\r\nenterFlowMap.set(7, \"通行\");\r\nenterFlowMap.set(8, \"掉头\");\r\nenterFlowMap.set(9, \"左掉头\");\r\nenterFlowMap.set(10, \"人行1\");\r\nenterFlowMap.set(11, \"人行2\");\r\nenterFlowMap.set(12, \"非机动车左\");\r\nenterFlowMap.set(13, \"非机动车直\");\r\nenterFlowMap.set(14, \"非机动车左直\");\r\nenterFlowMap.set(32, \"可变车道\");\r\n\r\nlet enterDirectionMap = new Map();\r\nenterDirectionMap.set(1, \"东\");\r\nenterDirectionMap.set(2, \"南\");\r\nenterDirectionMap.set(3, \"西\");\r\nenterDirectionMap.set(4, \"北\");\r\nenterDirectionMap.set(5, \"方向1\");\r\nenterDirectionMap.set(6, \"方向2\");\r\nenterDirectionMap.set(7, \"方向3\");\r\nenterDirectionMap.set(8, \"方向4\");\r\nenterDirectionMap.set(9, \"方向5\");\r\nenterDirectionMap.set(10, \"方向6\");\r\n\r\nexport {\r\n  phaseMap,\r\n  enterFlowMap,\r\n  enterDirectionMap\r\n};","export const adjacentIcon = 'data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAlCAYAAADFniADAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAADJmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMwNjcgNzkuMTU3NzQ3LCAyMDE1LzAzLzMwLTIzOjQwOjQyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxNSAoV2luZG93cykiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6QjFFM0Y5QTYyNTkzMTFFN0EwNkVBMTUzMDlERkJGOUMiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6QjFFM0Y5QTcyNTkzMTFFN0EwNkVBMTUzMDlERkJGOUMiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDpCMUUzRjlBNDI1OTMxMUU3QTA2RUExNTMwOURGQkY5QyIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpCMUUzRjlBNTI1OTMxMUU3QTA2RUExNTMwOURGQkY5QyIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PphkrBIAAAQ3SURBVFhH1ZjbaxxlGId3mt3ZndnZzaYm64GI0juhtLUFoQ29KBVRkFKpTTStVqoUWw+FllJavWih9KK3/QMqNkUIVsQ7ofSm1BrUoFRFQYQeTMxGm7iZTbqbPfj7zb4ZsnPIzG6zgT7wZvZ7Z+ebZ97v229movTcnoo0Q+7JjIJNHKEiYogoYhWC+Rqiiigj5hElRDF7Z5r50ISWggxPbiA0BAXCQqE5hAk5ygYSKAWZDmzSCMo8KJTLQ65Sb3rDsvsCIYpkEcshRKz+pF9ffKVwYCc2XYhmhioM7K8L/bP6nnhK4YAMNsl6q20Ych4XLimpkF5vtR3dq2INUvgCx7rdFXLCijXMMVsKO/gr8yznCpCR81ssrhTLuNyTOiw8rz2MlhQsuTAu18++VTTxsCvFlXpJTk7N9e77p/CMNJum7++ZXexDmn5YHkqtVmPpHuNnJrw4NjX71JBZGsb9Qn9ei70+1J38WXaFYuN4/q275eoZTJq/3jDiu891abdllxPeNydYKd5cfYUO35t9GkKf477QiyNWX5mbHx6cLKyT3YFsHMu/QyF8VNjHRbN4mX3W97qwfPiHd3tP3rs3u2a4YAk9ISleSufV+/PDuyfNDZLyZcNY/sDdSvU0PtoXzb7YJ/uWlBOVw/cIPrBaDfxQKqsvT5jXeHWSagBXM7MlHt37Rdb4XlINrB/LHxqvVD+Spou4onx7p7dzlzQXU2SlrBnvZJMaLa1TO07gEouSagAVS10vlodeyZnPScpm7Vj+w6WEYkrkz7cN9X1pOolSiuHJ14+mrj6rduyHGB85XGDip74pli/tyJmbJUWhI7lK9bg0XUDoj4OpxKunMtq4pJwoHD57vvjx0oS5dbRUvgAJz7WM0qjsvluVSt9kpXZY0i4g9PuRdGLgaDoxKSlPKPU4t/WmP6zGSLF80U8M8KnScyoQVYn8djyt9X+Qjv8rKT+qHDquDYF8lTVubI5H98DelJSTpYR+CSlEapQK9dxMvswaI30Qw0EzkgoEQjc/7tQGQgqRMqX41hEaLgF9iehgGDEI/Xg2o/e/m4o388o0Tym+BjXF5R5jdFsiNoCD/5OUCwiNnuvSX3vTUPOSCkuJUlyH+BrUFJ/1JH/arlliripgYfwOQoODSTX0MAuc38VV8qLouQ4Fcak7efMFLdYPMXu+QGjk/Gp9bwtC5D59WCni94sK5NPu5K8vilhCUW580q3v2anHWu3POs5+GcUDFl+nWn7Q451/hx6b2J6ItVR1MIcqWTKLpfiMzBfPwIW0DXAK5RbenBeGLyKJ6XprxZleECK2FMEOlr5Qb60Y/MdHw5A3SBF8gWvPbL3VdjiPXOuYS4rgixzGdlesgPN4rvSeUkQqxoOaXlgDYH9T0r8nvlIEB3Ksc4hWf+ZOrP6kX18ezv/kOYEchdr4P89I5H8Men4/6V5CMgAAAABJRU5ErkJggg=='\r\nexport const bikeIcon = 'data:img/jpg;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAJpSURBVFhH7Za9axRBGIdPERv/gDQKQdTC0g9sLCKIYCUIKQRTCcE/QGIlSWslWvqBEEEhIEQLITYRFIKYTgvBIoIoopWIiFisz++ddzdz437MXe4a8YGHmX3nndm53Z256f1nlBRFMYNL+MFVfcabx4vfrIklTxsP3GA93KfirRuz7untkHgAV3HKQ62QN4sxh71JbVMYT2TWm5oh6UvILR57qBXyFkO6Me0x3dh+AGU8wUXFWvFEseqhVsjbCOnFZ1zBX3YVmMTdoWpseLeK7V4OBAPtx4v4gMs9IdqbwFO406422eGliOv1aJpO9QSoT+A0XsPX2MRvfIKX0b4FyvgVdK8GTxT6EDXQI/yqQAN69DH2HQjqp/GdRQPde4In5nLE+6R7wBs3Jm8v8OSUT3gbz+ILBYR3MbhM94KYvD1AkHwHv+EaXsFD3mRwrVdjeKiCkN63lqVWhlS9e+0PAgM2TmAYhlqGbTCvoziP1cc4Uhi47wlQ7EIt0Vv4HmMmrdMoYdBqAqB3nC7DmKz/k2w0IMYTSPmB2ohKlvGcdx8OBjiI9/E71qHHfg+1AvZh3QTnfLjBofPdMEYnVz1/IVz+xbINmJCzCuIP6Sae2AaU1y2yyRw3eeX1kgUvxRnaL3g9Hzo1rntCe/GhNdajb+ZSqBrd54EUOjVOoISmk/jUkvrRBLZ8Hvjo5TMv6ziON/A8ringvMT4DJCeFfJg5vG77ENt9tsC5TGs6UiWdcwbCAbVtlvyE495k9rS88C8N40WBk7/+/VPmMZWPH08cIPqnFBD/nlgK3Ajve/nqKP9eM4D/xi93h907cp7q/WVWwAAAABJRU5ErkJggg=='\r\n","\r\nimport Konva from \"konva\";\r\nimport { defineComponent, reactive, toRefs, ref } from \"vue\";\r\nimport {\r\n  getDrawFlowData,\r\n  getLaneFlowPoint,\r\n  getRealPhasePoint,\r\n  getInterPhaseflowData,\r\n  getFootLightData,\r\n  getDirectionLightData,\r\n} from \"./js/flowPoint\";\r\nimport { CrossInfo, Util, CrossConst } from \"./js/interModel\";\r\nimport { phaseMap } from \"./js/common\";\r\nimport { adjacentIcon, bikeIcon } from \"./assets/iconBase64\";\r\nexport default defineComponent({\r\n  name: \"tf-inter-model\",\r\n  props: {\r\n    // 绘制配置参数\r\n    option: {\r\n      type: Object,\r\n      default: () => {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  setup(props) {\r\n    let modelStage: any = null,\r\n      baseLayer: any = null,\r\n      realLayer: any = null,\r\n      phaseStage: any = null,\r\n      phaseLayer: any = null,\r\n      cross: any = null,\r\n      clientWidth: number = 0,\r\n      clientHeight: number = 0,\r\n      baseLayerWidth: number = 0,\r\n      phaseWidth: number = 0,\r\n      hoverBack: any = null,\r\n      hoverText: any = null,\r\n      ctrlWay: any = null,\r\n      nearImg: any = null,\r\n      bikeImg: any = null;\r\n    const tfInterModel = ref();\r\n    const scTfInterBox = ref();\r\n    const scTfPhaseBox = ref();\r\n    const state = reactive({\r\n      phaseWidth: 100,\r\n      drawOption: {\r\n        centerLineMode: false, // 是否道路中线对齐\r\n        drawPhase: true, // 是否绘制左侧相位\r\n        showRoadAsideLine: true, // 显示道路边线\r\n        showLaneDashedLine: true, // 显示道路虚线\r\n        showManRoadLine: true, // 显示斑马线\r\n        showStopLine: true, // 显示停车线\r\n        showManRoad: true, // 显示行人车道\r\n        showLaneFlow: true, // 显示车道流向\r\n        showRoadName: true, // 显示路口名称\r\n        laneFlowOffetStopLine: 0, // 车道流向离停车线的距离 车道宽度的倍数\r\n\r\n        routeNameColor: \"#000000\", // 默认路口名称颜色\r\n        defaultFlowColor: \"#008aaf\", // 默认流向颜色\r\n        HighLightFlowColor: \"#00ec00\", // 高亮流向颜色\r\n        saturationFlowColor: \"#ffffff\", // 饱和度流向颜色\r\n        phaseBackColor: \"#ffffff\", // 相位背景颜色\r\n        laneBackColor: \"#283349\", // 车道背景颜色\r\n        phaseNumColor: \"#446a86\", // 相位号颜色\r\n        redColor: \"#FF0000\", // 红色\r\n        greenColor: \"#00EC00\", // 绿色\r\n        yellowColor: \"#E1E100\", // 黄色\r\n        greyColor: \"#cccccc\", // 灰色\r\n      },\r\n      interType: 0, // 0：普通路口  1：父子路口 2：匝道路口\r\n    });\r\n    const methods = {\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-03 09:48:24\r\n       * @introduction 初始化配置参数\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 参数说明\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getDrawOption() {\r\n        state.drawOption = Object.assign(\r\n          {\r\n            centerLineMode: false, // 是否道路中线对齐\r\n            drawPhase: true, // 是否绘制左侧相位\r\n            showRoadAsideLine: true, // 显示道路边线\r\n            showLaneDashedLine: true, // 显示道路虚线\r\n            showManRoadLine: true, // 显示斑马线\r\n            showStopLine: true, // 显示停车线\r\n            showManRoad: true, // 显示行人车道\r\n            showLaneFlow: true, // 显示车道流向\r\n            showRoadName: true, // 显示路口名称\r\n            laneFlowOffetStopLine: 0, // 车道流向离停车线的距离 车道宽度的倍数\r\n\r\n            routeNameColor: \"#000000\", // 默认路口名称颜色\r\n            defaultFlowColor: \"#008aaf\", // 默认流向颜色\r\n            HighLightFlowColor: \"#00ec00\", // 高亮流向颜色\r\n            saturationFlowColor: \"#ffffff\", // 饱和度流向颜色\r\n            phaseBackColor: \"#ffffff\", // 相位背景颜色\r\n            laneBackColor: \"#283349\", // 车道背景颜色\r\n            phaseNumColor: \"#446a86\", // 相位号颜色\r\n            redColor: \"#FF0000\", // 红色\r\n            greenColor: \"#00EC00\", // 绿色\r\n            yellowColor: \"#E1E100\", // 黄色\r\n            greyColor: \"#cccccc\", // 灰色\r\n          },\r\n          props.option\r\n        );\r\n      },\r\n\r\n      clearHandler() {\r\n        modelStage && modelStage.destroy();\r\n        // 基础\r\n        baseLayer && baseLayer.destroy();\r\n        // 实时信息\r\n        realLayer && realLayer.destroy();\r\n        phaseStage && phaseStage.destroy();\r\n        phaseLayer && phaseLayer.destroy();\r\n        // 相邻路口\r\n        // this.adjacentLayrt && this.adjacentLayrt.destroy()\r\n        modelStage = null;\r\n        baseLayer = null;\r\n        realLayer = null;\r\n        phaseStage = null;\r\n        phaseLayer = null;\r\n        // 路口数据\r\n        cross = null;\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-07-21 19:37:23\r\n       * @introduction 绘制路口模型\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 参数说明\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      init(interData: any) {\r\n        if (modelStage) {\r\n          this.clearHandler();\r\n        }\r\n        state.interType = interData.is_have_son;\r\n        methods.getDrawOption();\r\n        console.log();\r\n        clientWidth = tfInterModel.value.clientWidth;\r\n        clientHeight = tfInterModel.value.clientHeight;\r\n        baseLayerWidth = Math.min(clientWidth, clientHeight);\r\n        // 1、初始化canvas场景：Stage\r\n        modelStage = new Konva.Stage({\r\n          // scale: { x: 1, y: -1 },\r\n          // container: this.$el,\r\n          container: scTfInterBox.value,\r\n          width: clientWidth,\r\n          height: clientHeight,\r\n        });\r\n        // 1.1 保障路口基础图层是正方形，居中\r\n        let width, height;\r\n        let x = 0;\r\n        let y = 0;\r\n        // eslint-disable-next-line prefer-const\r\n        width = height = baseLayerWidth;\r\n        if (clientWidth > clientHeight) {\r\n          x = (clientWidth - clientHeight) / 2;\r\n        } else {\r\n          y = -(clientWidth - clientHeight) / 2;\r\n        }\r\n        baseLayer = new Konva.Layer({\r\n          x: state.drawOption.drawPhase\r\n            ? x + width / 2 + width / 12\r\n            : x + width / 2,\r\n          y: y + height / 2,\r\n        });\r\n        baseLayer.height = height;\r\n        baseLayer.width = height;\r\n        modelStage.add(baseLayer);\r\n        methods.drawInter(interData);\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-07-26 13:21:03\r\n       * @introduction 简述\r\n       * @description 详细描述\r\n       * @param {参数类型} interData 路口模型数据\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      drawInter(interData: any) {\r\n        const me = this;\r\n        const drawInterData = this.resetInterData(interData);\r\n        cross = new CrossInfo(drawInterData);\r\n        // console.log(this.cross)\r\n        // 根据数据绘画\r\n        const roadPolygonShape = new Konva.Shape({\r\n          stroke: \"#23324b\",\r\n          strokeWidth: 5,\r\n          fill: state.drawOption.laneBackColor,\r\n          // a Konva.Canvas renderer is passed into the sceneFunc function\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            const roadPolygon = cross.entranceArray\r\n              .map((info: any) => {\r\n                return info.polygonData.RoadPolygon;\r\n              })\r\n              .flat();\r\n            roadPolygon.forEach((element: any, index: number) => {\r\n              if (index === 0) {\r\n                context.moveTo(element[0], -element[1]);\r\n              } else {\r\n                context.lineTo(element[0], -element[1]);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(roadPolygonShape);\r\n\r\n        // 过滤匝道\r\n        if (state.interType === 3) {\r\n          drawMethods.drawRoundabout();\r\n        }\r\n\r\n        cross.entranceArray.map((info: any, index: number) => {\r\n          // 1、白色划线部分：人行道、车道线、虚线\r\n          const whitePolygonShape = new Konva.Shape({\r\n            stroke: \"#ffffff\",\r\n            fill: \"#ffffff\",\r\n            strokeWidth: 1,\r\n            opacity: 1,\r\n            sceneFunc(context: any, shape: any) {\r\n              context.beginPath();\r\n              // 人行道\r\n              if (state.drawOption.showManRoadLine) {\r\n                info.lineData.manRoadLine.forEach((info: any) => {\r\n                  info.forEach((element: any, index: number) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 车道边线\r\n              if (state.drawOption.showRoadAsideLine) {\r\n                info.lineData.carRoadLine0.forEach((info: any, i: number) => {\r\n                  info.forEach((element: any, index: number) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 车道停车线\r\n              if (state.drawOption.showStopLine) {\r\n                info.lineData.carRoadLine1.forEach((info: any, i: number) => {\r\n                  info.forEach((element: any, index: any) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              // 虚线\r\n              if (\r\n                state.drawOption.showLaneDashedLine &&\r\n                state.interType !== 2\r\n              ) {\r\n                info.lineData.carRoadLine2.forEach((info: any) => {\r\n                  info.forEach((element: any, index: any) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                });\r\n              }\r\n              context.closePath();\r\n              context.fillStrokeShape(shape);\r\n            },\r\n          });\r\n          baseLayer.add(whitePolygonShape);\r\n\r\n          // 普通路口-父子路口\r\n          if (state.interType !== 2) {\r\n            // 显示道路虚线\r\n            if (state.drawOption.showLaneDashedLine) {\r\n              // 绘制公交专用车道/潮汐车道\r\n              const yellowPolygonShape = new Konva.Shape({\r\n                stroke: state.drawOption.yellowColor,\r\n                fill: state.drawOption.yellowColor,\r\n                strokeWidth: 1,\r\n                opacity: 1,\r\n                sceneFunc(context: any, shape: any) {\r\n                  context.beginPath();\r\n                  info.lineData.carRoadLine4.forEach((info: any) => {\r\n                    info.forEach((element: any, index: any) => {\r\n                      if (index === 0) {\r\n                        context.moveTo(element[0], -element[1]);\r\n                      } else {\r\n                        context.lineTo(element[0], -element[1]);\r\n                      }\r\n                    });\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                },\r\n              });\r\n              baseLayer.add(yellowPolygonShape);\r\n\r\n              // 进口绘制辅道分割线\r\n              const option = {\r\n                stroke: state.drawOption.greenColor,\r\n                strokeWidth: 2,\r\n              };\r\n              drawMethods.drawLine(info.lineData.fdsplitLine, option);\r\n\r\n              // 待驶区\r\n              info.correctPoint.pointWaitArea.forEach((it: any) => {\r\n                const lineData: any = [];\r\n                it.forEach((itt: any) => {\r\n                  lineData.push(itt.x);\r\n                  lineData.push(-itt.y);\r\n                });\r\n                let greenLine = new Konva.Line({\r\n                  points: lineData,\r\n                  stroke: \"#ffffff\",\r\n                  strokeWidth: 1,\r\n                  lineJoin: \"round\",\r\n                  dash: [3, 5],\r\n                  lineCap: \"round\",\r\n                  // tension: 0.5\r\n                });\r\n                baseLayer.add(greenLine);\r\n              });\r\n            }\r\n\r\n            // 绘制人行道\r\n            if (state.drawOption.showManRoad) {\r\n              const manRoadPolygonShape = new Konva.Shape({\r\n                fill: \"black\",\r\n                sceneFunc(context: any, shape: any) {\r\n                  context.beginPath();\r\n                  const data = [\r\n                    info.polygonData.walkwayPolygonR,\r\n                    cross.entranceArray[\r\n                      index === 0 ? cross.entranceArray.length - 1 : index - 1\r\n                    ].polygonData.walkwayPolygonL,\r\n                  ].flat();\r\n                  data.forEach((element, index) => {\r\n                    if (index === 0) {\r\n                      context.moveTo(element[0], -element[1]);\r\n                    } else {\r\n                      context.lineTo(element[0], -element[1]);\r\n                    }\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                },\r\n              });\r\n              baseLayer.add(manRoadPolygonShape);\r\n            }\r\n          } else {\r\n            // 匝道\r\n            if (state.drawOption.showLaneDashedLine) {\r\n              info.lineData.carRoadLine2.forEach((info: any) => {\r\n                var dash = new Konva.Line({\r\n                  points: [info[0][0], -info[0][1], info[1][0], -info[1][1]],\r\n                  stroke: \"#ffffff\",\r\n                  strokeWidth: 1,\r\n                  lineJoin: \"round\",\r\n                  dash: [8, 8],\r\n                });\r\n                baseLayer.add(dash);\r\n              });\r\n            }\r\n          }\r\n\r\n          // 车道分割线部分：单黄线/双黄线/绿化带\r\n          if (info.road_center_mode === \"greenArea\") {\r\n            drawMethods.drawPolygon(info.lineData.carRoadLine3[0], {\r\n              fill: state.drawOption.greenColor,\r\n              stroke: state.drawOption.greenColor,\r\n            });\r\n          } else {\r\n            drawMethods.drawLine(info.lineData.carRoadLine3, {\r\n              stroke: state.drawOption.yellowColor,\r\n            });\r\n          }\r\n\r\n          // 4、车道名称\r\n          if (state.drawOption.showRoadName) {\r\n            var roadText = new Konva.Text({\r\n              x: info.correctPoint.roadName.x,\r\n              y: -info.correctPoint.roadName.y,\r\n              text: info.name,\r\n              fontSize: 12,\r\n              fontFamily: \"Calibri\",\r\n              fill: state.drawOption.routeNameColor,\r\n              rotation: drawMethods.getTextRotationByDegree(info.degree),\r\n            });\r\n            drawMethods.offsetText(roadText, info.degree);\r\n            baseLayer.add(roadText);\r\n          }\r\n          // 绘制车道流向\r\n          if (state.drawOption.showLaneFlow) {\r\n            // 车道流向\r\n            const laneFlowPolygonShape = new Konva.Shape({\r\n              stroke: \"white\",\r\n              strokeWidth: 1.5,\r\n              sceneFunc(context: any, shape: any) {\r\n                const data = info.polygonData.laneFlowPolygon;\r\n                data.forEach((it: any, i: any) => {\r\n                  context.beginPath();\r\n                  it.forEach((itt: any, j: any) => {\r\n                    if (j === 0) {\r\n                      context.moveTo(itt[0], -itt[1]);\r\n                    } else {\r\n                      context.lineTo(itt[0], -itt[1]);\r\n                    }\r\n                  });\r\n                  context.closePath();\r\n                  context.fillStrokeShape(shape);\r\n                });\r\n              },\r\n            });\r\n            baseLayer.add(laneFlowPolygonShape);\r\n          }\r\n        });\r\n        cross.entranceArray.map((info: any, index: any) => {\r\n          // 绘制右转渠化\r\n          if (info.canalization && state.interType !== 2) {\r\n            drawMethods.drawCanalization(info.en_id);\r\n            // 添加非机动车标志\r\n            drawMethods.drawBikeLogo(info);\r\n          }\r\n        });\r\n        baseLayer.draw();\r\n      },\r\n\r\n      // 重置路口数据\r\n      resetInterData(interData: any) {\r\n        // 判断是否有右转渠化\r\n        const newData = JSON.parse(\r\n          JSON.stringify({\r\n            ...interData,\r\n            drawOption: state.drawOption,\r\n            baseWidth: baseLayerWidth,\r\n            clientWidth: clientWidth,\r\n            clientHeight: clientHeight,\r\n            expandManRadian: false,\r\n            centerLineMode: state.drawOption.centerLineMode,\r\n          })\r\n        );\r\n        if (state.interType === 3) {\r\n          newData.expandManRadian = true;\r\n        }\r\n        newData.entrances.forEach((it: any, i: any) => {\r\n          if (it.canalization && it.canalization !== 0) {\r\n            newData.expandManRadian = true;\r\n            // 有单独出口的要添加右出口的出口车道\r\n            if (it.canalization === 2 || it.canalization === 4) {\r\n              const entrance =\r\n                newData.entrances[i > 0 ? i - 1 : newData.entrances.length - 1];\r\n              entrance.exit_lanes.push({\r\n                id: entrance.exit_lanes.length + 1,\r\n                lane_flow: 2,\r\n              });\r\n            }\r\n          }\r\n        });\r\n        return newData;\r\n      },\r\n    };\r\n    //---------------------------------------------drawMixins---------------------------------------------\r\n    const drawMethods = {\r\n      initLayer() {\r\n        realLayer && realLayer.destroy();\r\n        let width, height;\r\n        let x = 0;\r\n        let y = 0;\r\n        width = height = baseLayerWidth;\r\n        if (clientWidth > clientHeight) {\r\n          x = (clientWidth - clientHeight) / 2;\r\n        } else {\r\n          y = -(clientWidth - clientHeight) / 2;\r\n        }\r\n        realLayer = new Konva.Layer({\r\n          x: state.drawOption.drawPhase\r\n            ? x + width / 2 + width / 12\r\n            : x + width / 2,\r\n          y: y + height / 2,\r\n        });\r\n        realLayer.height = height;\r\n        realLayer.width = height;\r\n        modelStage.add(realLayer);\r\n      },\r\n      // 绘制进口流向\r\n      drawRoadFlow(movements: any, cb: any) {\r\n        const sortMovement = this.getSortMovement(movements);\r\n        sortMovement.forEach((it: any) => {\r\n          // 主道流向\r\n          it.flowList.forEach((itt: any, j: any) => {\r\n            if (itt.if_control) {\r\n              const entrance = cross.entranceArray[it.en_id - 1];\r\n              const startPoint = this.getStartPoint(\r\n                itt.movements_type,\r\n                j,\r\n                it,\r\n                \"main\"\r\n              );\r\n              const flowData = getDrawFlowData(\r\n                startPoint,\r\n                CrossConst.roadWidth,\r\n                itt.movements_type,\r\n                entrance\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              this.drawRoadFlowWithData(rotateFlowData, itt, cb);\r\n            }\r\n          });\r\n          // 辅道流向\r\n          it.fdflowList.forEach((itt: any, j: any) => {\r\n            if (itt.if_control) {\r\n              const entrance = cross.entranceArray[it.en_id - 1];\r\n              const startPoint = this.getStartPoint(\r\n                itt.movements_type,\r\n                j,\r\n                it,\r\n                \"fd\"\r\n              );\r\n              const flowData = getDrawFlowData(\r\n                startPoint,\r\n                CrossConst.roadWidth,\r\n                itt.movements_type,\r\n                entrance,\r\n                \"fd\"\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              this.drawRoadFlowWithData(rotateFlowData, itt, cb);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 绘制进口流向\r\n      drawRoadFlowWithData(rotateFlowData: any, itt: any, cb: any) {\r\n        let roadFlowPolygonShape = new Konva.Shape({\r\n          stroke: itt.if_release\r\n            ? state.drawOption.HighLightFlowColor\r\n            : state.drawOption.defaultFlowColor,\r\n          fill: itt.if_release\r\n            ? state.drawOption.HighLightFlowColor\r\n            : state.drawOption.defaultFlowColor,\r\n          strokeWidth: 1,\r\n          info: itt,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((itt: any, j: any) => {\r\n              if (j === 0) {\r\n                context.moveTo(itt.x, -itt.y);\r\n              } else {\r\n                context.lineTo(itt.x, -itt.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        if (cb) {\r\n          roadFlowPolygonShape.on(\"click\", function (e: any) {\r\n            cb(e.target.attrs.info);\r\n          });\r\n        }\r\n        baseLayer.add(roadFlowPolygonShape);\r\n      },\r\n\r\n      // 获取旋转后点位\r\n      getRotateData(flowData: any, angle: any) {\r\n        let rotatePoins: any = [];\r\n        if (Array.isArray(flowData)) {\r\n          rotatePoins = [];\r\n          flowData.forEach((info, index) => {\r\n            if (Array.isArray(info)) {\r\n              rotatePoins[index] = [];\r\n              info.map((it) => {\r\n                rotatePoins[index].push(\r\n                  Util.pointRotateAngel(it, -angle, [0, 0])\r\n                );\r\n              });\r\n            } else {\r\n              rotatePoins.push(Util.pointRotateAngel(info, -angle, [0, 0]));\r\n            }\r\n          });\r\n        } else {\r\n          rotatePoins = Util.pointRotateAngel(flowData, -angle, [0, 0]);\r\n        }\r\n        return rotatePoins;\r\n      },\r\n\r\n      // 获取进口主道数量以及辅道数量\r\n      getEntranceLaneNum(enterInfo: any) {\r\n        let mainIn = enterInfo.in;\r\n        let fdIn = 0;\r\n        const index = enterInfo.motor_lanes.findIndex(\r\n          (it: any) => it.lane_type === 4\r\n        );\r\n        if (index > -1) {\r\n          fdIn = mainIn - index - 1;\r\n          mainIn = index + 1;\r\n        }\r\n        return { mainIn, fdIn };\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-24 17:15:03\r\n       * @introduction 获取绘制路口流向起始点位 左下角点位\r\n       * @description 详细描述\r\n       * @param {参数类型} 参数 en_id 进口id  movementsType 流向类型 j第几个流向  laneFlowTotal车道流向数量 ,type:主道'main'辅道'fd'\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getStartPoint(movementsType: any, j: any, it: any, type: any) {\r\n        const { en_id, laneFlowTotal, fdlaneFlowTotal } = it;\r\n        let enterInfo = cross.entranceArray[en_id - 1];\r\n        const { mainIn } = this.getEntranceLaneNum(enterInfo);\r\n        // 绘制的顶点\r\n        const { x: x1, y: y1 } = enterInfo.point.H0[enterInfo.in];\r\n        const { y: y2 } = enterInfo.point.H0[enterInfo.in - 1];\r\n        const roadWidth = CrossConst.roadWidth;\r\n        let laneOffset = y2 - y1;\r\n        let offsetX = 0;\r\n        let offsetY = -2 * roadWidth;\r\n        let startPoint = [0, 0];\r\n        if (\r\n          movementsType === 4 ||\r\n          movementsType === 10 ||\r\n          movementsType === 11\r\n        ) {\r\n          // 人行流向\r\n          offsetX = 0;\r\n          offsetY +=\r\n            CrossConst.manCarInterval +\r\n            CrossConst.manRoadLength / 2 +\r\n            2 * roadWidth;\r\n        } else if (\r\n          movementsType === 12 ||\r\n          movementsType === 13 ||\r\n          movementsType === 14\r\n        ) {\r\n          if (fdlaneFlowTotal) {\r\n            // 存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal + fdlaneFlowTotal) {\r\n              offsetX =\r\n                (laneFlowTotal + fdlaneFlowTotal) * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * (laneFlowTotal + fdlaneFlowTotal) +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            } else {\r\n              offsetX =\r\n                enterInfo.in * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * enterInfo.in +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            }\r\n          } else {\r\n            // 不存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal) {\r\n              offsetX =\r\n                laneFlowTotal * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * laneFlowTotal +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            } else {\r\n              offsetX =\r\n                enterInfo.in * roadWidth +\r\n                (roadWidth * (j - laneFlowTotal) * 3) / 4;\r\n              offsetY +=\r\n                laneOffset * enterInfo.in +\r\n                (laneOffset * (j - laneFlowTotal) * 3) / 4;\r\n            }\r\n          }\r\n        } else {\r\n          if (fdlaneFlowTotal) {\r\n            // 存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal + fdlaneFlowTotal) {\r\n              if (type === \"main\") {\r\n                offsetX += CrossConst.roadWidth * j;\r\n                offsetY += laneOffset * j;\r\n              } else if (type === \"fd\") {\r\n                offsetX += CrossConst.roadWidth * (j + laneFlowTotal);\r\n                offsetY += laneOffset * (j + laneFlowTotal);\r\n              }\r\n            } else {\r\n              // 只有一个流向的话，根据流向确定位置\r\n              if (type === \"main\") {\r\n                if (laneFlowTotal === 1) {\r\n                  // 流向直\r\n                  if (movementsType === 2 || movementsType === 7) {\r\n                    offsetX += (CrossConst.roadWidth * (mainIn - 1)) / 2;\r\n                    offsetY +=\r\n                      laneOffset * ((CrossConst.roadWidth * (mainIn - 1)) / 2);\r\n                  }\r\n                  // 流向带右边\r\n                  if (movementsType === 3 || movementsType === 6) {\r\n                    offsetX += CrossConst.roadWidth * (mainIn - 1);\r\n                    offsetY += laneOffset * (mainIn - 1);\r\n                  }\r\n                }\r\n                if (laneFlowTotal > 1) {\r\n                  offsetX +=\r\n                    ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                      (laneFlowTotal - 1)) *\r\n                    j;\r\n                  offsetY +=\r\n                    ((laneOffset * (enterInfo.in - 1)) / (laneFlowTotal - 1)) *\r\n                    j;\r\n                }\r\n              } else if (type === \"fd\") {\r\n                offsetX +=\r\n                  ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal + fdlaneFlowTotal - 1)) *\r\n                  (j + laneFlowTotal);\r\n                offsetY +=\r\n                  ((laneOffset * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal + fdlaneFlowTotal - 1)) *\r\n                  (j + laneFlowTotal);\r\n              }\r\n            }\r\n          } else {\r\n            // 不存在辅道流向\r\n            if (enterInfo.in <= laneFlowTotal) {\r\n              offsetX += CrossConst.roadWidth * j;\r\n              offsetY += laneOffset * j;\r\n            } else {\r\n              // 只有一个流向的话，根据流向确定位置\r\n              if (laneFlowTotal === 1) {\r\n                // 流向直\r\n                if (movementsType === 2 || movementsType === 7) {\r\n                  offsetX += (CrossConst.roadWidth * (enterInfo.in - 1)) / 2;\r\n                  offsetY +=\r\n                    laneOffset *\r\n                    ((CrossConst.roadWidth * (enterInfo.in - 1)) / 2);\r\n                }\r\n                // 流向带右边\r\n                if (movementsType === 3 || movementsType === 6) {\r\n                  offsetX += CrossConst.roadWidth * (enterInfo.in - 1);\r\n                  offsetY += laneOffset * (enterInfo.in - 1);\r\n                }\r\n              }\r\n              if (laneFlowTotal > 1) {\r\n                offsetX +=\r\n                  ((CrossConst.roadWidth * (enterInfo.in - 1)) /\r\n                    (laneFlowTotal - 1)) *\r\n                  j;\r\n                offsetY +=\r\n                  ((laneOffset * (enterInfo.in - 1)) / (laneFlowTotal - 1)) * j;\r\n              }\r\n            }\r\n          }\r\n        }\r\n        startPoint = [x1 + offsetX, y1 + offsetY];\r\n        return startPoint;\r\n      },\r\n\r\n      // 流向按照进口-左至右绘制顺序排序 enter_port_direction\r\n      getSortMovement(movements: any) {\r\n        let sortMovement: any = [];\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const enterMove = movements.filter((itt: any) => {\r\n            return itt.enter_port_direction === it.en_id && itt.if_control;\r\n          });\r\n          // 流向带左\r\n          const leftArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 1 ||\r\n                itt.movements_type === 5 ||\r\n                itt.movements_type === 8 ||\r\n                itt.movements_type === 9) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向左边\r\n          const leftFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 1 ||\r\n                itt.movements_type === 5 ||\r\n                itt.movements_type === 8 ||\r\n                itt.movements_type === 9) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向直\r\n          const centerArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 2 || itt.movements_type === 7) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向直\r\n          const centerFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 2 || itt.movements_type === 7) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向带右\r\n          const rightArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 3 || itt.movements_type === 6) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 辅道流向带右\r\n          const rightFdArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 3 || itt.movements_type === 6) &&\r\n              itt.fd_flow\r\n            );\r\n          });\r\n          // 流向人行\r\n          const manArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 4 ||\r\n                itt.movements_type === 10 ||\r\n                itt.movements_type === 11) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          // 非机动车左  直  左直\r\n          const nonArray = enterMove.filter((itt: any) => {\r\n            return (\r\n              (itt.movements_type === 12 ||\r\n                itt.movements_type === 13 ||\r\n                itt.movements_type === 14) &&\r\n              !itt.fd_flow\r\n            );\r\n          });\r\n          sortMovement.push({\r\n            en_id: it.en_id,\r\n            laneFlowTotal:\r\n              leftArray.length + centerArray.length + rightArray.length,\r\n            flowList: [\r\n              ...leftArray,\r\n              ...centerArray,\r\n              ...rightArray,\r\n              ...nonArray,\r\n              ...manArray,\r\n            ],\r\n            fdlaneFlowTotal:\r\n              leftFdArray.length + centerFdArray.length + rightFdArray.length,\r\n            fdflowList: [...leftFdArray, ...centerFdArray, ...rightFdArray],\r\n          });\r\n        });\r\n        return sortMovement;\r\n      },\r\n\r\n      // 绘制流向饱和度\r\n      drawFlowSaturation(flowSaturation: any) {\r\n        flowSaturation.forEach((it: any, i: any) => {\r\n          const enterInfo = cross.entranceArray[it.enter_port_direction - 1];\r\n          const flowData =\r\n            enterInfo.polygonData.roadFlowPolygon[it.movements_type - 1];\r\n          // 绘制饱和度流向\r\n          const roadFlowPolygonShape = new Konva.Shape({\r\n            stroke: state.drawOption.saturationFlowColor,\r\n            fill: state.drawOption.saturationFlowColor,\r\n            strokeWidth: 1,\r\n            info: it,\r\n            sceneFunc(context: any, shape: any) {\r\n              context.beginPath();\r\n              flowData.forEach((itt: any, j: any) => {\r\n                if (j === 0) {\r\n                  context.moveTo(itt[0], -itt[1]);\r\n                } else {\r\n                  context.lineTo(itt[0], -itt[1]);\r\n                }\r\n              });\r\n              context.closePath();\r\n              context.fillStrokeShape(shape);\r\n            },\r\n          });\r\n          baseLayer.add(roadFlowPolygonShape);\r\n\r\n          const { x, y } =\r\n            enterInfo.correctPoint.pointRoadFlowText[it.movements_type - 1];\r\n          // 绘制饱和度\r\n          let saturationText = new Konva.Text({\r\n            x: x,\r\n            y: -y,\r\n            text: it.data,\r\n            fontSize: 12,\r\n            fontFamily: \"Calibri\",\r\n            fill: state.drawOption.saturationFlowColor,\r\n            rotation: this.getTextRotationByDegree(enterInfo.degree),\r\n          });\r\n          this.offsetText(saturationText, enterInfo.degree);\r\n          baseLayer.add(saturationText);\r\n        });\r\n      },\r\n      // 绘制车道或者进出口背景\r\n      fillEntranceOrLaneBack(fillData: any) {\r\n        fillData.forEach((it: any) => {\r\n          const enterInfo = cross.entranceArray[it.en_id - 1];\r\n          const inNum = enterInfo.in;\r\n          const outNum = enterInfo.out;\r\n          let index1 = 0;\r\n          let index2 = 0;\r\n          let polygonData = [];\r\n          // 1进口填充\r\n          if (it.fillType === 1) {\r\n            // 进口方向\r\n            if (it.fillDirection === 1) {\r\n              index1 = 0;\r\n              index2 = inNum;\r\n            } else if (it.fillDirection === 2) {\r\n              // 出口方向\r\n              index1 =\r\n                inNum + this.getOutLineOffset(enterInfo.road_center_mode);\r\n              index2 =\r\n                inNum +\r\n                outNum +\r\n                this.getOutLineOffset(enterInfo.road_center_mode);\r\n            }\r\n          } else if (it.fillType === 2) {\r\n            // 2车道填充\r\n            if (it.fillDirection === 1) {\r\n              index1 = inNum - it.laneNumber + 1;\r\n              index2 = inNum - it.laneNumber;\r\n            } else if (it.fillDirection === 2) {\r\n              // 出口方向\r\n              index1 =\r\n                inNum +\r\n                it.laneNumber +\r\n                this.getOutLineOffset(enterInfo.road_center_mode);\r\n              index2 =\r\n                inNum +\r\n                it.laneNumber +\r\n                this.getOutLineOffset(enterInfo.road_center_mode) -\r\n                1;\r\n            }\r\n          }\r\n          const H0 = enterInfo.point.H0;\r\n          const H2 = enterInfo.point.H2;\r\n          let point1 = Util.pointRotateAngel(H0[index1], -enterInfo.angle);\r\n          let point2 = Util.pointRotateAngel(H0[index2], -enterInfo.angle);\r\n          let point3 = Util.pointRotateAngel(H2[index2], -enterInfo.angle);\r\n          let point4 = Util.pointRotateAngel(H2[index1], -enterInfo.angle);\r\n          if (it.length) {\r\n            point3 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[index2].x,\r\n                y: H0[index2].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n            point4 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[index1].x,\r\n                y: H0[index1].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n          }\r\n          polygonData = [\r\n            [point1.x, point1.y],\r\n            [point2.x, point2.y],\r\n            [point3.x, point3.y],\r\n            [point4.x, point4.y],\r\n          ];\r\n          this.drawPolygon(polygonData, it.style);\r\n        });\r\n      },\r\n\r\n      getOutLineOffset(roadCenterMode: any) {\r\n        let offset = 0;\r\n        if (roadCenterMode && roadCenterMode !== \"singleYellowLine\") {\r\n          offset = 1;\r\n        }\r\n        return offset;\r\n      },\r\n\r\n      // 绘制进口高亮\r\n      drawEntranceHighLight(lightData: any) {\r\n        lightData.forEach((it: any) => {\r\n          const enterInfo = cross.entranceArray[it.en_id - 1];\r\n          const inNum = enterInfo.in;\r\n          let lineDatas = [];\r\n          const H0 = enterInfo.point.H0;\r\n          const H2 = enterInfo.point.H2;\r\n          let point1 = Util.pointRotateAngel(H0[0], -enterInfo.angle);\r\n          let point2 = Util.pointRotateAngel(H0[inNum], -enterInfo.angle);\r\n          let point3 = Util.pointRotateAngel(H2[inNum], -enterInfo.angle);\r\n          let point4 = Util.pointRotateAngel(H2[0], -enterInfo.angle);\r\n          if (it.length) {\r\n            point3 = Util.pointRotateAngel(\r\n              {\r\n                x: H0[inNum].x,\r\n                y: H0[inNum].y - CrossConst.roadWidth * it.length,\r\n              },\r\n              -enterInfo.angle\r\n            );\r\n            point4 = Util.pointRotateAngel(\r\n              { x: H0[0].x, y: H0[0].y - CrossConst.roadWidth * it.length },\r\n              -enterInfo.angle\r\n            );\r\n          }\r\n          lineDatas = [\r\n            [\r\n              [point1.x, point1.y],\r\n              [point2.x, point2.y],\r\n            ],\r\n            [\r\n              [point2.x, point2.y],\r\n              [point3.x, point3.y],\r\n            ],\r\n            [\r\n              [point1.x, point1.y],\r\n              [point4.x, point4.y],\r\n            ],\r\n          ];\r\n          this.drawLine(lineDatas, it.style);\r\n        });\r\n      },\r\n\r\n      // 绘制相邻关系\r\n      drawAdjacentInfo(adjacentList: any, cb: any) {\r\n        const me = this;\r\n        const adjacentMap: any = {};\r\n        adjacentList.forEach((it: any) => {\r\n          adjacentMap[it.entrance_id] = it;\r\n        });\r\n        cross.entranceArray.forEach((info: any) => {\r\n          const adjacentInfo = adjacentMap[info.en_id];\r\n          if (adjacentInfo) {\r\n            const point = this.getNearPoint(info);\r\n            let img = new Konva.Image({\r\n              image: nearImg,\r\n              width: CrossConst.roadWidth * 1.5,\r\n              height: CrossConst.roadWidth * 1.5,\r\n              x: point.x,\r\n              y: -point.y,\r\n              info: adjacentInfo,\r\n              rotation: this.getImgRotationByDegree(info.degree, 2),\r\n            });\r\n            this.offsetImg(img, info.degree, 2);\r\n            if (cb) {\r\n              img.on(\"click\", function (e: any) {\r\n                const info = e.target.attrs.info;\r\n                cb(info);\r\n              });\r\n              img.on(\"mouseover\", function (e: any) {\r\n                const { x, y } = e.target.attrs;\r\n                me.drawHoverText(x, y, adjacentInfo.hoverText);\r\n              });\r\n              img.on(\"mouseout\", function (e: any) {\r\n                hoverText.remove();\r\n                hoverBack.remove();\r\n              });\r\n            }\r\n            baseLayer.add(img);\r\n          }\r\n        });\r\n      },\r\n      // 获取绘制相邻路口箭头的点位\r\n      getNearPoint(curEntrance: any) {\r\n        const { degree } = curEntrance;\r\n        const width =\r\n          (state.drawOption.drawPhase\r\n            ? (clientWidth * 5) / 12\r\n            : clientWidth / 2) -\r\n          2 * CrossConst.roadWidth;\r\n        const height = clientHeight / 2 - 2 * CrossConst.roadWidth;\r\n        let x = 0;\r\n        let y = 0;\r\n        if (degree >= 0 && degree < 45) {\r\n          x = width;\r\n          y = -width * Math.tan(Util.toRadian(degree));\r\n        } else if (degree >= 45 && degree < 90) {\r\n          const calDegree = 90 - degree;\r\n          x = height * Math.tan(Util.toRadian(calDegree));\r\n          y = -height;\r\n        } else if (degree >= 90 && degree < 135) {\r\n          const calDegree = degree - 90;\r\n          x = -height * Math.tan(Util.toRadian(calDegree));\r\n          y = -height;\r\n        } else if (degree >= 135 && degree < 180) {\r\n          const calDegree = 180 - degree;\r\n          x = -width;\r\n          y = -width * Math.tan(Util.toRadian(calDegree));\r\n        } else if (degree >= 180 && degree < 225) {\r\n          const calDegree = degree - 180;\r\n          x = -width;\r\n          y = width * Math.tan(Util.toRadian(calDegree));\r\n        } else if (degree >= 225 && degree < 270) {\r\n          const calDegree = 270 - degree;\r\n          x = -height * Math.tan(Util.toRadian(calDegree));\r\n          y = height;\r\n        } else if (degree >= 270 && degree < 315) {\r\n          const calDegree = degree - 270;\r\n          x = height * Math.tan(Util.toRadian(calDegree));\r\n          y = height;\r\n        } else if (degree >= 315 && degree <= 360) {\r\n          const calDegree = 360 - degree;\r\n          x = width;\r\n          y = width * Math.tan(Util.toRadian(calDegree));\r\n        }\r\n        return { x, y };\r\n      },\r\n\r\n      // 绘制非机动车标志\r\n      drawBikeLogo(info: any) {\r\n        const imageList = [\r\n          info.correctPoint.roadPole,\r\n          info.correctPoint.roadPoleL,\r\n        ];\r\n        imageList.forEach((it, i) => {\r\n          const { x, y } = it;\r\n          let img = new Konva.Image({\r\n            image: bikeImg,\r\n            width: 0.5 * CrossConst.roadWidth,\r\n            height: 0.5 * CrossConst.roadWidth,\r\n            x: x,\r\n            y: -y,\r\n            rotation: this.getImgRotationByDegree(info.degree, 2),\r\n          });\r\n          this.offsetImg(img, info.degree, 2);\r\n          baseLayer.add(img);\r\n        });\r\n      },\r\n\r\n      // 绘制车道图标\r\n      drawLaneImg(laneImgs: any, cb: any) {\r\n        this.loadImg(laneImgs, (res: any) => {\r\n          laneImgs.forEach((it: any, i: any) => {\r\n            const enterInfo = cross.entranceArray[it.en_id - 1];\r\n            if (enterInfo) {\r\n              const { x, y } = this.getStopLinePointByLaneNum(it, enterInfo);\r\n              let img = new Konva.Image({\r\n                image: res[i],\r\n                width: 1 * CrossConst.roadWidth,\r\n                height: 1 * CrossConst.roadWidth,\r\n                x: x,\r\n                y: -y,\r\n                info: it,\r\n                rotation: this.getImgRotationByDegree(\r\n                  enterInfo.degree,\r\n                  it.rotateType\r\n                ),\r\n              });\r\n              this.offsetImg(img, enterInfo.degree, it.rotateType);\r\n              if (cb) {\r\n                img.on(\"click\", function (e: any) {\r\n                  const info = e.target.attrs.info;\r\n                  cb(info);\r\n                });\r\n              }\r\n              baseLayer.add(img);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 提前加载图片\r\n      loadImg(imageList: any, cb: any) {\r\n        const loadImgs: any = [];\r\n        imageList.forEach((it: any) => {\r\n          const imgload = new window.Promise((resolve, reject) => {\r\n            const image = new Image();\r\n            image.onload = function () {\r\n              resolve(image);\r\n            };\r\n            image.src = it.imgUrl;\r\n          });\r\n          loadImgs.push(imgload);\r\n        });\r\n        window.Promise.all(loadImgs)\r\n          .then((res) => {\r\n            if (cb) {\r\n              cb(res);\r\n            }\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2021-08-04 11:05:28\r\n       * @introduction 获取根据车道id获取车道中心跟停车线偏移一定距离的旋转后的点位\r\n       * @description 详细描述\r\n       * @param {参数类型} laneNumber：车道号\r\n       * @param {参数类型} inNumber：进口车道数\r\n       * @param {参数类型} offetStopLine：偏移量 车道宽度的倍数\r\n       * @param {参数类型} H0：停车线跟车道的交点数组\r\n       * @param {参数类型} angle：车道角度\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getStopLinePointByLaneNum(it: any, enterInfo: any) {\r\n        let index = enterInfo.in - it.laneNumber + 1;\r\n        if (it.laneDirection === 2) {\r\n          index =\r\n            enterInfo.in +\r\n            it.laneNumber +\r\n            this.getOutLineOffset(enterInfo.road_center_mode);\r\n        }\r\n        const { x, y } = enterInfo.point.H0[index];\r\n        const orgPoint = {\r\n          x: x + CrossConst.roadWidth / 2,\r\n          y: y - (it.offetStopLine + 0.5) * CrossConst.roadWidth,\r\n        };\r\n        const armPoint = Util.pointRotateAngel(orgPoint, -enterInfo.angle);\r\n        return armPoint;\r\n      },\r\n\r\n      // 获取图片旋转角度\r\n      getImgRotationByDegree(degree: any, rotateType = 1) {\r\n        if (rotateType === 2) {\r\n          return degree - 90;\r\n        }\r\n        let rotation = degree;\r\n        if (degree > 0 && degree <= 90) {\r\n          rotation = degree - 90;\r\n        } else if (degree > 90 && degree <= 180) {\r\n          rotation = degree - 180;\r\n        } else if (degree > 180 && degree <= 270) {\r\n          rotation = degree - 270;\r\n        }\r\n        return rotation;\r\n      },\r\n      // 添加图片偏移量\r\n      offsetImg(element: any, degree: any, rotateType = 1) {\r\n        if (rotateType === 1) {\r\n          if (degree > 0 && degree <= 90) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 90 && degree <= 180) {\r\n            element.offsetX(element.width());\r\n            element.offsetY(element.height() / 2);\r\n          } else if (degree > 180 && degree <= 270) {\r\n            element.offsetX(element.width() / 2);\r\n            element.offsetY(element.height());\r\n          } else {\r\n            element.offsetY(element.height() / 2);\r\n          }\r\n        } else if (rotateType === 2) {\r\n          if (degree >= 0 && degree <= 90) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 90 && degree <= 180) {\r\n            element.offsetX(element.width() / 2);\r\n          } else if (degree > 180 && degree <= 270) {\r\n            element.offsetX(element.width() / 2);\r\n          } else {\r\n            element.offsetX(element.width() / 2);\r\n          }\r\n        }\r\n      },\r\n\r\n      // 获取文字旋转角度\r\n      getTextRotationByDegree(degree: any) {\r\n        let rotation = degree;\r\n        if (degree > 90 && degree < 270) {\r\n          rotation = degree + 180;\r\n        }\r\n        return rotation;\r\n      },\r\n      // 添加字偏移量\r\n      offsetText(element: any, degree: any) {\r\n        if (degree > 90 && degree < 270) {\r\n          element.offsetX(element.width());\r\n          element.offsetY(element.height() / 2);\r\n        } else {\r\n          element.offsetY(element.height() / 2);\r\n        }\r\n      },\r\n      // 绘制可变车道-获取数据\r\n      drawVariableLane(variableLaneData: any, click = false, cb: any) {\r\n        variableLaneData.forEach((it: any, i: any) => {\r\n          const enterInfo = cross.entranceArray[it.entrance_id - 1];\r\n          if (enterInfo) {\r\n            const flowData = getLaneFlowPoint(\r\n              it.lane_id,\r\n              it.status,\r\n              CrossConst,\r\n              enterInfo,\r\n              null\r\n            );\r\n            const rotateFlowData = this.getRotateData(\r\n              flowData,\r\n              enterInfo.angle\r\n            );\r\n            this.drawVariableFlow(rotateFlowData);\r\n            if (click) {\r\n              const clickPoint = getLaneFlowPoint(\r\n                it.lane_id,\r\n                \"variableClick\",\r\n                CrossConst,\r\n                enterInfo,\r\n                null\r\n              );\r\n              const rotateFlowData = this.getRotateData(\r\n                clickPoint,\r\n                enterInfo.angle\r\n              );\r\n              this.drawVariableClickPoint(rotateFlowData[0], it, cb);\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 绘制可变车道 - 绘制\r\n      drawVariableFlow(rotateFlowData: any) {\r\n        // 车道流向\r\n        const laneFlowPolygonShape = new Konva.Shape({\r\n          stroke: state.drawOption.yellowColor,\r\n          strokeWidth: 2,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((it: any, i: any) => {\r\n              if (i === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(laneFlowPolygonShape);\r\n      },\r\n      // 绘制可变车道可以点击的点\r\n      drawVariableClickPoint(point: any, info: any, cb: any) {\r\n        let clickPoint = new Konva.Circle({\r\n          x: point.x,\r\n          y: -point.y,\r\n          radius: CrossConst.roadWidth / 4,\r\n          info: info,\r\n          fill: state.drawOption.yellowColor,\r\n        });\r\n        baseLayer.add(clickPoint);\r\n        if (cb) {\r\n          clickPoint.on(\"click\", function (e: any) {\r\n            const info = e.target.attrs.info;\r\n            cb(info);\r\n          });\r\n        }\r\n      },\r\n      // 绘制右转渠化 en_id 进口车道id 根据渠化类型，展示不通渠化\r\n      drawCanalization(en_id: any) {\r\n        let index = en_id - 1;\r\n        const len = cross.entranceArray.length;\r\n        const curEntrance = cross.entranceArray[index];\r\n        const rightEntrance =\r\n          cross.entranceArray[index > 0 ? index - 1 : len - 1];\r\n        let topPoint = curEntrance.point.AR;\r\n        if (curEntrance.canalization === 1 || curEntrance.canalization === 2) {\r\n          let bottomPoint = {\r\n            x: curEntrance.point.BRO.x,\r\n            y:\r\n              curEntrance.point.BRO.y +\r\n              CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              CrossConst.roadWidth,\r\n          };\r\n          let rightPoint = {\r\n            x: rightEntrance.point.BLO.x,\r\n            y:\r\n              rightEntrance.point.BLO.y +\r\n              CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              CrossConst.roadWidth,\r\n          };\r\n          if (curEntrance.canalization === 2) {\r\n            topPoint.y = topPoint.y + CrossConst.roadWidth;\r\n            rightPoint.x = rightPoint.x + CrossConst.roadWidth;\r\n            rightPoint.y = rightPoint.y - CrossConst.roadWidth;\r\n          }\r\n          const { x: x, y: y } = Util.pointRotateAngel(\r\n            topPoint,\r\n            -curEntrance.angle\r\n          );\r\n          const { x: x1, y: y1 } = Util.pointRotateAngel(\r\n            bottomPoint,\r\n            -curEntrance.angle\r\n          );\r\n          const { x: x3, y: y3 } = Util.pointRotateAngel(\r\n            rightPoint,\r\n            -rightEntrance.angle\r\n          );\r\n          let canalizationPoints = [[x, y]];\r\n          const circlePoint = Util.getArcPoint([x1, y1], [x3, y3]);\r\n          canalizationPoints = canalizationPoints.concat(circlePoint);\r\n          canalizationPoints.push([x, y]);\r\n\r\n          const quhuaArea = [];\r\n          quhuaArea.push(canalizationPoints);\r\n          const lineNum = 4;\r\n          const stepX3 = Math.floor(x3 - x) / lineNum;\r\n          const stepY3 = Math.floor(y3 - y) / lineNum;\r\n          const stepX1 = Math.floor(x1 - x) / lineNum;\r\n          const stepY1 = Math.floor(y1 - y) / lineNum;\r\n          for (let i = 1; i <= lineNum / 2; i++) {\r\n            const rowLine = [\r\n              [x + i * stepX3, y + i * stepY3],\r\n              [x + i * stepX1, y + i * stepY1],\r\n            ];\r\n            quhuaArea.push(rowLine);\r\n          }\r\n          this.drawLine(quhuaArea);\r\n        } else if (\r\n          curEntrance.canalization === 3 ||\r\n          curEntrance.canalization === 4\r\n        ) {\r\n          let offsetDistanceY = [\r\n            CrossConst.manCarInterval +\r\n              CrossConst.manRoadLength +\r\n              1.5 * CrossConst.roadWidth,\r\n            CrossConst.manCarInterval,\r\n            -1 * CrossConst.roadWidth,\r\n            -3 * CrossConst.roadWidth,\r\n            -3 * CrossConst.roadWidth,\r\n          ];\r\n          let offsetDistanceX = [0, 0, 0, 0, CrossConst.walkwayWidth];\r\n          const { x: cx, y: cy } = curEntrance.point.BR;\r\n          const colPoints = offsetDistanceY.map((it, i) => {\r\n            const itX = offsetDistanceX[i];\r\n            const { x: x, y: y } = Util.pointRotateAngel(\r\n              { x: cx - 1 + itX, y: cy + it },\r\n              -curEntrance.angle\r\n            );\r\n            return [x, y];\r\n          });\r\n\r\n          let { x: rx, y: ry } = rightEntrance.point.BL;\r\n          // 固体岛有专门出口\r\n          if (curEntrance.canalization === 4) {\r\n            rx += CrossConst.roadWidth;\r\n            offsetDistanceY = [\r\n              CrossConst.manCarInterval +\r\n                CrossConst.manRoadLength +\r\n                0.5 * CrossConst.roadWidth,\r\n              CrossConst.manCarInterval,\r\n              -1 * CrossConst.roadWidth,\r\n              -1 * CrossConst.roadWidth,\r\n              -1 * CrossConst.roadWidth,\r\n            ];\r\n            offsetDistanceX = [\r\n              0,\r\n              0,\r\n              0,\r\n              CrossConst.roadWidth,\r\n              CrossConst.roadWidth + CrossConst.walkwayWidth,\r\n            ];\r\n          }\r\n          const rowPoints = offsetDistanceY.map((it, i) => {\r\n            const itX = offsetDistanceX[i];\r\n            const { x: x, y: y } = Util.pointRotateAngel(\r\n              { x: rx + 1 - itX, y: ry + it },\r\n              -rightEntrance.angle\r\n            );\r\n            return [x, y];\r\n          });\r\n          this.getGtdPolygonData(rowPoints, colPoints);\r\n          this.getGtdLineData(rowPoints, colPoints);\r\n        }\r\n      },\r\n      // 获取绘制固体岛的数据\r\n      getGtdLineData(rowPoints: any, colPoints: any) {\r\n        const quhuaArea = [];\r\n        let rangeArea: any = [];\r\n        const circlePoint0 = Util.getArcPoint(colPoints[0], rowPoints[0]);\r\n        const circlePoint1 = Util.getArcPoint(colPoints[2], rowPoints[2]);\r\n        rangeArea = rangeArea.concat(circlePoint1);\r\n        for (let i = circlePoint0.length - 1; i > 0; i--) {\r\n          rangeArea.push(circlePoint0[i]);\r\n        }\r\n        rangeArea = rangeArea.concat(circlePoint1);\r\n        quhuaArea.push(rangeArea);\r\n        const circlePoint2 = Util.getArcPoint(colPoints[3], rowPoints[3]);\r\n        quhuaArea.push(circlePoint2);\r\n        // 绘制渠化白色线条\r\n        this.drawLine(quhuaArea);\r\n      },\r\n      // 获取绘制固体岛区域的数据\r\n      getGtdPolygonData(rowPoints: any, colPoints: any) {\r\n        const circlePoint0 = Util.getArcPoint(colPoints[0], rowPoints[0]);\r\n        const circlePoint1 = Util.getArcPoint(colPoints[2], rowPoints[2]);\r\n        const circlePoint2 = Util.getArcPoint(colPoints[3], rowPoints[3]);\r\n        const circlePoint3 = Util.getArcPoint(colPoints[4], rowPoints[4]);\r\n        // 固体岛绿色区域\r\n        let gtdGreenPolygon = [];\r\n        for (let i = circlePoint0.length - 1; i > 0; i--) {\r\n          gtdGreenPolygon.push(circlePoint0[i]);\r\n        }\r\n        gtdGreenPolygon = gtdGreenPolygon.concat(circlePoint1);\r\n        this.drawPolygon(gtdGreenPolygon, { fill: \"green\" });\r\n\r\n        // 固体岛红色区域\r\n        // const gtdRedPolygon = []\r\n        // 固体岛道路区域\r\n        let gtdRoadPolygon = [];\r\n        for (let i = circlePoint1.length - 1; i > 0; i--) {\r\n          gtdRoadPolygon.push(circlePoint1[i]);\r\n        }\r\n        gtdRoadPolygon = gtdRoadPolygon.concat(circlePoint2);\r\n        this.drawPolygon(gtdRoadPolygon, { fill: \"#23324b\" });\r\n        // 固体岛非机动车区域\r\n        let gtdNonMotorPolygon = [];\r\n        for (let i = circlePoint3.length - 1; i > 0; i--) {\r\n          gtdNonMotorPolygon.push(circlePoint3[i]);\r\n        }\r\n        gtdNonMotorPolygon = gtdNonMotorPolygon.concat(circlePoint2);\r\n        this.drawPolygon(gtdNonMotorPolygon, { fill: \"#000000\" });\r\n      },\r\n      // 绘制线条 color = '#fff'\r\n      drawLine(lineDatas: any, option = {}) {\r\n        const param = {\r\n          stroke: \"green\",\r\n          strokeWidth: 1,\r\n          ...option,\r\n        };\r\n        lineDatas.forEach((it: any) => {\r\n          const points: any = [];\r\n          it.forEach((itt: any) => {\r\n            points.push(itt[0]);\r\n            points.push(-itt[1]);\r\n          });\r\n          const line = new Konva.Line({\r\n            points: points,\r\n            ...param,\r\n          });\r\n          baseLayer.add(line);\r\n        });\r\n      },\r\n      // 绘制区域\r\n      drawPolygon(polygonData: any, option: any) {\r\n        if (!polygonData) {\r\n          return;\r\n        }\r\n        const param = {\r\n          fill: \"#fff\",\r\n          strokeWidth: 1,\r\n          // stroke: '#fff',\r\n          ...option,\r\n        };\r\n        const polygonShape = new Konva.Shape({\r\n          // stroke: borderColor ? borderColor : '',\r\n          strokeWidth: 1,\r\n          // opacity: 1,\r\n          ...param,\r\n          // a Konva.Canvas renderer is passed into the sceneFunc function\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            polygonData.forEach((element: any, index: any) => {\r\n              if (index === 0) {\r\n                context.moveTo(element[0], -element[1]);\r\n              } else {\r\n                context.lineTo(element[0], -element[1]);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        baseLayer.add(polygonShape);\r\n      },\r\n\r\n      // 绘制hovertext\r\n      drawHoverText(x: any, y: any, text: any) {\r\n        hoverText = new Konva.Text({\r\n          x: x,\r\n          y: y,\r\n          text: text,\r\n          fontSize: 12,\r\n          fontFamily: \"Calibri\",\r\n          fill: \"#fff\",\r\n        });\r\n        let width = hoverText.width();\r\n        hoverBack = new Konva.Rect({\r\n          x: x,\r\n          y: y,\r\n          width: width + 10,\r\n          height: 20,\r\n          fill: \"#3b4859\",\r\n          shadowBlur: 10,\r\n          cornerRadius: 10,\r\n        });\r\n        if (x > 0) {\r\n          hoverText.offsetX(width);\r\n          hoverBack.offsetX(width + 5);\r\n        } else {\r\n          hoverBack.offsetX(5);\r\n        }\r\n        hoverBack.offsetY(4);\r\n        baseLayer.add(hoverBack);\r\n        baseLayer.add(hoverText);\r\n      },\r\n\r\n      // 绘制环岛\r\n      drawRoundabout() {\r\n        const { roadWidth, manRoadLength, manCarInterval } = CrossConst;\r\n        // 环岛半径\r\n        let circlrRadia = 5 * roadWidth;\r\n        // 进口环岛障碍物\r\n        cross.entranceArray.forEach((it: any) => {\r\n          let polygonData = [];\r\n          const { H0 } = it.point;\r\n          let { x, y } = H0[it.in];\r\n          y = y + manRoadLength + manCarInterval + 4;\r\n          const offsetY = Math.max((-y - 2 * roadWidth) / 3, 0);\r\n          circlrRadia = Math.min(circlrRadia, offsetY * 2);\r\n          const { x: x1, y: y1 } = Util.pointRotateAngel(\r\n            { x: x - roadWidth / 2, y: y + offsetY },\r\n            -it.angle\r\n          );\r\n          const { x: x2, y: y2 } = Util.pointRotateAngel({ x, y }, -it.angle);\r\n          const { x: x3, y: y3 } = Util.pointRotateAngel(\r\n            { x: x + roadWidth / 2, y: y + offsetY },\r\n            -it.angle\r\n          );\r\n          const circlePoint = Util.getArcPoint([x3, y3], [x1, y1]);\r\n          polygonData.push([x2, y2]);\r\n          polygonData = polygonData.concat(circlePoint);\r\n          this.drawPolygon(polygonData, { fill: \"#2e8348\", opacity: 0.8 });\r\n        });\r\n        // 环岛中心岛\r\n        let circle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: Math.max(circlrRadia, roadWidth),\r\n          fill: \"#2e8348\",\r\n        });\r\n        baseLayer.add(circle);\r\n\r\n        let dashCircle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: Math.max(circlrRadia, roadWidth) + roadWidth,\r\n          stroke: \"#fff\",\r\n          opacity: 0.5,\r\n          strokeWidth: 1,\r\n          dash: [6, 6],\r\n        });\r\n        baseLayer.add(dashCircle);\r\n      },\r\n    };\r\n    //---------------------------------------------drawRealMixins---------------------------------------------//\r\n    const drawRealMethods = {\r\n      // 绘制实时信息\r\n      drawRealInfo(realInfo: any, movements: any) {\r\n        drawMethods.initLayer();\r\n        // 设置实时信息基础信息\r\n        this.setRealBaseInfo(realInfo);\r\n        // 绘制左边相位\r\n        this.drawPhases(realInfo, movements);\r\n        // 绘制倒计时\r\n        this.drawPhaseRemainTime(realInfo.current_phase_remaining_time);\r\n        // 绘制行人灯\r\n        cross.is_have_son !== 2 && this.drawWalkMan(realInfo, movements);\r\n        // 绘制路口模型中间流向\r\n        this.drawInterPhase(realInfo, movements);\r\n        // 绘制红绿灯\r\n        this.drawGreenRedLight(realInfo, movements);\r\n      },\r\n      setRealBaseInfo(realInfo: any) {\r\n        const { ctrl_way } = realInfo;\r\n        ctrlWay = ctrl_way;\r\n      },\r\n      // 绘制左边相位\r\n      drawPhases(realInfo: any, movements: any) {\r\n        // 创建相位图层\r\n        phaseStage && phaseStage.destroy();\r\n        phaseLayer && phaseLayer.destroy();\r\n\r\n        phaseWidth = baseLayerWidth / 6;\r\n        phaseStage = new Konva.Stage({\r\n          container: scTfPhaseBox.value,\r\n          width: phaseWidth,\r\n          height: Math.max(clientHeight, phaseWidth * realInfo.phase_num),\r\n        });\r\n        phaseLayer = new Konva.Layer({\r\n          x: 0,\r\n          y: 0,\r\n        });\r\n        phaseLayer.width = phaseWidth;\r\n        phaseLayer.height = Math.max(\r\n          clientHeight,\r\n          phaseWidth * realInfo.phase_num\r\n        );\r\n        phaseStage.add(phaseLayer);\r\n        let phaseBack = new Konva.Rect({\r\n          x: 0,\r\n          y: 0,\r\n          width: phaseWidth,\r\n          height: Math.max(clientHeight, phaseWidth * realInfo.phase_num),\r\n          fill: state.drawOption.phaseBackColor,\r\n        });\r\n        phaseLayer.add(phaseBack);\r\n        // 如果关灯，就不要绘制具体相位了\r\n        if (realInfo.ctrl_way === 7) {\r\n          return;\r\n        }\r\n        realInfo.phase_movements_info.forEach((it: any, i: any) => {\r\n          if (it) {\r\n            const phaseNum = i + 1;\r\n            // 主道流向\r\n            const phaseList = this.getEntrancePhaseList(it, movements, \"main\");\r\n            // 辅道流向\r\n            const fdPhaseList = this.getEntrancePhaseList(it, movements, \"fd\");\r\n            this.darwPhaseWithPhaseList(realInfo, phaseList, phaseNum, \"main\");\r\n            this.darwPhaseWithPhaseList(realInfo, fdPhaseList, phaseNum, \"fd\");\r\n          }\r\n        });\r\n        this.slideToCurPhase(realInfo.current_phase_num);\r\n      },\r\n\r\n      // 绘制具体相位\r\n      darwPhaseWithPhaseList(\r\n        realInfo: any,\r\n        phaseList: any,\r\n        phaseNum: any,\r\n        road_type: any\r\n      ) {\r\n        const phasePolygonShap: any = [];\r\n        phaseList.forEach((it: any, i: any) => {\r\n          const enterFlowPoint: any = [];\r\n          if (cross.is_have_son !== 2 || i === 2) {\r\n            it.forEach((itt: any, j: any) => {\r\n              const phasePoints = getRealPhasePoint(\r\n                phaseNum,\r\n                itt,\r\n                phaseWidth,\r\n                road_type\r\n              );\r\n              enterFlowPoint.push(phasePoints);\r\n            });\r\n          }\r\n          const rotatePoints = this.rotatePoint(phaseNum, i, enterFlowPoint);\r\n          phasePolygonShap.push(rotatePoints);\r\n        });\r\n        this.drawPhaseBox(\r\n          phaseWidth,\r\n          phaseNum,\r\n          phasePolygonShap,\r\n          realInfo.current_phase_num\r\n        );\r\n      },\r\n\r\n      // 滚动到当前相位\r\n      slideToCurPhase(currentPhaseNum: any) {\r\n        scTfPhaseBox.value.scrollTop = phaseWidth * (currentPhaseNum - 1);\r\n      },\r\n      // 绘制每一个相位\r\n      drawPhaseBox(\r\n        phaseWidth: any,\r\n        phaseNum: any,\r\n        realPhasePolygonShap: any,\r\n        currentPhase: any\r\n      ) {\r\n        // 绘制相位框\r\n        let phase = new Konva.Rect({\r\n          x: 2,\r\n          y: (phaseNum - 1) * phaseWidth + 2,\r\n          width: phaseWidth - 4,\r\n          height: phaseWidth - 4,\r\n          // fill: '#000',\r\n          stroke: currentPhase === phaseNum ? \"#ff0000\" : \"#446a86\",\r\n          strokeWidth: 2,\r\n        });\r\n        phaseLayer.add(phase);\r\n\r\n        // 绘制相位编号 A B C\r\n        let phaseCode = new Konva.Text({\r\n          x: 2 + 2,\r\n          y: phaseNum * phaseWidth - 18,\r\n          text: phaseMap.get(phaseNum),\r\n          fontSize: 16,\r\n          fontFamily: \"Calibri\",\r\n          fill: state.drawOption.phaseNumColor,\r\n        });\r\n        phaseLayer.add(phaseCode);\r\n\r\n        // 绘制每个相位流向\r\n        realPhasePolygonShap.forEach((it: any) => {\r\n          it.forEach((itt: any) => {\r\n            let phaseFlowPolygonShape = new Konva.Shape({\r\n              stroke: state.drawOption.greenColor,\r\n              fill: state.drawOption.greenColor,\r\n              strokeWidth: 1,\r\n              sceneFunc(context: any, shape: any) {\r\n                context.beginPath();\r\n                itt.forEach((ittt: any, j: any) => {\r\n                  if (j === 0) {\r\n                    context.moveTo(ittt.x, -ittt.y);\r\n                  } else {\r\n                    context.lineTo(ittt.x, -ittt.y);\r\n                  }\r\n                });\r\n                context.closePath();\r\n                context.fillStrokeShape(shape);\r\n              },\r\n            });\r\n            phaseLayer.add(phaseFlowPolygonShape);\r\n          });\r\n        });\r\n      },\r\n      // 根据10进制的相位信息,以及流向配置/获取相位信息\r\n      getEntrancePhaseList(\r\n        DecMovements: any,\r\n        movementParas: any,\r\n        road_type: any\r\n      ) {\r\n        let moveList = DecMovements.toString(2).split(\"\");\r\n        moveList.reverse();\r\n        const movenents = this.getPhaseListWithBin(\r\n          moveList,\r\n          movementParas,\r\n          \"phase\",\r\n          road_type\r\n        );\r\n        return movenents;\r\n      },\r\n      /**\r\n       * @name wsx\r\n       * @Date 2022-03-03 16:25:52\r\n       * @introduction 根据二进制的相位信息,以及流向配置/获取相位信息\r\n       * @param {参数类型} 参数 参数说明\r\n       * @param {参数类型} type:'inter' 路口中央的流向1红/2黄/3绿  'phase'方案的流向1放行/2取消 flowType:main fd 主流向还是辅道流向\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getPhaseListWithBin(\r\n        moveList: any,\r\n        movementParas: any,\r\n        type = \"inter\",\r\n        road_type = \"main\"\r\n      ) {\r\n        const movenents: any = [];\r\n        let movementMap: any = {};\r\n        movementParas.forEach((it: any) => {\r\n          movementMap[it.num_movements] = it;\r\n        });\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const list: any = [];\r\n          moveList.forEach((itt: any, j: any) => {\r\n            const flow = movementMap[j + 1];\r\n            let bool = false;\r\n            if (road_type === \"fd\") {\r\n              if (flow && flow.fd_flow) {\r\n                bool = true;\r\n              }\r\n            } else {\r\n              if (flow && !flow.fd_flow) {\r\n                bool = true;\r\n              }\r\n            }\r\n            if (\r\n              flow &&\r\n              flow.enter_port_direction === it.en_id &&\r\n              flow.if_control &&\r\n              bool\r\n            ) {\r\n              if (type === \"phase\") {\r\n                if (Number(itt)) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              } else if (type === \"run\") {\r\n                // if (Number(itt)) {\r\n                list.push(flow.movements_type);\r\n                // }\r\n              } else {\r\n                if (Number(itt) !== 1 && Number(itt) !== 0) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              }\r\n            }\r\n          });\r\n          const phaseMovemenes = this.getPhaseMovementType(list);\r\n          movenents.push(phaseMovemenes);\r\n        });\r\n        return movenents;\r\n        // return [[1, 2], [1, 2, 3, 4], [1, 2], [1, 2, 3, 4]]\r\n      },\r\n\r\n      /**\r\n       * @name wsx\r\n       * @Date 2022-03-03 17:23:22\r\n       * @introduction 简述\r\n       * @description  获取绿灯相位信息列表\r\n       * @param {参数类型} type 0灰/1红/2黄/3绿  road_type 主道辅道\r\n       * @return {返回类型说明}\r\n       * @exception [违例类型] [违例类型说明]\r\n       */\r\n      getTypePhaseListWithBin(\r\n        moveList: any,\r\n        movementParas: any,\r\n        type = 1,\r\n        road_type: any\r\n      ) {\r\n        const movenents: any = [];\r\n        let movementMap: any = {};\r\n        movementParas.forEach((it: any) => {\r\n          movementMap[it.num_movements] = it;\r\n        });\r\n        const fdFlow = road_type !== \"main\";\r\n        cross.entranceArray.forEach((it: any, i: any) => {\r\n          const list: any = [];\r\n          moveList.forEach((itt: any, j: any) => {\r\n            const flow = movementMap[j + 1];\r\n            if (flow) {\r\n              flow.fd_flow = !!flow.fd_flow;\r\n              if (\r\n                flow.enter_port_direction === it.en_id &&\r\n                flow.if_control &&\r\n                flow.fd_flow === fdFlow\r\n              ) {\r\n                if (Number(itt) === type) {\r\n                  list.push(flow.movements_type);\r\n                }\r\n              }\r\n            }\r\n          });\r\n          const phaseMovemenes = this.getPhaseMovementType(list);\r\n          movenents.push(phaseMovemenes);\r\n        });\r\n        return movenents;\r\n        // return [[1, 2], [1, 2, 3, 4], [1, 2], [1, 2, 3, 4]]\r\n      },\r\n\r\n      // 路口流向转换成相位流向\r\n      getPhaseMovementType(phaseMovemenes: any) {\r\n        const movemenes: any = [];\r\n        // 相位上展示的基础流向\r\n        const baseFlowType = [1, 2, 3, 4, 8, 10, 11, 12, 13];\r\n        phaseMovemenes.forEach((it: any) => {\r\n          if (baseFlowType.includes(it)) {\r\n            movemenes.push(it);\r\n          } else if (it === 5) {\r\n            movemenes.push(1);\r\n            movemenes.push(2);\r\n          } else if (it === 6) {\r\n            movemenes.push(2);\r\n            movemenes.push(3);\r\n          } else if (it === 7) {\r\n            movemenes.push(1);\r\n            movemenes.push(2);\r\n            movemenes.push(3);\r\n          } else if (it === 9) {\r\n            movemenes.push(1);\r\n            movemenes.push(8);\r\n          } else if (it === 14) {\r\n            movemenes.push(12);\r\n            movemenes.push(13);\r\n          }\r\n        });\r\n        /* eslint-disable */\r\n        return Array.from(new Set(movemenes));\r\n      },\r\n      // 实时相位信息旋转 i 0 / 1 /2  进口序号\r\n      rotatePoint(phaseNum: any, i: any, phasePoints: any) {\r\n        const enterInfo = cross.entranceArray[i];\r\n        const phaseCenterPoint = [\r\n          phaseWidth / 2 + 2,\r\n          -phaseWidth * (phaseNum - 0.5) - 2,\r\n        ];\r\n        let rotatePoins: any = [];\r\n        if (Array.isArray(phasePoints)) {\r\n          rotatePoins = [];\r\n          phasePoints.forEach((info, index) => {\r\n            if (Array.isArray(info)) {\r\n              rotatePoins[index] = [];\r\n              info.map((it) => {\r\n                rotatePoins[index].push(\r\n                  Util.pointRotateByPoint(\r\n                    it,\r\n                    -enterInfo.angle,\r\n                    phaseCenterPoint\r\n                  )\r\n                );\r\n              });\r\n            } else {\r\n              rotatePoins.push(\r\n                Util.pointRotateByPoint(\r\n                  info,\r\n                  -enterInfo.angle,\r\n                  phaseCenterPoint\r\n                )\r\n              );\r\n            }\r\n          });\r\n        } else {\r\n          rotatePoins = Util.pointRotateByPoint(\r\n            phasePoints,\r\n            -enterInfo.angle,\r\n            phaseCenterPoint\r\n          );\r\n        }\r\n        return rotatePoins;\r\n      },\r\n      // 绘制路口模型上当前流向 current_phase_num\r\n      drawInterPhase(realInfo: any, movements: any) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          \"main\"\r\n        );\r\n        const fdPhaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          \"fd\"\r\n        );\r\n        this.drawInterPhaseWithPhaseList(\r\n          realInfo,\r\n          movements,\r\n          phaseList,\r\n          \"main\"\r\n        );\r\n        this.drawInterPhaseWithPhaseList(\r\n          realInfo,\r\n          movements,\r\n          fdPhaseList,\r\n          \"fd\"\r\n        );\r\n      },\r\n      drawInterPhaseWithPhaseList(\r\n        realInfo: any,\r\n        movements: any,\r\n        phaseList: any,\r\n        road_type: any\r\n      ) {\r\n        phaseList.forEach((it: any, i: any) => {\r\n          it.forEach((itt: any, j: any) => {\r\n            const entrance = cross.entranceArray[i];\r\n            // 匝道并且不是第三个进口就不绘制\r\n            if (cross.is_have_son !== 2 || entrance.en_id === 3) {\r\n              const flowData = getInterPhaseflowData(itt, entrance, road_type);\r\n              const rotateFlowData = drawMethods.getRotateData(\r\n                flowData,\r\n                entrance.angle\r\n              );\r\n              const color = this.getInterPhaseFlowColor(\r\n                realInfo.movements_state,\r\n                movements,\r\n                i,\r\n                itt,\r\n                road_type\r\n              );\r\n              this.drawInterPhaseFlow(rotateFlowData, color);\r\n            }\r\n          });\r\n        });\r\n      },\r\n\r\n      // 获取绘制路口中流向的颜色\r\n      getInterPhaseFlowColor(\r\n        movements_state: any,\r\n        movementParas: any,\r\n        index: any,\r\n        flowType: any,\r\n        road_type: any\r\n      ) {\r\n        let color = state.drawOption.yellowColor;\r\n        // 当前进口\r\n        const curEntrance = cross.entranceArray[index];\r\n        const fdFlow = road_type !== \"main\";\r\n        let greenFlowList: any = [];\r\n        movementParas.forEach((it: any) => {\r\n          if (it.if_control) {\r\n            if (\r\n              it.enter_port_direction === curEntrance.en_id &&\r\n              it.fd_flow === fdFlow\r\n            ) {\r\n              if (movements_state[it.num_movements - 1] === 3) {\r\n                greenFlowList.push(it.movements_type);\r\n              }\r\n            }\r\n          }\r\n        });\r\n        const greenPhaseMovemenes = this.getPhaseMovementType(greenFlowList);\r\n        if (greenPhaseMovemenes.includes(flowType)) {\r\n          color = state.drawOption.greenColor;\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 绘制路口上的相位的单个流向\r\n      drawInterPhaseFlow(rotateFlowData: any, color: any) {\r\n        let interPhaseFlowPolygonShape = new Konva.Shape({\r\n          stroke: color,\r\n          fill: color,\r\n          strokeWidth: 1,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            rotateFlowData.forEach((it: any, i: any) => {\r\n              if (i === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        // this.baseLayer.add(interPhaseFlowPolygonShape)\r\n        realLayer.add(interPhaseFlowPolygonShape);\r\n      },\r\n      // 绘制相位倒计时\r\n      drawPhaseRemainTime(time: any) {\r\n        let remainTime = new Konva.Text({\r\n          x: 0,\r\n          y: 0,\r\n          text: time,\r\n          fontSize: 14,\r\n          fontFamily: \"Calibri\",\r\n          fill: \"#ffffff\",\r\n          cornerRadius: 10,\r\n        });\r\n        remainTime.offsetX(remainTime.width() / 2);\r\n        remainTime.offsetY(remainTime.height() / 2);\r\n        let circle = new Konva.Circle({\r\n          x: 0,\r\n          y: 0,\r\n          radius: (CrossConst.roadWidth * 2) / 3,\r\n          fill: \"#3a3b45\",\r\n        });\r\n        realLayer.add(circle);\r\n        realLayer.add(remainTime);\r\n      },\r\n      // 绘制人行灯\r\n      drawWalkMan(realInfo: any, movements: any) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"run\",\r\n          \"main\"\r\n        );\r\n        const greyPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          0,\r\n          null\r\n        );\r\n        const redPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          1,\r\n          null\r\n        );\r\n        const yellowPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          2,\r\n          null\r\n        );\r\n        const greenPhaseList = drawRealMethods.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          3,\r\n          null\r\n        );\r\n        phaseList.forEach((it: any, i: any) => {\r\n          const greyPhases = greyPhaseList[i];\r\n          const redPhases = redPhaseList[i];\r\n          const yellowPhases = yellowPhaseList[i];\r\n          const greenPhases = greenPhaseList[i];\r\n          let runColor = this.getRuncolor(\r\n            \"run\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          let run1Color = this.getRuncolor(\r\n            \"run1\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          let run2Color = this.getRuncolor(\r\n            \"run2\",\r\n            greyPhases,\r\n            redPhases,\r\n            yellowPhases,\r\n            greenPhases\r\n          );\r\n          const entrance = cross.entranceArray[i];\r\n          const manPoint = this.getEntranceManPoint(entrance);\r\n          // 人行数据 绿灯\r\n          if (it.includes(4)) {\r\n            this.drawFootLight(manPoint[0], \"green\", entrance.angle, runColor);\r\n            this.drawFootLight(manPoint[3], \"green\", entrance.angle, runColor);\r\n          } else {\r\n            if (it.includes(10) || it.includes(11)) {\r\n              if (it.includes(10)) {\r\n                // 人行1\r\n                this.drawFootLight(\r\n                  manPoint[0],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run1Color\r\n                );\r\n                this.drawFootLight(\r\n                  manPoint[1],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run1Color\r\n                );\r\n              }\r\n              if (it.includes(11)) {\r\n                this.drawFootLight(\r\n                  manPoint[2],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run2Color\r\n                );\r\n                this.drawFootLight(\r\n                  manPoint[3],\r\n                  \"green\",\r\n                  entrance.angle,\r\n                  run2Color\r\n                );\r\n              }\r\n            }\r\n          }\r\n        });\r\n      },\r\n      // 获取每个车道的人行等绘制位置\r\n      getEntranceManPoint(entrance: any) {\r\n        // 车道相对高度差\r\n        const laneOffsetHeight =\r\n          (entrance.point.H0[0].y - entrance.point.H0[1].y) / 2;\r\n        const offsetY =\r\n          CrossConst.manCarInterval +\r\n          CrossConst.manRoadLength / 2 +\r\n          laneOffsetHeight;\r\n        const offsetX = CrossConst.roadWidth / 2;\r\n        const manPoint: any = [];\r\n        const outOfsset = drawMethods.getOutLineOffset(\r\n          entrance.road_center_mode\r\n        );\r\n        const pointIndex = [\r\n          1,\r\n          entrance.in,\r\n          entrance.in + 1 + outOfsset,\r\n          entrance.in + entrance.out + outOfsset,\r\n        ];\r\n        pointIndex.forEach((it) => {\r\n          manPoint.push([\r\n            entrance.point.H0[it].x + offsetX,\r\n            entrance.point.H0[it].y + offsetY,\r\n          ]);\r\n        });\r\n        return manPoint;\r\n      },\r\n      // 绘制绿灯通行/红灯禁止通行\r\n      drawFootLight(point: any, type: any, angle: any, color: any) {\r\n        const centerPoint = Util.pointRotateAngel(\r\n          { x: point[0], y: point[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        let circle = new Konva.Circle({\r\n          x: centerPoint.x,\r\n          y: -centerPoint.y,\r\n          radius: (CrossConst.roadWidth * 2) / 5,\r\n          fill: \"#000\",\r\n        });\r\n        realLayer.add(circle);\r\n        const manData = getFootLightData(centerPoint, type);\r\n\r\n        let interPhaseFlowPolygonShape = new Konva.Shape({\r\n          stroke: color,\r\n          fill: color,\r\n          strokeWidth: 0.2,\r\n          sceneFunc(context: any, shape: any) {\r\n            context.beginPath();\r\n            manData.forEach((it: any, k: any) => {\r\n              if (k === 0) {\r\n                context.moveTo(it.x, -it.y);\r\n              } else {\r\n                context.lineTo(it.x, -it.y);\r\n              }\r\n            });\r\n            context.closePath();\r\n            context.fillStrokeShape(shape);\r\n          },\r\n        });\r\n        realLayer.add(interPhaseFlowPolygonShape);\r\n      },\r\n      // 绘制红绿灯\r\n      drawGreenRedLight(realInfo: any, movements: any) {\r\n        // 主道红绿灯\r\n        this.drawGreenRedLightWithType(realInfo, movements, \"main\");\r\n        // 绘制辅道红绿灯\r\n        this.drawGreenRedLightWithType(realInfo, movements, \"fd\");\r\n      },\r\n      // 绘制红绿灯\r\n      drawGreenRedLightWithType(\r\n        realInfo: any,\r\n        movements: any,\r\n        road_type = \"main\"\r\n      ) {\r\n        const phaseList = this.getPhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          \"inter\",\r\n          road_type\r\n        );\r\n        const greyPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          0,\r\n          road_type\r\n        );\r\n        const redPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          1,\r\n          road_type\r\n        );\r\n        const yellowPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          2,\r\n          road_type\r\n        );\r\n        const greenPhaseList = this.getTypePhaseListWithBin(\r\n          realInfo.movements_state,\r\n          movements,\r\n          3,\r\n          road_type\r\n        );\r\n        phaseList.forEach((it: any, i: any) => {\r\n          if (it.length || road_type === \"main\") {\r\n            const greyPhases = greyPhaseList[i];\r\n            const redPhases = redPhaseList[i];\r\n            const yellowPhases = yellowPhaseList[i];\r\n            const greenPhases = greenPhaseList[i];\r\n            // 获取绘制红绿灯位置的点\r\n            const { points, angle } = this.getEntranceLightPoint(i, road_type);\r\n            const xAngle = this.getxAngle(points, angle);\r\n            // 绘制红绿灯背景\r\n            this.drawLightHandler(\r\n              points[1],\r\n              \"back\",\r\n              angle,\r\n              null,\r\n              xAngle,\r\n              road_type\r\n            );\r\n            let leftColor = this.getLightcolor(\r\n              \"left\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            let centerColor = this.getLightcolor(\r\n              \"center\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            let rightColor = this.getLightcolor(\r\n              \"right\",\r\n              greyPhases,\r\n              redPhases,\r\n              yellowPhases,\r\n              greenPhases\r\n            );\r\n            // 绘制红绿灯左转\r\n            this.drawLightHandler(points[0], \"left\", angle, leftColor, xAngle);\r\n            // 绘制红绿灯直行\r\n            this.drawLightHandler(points[1], \"center\", angle, centerColor);\r\n            // 绘制红绿灯右转\r\n            this.drawLightHandler(\r\n              points[2],\r\n              \"right\",\r\n              angle,\r\n              rightColor,\r\n              xAngle\r\n            );\r\n          }\r\n        });\r\n      },\r\n\r\n      // 获取红绿灯颜色\r\n      getLightcolor(\r\n        type: any,\r\n        greyPhases: any,\r\n        redPhases: any,\r\n        yellowPhases: any,\r\n        greenPhases: any\r\n      ) {\r\n        const phaseMap = [\r\n          { phase: greyPhases, color: state.drawOption.greyColor },\r\n          { phase: redPhases, color: state.drawOption.redColor },\r\n          { phase: yellowPhases, color: state.drawOption.yellowColor },\r\n          { phase: greenPhases, color: state.drawOption.greenColor },\r\n        ];\r\n        let color = state.drawOption.greyColor;\r\n        if (type === \"left\") {\r\n          // const flowMap = [1, 5, 7, 8, 9]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(1) ||\r\n              it.phase.includes(5) ||\r\n              it.phase.includes(7) ||\r\n              it.phase.includes(8) ||\r\n              it.phase.includes(9)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"center\") {\r\n          // const flowMap = [2, 5, 6, 7]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(2) ||\r\n              it.phase.includes(5) ||\r\n              it.phase.includes(6) ||\r\n              it.phase.includes(7)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"right\") {\r\n          // const flowMap = [3, 6, 7]\r\n          phaseMap.forEach((it) => {\r\n            if (\r\n              it.phase.includes(3) ||\r\n              it.phase.includes(6) ||\r\n              it.phase.includes(7)\r\n            ) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 获取人行速度\r\n      getRuncolor(\r\n        type: any,\r\n        greyPhases: any,\r\n        redPhases: any,\r\n        yellowPhases: any,\r\n        greenPhases: any\r\n      ) {\r\n        const phaseMap = [\r\n          { phase: greenPhases, color: state.drawOption.greenColor },\r\n          { phase: yellowPhases, color: state.drawOption.yellowColor },\r\n          { phase: redPhases, color: state.drawOption.redColor },\r\n          { phase: greyPhases, color: state.drawOption.greyColor },\r\n        ];\r\n        let color = state.drawOption.greenColor;\r\n        if (type === \"run\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(4)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"run1\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(10)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        } else if (type === \"run2\") {\r\n          phaseMap.forEach((it) => {\r\n            if (it.phase.includes(11)) {\r\n              color = it.color;\r\n            }\r\n          });\r\n        }\r\n        return color;\r\n      },\r\n\r\n      // 获取绘制红绿灯的绘制位置\r\n      getEntranceLightPoint(i: any, road_type = \"main\") {\r\n        const enNum = cross.entranceArray.length;\r\n        let points = [];\r\n        let angle = [];\r\n\r\n        if (enNum === 2) {\r\n          // 一字路口\r\n          // 获取到对面的进口\r\n          const drawEntrance = cross.entranceArray[(i + 1) % 2];\r\n          const pointInfo = this.calculateEntranceLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        } else if (enNum === 3) {\r\n          // T型路口\r\n          const entrance = cross.entranceArray[i];\r\n          const leftIndex = (i + 4) % 3;\r\n          const rightIndex = i - 1 >= 0 ? i - 1 : 2;\r\n          if ((entrance.degreeLeft + 360 - entrance.degree) % 360 >= 180) {\r\n            const drawEntrance = cross.entranceArray[leftIndex];\r\n            const pointInfo = this.calculateEntranceLightPoint(\r\n              drawEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle;\r\n          } else if (\r\n            (entrance.degree + 360 - entrance.degreeRight) % 360 >=\r\n            180\r\n          ) {\r\n            const drawEntrance = cross.entranceArray[rightIndex];\r\n            const pointInfo = this.calculateEntranceLightPoint(\r\n              drawEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle;\r\n          } else {\r\n            // 画路口对面\r\n            const drawEntrance = cross.entranceArray[i];\r\n            const prevEntrance = cross.entranceArray[rightIndex];\r\n            const nextEntrance = cross.entranceArray[leftIndex];\r\n            const pointInfo = this.calculateEntranceFaceLightPoint(\r\n              drawEntrance,\r\n              prevEntrance,\r\n              nextEntrance,\r\n              road_type\r\n            );\r\n            points = pointInfo.points;\r\n            angle = pointInfo.angle + 180;\r\n          }\r\n        } else if (enNum === 4) {\r\n          // 十字路口\r\n          // 获取到对面的进口\r\n          const drawEntrance = cross.entranceArray[(i + 2) % 4];\r\n          const pointInfo = this.calculateEntranceLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        } else {\r\n          // 五岔路口 以及以上\r\n          const drawEntrance = cross.entranceArray[i];\r\n          const pointInfo = this.calculateCircleLightPoint(\r\n            drawEntrance,\r\n            road_type\r\n          );\r\n          points = pointInfo.points;\r\n          angle = pointInfo.angle;\r\n        }\r\n        return { points, angle };\r\n      },\r\n      // 计算绘制在进口的点位\r\n      calculateEntranceLightPoint(drawEntrance: any, road_type: any) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const inNum = drawEntrance.in;\r\n        const outNum = drawEntrance.out;\r\n        const margin = 1;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const laneOffsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) / 2;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const centerPoint = [\r\n          drawEntrance.point.H0[inNum].x - (CrossConst.roadWidth * outNum) / 2,\r\n          drawEntrance.point.H0[inNum].y -\r\n            laneOffsetHeight * outNum -\r\n            radius -\r\n            margin -\r\n            fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle;\r\n        return { points, angle };\r\n      },\r\n      // 计算三岔路口对面红绿灯的点位\r\n      calculateEntranceFaceLightPoint(\r\n        drawEntrance: any,\r\n        prevEntrance: any,\r\n        nextEntrance: any,\r\n        road_type: any\r\n      ) {\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const inNum = drawEntrance.in;\r\n        const margin = 1;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const centerPoint = [\r\n          drawEntrance.point.H0[0].x - (CrossConst.roadWidth * inNum) / 2,\r\n          ((nextEntrance.out + prevEntrance.in) / 2) * CrossConst.roadWidth +\r\n            radius * 2 +\r\n            margin +\r\n            fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle + 180;\r\n        return { points, angle };\r\n      },\r\n      // 计算五岔路口 以及以上红绿灯的点位\r\n      calculateCircleLightPoint(drawEntrance: any, road_type: any) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        let points = [];\r\n        let angle = [];\r\n        const margin = 1;\r\n        const offsetHeight =\r\n          (drawEntrance.point.H0[0].y - drawEntrance.point.H0[1].y) /\r\n          CrossConst.roadWidth;\r\n        const fdOffset = road_type === \"fd\" ? CrossConst.roadWidth : 0;\r\n        const centerPoint = [\r\n          // drawEntrance.point.H0[0].x - CrossConst.roadWidth * inNum / 2,\r\n          0 - CrossConst.roadWidth,\r\n          CrossConst.roadWidth * 2.8 - fdOffset,\r\n        ];\r\n        const rightPoint = [\r\n          centerPoint[0] - radius * 2 - margin,\r\n          centerPoint[1] - offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        const leftPoint = [\r\n          centerPoint[0] + radius * 2 + margin,\r\n          centerPoint[1] + offsetHeight * (radius * 2 + margin),\r\n        ];\r\n        points = [leftPoint, centerPoint, rightPoint];\r\n        angle = drawEntrance.angle + 180;\r\n        return { points, angle };\r\n      },\r\n\r\n      // 获取绘制红绿灯\r\n      drawLightHandler(\r\n        point: any,\r\n        drawType: any,\r\n        angle: any,\r\n        color: any,\r\n        xAngle = 0,\r\n        road_type = \"main\"\r\n      ) {\r\n        // 红绿灯半径\r\n        const radius = CrossConst.roadWidth / 3;\r\n        const centerPoint = Util.pointRotateAngel(\r\n          { x: point[0], y: point[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        // 绘制红绿灯背景\r\n        if (drawType === \"back\") {\r\n          let lightBack = new Konva.Rect({\r\n            x: centerPoint.x,\r\n            y: -centerPoint.y,\r\n            width: radius * 6 + 8,\r\n            height: radius * 2 + 2,\r\n            fill: road_type === \"main\" ? \"#fff\" : \"#999\",\r\n            rotation: xAngle,\r\n            cornerRadius: radius,\r\n          });\r\n          lightBack.offsetX(lightBack.width() / 2);\r\n          lightBack.offsetY(lightBack.height() / 2);\r\n          realLayer.add(lightBack);\r\n        } else {\r\n          // 红绿灯黑底\r\n          let circle = new Konva.Circle({\r\n            x: centerPoint.x,\r\n            y: -centerPoint.y,\r\n            radius: CrossConst.roadWidth / 3,\r\n            fill: \"#000\",\r\n          });\r\n          realLayer.add(circle);\r\n          if (drawType === \"center\") {\r\n            let centerCircle = new Konva.Circle({\r\n              x: centerPoint.x,\r\n              y: -centerPoint.y,\r\n              radius: CrossConst.roadWidth / 3,\r\n              fill: color,\r\n            });\r\n            realLayer.add(centerCircle);\r\n          } else {\r\n            const lightData = getDirectionLightData(\r\n              { x: point[0], y: point[1] },\r\n              drawType\r\n            );\r\n            const rotateLightData = drawMethods.getRotateData(lightData, angle);\r\n            let lightPolygonShape = new Konva.Shape({\r\n              stroke: color,\r\n              fill: color,\r\n              strokeWidth: 0.2,\r\n              sceneFunc(context: any, shape: any) {\r\n                context.beginPath();\r\n                rotateLightData.forEach((it: any, k: any) => {\r\n                  if (k === 0) {\r\n                    context.moveTo(it.x, -it.y);\r\n                  } else {\r\n                    context.lineTo(it.x, -it.y);\r\n                  }\r\n                });\r\n                context.closePath();\r\n                context.fillStrokeShape(shape);\r\n              },\r\n            });\r\n            realLayer.add(lightPolygonShape);\r\n          }\r\n        }\r\n      },\r\n      // 获取红绿灯偏移角度\r\n      getxAngle(points: any, angle: any) {\r\n        const [point1, point2] = points;\r\n        const P1 = Util.pointRotateAngel(\r\n          { x: point1[0], y: point1[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        const P2 = Util.pointRotateAngel(\r\n          { x: point2[0], y: point2[1] },\r\n          -angle,\r\n          [0, 0]\r\n        );\r\n        // 因为点位y跟直角坐标系是相反的，所以P1.y - P2.y\r\n        const degree = Math.atan2(P1.y - P2.y, P2.x - P1.x);\r\n        return degree * (180 / Math.PI);\r\n      },\r\n      // 红绿灯点位旋转车道倾斜角度\r\n      getRotateLightData2(rotateLightData: any, xAngle: any, centerPoint: any) {\r\n        const rotateLightData2: any = [];\r\n        rotateLightData.forEach((it: any) => {\r\n          const point = Util.pointRotateByPoint(it, xAngle, [\r\n            centerPoint.x,\r\n            centerPoint.y,\r\n          ]);\r\n          rotateLightData2.push(point);\r\n        });\r\n        return rotateLightData2;\r\n      },\r\n    };\r\n    //---------------------------------------------imageLoadMixins---------------------------------------------//\r\n    const imageLoadMethods = {\r\n      initImg() {\r\n        // 相邻路口图片\r\n        nearImg = new Image();\r\n        nearImg.src = adjacentIcon;\r\n\r\n        // 非机动车道自行车图片\r\n        const bikeImg = new Image();\r\n        bikeImg.src = bikeIcon;\r\n      },\r\n    };\r\n    imageLoadMethods.initImg();\r\n    return {\r\n      ...toRefs(state),\r\n      tfInterModel,\r\n      scTfInterBox,\r\n      scTfPhaseBox,\r\n      ...methods,\r\n      ...drawMethods,\r\n      ...drawRealMethods,\r\n      ...imageLoadMethods,\r\n    };\r\n  },\r\n});\r\n","import { render } from \"./interModel.vue?vue&type=template&id=033b4203&scoped=true\"\nimport script from \"./interModel.vue?vue&type=script&lang=ts\"\nexport * from \"./interModel.vue?vue&type=script&lang=ts\"\n\nimport \"./interModel.vue?vue&type=style&index=0&id=033b4203&scoped=true&lang=scss\"\nscript.render = render\nscript.__scopeId = \"data-v-033b4203\"\n\nexport default script","import { App } from 'vue'\r\nimport interModel from './src/interModel.vue'\r\n \r\n// 定义 install 方法， App 作为参数\r\ninterModel.install = (app: App): void => {\r\n    app.component(interModel.name, interModel)\r\n}\r\n \r\nexport default interModel","import { App } from 'vue'\r\nimport tfInterModel from './interModel'\r\n \r\n// 所有组件列表\r\nconst components = [ tfInterModel ]\r\n \r\n// 定义 install 方法， App 作为参数\r\nconst install = (app: App): void => {\r\n    // 遍历注册所有组件\r\n    components.map((component) => app.component(component.name, component))\r\n}\r\n \r\nexport {\r\n  tfInterModel\r\n}\r\n \r\nexport default {\r\n    install\r\n}","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n","'use strict';\nvar $ = require('../internals/export');\nvar isObject = require('../internals/is-object');\nvar isArray = require('../internals/is-array');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toLength = require('../internals/to-length');\nvar toIndexedObject = require('../internals/to-indexed-object');\nvar createProperty = require('../internals/create-property');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('slice');\n\nvar SPECIES = wellKnownSymbol('species');\nvar nativeSlice = [].slice;\nvar max = Math.max;\n\n// `Array.prototype.slice` method\n// https://tc39.es/ecma262/#sec-array.prototype.slice\n// fallback for not array-like ES3 strings and DOM objects\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  slice: function slice(start, end) {\n    var O = toIndexedObject(this);\n    var length = toLength(O.length);\n    var k = toAbsoluteIndex(start, length);\n    var fin = toAbsoluteIndex(end === undefined ? length : end, length);\n    // inline `ArraySpeciesCreate` for usage native `Array#slice` where it's possible\n    var Constructor, result, n;\n    if (isArray(O)) {\n      Constructor = O.constructor;\n      // cross-realm fallback\n      if (typeof Constructor == 'function' && (Constructor === Array || isArray(Constructor.prototype))) {\n        Constructor = undefined;\n      } else if (isObject(Constructor)) {\n        Constructor = Constructor[SPECIES];\n        if (Constructor === null) Constructor = undefined;\n      }\n      if (Constructor === Array || Constructor === undefined) {\n        return nativeSlice.call(O, k, fin);\n      }\n    }\n    result = new (Constructor === undefined ? Array : Constructor)(max(fin - k, 0));\n    for (n = 0; k < fin; k++, n++) if (k in O) createProperty(result, n, O[k]);\n    result.length = n;\n    return result;\n  }\n});\n","// toObject with fallback for non-array-like ES3 strings\nvar IndexedObject = require('../internals/indexed-object');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\n\nmodule.exports = function (it) {\n  return IndexedObject(requireObjectCoercible(it));\n};\n","// iterable DOM collections\n// flag - `iterable` interface - 'entries', 'keys', 'values', 'forEach' methods\nmodule.exports = {\n  CSSRuleList: 0,\n  CSSStyleDeclaration: 0,\n  CSSValueList: 0,\n  ClientRectList: 0,\n  DOMRectList: 0,\n  DOMStringList: 0,\n  DOMTokenList: 1,\n  DataTransferItemList: 0,\n  FileList: 0,\n  HTMLAllCollection: 0,\n  HTMLCollection: 0,\n  HTMLFormElement: 0,\n  HTMLSelectElement: 0,\n  MediaList: 0,\n  MimeTypeArray: 0,\n  NamedNodeMap: 0,\n  NodeList: 1,\n  PaintRequestList: 0,\n  Plugin: 0,\n  PluginArray: 0,\n  SVGLengthList: 0,\n  SVGNumberList: 0,\n  SVGPathSegList: 0,\n  SVGPointList: 0,\n  SVGStringList: 0,\n  SVGTransformList: 0,\n  SourceBufferList: 0,\n  StyleSheetList: 0,\n  TextTrackCueList: 0,\n  TextTrackList: 0,\n  TouchList: 0\n};\n","var NATIVE_SYMBOL = require('../internals/native-symbol');\n\nmodule.exports = NATIVE_SYMBOL\n  /* global Symbol -- safe */\n  && !Symbol.sham\n  && typeof Symbol.iterator == 'symbol';\n","var global = require('../internals/global');\n\nmodule.exports = global.Promise;\n"],"sourceRoot":""}